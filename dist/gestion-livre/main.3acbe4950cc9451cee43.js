(self.webpackChunkgestion_livre=self.webpackChunkgestion_livre||[]).push([[179],{8255:Dt=>{function tt(J){return Promise.resolve().then(()=>{var A=new Error("Cannot find module '"+J+"'");throw A.code="MODULE_NOT_FOUND",A})}tt.keys=()=>[],tt.resolve=tt,tt.id=8255,Dt.exports=tt},7716:(Dt,tt,J)=>{"use strict";J.d(tt,{deG:()=>kl,tb:()=>BE,AFp:()=>zb,ip1:()=>kE,CZH:()=>r0,hGG:()=>UR,z2F:()=>fo,sBO:()=>Dv,Sil:()=>o0,_Vd:()=>Fp,EJc:()=>Kb,SBq:()=>Ia,qLn:()=>S,vpe:()=>Sa,gxx:()=>Gf,tBr:()=>jr,XFs:()=>At,OlP:()=>Jn,zs3:()=>yr,ZZ4:()=>bv,aQg:()=>Vp,soG:()=>r_,YKP:()=>s1,v3s:()=>cS,h0i:()=>ed,PXZ:()=>sf,R0b:()=>Ja,FiY:()=>Ca,Lbi:()=>qb,g9A:()=>$b,Qsj:()=>nO,FYo:()=>ef,JOm:()=>Ks,Tiy:()=>t1,q3G:()=>br,tp0:()=>Yc,EAV:()=>dS,Rgc:()=>o1,dDg:()=>R1,DyG:()=>Vo,q4F:()=>Av,GfV:()=>Gw,s_b:()=>bc,ifc:()=>ft,eFA:()=>oS,G48:()=>pn,Gpc:()=>se,X6Q:()=>N1,_c5:()=>VR,VLi:()=>wR,c2e:()=>Zb,zSh:()=>Cg,wAp:()=>Qt,vHH:()=>We,EiD:()=>Xh,mCW:()=>Nf,qzn:()=>Fd,JVY:()=>xm,pB0:()=>Q0,eBb:()=>X0,L6k:()=>Y0,LAX:()=>Oy,cg1:()=>gv,Tjo:()=>_S,kL8:()=>xw,yhl:()=>Qc,dqk:()=>Fn,sIi:()=>xp,CqO:()=>Vg,QGY:()=>Qx,F4k:()=>Jx,RDi:()=>hu,AaK:()=>xe,z3N:()=>Au,qOj:()=>$d,TTD:()=>Yu,_Bn:()=>Bw,xp6:()=>ex,uIk:()=>Og,ekj:()=>JA,Suo:()=>rd,Xpm:()=>Ui,lG2:()=>Pc,Yz7:()=>Wn,cJS:()=>gn,oAB:()=>au,Yjl:()=>Ko,Y36:()=>Bg,_UZ:()=>MA,qZA:()=>bp,TgZ:()=>av,EpF:()=>Xx,n5z:()=>lc,Ikx:()=>Jd,LFG:()=>Vt,$8M:()=>Hr,NdJ:()=>ew,CRH:()=>Sb,oxw:()=>kA,Q6J:()=>Kx,s9C:()=>th,iGM:()=>bb,CHM:()=>Tl,LSH:()=>Jh,kYT:()=>wl,Udp:()=>QA,YNc:()=>EA,_uU:()=>cv,Oqu:()=>lv,hij:()=>dv,Gf:()=>mh});var A=J(9765),Ie=J(5319),te=J(7574),Ue=J(6682),Te=J(8819);function pe(s){for(let a in s)if(s[a]===pe)return a;throw Error("Could not find renamed property on target object.")}function $e(s,a){for(const d in a)a.hasOwnProperty(d)&&!s.hasOwnProperty(d)&&(s[d]=a[d])}function xe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(xe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const d=a.indexOf("\n");return-1===d?a:a.substring(0,d)}function me(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const q=pe({__forward_ref__:pe});function se(s){return s.__forward_ref__=se,s.toString=function(){return xe(this())},s}function re(s){return Ee(s)?s():s}function Ee(s){return"function"==typeof s&&s.hasOwnProperty(q)&&s.__forward_ref__===se}class We extends Error{constructor(a,d){super(function(s,a){return`${s?`NG0${s}: `:""}${a}`}(a,d)),this.code=a}}function Ce(s){return"string"==typeof s?s:null==s?"":String(s)}function Ve(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ce(s)}function St(s,a){const d=a?` in ${a}`:"";throw new We("201",`No provider for ${Ve(s)} found${d}`)}function sn(s,a){null==s&&function(s,a,d,v){throw new Error(`ASSERTION ERROR: ${s}`+(null==v?"":` [Expected=> ${d} ${v} ${a} <=Actual]`))}(a,s,null,"!=")}function Wn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function gn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Fr(s){return ai(s,vr)||ai(s,xi)}function ai(s,a){return s.hasOwnProperty(a)?s[a]:null}function Cr(s){return s&&(s.hasOwnProperty(Bi)||s.hasOwnProperty(kr))?s[Bi]:null}const vr=pe({\u0275prov:pe}),Bi=pe({\u0275inj:pe}),xi=pe({ngInjectableDef:pe}),kr=pe({ngInjectorDef:pe});var At=(()=>((At=At||{})[At.Default=0]="Default",At[At.Host=1]="Host",At[At.Self=2]="Self",At[At.SkipSelf=4]="SkipSelf",At[At.Optional=8]="Optional",At))();let Tt;function Mn(s){const a=Tt;return Tt=s,a}function Mt(s,a,d){const v=Fr(s);return v&&"root"==v.providedIn?void 0===v.value?v.value=v.factory():v.value:d&At.Optional?null:void 0!==a?a:void St(xe(s),"Injector")}function on(s){return{toString:s}.toString()}var xn=(()=>((xn=xn||{})[xn.OnPush=0]="OnPush",xn[xn.Default=1]="Default",xn))(),ft=(()=>((ft=ft||{})[ft.Emulated=0]="Emulated",ft[ft.None=2]="None",ft[ft.ShadowDom=3]="ShadowDom",ft))();const Bt="undefined"!=typeof globalThis&&globalThis,Vi="undefined"!=typeof window&&window,Zo="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Fn=Bt||"undefined"!=typeof global&&global||Vi||Zo,ue={},he=[],ae=pe({\u0275cmp:pe}),Qe=pe({\u0275dir:pe}),Fe=pe({\u0275pipe:pe}),It=pe({\u0275mod:pe}),Zt=pe({\u0275loc:pe}),wn=pe({\u0275fac:pe}),zn=pe({__NG_ELEMENT_ID__:pe});let ur=0;function Ui(s){return on(()=>{const d={},v={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===xn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||he,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ft.Emulated,id:"c",styles:s.styles||he,_:null,setInput:null,schemas:s.schemas||null,tView:null},y=s.directives,E=s.features,T=s.pipes;return v.id+=ur++,v.inputs=Or(s.inputs,d),v.outputs=Or(s.outputs),E&&E.forEach(N=>N(v)),v.directiveDefs=y?()=>("function"==typeof y?y():y).map(Rn):null,v.pipeDefs=T?()=>("function"==typeof T?T():T).map(io):null,v})}function Rn(s){return ni(s)||function(s){return s[Qe]||null}(s)}function io(s){return function(s){return s[Fe]||null}(s)}const aa={};function au(s){return on(()=>{const a={type:s.type,bootstrap:s.bootstrap||he,declarations:s.declarations||he,imports:s.imports||he,exports:s.exports||he,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(aa[s.id]=s.type),a})}function wl(s,a){return on(()=>{const d=To(s,!0);d.declarations=a.declarations||he,d.imports=a.imports||he,d.exports=a.exports||he})}function Or(s,a){if(null==s)return ue;const d={};for(const v in s)if(s.hasOwnProperty(v)){let y=s[v],E=y;Array.isArray(y)&&(E=y[1],y=y[0]),d[y]=v,a&&(a[y]=E)}return d}const Pc=Ui;function Ko(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function ni(s){return s[ae]||null}function To(s,a){const d=s[It]||null;if(!d&&!0===a)throw new Error(`Type ${xe(s)} does not have '\u0275mod' property.`);return d}function Ro(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ni(s){return Array.isArray(s)&&!0===s[1]}function Os(s){return 0!=(8&s.flags)}function Mc(s){return 2==(2&s.flags)}function qu(s){return 1==(1&s.flags)}function Pi(s){return null!==s.template}function Kt(s){return 0!=(512&s[2])}function Mi(s,a){return s.hasOwnProperty(wn)?s[wn]:null}class Lr{constructor(a,d,v){this.previousValue=a,this.currentValue=d,this.firstChange=v}isFirstChange(){return this.firstChange}}function Yu(){return fa}function fa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Rs),wf}function wf(){const s=Gi(this),a=null==s?void 0:s.current;if(a){const d=s.previous;if(d===ue)s.previous=a;else for(let v in a)d[v]=a[v];s.current=null,this.ngOnChanges(a)}}function Rs(s,a,d,v){const y=Gi(s)||function(s,a){return s[No]=a}(s,{previous:ue,current:null}),E=y.current||(y.current={}),T=y.previous,N=this.declaredInputs[d],F=T[N];E[N]=new Lr(F&&F.currentValue,a,T===ue),s[v]=a}Yu.ngInherit=!0;const No="__ngSimpleChanges__";function Gi(s){return s[No]||null}let Qu;function hu(s){Qu=s}function Xn(s){return!!s.listen}const Mo={createRenderer:(s,a)=>void 0!==Qu?Qu:"undefined"!=typeof document?document:void 0};function jn(s){for(;Array.isArray(s);)s=s[0];return s}function pa(s,a){return jn(a[s])}function Fi(s,a){return jn(a[s.index])}function Fc(s,a){return s.data[a]}function Wi(s,a){const d=a[s];return Ro(d)?d:d[0]}function nc(s){return 4==(4&s[2])}function Sl(s){return 128==(128&s[2])}function Ns(s,a){return null==a?null:s[a]}function ma(s){s[18]=0}function va(s,a){s[5]+=a;let d=s,v=s[3];for(;null!==v&&(1===a&&1===d[5]||-1===a&&0===d[5]);)v[5]+=a,d=v,v=v[3]}const Ht={lFrame:Ad(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ps(){return Ht.bindingsEnabled}function ot(){return Ht.lFrame.lView}function ln(){return Ht.lFrame.tView}function Tl(s){return Ht.lFrame.contextLView=s,s[8]}function Kn(){let s=Dl();for(;null!==s&&64===s.type;)s=s.parent;return s}function Dl(){return Ht.lFrame.currentTNode}function so(s,a){const d=Ht.lFrame;d.currentTNode=s,d.isParent=a}function Lc(){return Ht.lFrame.isParent}function gu(){return Ht.isInCheckNoChangesMode}function mu(s){Ht.isInCheckNoChangesMode=s}function ko(){return Ht.lFrame.bindingIndex++}function La(s,a){const d=Ht.lFrame;d.bindingIndex=d.bindingRootIndex=s,Ol(a)}function Ol(s){Ht.lFrame.currentDirectiveIndex=s}function Cd(){return Ht.lFrame.currentQueryIndex}function yu(s){Ht.lFrame.currentQueryIndex=s}function xu(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function wu(s,a,d){if(d&At.SkipSelf){let y=a,E=s;for(;!(y=y.parent,null!==y||d&At.Host||(y=xu(E),null===y||(E=E[15],10&y.type))););if(null===y)return!1;a=y,s=E}const v=Ht.lFrame=Eu();return v.currentTNode=a,v.lView=s,!0}function oc(s){const a=Eu(),d=s[1];Ht.lFrame=a,a.currentTNode=d.firstChild,a.lView=s,a.tView=d,a.contextLView=s,a.bindingIndex=d.bindingStartIndex,a.inI18n=!1}function Eu(){const s=Ht.lFrame,a=null===s?null:s.child;return null===a?Ad(s):a}function Ad(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function Cf(){const s=Ht.lFrame;return Ht.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Id=Cf;function Cu(){const s=Cf();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Ci(){return Ht.lFrame.selectedIndex}function Ms(s){Ht.lFrame.selectedIndex=s}function Kr(){const s=Ht.lFrame;return Fc(s.tView,s.selectedIndex)}function Ba(s,a){for(let d=a.directiveStart,v=a.directiveEnd;d<v;d++){const E=s.data[d].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:N,ngAfterViewInit:F,ngAfterViewChecked:U,ngOnDestroy:W}=E;T&&(s.contentHooks||(s.contentHooks=[])).push(-d,T),N&&((s.contentHooks||(s.contentHooks=[])).push(d,N),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(d,N)),F&&(s.viewHooks||(s.viewHooks=[])).push(-d,F),U&&((s.viewHooks||(s.viewHooks=[])).push(d,U),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(d,U)),null!=W&&(s.destroyHooks||(s.destroyHooks=[])).push(d,W)}}function _a(s,a,d){bd(s,a,3,d)}function Uc(s,a,d,v){(3&s[2])===d&&bd(s,a,d,v)}function Yr(s,a){let d=s[2];(3&d)===a&&(d&=2047,d+=1,s[2]=d)}function bd(s,a,d,v){const E=null!=v?v:-1,T=a.length-1;let N=0;for(let F=void 0!==v?65535&s[18]:0;F<T;F++)if("number"==typeof a[F+1]){if(N=a[F],null!=v&&N>=v)break}else a[F]<0&&(s[18]+=65536),(N<E||-1==E)&&(Rl(s,d,a,F),s[18]=(4294901760&s[18])+F+2),F++}function Rl(s,a,d,v){const y=d[v]<0,E=d[v+1],N=s[y?-d[v]:d[v]];if(y){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{E.call(N)}finally{}}}else try{E.call(N)}finally{}}class Hc{constructor(a,d,v){this.factory=a,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=v}}function ts(s,a,d){const v=Xn(s);let y=0;for(;y<d.length;){const E=d[y];if("number"==typeof E){if(0!==E)break;y++;const T=d[y++],N=d[y++],F=d[y++];v?s.setAttribute(a,N,F,T):a.setAttributeNS(T,N,F)}else{const T=E,N=d[++y];zi(T)?v&&s.setProperty(a,T,N):v?s.setAttribute(a,T,N):a.setAttribute(T,N),y++}}return y}function Td(s){return 3===s||4===s||6===s}function zi(s){return 64===s.charCodeAt(0)}function Ls(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let d=-1;for(let v=0;v<a.length;v++){const y=a[v];"number"==typeof y?d=y:0===d||Bs(s,d,y,null,-1===d||2===d?a[++v]:null)}}return s}function Bs(s,a,d,v,y){let E=0,T=s.length;if(-1===a)T=-1;else for(;E<s.length;){const N=s[E++];if("number"==typeof N){if(N===a){T=-1;break}if(N>a){T=E-1;break}}}for(;E<s.length;){const N=s[E];if("number"==typeof N)break;if(N===d){if(null===v)return void(null!==y&&(s[E+1]=y));if(v===s[E+1])return void(s[E+2]=y)}E++,null!==v&&E++,null!==y&&E++}-1!==T&&(s.splice(T,0,a),E=T+1),s.splice(E++,0,d),null!==v&&s.splice(E++,0,v),null!==y&&s.splice(E++,0,y)}function rr(s){return-1!==s}function Vr(s){return 32767&s}function Ai(s,a){let d=function(s){return s>>16}(s),v=a;for(;d>0;)v=v[15],d--;return v}let uc=!0;function ya(s){const a=uc;return uc=s,a}let Ml=0;function Vs(s,a){const d=Ft(s,a);if(-1!==d)return d;const v=a[1];v.firstCreatePass&&(s.injectorIndex=a.length,Us(v.data,s),Us(a,null),Us(v.blueprint,null));const y=Qn(s,a),E=s.injectorIndex;if(rr(y)){const T=Vr(y),N=Ai(y,a),F=N[1].data;for(let U=0;U<8;U++)a[E+U]=N[T+U]|F[T+U]}return a[E+8]=y,E}function Us(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Ft(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Qn(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let d=0,v=null,y=a;for(;null!==y;){const E=y[1],T=E.type;if(v=2===T?E.declTNode:1===T?y[6]:null,null===v)return-1;if(d++,y=y[15],-1!==v.injectorIndex)return v.injectorIndex|d<<16}return-1}function Ur(s,a,d){!function(s,a,d){let v;"string"==typeof d?v=d.charCodeAt(0)||0:d.hasOwnProperty(zn)&&(v=d[zn]),null==v&&(v=d[zn]=Ml++);const y=255&v;a.data[s+(y>>5)]|=1<<y}(s,a,d)}function Ii(s,a,d){if(d&At.Optional)return s;St(a,"NodeInjector")}function bi(s,a,d,v){if(d&At.Optional&&void 0===v&&(v=null),0==(d&(At.Self|At.Host))){const y=s[9],E=Mn(void 0);try{return y?y.get(a,v,d&At.Optional):Mt(a,v,d&At.Optional)}finally{Mn(E)}}return Ii(v,a,d)}function Gc(s,a,d,v=At.Default,y){if(null!==s){const E=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(zn)?s[zn]:void 0;return"number"==typeof a?a>=0?255&a:jt:a}(d);if("function"==typeof E){if(!wu(a,s,v))return v&At.Host?Ii(y,d,v):bi(a,d,v,y);try{const T=E(v);if(null!=T||v&At.Optional)return T;St(d)}finally{Id()}}else if("number"==typeof E){let T=null,N=Ft(s,a),F=-1,U=v&At.Host?a[16][6]:null;for((-1===N||v&At.SkipSelf)&&(F=-1===N?Qn(s,a):a[N+8],-1!==F&&ns(v,!1)?(T=a[1],N=Vr(F),a=Ai(F,a)):N=-1);-1!==N;){const W=a[1];if(zc(E,N,W.data)){const Z=cc(N,a,d,T,v,U);if(Z!==Si)return Z}F=a[N+8],-1!==F&&ns(v,a[1].data[N+8]===U)&&zc(E,N,a)?(T=W,N=Vr(F),a=Ai(F,a)):N=-1}}}return bi(a,d,v,y)}const Si={};function jt(){return new Bo(Kn(),ot())}function cc(s,a,d,v,y,E){const T=a[1],N=T.data[s+8],W=Hs(N,T,d,null==v?Mc(N)&&uc:v!=T&&0!=(3&N.type),y&At.Host&&E===N);return null!==W?Xr(a,T,W,N):Si}function Hs(s,a,d,v,y){const E=s.providerIndexes,T=a.data,N=1048575&E,F=s.directiveStart,W=E>>20,X=y?N+W:s.directiveEnd;for(let le=v?N:N+W;le<X;le++){const ye=T[le];if(le<F&&d===ye||le>=F&&ye.type===d)return le}if(y){const le=T[F];if(le&&Pi(le)&&le.type===d)return F}return null}function Xr(s,a,d,v){let y=s[d];const E=a.data;if(function(s){return s instanceof Hc}(y)){const T=y;T.resolving&&function(s,a){throw new We("200",`Circular dependency in DI detected for ${s}`)}(Ve(E[d]));const N=ya(T.canSeeViewProviders);T.resolving=!0;const F=T.injectImpl?Mn(T.injectImpl):null;wu(s,v,At.Default);try{y=s[d]=T.factory(void 0,E,s,v),a.firstCreatePass&&d>=v.directiveStart&&function(s,a,d){const{ngOnChanges:v,ngOnInit:y,ngDoCheck:E}=a.type.prototype;if(v){const T=fa(a);(d.preOrderHooks||(d.preOrderHooks=[])).push(s,T),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(s,T)}y&&(d.preOrderHooks||(d.preOrderHooks=[])).push(0-s,y),E&&((d.preOrderHooks||(d.preOrderHooks=[])).push(s,E),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(s,E))}(d,E[d],a)}finally{null!==F&&Mn(F),ya(N),T.resolving=!1,Id()}}return y}function zc(s,a,d){return!!(d[a+(s>>5)]&1<<s)}function ns(s,a){return!(s&At.Self||s&At.Host&&a)}class Bo{constructor(a,d){this._tNode=a,this._lView=d}get(a,d){return Gc(this._tNode,this._lView,a,void 0,d)}}function lc(s){return on(()=>{const a=s.prototype.constructor,d=a[wn]||Ua(a),v=Object.prototype;let y=Object.getPrototypeOf(s.prototype).constructor;for(;y&&y!==v;){const E=y[wn]||Ua(y);if(E&&E!==d)return E;y=Object.getPrototypeOf(y)}return E=>new E})}function Ua(s){return Ee(s)?()=>{const a=Ua(re(s));return a&&a()}:Mi(s)}function Hr(s){return function(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const d=s.attrs;if(d){const v=d.length;let y=0;for(;y<v;){const E=d[y];if(Td(E))break;if(0===E)y+=2;else if("number"==typeof E)for(y++;y<v&&"string"==typeof d[y];)y++;else{if(E===a)return d[y+1];y+=2}}}return null}(Kn(),s)}const js="__parameters__";function ao(s,a,d){return on(()=>{const v=function(s){return function(...d){if(s){const v=s(...d);for(const y in v)this[y]=v[y]}}}(a);function y(...E){if(this instanceof y)return v.apply(this,E),this;const T=new y(...E);return N.annotation=T,N;function N(F,U,W){const Z=F.hasOwnProperty(js)?F[js]:Object.defineProperty(F,js,{value:[]})[js];for(;Z.length<=W;)Z.push(null);return(Z[W]=Z[W]||[]).push(T),F}}return d&&(y.prototype=Object.create(d.prototype)),y.prototype.ngMetadataName=s,y.annotationCls=y,y})}class Jn{constructor(a,d){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=Wn({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}toString(){return`InjectionToken ${this._desc}`}}const kl=new Jn("AnalyzeForEntryComponents"),Vo=Function;function mo(s,a){void 0===a&&(a=s);for(let d=0;d<s.length;d++){let v=s[d];Array.isArray(v)?(a===s&&(a=s.slice(0,d)),mo(v,a)):a!==s&&a.push(v)}return a}function Ct(s,a){s.forEach(d=>Array.isArray(d)?Ct(d,a):a(d))}function wa(s,a,d){a>=s.length?s.push(d):s.splice(a,0,d)}function co(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Cn(s,a,d){let v=u(s,a);return v>=0?s[1|v]=d:(v=~v,function(s,a,d,v){let y=s.length;if(y==a)s.push(d,v);else if(1===y)s.push(v,s[0]),s[0]=d;else{for(y--,s.push(s[y-1],s[y]);y>a;)s[y]=s[y-2],y--;s[a]=d,s[a+1]=v}}(s,v,a,d)),v}function f(s,a){const d=u(s,a);if(d>=0)return s[1|d]}function u(s,a){return function(s,a,d){let v=0,y=s.length>>d;for(;y!==v;){const E=v+(y-v>>1),T=s[E<<d];if(a===T)return E<<d;T>a?y=E:v=E+1}return~(y<<d)}(s,a,1)}const j={},K="__NG_DI_FLAG__",oe="ngTempTokenPath",ve=/\n/gm,Ne="__source",Je=pe({provide:String,useValue:pe});let st;function pt(s){const a=st;return st=s,a}function Rt(s,a=At.Default){if(void 0===st)throw new Error("inject() must be called from an injection context");return null===st?Mt(s,void 0,a):st.get(s,a&At.Optional?null:void 0,a)}function Vt(s,a=At.Default){return(Tt||Rt)(re(s),a)}function _n(s){const a=[];for(let d=0;d<s.length;d++){const v=re(s[d]);if(Array.isArray(v)){if(0===v.length)throw new Error("Arguments array must have arguments.");let y,E=At.Default;for(let T=0;T<v.length;T++){const N=v[T],F=hi(N);"number"==typeof F?-1===F?y=N.token:E|=F:y=N}a.push(Vt(y,E))}else a.push(Vt(v))}return a}function er(s,a){return s[K]=a,s.prototype[K]=a,s}function hi(s){return s[K]}function rs(s,a,d,v){const y=s[oe];throw a[Ne]&&y.unshift(a[Ne]),s.message=function(s,a,d,v=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let y=xe(a);if(Array.isArray(a))y=a.map(xe).join(" -> ");else if("object"==typeof a){let E=[];for(let T in a)if(a.hasOwnProperty(T)){let N=a[T];E.push(T+":"+("string"==typeof N?JSON.stringify(N):xe(N)))}y=`{${E.join(", ")}}`}return`${d}${v?"("+v+")":""}[${y}]: ${s.replace(ve,"\n  ")}`}("\n"+s.message,y,d,v),s.ngTokenPath=y,s[oe]=null,s}const jr=er(ao("Inject",s=>({token:s})),-1),Ca=er(ao("Optional"),8),Yc=er(ao("SkipSelf"),4);let zs;function vo(s){var a;return(null===(a=function(){if(void 0===zs&&(zs=null,Fn.trustedTypes))try{zs=Fn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return zs}())||void 0===a?void 0:a.createHTML(s))||s}class pc{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class vm extends pc{getTypeName(){return"HTML"}}class _m extends pc{getTypeName(){return"Style"}}class ym extends pc{getTypeName(){return"Script"}}class Dy extends pc{getTypeName(){return"URL"}}class $s extends pc{getTypeName(){return"ResourceURL"}}function Au(s){return s instanceof pc?s.changingThisBreaksApplicationSecurity:s}function Fd(s,a){const d=Qc(s);if(null!=d&&d!==a){if("ResourceURL"===d&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${d} (see https://g.co/ng/security#xss)`)}return d===a}function Qc(s){return s instanceof pc&&s.getTypeName()||null}function xm(s){return new vm(s)}function Y0(s){return new _m(s)}function X0(s){return new ym(s)}function Oy(s){return new Dy(s)}function Q0(s){return new $s(s)}class Rf{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const d=(new window.DOMParser).parseFromString(vo(a),"text/html").body;return null===d?this.inertDocumentHelper.getInertBodyElement(a):(d.removeChild(d.firstChild),d)}catch(d){return null}}}class Gh{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const d=this.inertDocument.createElement("html");this.inertDocument.appendChild(d);const v=this.inertDocument.createElement("body");d.appendChild(v)}}getInertBodyElement(a){const d=this.inertDocument.createElement("template");if("content"in d)return d.innerHTML=vo(a),d;const v=this.inertDocument.createElement("body");return v.innerHTML=vo(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(v),v}stripCustomNsAttrs(a){const d=a.attributes;for(let y=d.length-1;0<y;y--){const T=d.item(y).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&a.removeAttribute(T)}let v=a.firstChild;for(;v;)v.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(v),v=v.nextSibling}}const Em=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ry=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Nf(s){return(s=String(s)).match(Em)||s.match(Ry)?s:"unsafe:"+s}function Wa(s){const a={};for(const d of s.split(","))a[d]=!0;return a}function Hl(...s){const a={};for(const d of s)for(const v in d)d.hasOwnProperty(v)&&(a[v]=!0);return a}const zh=Wa("area,br,col,hr,img,wbr"),kd=Wa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),J0=Wa("rp,rt"),qh=Hl(zh,Hl(kd,Wa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Hl(J0,Wa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Hl(J0,kd)),tg=Wa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jc=Wa("srcset"),Zh=Hl(tg,Jc,Wa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),bm=Wa("script,style,template");class My{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let d=a.firstChild,v=!0;for(;d;)if(d.nodeType===Node.ELEMENT_NODE?v=this.startElement(d):d.nodeType===Node.TEXT_NODE?this.chars(d.nodeValue):this.sanitizedSomething=!0,v&&d.firstChild)d=d.firstChild;else for(;d;){d.nodeType===Node.ELEMENT_NODE&&this.endElement(d);let y=this.checkClobberedElement(d,d.nextSibling);if(y){d=y;break}d=this.checkClobberedElement(d,d.parentNode)}return this.buf.join("")}startElement(a){const d=a.nodeName.toLowerCase();if(!qh.hasOwnProperty(d))return this.sanitizedSomething=!0,!bm.hasOwnProperty(d);this.buf.push("<"),this.buf.push(d);const v=a.attributes;for(let y=0;y<v.length;y++){const E=v.item(y),T=E.name,N=T.toLowerCase();if(!Zh.hasOwnProperty(N)){this.sanitizedSomething=!0;continue}let F=E.value;tg[N]&&(F=Nf(F)),Jc[N]&&(s=F,F=(s=String(s)).split(",").map(a=>Nf(a.trim())).join(", ")),this.buf.push(" ",T,'="',Yh(F),'"')}var s;return this.buf.push(">"),!0}endElement(a){const d=a.nodeName.toLowerCase();qh.hasOwnProperty(d)&&!zh.hasOwnProperty(d)&&(this.buf.push("</"),this.buf.push(d),this.buf.push(">"))}chars(a){this.buf.push(Yh(a))}checkClobberedElement(a,d){if(d&&(a.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return d}}const Fy=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Kh=/([^\#-~ |!])/g;function Yh(s){return s.replace(/&/g,"&amp;").replace(Fy,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Kh,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let el;function Xh(s,a){let d=null;try{el=el||function(s){const a=new Gh(s);return function(){try{return!!(new window.DOMParser).parseFromString(vo(""),"text/html")}catch(s){return!1}}()?new Rf(a):a}(s);let v=a?String(a):"";d=el.getInertBodyElement(v);let y=5,E=v;do{if(0===y)throw new Error("Failed to sanitize html because the input is unstable");y--,v=E,E=d.innerHTML,d=el.getInertBodyElement(v)}while(v!==E);return vo((new My).sanitizeChildren(Qh(d)||d))}finally{if(d){const v=Qh(d)||d;for(;v.firstChild;)v.removeChild(v.firstChild)}}}function Qh(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var br=(()=>((br=br||{})[br.NONE=0]="NONE",br[br.HTML=1]="HTML",br[br.STYLE=2]="STYLE",br[br.SCRIPT=3]="SCRIPT",br[br.URL=4]="URL",br[br.RESOURCE_URL=5]="RESOURCE_URL",br))();function Jh(s){const a=function(){const s=ot();return s&&s[12]}();return a?a.sanitize(br.URL,s)||"":Fd(s,"URL")?Au(s):Nf(Ce(s))}const ig="__ngContext__";function Uo(s,a){s[ig]=a}function Vd(s){const a=function(s){return s[ig]||null}(s);return a?Array.isArray(a)?a:a.lView:null}function rp(s){return s.ngOriginalError}function I(s,...a){s.error(...a)}class S{constructor(){this._console=console}handleError(a){const d=this._findOriginalError(a),v=this._findContext(a),y=(s=a)&&s.ngErrorLogger||I;var s;y(this._console,"ERROR",a),d&&y(this._console,"ORIGINAL ERROR",d),v&&y(this._console,"ERROR CONTEXT",v)}_findContext(a){return a?a.ngDebugContext||this._findContext(rp(a)):null}_findOriginalError(a){let d=a&&rp(a);for(;d&&rp(d);)d=rp(d);return d||null}}const ug=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Fn))();function Aa(s){return s instanceof Function?s():s}var Ks=(()=>((Ks=Ks||{})[Ks.Important=1]="Important",Ks[Ks.DashCase=2]="DashCase",Ks))();function Wy(s,a){return undefined(s,a)}function fg(s){const a=s[3];return Ni(a)?a[3]:a}function $y(s){return Hd(s[13])}function op(s){return Hd(s[4])}function Hd(s){for(;null!==s&&!Ni(s);)s=s[4];return s}function sp(s,a,d,v,y){if(null!=v){let E,T=!1;Ni(v)?E=v:Ro(v)&&(T=!0,v=v[0]);const N=jn(v);0===s&&null!==d?null==y?pC(a,d,N):Ff(a,d,N,y||null,!0):1===s&&null!==d?Ff(a,d,N,y||null,!0):2===s?function(s,a,d){const v=mg(s,a);v&&function(s,a,d,v){Xn(s)?s.removeChild(a,d,v):a.removeChild(d)}(s,v,a,d)}(a,N,T):3===s&&a.destroyNode(N),null!=E&&function(s,a,d,v,y){const E=d[7];E!==jn(d)&&sp(a,s,v,E,y);for(let N=10;N<d.length;N++){const F=d[N];vg(F[1],F,s,a,v,E)}}(a,s,E,d,y)}}function hg(s,a,d){return Xn(s)?s.createElement(a,d):null===d?s.createElement(a):s.createElementNS(d,a)}function lC(s,a){const d=s[9],v=d.indexOf(a),y=a[3];1024&a[2]&&(a[2]&=-1025,va(y,-1)),d.splice(v,1)}function qy(s,a){if(s.length<=10)return;const d=10+a,v=s[d];if(v){const y=v[17];null!==y&&y!==s&&lC(y,v),a>0&&(s[d-1][4]=v[4]);const E=co(s,10+a);!function(s,a){vg(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(v[1],v);const T=E[19];null!==T&&T.detachView(E[1]),v[3]=null,v[4]=null,v[2]&=-129}return v}function nl(s,a){if(!(256&a[2])){const d=a[11];Xn(d)&&d.destroyNode&&vg(s,a,d,3,null,null),function(s){let a=s[13];if(!a)return pg(s[1],s);for(;a;){let d=null;if(Ro(a))d=a[13];else{const v=a[10];v&&(d=v)}if(!d){for(;a&&!a[4]&&a!==s;)Ro(a)&&pg(a[1],a),a=a[3];null===a&&(a=s),Ro(a)&&pg(a[1],a),d=a&&a[4]}a=d}}(a)}}function pg(s,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(s,a){let d;if(null!=s&&null!=(d=s.destroyHooks))for(let v=0;v<d.length;v+=2){const y=a[d[v]];if(!(y instanceof Hc)){const E=d[v+1];if(Array.isArray(E))for(let T=0;T<E.length;T+=2){const N=y[E[T]],F=E[T+1];try{F.call(N)}finally{}}else try{E.call(y)}finally{}}}}(s,a),function(s,a){const d=s.cleanup,v=a[7];let y=-1;if(null!==d)for(let E=0;E<d.length-1;E+=2)if("string"==typeof d[E]){const T=d[E+1],N="function"==typeof T?T(a):jn(a[T]),F=v[y=d[E+2]],U=d[E+3];"boolean"==typeof U?N.removeEventListener(d[E],F,U):U>=0?v[y=U]():v[y=-U].unsubscribe(),E+=2}else{const T=v[y=d[E+1]];d[E].call(T)}if(null!==v){for(let E=y+1;E<v.length;E++)v[E]();a[7]=null}}(s,a),1===a[1].type&&Xn(a[11])&&a[11].destroy();const d=a[17];if(null!==d&&Ni(a[3])){d!==a[3]&&lC(d,a);const v=a[19];null!==v&&v.detachView(s)}}}function fC(s,a,d){return function(s,a,d){let v=a;for(;null!==v&&40&v.type;)v=(a=v).parent;if(null===v)return d[0];if(2&v.flags){const y=s.data[v.directiveStart].encapsulation;if(y===ft.None||y===ft.Emulated)return null}return Fi(v,d)}(s,a.parent,d)}function Ff(s,a,d,v,y){Xn(s)?s.insertBefore(a,d,v,y):a.insertBefore(d,v,y)}function pC(s,a,d){Xn(s)?s.appendChild(a,d):a.appendChild(d)}function gC(s,a,d,v,y){null!==v?Ff(s,a,d,v,y):pC(s,a,d)}function mg(s,a){return Xn(s)?s.parentNode(a):a.parentNode}let yC=function(s,a,d){return 40&s.type?Fi(s,d):null};function An(s,a,d,v){const y=fC(s,v,a),E=a[11],N=function(s,a,d){return yC(s,a,d)}(v.parent||a[6],v,a);if(null!=y)if(Array.isArray(d))for(let F=0;F<d.length;F++)gC(E,y,d[F],N,!1);else gC(E,y,d,N,!1)}function Pm(s,a){if(null!==a){const d=a.type;if(3&d)return Fi(a,s);if(4&d)return Mm(-1,s[a.index]);if(8&d){const v=a.child;if(null!==v)return Pm(s,v);{const y=s[a.index];return Ni(y)?Mm(-1,y):jn(y)}}if(32&d)return Wy(a,s)()||jn(s[a.index]);{const v=kf(s,a);return null!==v?Array.isArray(v)?v[0]:Pm(fg(s[16]),v):Pm(s,a.next)}}return null}function kf(s,a){return null!==a?s[16][6].projection[a.projection]:null}function Mm(s,a){const d=10+s+1;if(d<a.length){const v=a[d],y=v[1].firstChild;if(null!==y)return Pm(v,y)}return a[7]}function Yy(s,a,d,v,y,E,T){for(;null!=d;){const N=v[d.index],F=d.type;if(T&&0===a&&(N&&Uo(jn(N),v),d.flags|=4),64!=(64&d.flags))if(8&F)Yy(s,a,d.child,v,y,E,!1),sp(a,s,y,N,E);else if(32&F){const U=Wy(d,v);let W;for(;W=U();)sp(a,s,y,W,E);sp(a,s,y,N,E)}else 16&F?mc(s,a,v,d,y,E):sp(a,s,y,N,E);d=T?d.projectionNext:d.next}}function vg(s,a,d,v,y,E){Yy(d,v,s.firstChild,a,y,E,!1)}function mc(s,a,d,v,y,E){const T=d[16],F=T[6].projection[v.projection];if(Array.isArray(F))for(let U=0;U<F.length;U++)sp(a,s,y,F[U],E);else Yy(s,a,F,T[3],y,E,!0)}function Xy(s,a,d){Xn(s)?s.setAttribute(a,"style",d):a.style.cssText=d}function EC(s,a,d){Xn(s)?""===d?s.removeAttribute(a,"class"):s.setAttribute(a,"class",d):a.className=d}function yo(s,a,d){let v=s.length;for(;;){const y=s.indexOf(a,d);if(-1===y)return y;if(0===y||s.charCodeAt(y-1)<=32){const E=a.length;if(y+E===v||s.charCodeAt(y+E)<=32)return y}d=y+1}}const CC="ng-template";function tD(s,a,d){let v=0;for(;v<s.length;){let y=s[v++];if(d&&"class"===y){if(y=s[v],-1!==yo(y.toLowerCase(),a,0))return!0}else if(1===y){for(;v<s.length&&"string"==typeof(y=s[v++]);)if(y.toLowerCase()===a)return!0;return!1}}return!1}function Qy(s){return 4===s.type&&s.value!==CC}function AC(s,a,d){return a===(4!==s.type||d?s.value:CC)}function nD(s,a,d){let v=4;const y=s.attrs||[],E=function(s){for(let a=0;a<s.length;a++)if(Td(s[a]))return a;return s.length}(y);let T=!1;for(let N=0;N<a.length;N++){const F=a[N];if("number"!=typeof F){if(!T)if(4&v){if(v=2|1&v,""!==F&&!AC(s,F,d)||""===F&&1===a.length){if(bu(v))return!1;T=!0}}else{const U=8&v?F:a[++N];if(8&v&&null!==s.attrs){if(!tD(s.attrs,U,d)){if(bu(v))return!1;T=!0}continue}const Z=rD(8&v?"class":F,y,Qy(s),d);if(-1===Z){if(bu(v))return!1;T=!0;continue}if(""!==U){let X;X=Z>E?"":y[Z+1].toLowerCase();const le=8&v?X:null;if(le&&-1!==yo(le,U,0)||2&v&&U!==X){if(bu(v))return!1;T=!0}}}}else{if(!T&&!bu(v)&&!bu(F))return!1;if(T&&bu(F))continue;T=!1,v=F|1&v}}return bu(v)||T}function bu(s){return 0==(1&s)}function rD(s,a,d,v){if(null===a)return-1;let y=0;if(v||!d){let E=!1;for(;y<a.length;){const T=a[y];if(T===s)return y;if(3===T||6===T)E=!0;else{if(1===T||2===T){let N=a[++y];for(;"string"==typeof N;)N=a[++y];continue}if(4===T)break;if(0===T){y+=4;continue}}y+=E?1:2}return-1}return function(s,a){let d=s.indexOf(4);if(d>-1)for(d++;d<s.length;){const v=s[d];if("number"==typeof v)return-1;if(v===a)return d;d++}return-1}(a,s)}function Jy(s,a,d=!1){for(let v=0;v<a.length;v++)if(nD(s,a[v],d))return!0;return!1}function ap(s,a){return s?":not("+a.trim()+")":a}function iD(s){let a=s[0],d=1,v=2,y="",E=!1;for(;d<s.length;){let T=s[d];if("string"==typeof T)if(2&v){const N=s[++d];y+="["+T+(N.length>0?'="'+N+'"':"")+"]"}else 8&v?y+="."+T:4&v&&(y+=" "+T);else""!==y&&!bu(T)&&(a+=ap(E,y),y=""),v=T,E=E||!bu(v);d++}return""!==y&&(a+=ap(E,y)),a}const an={};function ex(s){bC(ln(),ot(),Ci()+s,gu())}function bC(s,a,d,v){if(!v)if(3==(3&a[2])){const E=s.preOrderCheckHooks;null!==E&&_a(a,E,d)}else{const E=s.preOrderHooks;null!==E&&Uc(a,E,0,d)}Ms(d)}function Vf(s,a){return s<<17|a<<2}function Ys(s){return s>>17&32767}function nx(s){return 2|s}function vc(s){return(131068&s)>>2}function up(s,a){return-131069&s|a<<2}function Bm(s){return 1|s}function px(s,a){const d=s.contentQueries;if(null!==d)for(let v=0;v<d.length;v+=2){const y=d[v],E=d[v+1];if(-1!==E){const T=s.data[E];yu(y),T.contentQueries(2,a[E],E)}}}function Uf(s,a,d,v,y,E,T,N,F,U){const W=a.blueprint.slice();return W[0]=y,W[2]=140|v,ma(W),W[3]=W[15]=s,W[8]=d,W[10]=T||s&&s[10],W[11]=N||s&&s[11],W[12]=F||s&&s[12]||null,W[9]=U||s&&s[9]||null,W[6]=E,W[16]=2==a.type?s[16]:W,W}function hp(s,a,d,v,y){let E=s.data[a];if(null===E)E=function(s,a,d,v,y){const E=Dl(),T=Lc(),F=s.data[a]=function(s,a,d,v,y,E){return{type:d,index:v,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:y,attrs:E,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?E:E&&E.parent,d,a,v,y);return null===s.firstChild&&(s.firstChild=F),null!==E&&(T?null==E.child&&null!==F.parent&&(E.child=F):null===E.next&&(E.next=F)),F}(s,a,d,v,y),Ht.lFrame.inI18n&&(E.flags|=64);else if(64&E.type){E.type=d,E.value=v,E.attrs=y;const T=function(){const s=Ht.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();E.injectorIndex=null===T?-1:T.injectorIndex}return so(E,!0),E}function Hf(s,a,d,v){if(0===d)return-1;const y=a.length;for(let E=0;E<d;E++)a.push(v),s.blueprint.push(v),s.data.push(null);return y}function yg(s,a,d){oc(a);try{const v=s.viewQuery;null!==v&&Cx(1,v,d);const y=s.template;null!==y&&LC(s,a,y,1,d),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&px(s,a),s.staticViewQueries&&Cx(2,s.viewQuery,d);const E=s.components;null!==E&&function(s,a){for(let d=0;d<a.length;d++)CD(s,a[d])}(a,E)}catch(v){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),v}finally{a[2]&=-5,Cu()}}function pp(s,a,d,v){const y=a[2];if(256==(256&y))return;oc(a);const E=gu();try{ma(a),function(s){Ht.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==d&&LC(s,a,d,2,v);const T=3==(3&y);if(!E)if(T){const U=s.preOrderCheckHooks;null!==U&&_a(a,U,null)}else{const U=s.preOrderHooks;null!==U&&Uc(a,U,0,null),Yr(a,0)}if(function(s){for(let a=$y(s);null!==a;a=op(a)){if(!a[2])continue;const d=a[9];for(let v=0;v<d.length;v++){const y=d[v],E=y[3];0==(1024&y[2])&&va(E,1),y[2]|=1024}}}(a),function(s){for(let a=$y(s);null!==a;a=op(a))for(let d=10;d<a.length;d++){const v=a[d],y=v[1];Sl(v)&&pp(y,v,y.template,v[8])}}(a),null!==s.contentQueries&&px(s,a),!E)if(T){const U=s.contentCheckHooks;null!==U&&_a(a,U)}else{const U=s.contentHooks;null!==U&&Uc(a,U,1),Yr(a,1)}!function(s,a){const d=s.hostBindingOpCodes;if(null!==d)try{for(let v=0;v<d.length;v++){const y=d[v];if(y<0)Ms(~y);else{const E=y,T=d[++v],N=d[++v];La(T,E),N(2,a[E])}}}finally{Ms(-1)}}(s,a);const N=s.components;null!==N&&function(s,a){for(let d=0;d<a.length;d++)ED(s,a[d])}(a,N);const F=s.viewQuery;if(null!==F&&Cx(2,F,v),!E)if(T){const U=s.viewCheckHooks;null!==U&&_a(a,U)}else{const U=s.viewHooks;null!==U&&Uc(a,U,2),Yr(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),E||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,va(a[3],-1))}finally{Cu()}}function kC(s,a,d,v){const y=a[10],E=!gu(),T=nc(a);try{E&&!T&&y.begin&&y.begin(),T&&yg(s,a,v),pp(s,a,d,v)}finally{E&&!T&&y.end&&y.end()}}function LC(s,a,d,v,y){const E=Ci(),T=2&v;try{Ms(-1),T&&a.length>20&&bC(s,a,20,gu()),d(v,y)}finally{Ms(E)}}function rl(s,a,d){!Ps()||(function(s,a,d,v){const y=d.directiveStart,E=d.directiveEnd;s.firstCreatePass||Vs(d,a),Uo(v,a);const T=d.initialInputs;for(let N=y;N<E;N++){const F=s.data[N],U=Pi(F);U&&yD(a,d,F);const W=Xr(a,s,N,d);Uo(W,a),null!==T&&xD(0,N-y,W,F,0,T),U&&(Wi(d.index,a)[8]=W)}}(s,a,d,Fi(d,a)),128==(128&d.flags)&&function(s,a,d){const v=d.directiveStart,y=d.directiveEnd,T=d.index,N=Ht.lFrame.currentDirectiveIndex;try{Ms(T);for(let F=v;F<y;F++){const U=s.data[F],W=a[F];Ol(F),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&vp(U,W)}}finally{Ms(-1),Ol(N)}}(s,a,d))}function gx(s,a,d=Fi){const v=a.localNames;if(null!==v){let y=a.index+1;for(let E=0;E<v.length;E+=2){const T=v[E+1],N=-1===T?d(a,s):s[T];s[y++]=N}}}function Gd(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Wm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function Wm(s,a,d,v,y,E,T,N,F,U){const W=20+v,Z=W+y,X=function(s,a){const d=[];for(let v=0;v<a;v++)d.push(v<s?null:an);return d}(W,Z),le="function"==typeof U?U():U;return X[1]={type:s,blueprint:X,template:d,queries:null,viewQuery:N,declTNode:a,data:X.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:Z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof E?E():E,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:F,consts:le,incompleteFirstPass:!1}}function mp(s,a,d,v){const y=QC(a);null===d?y.push(v):(y.push(d),s.firstCreatePass&&JC(s).push(v,y.length-1))}function mx(s,a,d){for(let v in s)if(s.hasOwnProperty(v)){const y=s[v];(d=null===d?{}:d).hasOwnProperty(v)?d[v].push(a,y):d[v]=[a,y]}return d}function Xs(s,a,d,v,y,E,T,N){const F=Fi(a,d);let W,U=a.inputs;!N&&null!=U&&(W=U[v])?(nA(s,d,W,v,y),Mc(a)&&function(s,a){const d=Wi(a,s);16&d[2]||(d[2]|=64)}(d,a.index)):3&a.type&&(v=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(v),y=null!=T?T(y,a.value||"",v):y,Xn(E)?E.setProperty(F,v,y):zi(v)||(F.setProperty?F.setProperty(v,y):F[v]=y))}function _x(s,a,d,v){let y=!1;if(Ps()){const E=function(s,a,d){const v=s.directiveRegistry;let y=null;if(v)for(let E=0;E<v.length;E++){const T=v[E];Jy(d,T.selectors,!1)&&(y||(y=[]),Ur(Vs(d,a),s,T.type),Pi(T)?(wg(s,d),y.unshift(T)):y.push(T))}return y}(s,a,d),T=null===v?null:{"":-1};if(null!==E){y=!0,$C(d,s.data.length,E.length);for(let W=0;W<E.length;W++){const Z=E[W];Z.providersResolver&&Z.providersResolver(Z)}let N=!1,F=!1,U=Hf(s,a,E.length,null);for(let W=0;W<E.length;W++){const Z=E[W];d.mergedAttrs=Ls(d.mergedAttrs,Z.hostAttrs),qC(s,d,a,U,Z),_D(U,Z,T),null!==Z.contentQueries&&(d.flags|=8),(null!==Z.hostBindings||null!==Z.hostAttrs||0!==Z.hostVars)&&(d.flags|=128);const X=Z.type.prototype;!N&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(d.index),N=!0),!F&&(X.ngOnChanges||X.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(d.index),F=!0),U++}!function(s,a){const v=a.directiveEnd,y=s.data,E=a.attrs,T=[];let N=null,F=null;for(let U=a.directiveStart;U<v;U++){const W=y[U],Z=W.inputs,X=null===E||Qy(a)?null:ZC(Z,E);T.push(X),N=mx(Z,U,N),F=mx(W.outputs,U,F)}null!==N&&(N.hasOwnProperty("class")&&(a.flags|=16),N.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=T,a.inputs=N,a.outputs=F}(s,d)}T&&function(s,a,d){if(a){const v=s.localNames=[];for(let y=0;y<a.length;y+=2){const E=d[a[y+1]];if(null==E)throw new We("301",`Export of name '${a[y+1]}' not found!`);v.push(a[y],E)}}}(d,v,T)}return d.mergedAttrs=Ls(d.mergedAttrs,d.attrs),y}function HC(s,a,d,v,y,E){const T=E.hostBindings;if(T){let N=s.hostBindingOpCodes;null===N&&(N=s.hostBindingOpCodes=[]);const F=~a.index;(function(s){let a=s.length;for(;a>0;){const d=s[--a];if("number"==typeof d&&d<0)return d}return 0})(N)!=F&&N.push(F),N.push(v,y,T)}}function vp(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function wg(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function _D(s,a,d){if(d){if(a.exportAs)for(let v=0;v<a.exportAs.length;v++)d[a.exportAs[v]]=s;Pi(a)&&(d[""]=s)}}function $C(s,a,d){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+d,s.providerIndexes=a}function qC(s,a,d,v,y){s.data[v]=y;const E=y.factory||(y.factory=Mi(y.type)),T=new Hc(E,Pi(y),null);s.blueprint[v]=T,d[v]=T,HC(s,a,0,v,Hf(s,d,y.hostVars,an),y)}function yD(s,a,d){const v=Fi(a,s),y=Gd(d),E=s[10],T=Wd(s,Uf(s,y,null,d.onPush?64:16,v,a,E,E.createRenderer(v,d),null,null));s[a.index]=T}function il(s,a,d,v,y,E){const T=Fi(s,a);!function(s,a,d,v,y,E,T){if(null==E)Xn(s)?s.removeAttribute(a,y,d):a.removeAttribute(y);else{const N=null==T?Ce(E):T(E,v||"",y);Xn(s)?s.setAttribute(a,y,N,d):d?a.setAttributeNS(d,y,N):a.setAttribute(y,N)}}(a[11],T,E,s.value,d,v,y)}function xD(s,a,d,v,y,E){const T=E[a];if(null!==T){const N=v.setInput;for(let F=0;F<T.length;){const U=T[F++],W=T[F++],Z=T[F++];null!==N?v.setInput(d,Z,U,W):d[W]=Z}}}function ZC(s,a){let d=null,v=0;for(;v<a.length;){const y=a[v];if(0!==y)if(5!==y){if("number"==typeof y)break;s.hasOwnProperty(y)&&(null===d&&(d=[]),d.push(y,s[y],a[v+1])),v+=2}else v+=2;else v+=4}return d}function KC(s,a,d,v){return new Array(s,!0,!1,a,null,0,v,d,null,null)}function ED(s,a){const d=Wi(a,s);if(Sl(d)){const v=d[1];80&d[2]?pp(v,d,v.template,d[8]):d[5]>0&&jf(d)}}function jf(s){for(let v=$y(s);null!==v;v=op(v))for(let y=10;y<v.length;y++){const E=v[y];if(1024&E[2]){const T=E[1];pp(T,E,T.template,E[8])}else E[5]>0&&jf(E)}const d=s[1].components;if(null!==d)for(let v=0;v<d.length;v++){const y=Wi(d[v],s);Sl(y)&&y[5]>0&&jf(y)}}function CD(s,a){const d=Wi(a,s),v=d[1];(function(s,a){for(let d=a.length;d<s.blueprint.length;d++)a.push(s.blueprint[d])})(v,d),yg(v,d,d[8])}function Wd(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function xx(s){for(;s;){s[2]|=64;const a=fg(s);if(Kt(s)&&!a)return s;s=a}return null}function Ex(s,a,d){const v=a[10];v.begin&&v.begin();try{pp(s,a,s.template,d)}catch(y){throw tA(a,y),y}finally{v.end&&v.end()}}function YC(s){!function(s){for(let a=0;a<s.components.length;a++){const d=s.components[a],v=Vd(d),y=v[1];kC(y,v,y.template,d)}}(s[8])}function Cx(s,a,d){yu(0),a(s,d)}const XC=(()=>Promise.resolve(null))();function QC(s){return s[7]||(s[7]=[])}function JC(s){return s.cleanup||(s.cleanup=[])}function tA(s,a){const d=s[9],v=d?d.get(S,null):null;v&&v.handleError(a)}function nA(s,a,d,v,y){for(let E=0;E<d.length;){const T=d[E++],N=d[E++],F=a[T],U=s.data[T];null!==U.setInput?U.setInput(F,y,v,N):F[N]=y}}function ol(s,a,d){const v=pa(a,s);!function(s,a,d){Xn(s)?s.setValue(a,d):a.textContent=d}(s[11],v,d)}function Ax(s,a,d){let v=d?s.styles:null,y=d?s.classes:null,E=0;if(null!==a)for(let T=0;T<a.length;T++){const N=a[T];"number"==typeof N?E=N:1==E?y=me(y,N):2==E&&(v=me(v,N+": "+a[++T]+";"))}d?s.styles=v:s.stylesWithoutHost=v,d?s.classes=y:s.classesWithoutHost=y}const Gf=new Jn("INJECTOR",-1);class oA{get(a,d=j){if(d===j){const v=new Error(`NullInjectorError: No provider for ${xe(a)}!`);throw v.name="NullInjectorError",v}return d}}const Cg=new Jn("Set Injector scope."),Ag={},DD={};let Ix;function qm(){return void 0===Ix&&(Ix=new oA),Ix}function sA(s,a=null,d=null,v){return new RD(s,d,a||qm(),v)}class RD{constructor(a,d,v,y=null){this.parent=v,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const E=[];d&&Ct(d,N=>this.processProvider(N,a,d)),Ct([a],N=>this.processInjectorType(N,[],E)),this.records.set(Gf,_p(void 0,this));const T=this.records.get(Cg);this.scope=null!=T?T.value:null,this.source=y||("object"==typeof a?null:xe(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,d=j,v=At.Default){this.assertNotDestroyed();const y=pt(this),E=Mn(void 0);try{if(!(v&At.SkipSelf)){let N=this.records.get(a);if(void 0===N){const F=("function"==typeof(s=a)||"object"==typeof s&&s instanceof Jn)&&Fr(a);N=F&&this.injectableDefInScope(F)?_p(Ig(a),Ag):null,this.records.set(a,N)}if(null!=N)return this.hydrate(a,N)}return(v&At.Self?qm():this.parent).get(a,d=v&At.Optional&&d===j?null:d)}catch(T){if("NullInjectorError"===T.name){if((T[oe]=T[oe]||[]).unshift(xe(a)),y)throw T;return rs(T,a,"R3InjectorError",this.source)}throw T}finally{Mn(E),pt(y)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((v,y)=>a.push(xe(y))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(a,d,v){if(!(a=re(a)))return!1;let y=Cr(a);const E=null==y&&a.ngModule||void 0,T=void 0===E?a:E,N=-1!==v.indexOf(T);if(void 0!==E&&(y=Cr(E)),null==y)return!1;if(null!=y.imports&&!N){let W;v.push(T);try{Ct(y.imports,Z=>{this.processInjectorType(Z,d,v)&&(void 0===W&&(W=[]),W.push(Z))})}finally{}if(void 0!==W)for(let Z=0;Z<W.length;Z++){const{ngModule:X,providers:le}=W[Z];Ct(le,ye=>this.processProvider(ye,X,le||he))}}this.injectorDefTypes.add(T);const F=Mi(T)||(()=>new T);this.records.set(T,_p(F,Ag));const U=y.providers;if(null!=U&&!N){const W=a;Ct(U,Z=>this.processProvider(Z,W,U))}return void 0!==E&&void 0!==a.providers}processProvider(a,d,v){let y=zf(a=re(a))?a:re(a&&a.provide);const E=uA(s=a)?_p(void 0,s.useValue):_p(Wf(s),Ag);var s;if(zf(a)||!0!==a.multi)this.records.get(y);else{let T=this.records.get(y);T||(T=_p(void 0,Ag,!0),T.factory=()=>_n(T.multi),this.records.set(y,T)),y=a,T.multi.push(a)}this.records.set(y,E)}hydrate(a,d){return d.value===Ag&&(d.value=DD,d.value=d.factory()),"object"==typeof d.value&&d.value&&null!==(s=d.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(d.value),d.value;var s}injectableDefInScope(a){if(!a.providedIn)return!1;const d=re(a.providedIn);return"string"==typeof d?"any"===d||d===this.scope:this.injectorDefTypes.has(d)}}function Ig(s){const a=Fr(s),d=null!==a?a.factory:Mi(s);if(null!==d)return d;if(s instanceof Jn)throw new Error(`Token ${xe(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const a=s.length;if(a>0){const v=function(s,a){const d=[];for(let v=0;v<s;v++)d.push(a);return d}(a,"?");throw new Error(`Can't resolve all parameters for ${xe(s)}: (${v.join(", ")}).`)}const d=function(s){const a=s&&(s[vr]||s[xi]);if(a){const d=function(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${d}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${d}" class.`),a}return null}(s);return null!==d?()=>d.factory(s):()=>new s}(s);throw new Error("unreachable")}function Wf(s,a,d){let v;if(zf(s)){const y=re(s);return Mi(y)||Ig(y)}if(uA(s))v=()=>re(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))v=()=>s.useFactory(..._n(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))v=()=>Vt(re(s.useExisting));else{const y=re(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return Mi(y)||Ig(y);v=()=>new y(..._n(s.deps))}return v}function _p(s,a,d=!1){return{factory:s,value:a,multi:d?[]:void 0}}function uA(s){return null!==s&&"object"==typeof s&&Je in s}function zf(s){return"function"==typeof s}const bg=function(s,a,d){return function(s,a=null,d=null,v){const y=sA(s,a,d,v);return y._resolveInjectorDefTypes(),y}({name:d},a,s,d)};let yr=(()=>{class s{static create(d,v){return Array.isArray(d)?bg(d,v,""):bg(d.providers,d.parent,d.name||"")}}return s.THROW_IF_NOT_FOUND=j,s.NULL=new oA,s.\u0275prov=Wn({token:s,providedIn:"any",factory:()=>Vt(Gf)}),s.__NG_ELEMENT_ID__=-1,s})();function qD(s,a){Ba(Vd(s)[1],Kn())}function $d(s){let a=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),d=!0;const v=[s];for(;a;){let y;if(Pi(s))y=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Error("Directives cannot inherit Components");y=a.\u0275dir}if(y){if(d){v.push(y);const T=s;T.inputs=Qm(s.inputs),T.declaredInputs=Qm(s.declaredInputs),T.outputs=Qm(s.outputs);const N=y.hostBindings;N&&ZD(s,N);const F=y.viewQuery,U=y.contentQueries;if(F&&ss(s,F),U&&Zd(s,U),$e(s.inputs,y.inputs),$e(s.declaredInputs,y.declaredInputs),$e(s.outputs,y.outputs),Pi(y)&&y.data.animation){const W=s.data;W.animation=(W.animation||[]).concat(y.data.animation)}}const E=y.features;if(E)for(let T=0;T<E.length;T++){const N=E[T];N&&N.ngInherit&&N(s),N===$d&&(d=!1)}}a=Object.getPrototypeOf(a)}!function(s){let a=0,d=null;for(let v=s.length-1;v>=0;v--){const y=s[v];y.hostVars=a+=y.hostVars,y.hostAttrs=Ls(y.hostAttrs,d=Ls(d,y.hostAttrs))}}(v)}function Qm(s){return s===ue?{}:s===he?[]:s}function ss(s,a){const d=s.viewQuery;s.viewQuery=d?(v,y)=>{a(v,y),d(v,y)}:a}function Zd(s,a){const d=s.contentQueries;s.contentQueries=d?(v,y,E)=>{a(v,y,E),d(v,y,E)}:a}function ZD(s,a){const d=s.hostBindings;s.hostBindings=d?(v,y)=>{a(v,y),d(v,y)}:a}let Tg=null;function $f(){if(!Tg){const s=Fn.Symbol;if(s&&s.iterator)Tg=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let d=0;d<a.length;++d){const v=a[d];"entries"!==v&&"size"!==v&&Map.prototype[v]===Map.prototype.entries&&(Tg=v)}}}return Tg}function xp(s){return!!Jm(s)&&(Array.isArray(s)||!(s instanceof Map)&&$f()in s)}function Jm(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ho(s,a,d){return!Object.is(s[a],d)&&(s[a]=d,!0)}function Og(s,a,d,v){const y=ot();return Ho(y,ko(),a)&&(ln(),il(Kr(),y,s,a,d,v)),Og}function Yd(s,a,d,v){return Ho(s,ko(),d)?a+Ce(d)+v:an}function EA(s,a,d,v,y,E,T,N){const F=ot(),U=ln(),W=s+20,Z=U.firstCreatePass?function(s,a,d,v,y,E,T,N,F){const U=a.consts,W=hp(a,s,4,T||null,Ns(U,N));_x(a,d,W,Ns(U,F)),Ba(a,W);const Z=W.tViews=Wm(2,W,v,y,E,a.directiveRegistry,a.pipeRegistry,null,a.schemas,U);return null!==a.queries&&(a.queries.template(a,W),Z.queries=a.queries.embeddedTView(W)),W}(W,U,F,a,d,v,y,E,T):U.data[W];so(Z,!1);const X=F[11].createComment("");An(U,F,X,Z),Uo(X,F),Wd(F,F[W]=KC(X,F,X,Z)),qu(Z)&&rl(U,F,Z),null!=T&&gx(F,Z,N)}function Bg(s,a=At.Default){const d=ot();return null===d?Vt(s,a):Gc(Kn(),d,re(s),a)}function Kx(s,a,d){const v=ot();return Ho(v,ko(),a)&&Xs(ln(),Kr(),v,s,a,v[11],d,!1),Kx}function NA(s,a,d,v,y){const T=y?"class":"style";nA(s,d,a.inputs[T],T,v)}function av(s,a,d,v){const y=ot(),E=ln(),T=20+s,N=y[11],F=y[T]=hg(N,a,Ht.lFrame.currentNamespace),U=E.firstCreatePass?function(s,a,d,v,y,E,T){const N=a.consts,U=hp(a,s,2,y,Ns(N,E));return _x(a,d,U,Ns(N,T)),null!==U.attrs&&Ax(U,U.attrs,!1),null!==U.mergedAttrs&&Ax(U,U.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,U),U}(T,E,y,0,a,d,v):E.data[T];so(U,!0);const W=U.mergedAttrs;null!==W&&ts(N,F,W);const Z=U.classes;null!==Z&&EC(N,F,Z);const X=U.styles;null!==X&&Xy(N,F,X),64!=(64&U.flags)&&An(E,y,F,U),0===Ht.lFrame.elementDepthCount&&Uo(F,y),Ht.lFrame.elementDepthCount++,qu(U)&&(rl(E,y,U),function(s,a,d){if(Os(a)){const y=a.directiveEnd;for(let E=a.directiveStart;E<y;E++){const T=s.data[E];T.contentQueries&&T.contentQueries(1,d[E],E)}}}(E,U,y)),null!==v&&gx(y,U)}function bp(){let s=Kn();Lc()?Ht.lFrame.isParent=!1:(s=s.parent,so(s,!1));const a=s;Ht.lFrame.elementDepthCount--;const d=ln();d.firstCreatePass&&(Ba(d,s),Os(s)&&d.queries.elementEnd(s)),null!=a.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(a)&&NA(d,a,ot(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(a)&&NA(d,a,ot(),a.stylesWithoutHost,!1)}function MA(s,a,d,v){av(s,a,d,v),bp()}function Xx(){return ot()}function Qx(s){return!!s&&"function"==typeof s.then}function Jx(s){return!!s&&"function"==typeof s.subscribe}const Vg=Jx;function ew(s,a,d,v){const y=ot(),E=ln(),T=Kn();return function(s,a,d,v,y,E,T,N){const F=qu(v),W=s.firstCreatePass&&JC(s),Z=a[8],X=QC(a);let le=!0;if(3&v.type||N){const be=Fi(v,a),ut=N?N(be):be,et=X.length,Lt=N?Jt=>N(jn(Jt[v.index])):v.index;if(Xn(d)){let Jt=null;if(!N&&F&&(Jt=function(s,a,d,v){const y=s.cleanup;if(null!=y)for(let E=0;E<y.length-1;E+=2){const T=y[E];if(T===d&&y[E+1]===v){const N=a[7],F=y[E+2];return N.length>F?N[F]:null}"string"==typeof T&&(E+=2)}return null}(s,a,y,v.index)),null!==Jt)(Jt.__ngLastListenerFn__||Jt).__ngNextListenerFn__=E,Jt.__ngLastListenerFn__=E,le=!1;else{E=Ug(v,a,Z,E,!1);const On=d.listen(ut,y,E);X.push(E,On),W&&W.push(y,Lt,et,et+1)}}else E=Ug(v,a,Z,E,!0),ut.addEventListener(y,E,T),X.push(E),W&&W.push(y,Lt,et,T)}else E=Ug(v,a,Z,E,!1);const ye=v.outputs;let He;if(le&&null!==ye&&(He=ye[y])){const be=He.length;if(be)for(let ut=0;ut<be;ut+=2){const Ji=a[He[ut]][He[ut+1]].subscribe(E),Oa=X.length;X.push(E,Ji),W&&W.push(y,v.index,Oa,-(Oa+1))}}}(E,y,y[11],T,s,a,!!d,v),ew}function FA(s,a,d,v){try{return!1!==d(v)}catch(y){return tA(s,y),!1}}function Ug(s,a,d,v,y){return function E(T){if(T===Function)return v;const N=2&s.flags?Wi(s.index,a):a;0==(32&a[2])&&xx(N);let F=FA(a,0,v,T),U=E.__ngNextListenerFn__;for(;U;)F=FA(a,0,U,T)&&F,U=U.__ngNextListenerFn__;return y&&!1===F&&(T.preventDefault(),T.returnValue=!1),F}}function kA(s=1){return function(s){return(Ht.lFrame.contextLView=function(s,a){for(;s>0;)a=a[15],s--;return a}(s,Ht.lFrame.contextLView))[8]}(s)}function th(s,a,d){return rw(s,"",a,"",d),th}function rw(s,a,d,v,y){const E=ot(),T=Yd(E,a,d,v);return T!==an&&Xs(ln(),Kr(),E,s,T,E[11],y,!1),rw}function sw(s,a,d,v,y){const E=s[d+1],T=null===a;let N=v?Ys(E):vc(E),F=!1;for(;0!==N&&(!1===F||T);){const W=s[N+1];p3(s[N],a)&&(F=!0,s[N+1]=v?Bm(W):nx(W)),N=v?Ys(W):vc(W)}F&&(s[d+1]=v?nx(E):Bm(E))}function p3(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&u(s,a)>=0}function QA(s,a,d){return Ac(s,a,d,!1),QA}function JA(s,a){return Ac(s,a,null,!0),JA}function Ac(s,a,d,v){const y=ot(),E=ln(),T=function(s){const a=Ht.lFrame,d=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,d}(2);E.firstUpdatePass&&function(s,a,d,v){const y=s.data;if(null===y[d+1]){const E=y[Ci()],T=function(s,a){return a>=s.expandoStartIndex}(s,d);(function(s,a){return 0!=(s.flags&(a?16:32))})(E,v)&&null===a&&!T&&(a=!1),a=function(s,a,d,v){const y=function(s){const a=Ht.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let E=v?a.residualClasses:a.residualStyles;if(null===y)0===(v?a.classBindings:a.styleBindings)&&(d=Hg(d=lw(null,s,a,d,v),a.attrs,v),E=null);else{const T=a.directiveStylingLast;if(-1===T||s[T]!==y)if(d=lw(y,s,a,d,v),null===E){let F=function(s,a,d){const v=d?a.classBindings:a.styleBindings;if(0!==vc(v))return s[Ys(v)]}(s,a,v);void 0!==F&&Array.isArray(F)&&(F=lw(null,s,a,F[1],v),F=Hg(F,a.attrs,v),function(s,a,d,v){s[Ys(d?a.classBindings:a.styleBindings)]=v}(s,a,v,F))}else E=function(s,a,d){let v;const y=a.directiveEnd;for(let E=1+a.directiveStylingLast;E<y;E++)v=Hg(v,s[E].hostAttrs,d);return Hg(v,a.attrs,d)}(s,a,v)}return void 0!==E&&(v?a.residualClasses=E:a.residualStyles=E),d}(y,E,a,v),function(s,a,d,v,y,E){let T=E?a.classBindings:a.styleBindings,N=Ys(T),F=vc(T);s[v]=d;let W,U=!1;if(Array.isArray(d)){const Z=d;W=Z[1],(null===W||u(Z,W)>0)&&(U=!0)}else W=d;if(y)if(0!==F){const X=Ys(s[N+1]);s[v+1]=Vf(X,N),0!==X&&(s[X+1]=up(s[X+1],v)),s[N+1]=function(s,a){return 131071&s|a<<17}(s[N+1],v)}else s[v+1]=Vf(N,0),0!==N&&(s[N+1]=up(s[N+1],v)),N=v;else s[v+1]=Vf(F,0),0===N?N=v:s[F+1]=up(s[F+1],v),F=v;U&&(s[v+1]=nx(s[v+1])),sw(s,W,v,!0),sw(s,W,v,!1),function(s,a,d,v,y){const E=y?s.residualClasses:s.residualStyles;null!=E&&"string"==typeof a&&u(E,a)>=0&&(d[v+1]=Bm(d[v+1]))}(a,W,s,v,E),T=Vf(N,F),E?a.classBindings=T:a.styleBindings=T}(y,E,a,d,T,v)}}(E,s,T,v),a!==an&&Ho(y,T,a)&&function(s,a,d,v,y,E,T,N){if(!(3&a.type))return;const F=s.data,U=F[N+1];jg(function(s){return 1==(1&s)}(U)?A3(F,a,d,y,vc(U),T):void 0)||(jg(E)||function(s){return 2==(2&s)}(U)&&(E=A3(F,null,d,y,N,T)),function(s,a,d,v,y){const E=Xn(s);if(a)y?E?s.addClass(d,v):d.classList.add(v):E?s.removeClass(d,v):d.classList.remove(v);else{let T=-1===v.indexOf("-")?void 0:Ks.DashCase;if(null==y)E?s.removeStyle(d,v,T):d.style.removeProperty(v);else{const N="string"==typeof y&&y.endsWith("!important");N&&(y=y.slice(0,-10),T|=Ks.Important),E?s.setStyle(d,v,y,T):d.style.setProperty(v,y,N?"important":"")}}}(v,T,pa(Ci(),d),y,E))}(E,E.data[Ci()],y,y[11],s,y[T+1]=function(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=xe(Au(s)))),s}(a,d),v,T)}function lw(s,a,d,v,y){let E=null;const T=d.directiveEnd;let N=d.directiveStylingLast;for(-1===N?N=d.directiveStart:N++;N<T&&(E=a[N],v=Hg(v,E.hostAttrs,y),E!==s);)N++;return null!==s&&(d.directiveStylingLast=N),v}function Hg(s,a,d){const v=d?1:2;let y=-1;if(null!==a)for(let E=0;E<a.length;E++){const T=a[E];"number"==typeof T?y=T:y===v&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Cn(s,T,!!d||a[++E]))}return void 0===s?null:s}function A3(s,a,d,v,y,E){const T=null===a;let N;for(;y>0;){const F=s[y],U=Array.isArray(F),W=U?F[1]:F,Z=null===W;let X=d[y+1];X===an&&(X=Z?he:void 0);let le=Z?f(X,v):W===v?X:void 0;if(U&&!jg(le)&&(le=f(F,v)),jg(le)&&(N=le,T))return N;const ye=s[y+1];y=T?Ys(ye):vc(ye)}if(null!==a){let F=E?a.residualClasses:a.residualStyles;null!=F&&(N=f(F,v))}return N}function jg(s){return void 0!==s}function cv(s,a=""){const d=ot(),v=ln(),y=s+20,E=v.firstCreatePass?hp(v,y,1,a,null):v.data[y],T=d[y]=function(s,a){return Xn(s)?s.createText(a):s.createTextNode(a)}(d[11],a);An(v,d,T,E),so(E,!1)}function lv(s){return dv("",s,""),lv}function dv(s,a,d){const v=ot(),y=Yd(v,s,a,d);return y!==an&&ol(v,Ci(),y),dv}function Jd(s,a,d){const v=ot();return Ho(v,ko(),a)&&Xs(ln(),Kr(),v,s,a,v[11],d,!0),Jd}const Ic=void 0;var D3=["en",[["a","p"],["AM","PM"],Ic],[["AM","PM"],Ic,Ic],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ic,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ic,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ic,"{1} 'at' {0}",Ic],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const a=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===d?1:5}];let ul={};function gv(s){const a=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let d=ww(a);if(d)return d;const v=a.split("-")[0];if(d=ww(v),d)return d;if("en"===v)return D3;throw new Error(`Missing locale data for the locale "${s}".`)}function xw(s){return gv(s)[Qt.PluralCase]}function ww(s){return s in ul||(ul[s]=Fn.ng&&Fn.ng.common&&Fn.ng.common.locales&&Fn.ng.common.locales[s]),ul[s]}var Qt=(()=>((Qt=Qt||{})[Qt.LocaleId=0]="LocaleId",Qt[Qt.DayPeriodsFormat=1]="DayPeriodsFormat",Qt[Qt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qt[Qt.DaysFormat=3]="DaysFormat",Qt[Qt.DaysStandalone=4]="DaysStandalone",Qt[Qt.MonthsFormat=5]="MonthsFormat",Qt[Qt.MonthsStandalone=6]="MonthsStandalone",Qt[Qt.Eras=7]="Eras",Qt[Qt.FirstDayOfWeek=8]="FirstDayOfWeek",Qt[Qt.WeekendRange=9]="WeekendRange",Qt[Qt.DateFormat=10]="DateFormat",Qt[Qt.TimeFormat=11]="TimeFormat",Qt[Qt.DateTimeFormat=12]="DateTimeFormat",Qt[Qt.NumberSymbols=13]="NumberSymbols",Qt[Qt.NumberFormats=14]="NumberFormats",Qt[Qt.CurrencyCode=15]="CurrencyCode",Qt[Qt.CurrencySymbol=16]="CurrencySymbol",Qt[Qt.CurrencyName=17]="CurrencyName",Qt[Qt.Currencies=18]="Currencies",Qt[Qt.Directionality=19]="Directionality",Qt[Qt.PluralCase=20]="PluralCase",Qt[Qt.ExtraData=21]="ExtraData",Qt))();const $g="en-US";let vv=$g;function Zg(s){sn(s,"Expected localeId to be defined"),"string"==typeof s&&(vv=s.toLowerCase().replace(/_/g,"-"))}function Mp(s,a,d,v,y){if(s=re(s),Array.isArray(s))for(let E=0;E<s.length;E++)Mp(s[E],a,d,v,y);else{const E=ln(),T=ot();let N=zf(s)?s:re(s.provide),F=Wf(s);const U=Kn(),W=1048575&U.providerIndexes,Z=U.directiveStart,X=U.providerIndexes>>20;if(zf(s)||!s.multi){const le=new Hc(F,y,Bg),ye=cs(N,a,y?W:W+X,Z);-1===ye?(Ur(Vs(U,T),E,N),Ya(E,s,a.length),a.push(N),U.directiveStart++,U.directiveEnd++,y&&(U.providerIndexes+=1048576),d.push(le),T.push(le)):(d[ye]=le,T[ye]=le)}else{const le=cs(N,a,W+X,Z),ye=cs(N,a,W,W+X),He=le>=0&&d[le],be=ye>=0&&d[ye];if(y&&!be||!y&&!He){Ur(Vs(U,T),E,N);const ut=function(s,a,d,v,y){const E=new Hc(s,d,Bg);return E.multi=[],E.index=a,E.componentProviders=0,LI(E,y,v&&!d),E}(y?Lw:X3,d.length,y,v,F);!y&&be&&(d[ye].providerFactory=ut),Ya(E,s,a.length,0),a.push(N),U.directiveStart++,U.directiveEnd++,y&&(U.providerIndexes+=1048576),d.push(ut),T.push(ut)}else Ya(E,s,le>-1?le:ye,LI(d[y?ye:le],F,!y&&v));!y&&v&&be&&d[ye].componentProviders++}}}function Ya(s,a,d,v){const y=zf(a);if(y||function(s){return!!s.useClass}(a)){const T=(a.useClass||a).prototype.ngOnDestroy;if(T){const N=s.destroyHooks||(s.destroyHooks=[]);if(!y&&a.multi){const F=N.indexOf(d);-1===F?N.push(d,[v,T]):N[F+1].push(v,T)}else N.push(d,T)}}}function LI(s,a,d){return d&&s.componentProviders++,s.multi.push(a)-1}function cs(s,a,d,v){for(let y=d;y<v;y++)if(a[y]===s)return y;return-1}function X3(s,a,d,v){return Jg(this.multi,[])}function Lw(s,a,d,v){const y=this.multi;let E;if(this.providerFactory){const T=this.providerFactory.componentProviders,N=Xr(d,d[1],this.providerFactory.index,v);E=N.slice(0,T),Jg(y,E);for(let F=T;F<N.length;F++)E.push(N[F])}else E=[],Jg(y,E);return E}function Jg(s,a){for(let d=0;d<s.length;d++)a.push((0,s[d])());return a}function Bw(s,a=[]){return d=>{d.providersResolver=(v,y)=>function(s,a,d){const v=ln();if(v.firstCreatePass){const y=Pi(s);Mp(d,v.data,v.blueprint,y,!0),Mp(a,v.data,v.blueprint,y,!1)}}(v,y?y(s):s,a)}}class Vw{}const Uw="ngComponent";class eO{resolveComponentFactory(a){throw function(s){const a=Error(`No component factory found for ${xe(s)}. Did you add it to @NgModule.entryComponents?`);return a[Uw]=s,a}(a)}}let Fp=(()=>{class s{}return s.NULL=new eO,s})();function Cv(...s){}function Ql(s,a){return new Ia(Fi(s,a))}const Jl=function(){return Ql(Kn(),ot())};let Ia=(()=>{class s{constructor(d){this.nativeElement=d}}return s.__NG_ELEMENT_ID__=Jl,s})();function yn(s){return s instanceof Ia?s.nativeElement:s}class ef{}let nO=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>rO(),s})();const rO=function(){const s=ot(),d=Wi(Kn().index,s);return function(s){return s[11]}(Ro(d)?d:s)};let t1=(()=>{class s{}return s.\u0275prov=Wn({token:s,providedIn:"root",factory:()=>null}),s})();class Gw{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Av=new Gw("12.2.11");class UI{constructor(){}supports(a){return xp(a)}create(a){return new jI(a)}}const HI=(s,a)=>a;class jI{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||HI}forEachItem(a){let d;for(d=this._itHead;null!==d;d=d._next)a(d)}forEachOperation(a){let d=this._itHead,v=this._removalsHead,y=0,E=null;for(;d||v;){const T=!v||d&&d.currentIndex<GI(v,y,E)?d:v,N=GI(T,y,E),F=T.currentIndex;if(T===v)y--,v=v._nextRemoved;else if(d=d._next,null==T.previousIndex)y++;else{E||(E=[]);const U=N-y,W=F-y;if(U!=W){for(let X=0;X<U;X++){const le=X<E.length?E[X]:E[X]=0,ye=le+X;W<=ye&&ye<U&&(E[X]=le+1)}E[T.previousIndex]=W-U}}N!==F&&a(T,N,F)}}forEachPreviousItem(a){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)a(d)}forEachAddedItem(a){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)a(d)}forEachMovedItem(a){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)a(d)}forEachRemovedItem(a){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)a(d)}forEachIdentityChange(a){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)a(d)}diff(a){if(null==a&&(a=[]),!xp(a))throw new Error(`Error trying to diff '${xe(a)}'. Only arrays and iterables are allowed`);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let y,E,T,d=this._itHead,v=!1;if(Array.isArray(a)){this.length=a.length;for(let N=0;N<this.length;N++)E=a[N],T=this._trackByFn(N,E),null!==d&&Object.is(d.trackById,T)?(v&&(d=this._verifyReinsertion(d,E,T,N)),Object.is(d.item,E)||this._addIdentityChange(d,E)):(d=this._mismatch(d,E,T,N),v=!0),d=d._next}else y=0,function(s,a){if(Array.isArray(s))for(let d=0;d<s.length;d++)a(s[d]);else{const d=s[$f()]();let v;for(;!(v=d.next()).done;)a(v.value)}}(a,N=>{T=this._trackByFn(y,N),null!==d&&Object.is(d.trackById,T)?(v&&(d=this._verifyReinsertion(d,N,T,y)),Object.is(d.item,N)||this._addIdentityChange(d,N)):(d=this._mismatch(d,N,T,y),v=!0),d=d._next,y++}),this.length=y;return this._truncate(d),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,d,v,y){let E;return null===a?E=this._itTail:(E=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(v,null))?(Object.is(a.item,d)||this._addIdentityChange(a,d),this._reinsertAfter(a,E,y)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(v,y))?(Object.is(a.item,d)||this._addIdentityChange(a,d),this._moveAfter(a,E,y)):a=this._addAfter(new Lp(d,v),E,y),a}_verifyReinsertion(a,d,v,y){let E=null===this._unlinkedRecords?null:this._unlinkedRecords.get(v,null);return null!==E?a=this._reinsertAfter(E,a._prev,y):a.currentIndex!=y&&(a.currentIndex=y,this._addToMoves(a,y)),a}_truncate(a){for(;null!==a;){const d=a._next;this._addToRemovals(this._unlink(a)),a=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,d,v){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const y=a._prevRemoved,E=a._nextRemoved;return null===y?this._removalsHead=E:y._nextRemoved=E,null===E?this._removalsTail=y:E._prevRemoved=y,this._insertAfter(a,d,v),this._addToMoves(a,v),a}_moveAfter(a,d,v){return this._unlink(a),this._insertAfter(a,d,v),this._addToMoves(a,v),a}_addAfter(a,d,v){return this._insertAfter(a,d,v),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,d,v){const y=null===d?this._itHead:d._next;return a._next=y,a._prev=d,null===y?this._itTail=a:y._prev=a,null===d?this._itHead=a:d._next=a,null===this._linkedRecords&&(this._linkedRecords=new Bp),this._linkedRecords.put(a),a.currentIndex=v,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const d=a._prev,v=a._next;return null===d?this._itHead=v:d._next=v,null===v?this._itTail=d:v._prev=d,a}_addToMoves(a,d){return a.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Bp),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,d){return a.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Lp{constructor(a,d){this.item=a,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class n1{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,d){let v;for(v=this._head;null!==v;v=v._nextDup)if((null===d||d<=v.currentIndex)&&Object.is(v.trackById,a))return v;return null}remove(a){const d=a._prevDup,v=a._nextDup;return null===d?this._head=v:d._nextDup=v,null===v?this._tail=d:v._prevDup=d,null===this._head}}class Bp{constructor(){this.map=new Map}put(a){const d=a.trackById;let v=this.map.get(d);v||(v=new n1,this.map.set(d,v)),v.add(a)}get(a,d){const y=this.map.get(a);return y?y.get(a,d):null}remove(a){const d=a.trackById;return this.map.get(d).remove(a)&&this.map.delete(d),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function GI(s,a,d){const v=s.previousIndex;if(null===v)return v;let y=0;return d&&v<d.length&&(y=d[v]),v+a+y}class Iv{constructor(){}supports(a){return a instanceof Map||Jm(a)}create(){return new r1}}class r1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let d;for(d=this._mapHead;null!==d;d=d._next)a(d)}forEachPreviousItem(a){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)a(d)}forEachChangedItem(a){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)a(d)}forEachAddedItem(a){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)a(d)}forEachRemovedItem(a){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)a(d)}diff(a){if(a){if(!(a instanceof Map||Jm(a)))throw new Error(`Error trying to diff '${xe(a)}'. Only maps and objects are allowed`)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(a,(v,y)=>{if(d&&d.key===y)this._maybeAddToChanges(d,v),this._appendAfter=d,d=d._next;else{const E=this._getOrCreateRecordForKey(y,v);d=this._insertBeforeOrAppend(d,E)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let v=d;null!==v;v=v._nextRemoved)v===this._mapHead&&(this._mapHead=null),this._records.delete(v.key),v._nextRemoved=v._next,v.previousValue=v.currentValue,v.currentValue=null,v._prev=null,v._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,d){if(a){const v=a._prev;return d._next=a,d._prev=v,a._prev=d,v&&(v._next=d),a===this._mapHead&&(this._mapHead=d),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(a,d){if(this._records.has(a)){const y=this._records.get(a);this._maybeAddToChanges(y,d);const E=y._prev,T=y._next;return E&&(E._next=T),T&&(T._prev=E),y._next=null,y._prev=null,y}const v=new oO(a);return this._records.set(a,v),v.currentValue=d,this._addToAdditions(v),v}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,d){Object.is(d,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=d,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,d){a instanceof Map?a.forEach(d):Object.keys(a).forEach(v=>d(a[v],v))}}class oO{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function i1(){return new bv([new UI])}let bv=(()=>{class s{constructor(d){this.factories=d}static create(d,v){if(null!=v){const y=v.factories.slice();d=d.concat(y)}return new s(d)}static extend(d){return{provide:s,useFactory:v=>s.create(d,v||i1()),deps:[[s,new Yc,new Ca]]}}find(d){const v=this.factories.find(y=>y.supports(d));if(null!=v)return v;throw new Error(`Cannot find a differ supporting object '${d}' of type '${function(s){return s.name||typeof s}(d)}'`)}}return s.\u0275prov=Wn({token:s,providedIn:"root",factory:i1}),s})();function WI(){return new Vp([new Iv])}let Vp=(()=>{class s{constructor(d){this.factories=d}static create(d,v){if(v){const y=v.factories.slice();d=d.concat(y)}return new s(d)}static extend(d){return{provide:s,useFactory:v=>s.create(d,v||WI()),deps:[[s,new Yc,new Ca]]}}find(d){const v=this.factories.find(y=>y.supports(d));if(v)return v;throw new Error(`Cannot find a differ supporting object '${d}'`)}}return s.\u0275prov=Wn({token:s,providedIn:"root",factory:WI}),s})();function Sv(s,a,d,v,y=!1){for(;null!==d;){const E=a[d.index];if(null!==E&&v.push(jn(E)),Ni(E))for(let N=10;N<E.length;N++){const F=E[N],U=F[1].firstChild;null!==U&&Sv(F[1],F,U,v)}const T=d.type;if(8&T)Sv(s,a,d.child,v);else if(32&T){const N=Wy(d,a);let F;for(;F=N();)v.push(F)}else if(16&T){const N=kf(a,d);if(Array.isArray(N))v.push(...N);else{const F=fg(a[16]);Sv(F[1],F,N,v,!0)}}d=y?d.projectionNext:d.next}return v}class ch{constructor(a,d){this._lView=a,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,d=a[1];return Sv(d,a,d.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Ni(a)){const d=a[8],v=d?d.indexOf(this):-1;v>-1&&(qy(a,v),co(d,v))}this._attachedToViewContainer=!1}nl(this._lView[1],this._lView)}onDestroy(a){mp(this._lView[1],this._lView,null,a)}markForCheck(){xx(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ex(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,a,d){mu(!0);try{Ex(s,a,d)}finally{mu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var a;this._appRef=null,vg(this._lView[1],a=this._lView,a[11],2,null,null)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=a}}class aO extends ch{constructor(a){super(a),this._view=a}detectChanges(){YC(this._view)}checkNoChanges(){!function(s){mu(!0);try{YC(s)}finally{mu(!1)}}(this._view)}get context(){return null}}const zI=function(s){return function(s,a,d){if(Mc(s)&&!d){const v=Wi(s.index,a);return new ch(v,v)}return 47&s.type?new ch(a[16],a):null}(Kn(),ot(),16==(16&s))};let Dv=(()=>{class s{}return s.__NG_ELEMENT_ID__=zI,s})();const Up=[new Iv],zw=new bv([new UI]),lO=new Vp(Up),hO=function(){return Hp(Kn(),ot())};let o1=(()=>{class s{}return s.__NG_ELEMENT_ID__=hO,s})();const pO=o1,Ru=class extends pO{constructor(a,d,v){super(),this._declarationLView=a,this._declarationTContainer=d,this.elementRef=v}createEmbeddedView(a){const d=this._declarationTContainer.tViews,v=Uf(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null);v[17]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[19];return null!==E&&(v[19]=E.createEmbeddedView(d)),yg(d,v,a),new ch(v)}};function Hp(s,a){return 4&s.type?new Ru(a,s,Ql(s,a)):null}class ed{}class s1{}const Gp=function(){return u1(Kn(),ot())};let bc=(()=>{class s{}return s.__NG_ELEMENT_ID__=Gp,s})();const mO=bc,Wp=class extends mO{constructor(a,d,v){super(),this._lContainer=a,this._hostTNode=d,this._hostLView=v}get element(){return Ql(this._hostTNode,this._hostLView)}get injector(){return new Bo(this._hostTNode,this._hostLView)}get parentInjector(){const a=Qn(this._hostTNode,this._hostLView);if(rr(a)){const d=Ai(a,this._hostLView),v=Vr(a);return new Bo(d[1].data[v+8],d)}return new Bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const d=$I(this._lContainer);return null!==d&&d[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,d,v){const y=a.createEmbeddedView(d||{});return this.insert(y,v),y}createComponent(a,d,v,y,E){const T=v||this.parentInjector;if(!E&&null==a.ngModule&&T){const F=T.get(ed,null);F&&(E=F)}const N=a.create(T,y,void 0,E);return this.insert(N.hostView,d),N}insert(a,d){const v=a._lView,y=v[1];if(Ni(v[3])){const W=this.indexOf(a);if(-1!==W)this.detach(W);else{const Z=v[3],X=new Wp(Z,Z[6],Z[3]);X.detach(X.indexOf(a))}}const E=this._adjustIndex(d),T=this._lContainer;!function(s,a,d,v){const y=10+v,E=d.length;v>0&&(d[y-1][4]=a),v<E-10?(a[4]=d[y],wa(d,10+v,a)):(d.push(a),a[4]=null),a[3]=d;const T=a[17];null!==T&&d!==T&&function(s,a){const d=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===d?s[9]=[a]:d.push(a)}(T,a);const N=a[19];null!==N&&N.insertView(s),a[2]|=128}(y,v,T,E);const N=Mm(E,T),F=v[11],U=mg(F,T[7]);return null!==U&&function(s,a,d,v,y,E){v[0]=y,v[6]=a,vg(s,v,d,1,y,E)}(y,T[6],F,v,U,N),a.attachToViewContainerRef(),wa(qw(T),E,a),a}move(a,d){return this.insert(a,d)}indexOf(a){const d=$I(this._lContainer);return null!==d?d.indexOf(a):-1}remove(a){const d=this._adjustIndex(a,-1),v=qy(this._lContainer,d);v&&(co(qw(this._lContainer),d),nl(v[1],v))}detach(a){const d=this._adjustIndex(a,-1),v=qy(this._lContainer,d);return v&&null!=co(qw(this._lContainer),d)?new ch(v):null}_adjustIndex(a,d=0){return null==a?this.length+d:a}};function $I(s){return s[8]}function qw(s){return s[8]||(s[8]=[])}function u1(s,a){let d;const v=a[s.index];if(Ni(v))d=v;else{let y;if(8&s.type)y=jn(v);else{const E=a[11];y=E.createComment("");const T=Fi(s,a);Ff(E,mg(E,T),y,function(s,a){return Xn(s)?s.nextSibling(a):a.nextSibling}(E,T),!1)}a[s.index]=d=KC(v,a,y,s),Wd(a,d)}return new Wp(d,s,a)}const Yp={};class pb extends Fp{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const d=ni(a);return new qv(d,this.ngModule)}}function gb(s){const a=[];for(let d in s)s.hasOwnProperty(d)&&a.push({propName:s[d],templateName:d});return a}const cE=new Jn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ug});class qv extends Vw{constructor(a,d){super(),this.componentDef=a,this.ngModule=d,this.componentType=a.type,this.selector=a.selectors.map(iD).join(","),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!d}get inputs(){return gb(this.componentDef.inputs)}get outputs(){return gb(this.componentDef.outputs)}create(a,d,v,y){const E=(y=y||this.ngModule)?function(s,a){return{get:(d,v,y)=>{const E=s.get(d,Yp,y);return E!==Yp||v===Yp?E:a.get(d,v,y)}}}(a,y.injector):a,T=E.get(ef,Mo),N=E.get(t1,null),F=T.createRenderer(null,this.componentDef),U=this.componentDef.selectors[0][0]||"div",W=v?function(s,a,d){if(Xn(s))return s.selectRootElement(a,d===ft.ShadowDom);let v="string"==typeof a?s.querySelector(a):a;return v.textContent="",v}(F,v,this.componentDef.encapsulation):hg(T.createRenderer(null,this.componentDef),U,function(s){const a=s.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(U)),Z=this.componentDef.onPush?576:528,X=function(s,a){return{components:[],scheduler:s||ug,clean:XC,playerHandler:a||null,flags:0}}(),le=Wm(0,null,null,1,0,null,null,null,null,null),ye=Uf(null,le,X,Z,null,null,T,F,N,E);let He,be;oc(ye);try{const ut=function(s,a,d,v,y,E){const T=d[1];d[20]=s;const F=hp(T,20,2,"#host",null),U=F.mergedAttrs=a.hostAttrs;null!==U&&(Ax(F,U,!0),null!==s&&(ts(y,s,U),null!==F.classes&&EC(y,s,F.classes),null!==F.styles&&Xy(y,s,F.styles)));const W=v.createRenderer(s,a),Z=Uf(d,Gd(a),null,a.onPush?64:16,d[20],F,v,W,E||null,null);return T.firstCreatePass&&(Ur(Vs(F,d),T,a.type),wg(T,F),$C(F,d.length,1)),Wd(d,Z),d[20]=Z}(W,this.componentDef,ye,T,F);if(W)if(v)ts(F,W,["ng-version",Av.full]);else{const{attrs:et,classes:Lt}=function(s){const a=[],d=[];let v=1,y=2;for(;v<s.length;){let E=s[v];if("string"==typeof E)2===y?""!==E&&a.push(E,s[++v]):8===y&&d.push(E);else{if(!bu(y))break;y=E}v++}return{attrs:a,classes:d}}(this.componentDef.selectors[0]);et&&ts(F,W,et),Lt&&Lt.length>0&&EC(F,W,Lt.join(" "))}if(be=Fc(le,20),void 0!==d){const et=be.projection=[];for(let Lt=0;Lt<this.ngContentSelectors.length;Lt++){const Jt=d[Lt];et.push(null!=Jt?Array.from(Jt):null)}}He=function(s,a,d,v,y){const E=d[1],T=function(s,a,d){const v=Kn();s.firstCreatePass&&(d.providersResolver&&d.providersResolver(d),qC(s,v,a,Hf(s,a,1,null),d));const y=Xr(a,s,v.directiveStart,v);Uo(y,a);const E=Fi(v,a);return E&&Uo(E,a),y}(E,d,a);if(v.components.push(T),s[8]=T,y&&y.forEach(F=>F(T,a)),a.contentQueries){const F=Kn();a.contentQueries(1,T,F.directiveStart)}const N=Kn();return!E.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Ms(N.index),HC(d[1],N,0,N.directiveStart,N.directiveEnd,a),vp(a,T)),T}(ut,this.componentDef,ye,X,[qD]),yg(le,ye,null)}finally{Cu()}return new dE(this.componentType,He,Ql(be,ye),ye,be)}}class dE extends class{}{constructor(a,d,v,y,E){super(),this.location=v,this._rootLView=y,this._tNode=E,this.instance=d,this.hostView=this.changeDetectorRef=new aO(y),this.componentType=a}get injector(){return new Bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}const Qp=new Map;class jO extends ed{constructor(a,d){super(),this._parent=d,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new pb(this);const v=To(a),y=a[Zt]||null;y&&Zg(y),this._bootstrapComponents=Aa(v.bootstrap),this._r3Injector=sA(a,d,[{provide:ed,useValue:this},{provide:Fp,useValue:this.componentFactoryResolver}],xe(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,d=yr.THROW_IF_NOT_FOUND,v=At.Default){return a===yr||a===ed||a===Gf?this:this._r3Injector.get(a,d,v)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class pE extends s1{constructor(a){super(),this.moduleType=a,null!==To(a)&&function(s){const a=new Set;!function d(v){const y=To(v,!0),E=y.id;null!==E&&(function(s,a,d){if(a&&a!==d)throw new Error(`Duplicate module registered for ${s} - ${xe(a)} vs ${xe(a.name)}`)}(E,Qp.get(E),v),Qp.set(E,v));const T=Aa(y.imports);for(const N of T)a.has(N)||(a.add(N),d(N))}(s)}(a)}create(a){return new jO(this.moduleType,a)}}function Jv(s){return a=>{setTimeout(s,void 0,a)}}const Sa=class extends A.xQ{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,d,v){var y,E,T;let N=a,F=d||(()=>null),U=v;if(a&&"object"==typeof a){const Z=a;N=null===(y=Z.next)||void 0===y?void 0:y.bind(Z),F=null===(E=Z.error)||void 0===E?void 0:E.bind(Z),U=null===(T=Z.complete)||void 0===T?void 0:T.bind(Z)}this.__isAsync&&(F=Jv(F),N&&(N=Jv(N)),U&&(U=Jv(U)));const W=super.subscribe({next:N,error:F,complete:U});return a instanceof Ie.w&&a.add(W),W}};function Cb(){return this._results[$f()]()}class w1{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=$f(),v=w1.prototype;v[d]||(v[d]=Cb)}get changes(){return this._changes||(this._changes=new Sa)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,d){return this._results.reduce(a,d)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,d){const v=this;v.dirty=!1;const y=mo(a);(this._changesDetected=!function(s,a,d){if(s.length!==a.length)return!1;for(let v=0;v<s.length;v++){let y=s[v],E=a[v];if(d&&(y=d(y),E=d(E)),E!==y)return!1}return!0}(v._results,y,d))&&(v._results=y,v.length=y.length,v.last=y[this.length-1],v.first=y[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class xE{constructor(a){this.queryList=a,this.matches=null}clone(){return new xE(this.queryList)}setDirty(){this.queryList.setDirty()}}class E1{constructor(a=[]){this.queries=a}createEmbeddedView(a){const d=a.queries;if(null!==d){const v=null!==a.contentQueries?a.contentQueries[0]:d.length,y=[];for(let E=0;E<v;E++){const T=d.getByIndex(E);y.push(this.queries[T.indexInDeclarationView].clone())}return new E1(y)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let d=0;d<this.queries.length;d++)null!==Db(a,d).matches&&this.queries[d].setDirty()}}class Ab{constructor(a,d,v=null){this.predicate=a,this.flags=d,this.read=v}}class wE{constructor(a=[]){this.queries=a}elementStart(a,d){for(let v=0;v<this.queries.length;v++)this.queries[v].elementStart(a,d)}elementEnd(a){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(a)}embeddedTView(a){let d=null;for(let v=0;v<this.length;v++){const y=null!==d?d.length:0,E=this.getByIndex(v).embeddedTView(a,y);E&&(E.indexInDeclarationView=v,null!==d?d.push(E):d=[E])}return null!==d?new wE(d):null}template(a,d){for(let v=0;v<this.queries.length;v++)this.queries[v].template(a,d)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class EE{constructor(a,d=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(a,d){this.isApplyingToNode(d)&&this.matchTNode(a,d)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,d){this.elementStart(a,d)}embeddedTView(a,d){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,d),new EE(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let v=a.parent;for(;null!==v&&8&v.type&&v.index!==d;)v=v.parent;return d===(null!==v?v.index:-1)}return this._appliesToNextNode}matchTNode(a,d){const v=this.metadata.predicate;if(Array.isArray(v))for(let y=0;y<v.length;y++){const E=v[y];this.matchTNodeWithReadOption(a,d,Ib(d,E)),this.matchTNodeWithReadOption(a,d,Hs(d,a,E,!1,!1))}else v===o1?4&d.type&&this.matchTNodeWithReadOption(a,d,-1):this.matchTNodeWithReadOption(a,d,Hs(d,a,v,!1,!1))}matchTNodeWithReadOption(a,d,v){if(null!==v){const y=this.metadata.read;if(null!==y)if(y===Ia||y===bc||y===o1&&4&d.type)this.addMatch(d.index,-2);else{const E=Hs(d,a,y,!1,!1);null!==E&&this.addMatch(d.index,E)}else this.addMatch(d.index,v)}}addMatch(a,d){null===this.matches?this.matches=[a,d]:this.matches.push(a,d)}}function Ib(s,a){const d=s.localNames;if(null!==d)for(let v=0;v<d.length;v+=2)if(d[v]===a)return d[v+1];return null}function XO(s,a,d,v){return-1===d?function(s,a){return 11&s.type?Ql(s,a):4&s.type?Hp(s,a):null}(a,s):-2===d?function(s,a,d){return d===Ia?Ql(a,s):d===o1?Hp(a,s):d===bc?u1(a,s):void 0}(s,a,v):Xr(s,s[1],d,a)}function e_(s,a,d,v){const y=a[19].queries[v];if(null===y.matches){const E=s.data,T=d.matches,N=[];for(let F=0;F<T.length;F+=2){const U=T[F];N.push(U<0?null:XO(a,E[U],T[F+1],d.metadata.read))}y.matches=N}return y.matches}function t_(s,a,d,v){const y=s.queries.getByIndex(d),E=y.matches;if(null!==E){const T=e_(s,a,y,d);for(let N=0;N<E.length;N+=2){const F=E[N];if(F>0)v.push(T[N/2]);else{const U=E[N+1],W=a[-F];for(let Z=10;Z<W.length;Z++){const X=W[Z];X[17]===X[3]&&t_(X[1],X,U,v)}if(null!==W[9]){const Z=W[9];for(let X=0;X<Z.length;X++){const le=Z[X];t_(le[1],le,U,v)}}}}}return v}function bb(s){const a=ot(),d=ln(),v=Cd();yu(v+1);const y=Db(d,v);if(s.dirty&&nc(a)===(2==(2&y.metadata.flags))){if(null===y.matches)s.reset([]);else{const E=y.crossesNgTemplate?t_(d,a,v,[]):e_(d,a,y,v);s.reset(E,yn),s.notifyOnChanges()}return!0}return!1}function mh(s,a,d){const v=ln();v.firstCreatePass&&(Tb(v,new Ab(s,a,d),-1),2==(2&a)&&(v.staticViewQueries=!0)),C1(v,ot(),a)}function rd(s,a,d,v){const y=ln();if(y.firstCreatePass){const E=Kn();Tb(y,new Ab(a,d,v),E.index),function(s,a){const d=s.contentQueries||(s.contentQueries=[]);a!==(d.length?d[d.length-1]:-1)&&d.push(s.queries.length-1,a)}(y,s),2==(2&d)&&(y.staticContentQueries=!0)}C1(y,ot(),d)}function Sb(){return s=ot(),a=Cd(),s[19].queries[a].queryList;var s,a}function C1(s,a,d){const v=new w1(4==(4&d));mp(s,a,v,v.destroy),null===a[19]&&(a[19]=new E1),a[19].queries.push(new xE(v))}function Tb(s,a,d){null===s.queries&&(s.queries=new wE),s.queries.track(new EE(a,d))}function Db(s,a){return s.queries.getByIndex(a)}const kE=new Jn("Application Initializer");let r0=(()=>{class s{constructor(d){this.appInits=d,this.resolve=Cv,this.reject=Cv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((v,y)=>{this.resolve=v,this.reject=y})}runInitializers(){if(this.initialized)return;const d=[],v=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let y=0;y<this.appInits.length;y++){const E=this.appInits[y]();if(Qx(E))d.push(E);else if(Vg(E)){const T=new Promise((N,F)=>{E.subscribe({complete:N,error:F})});d.push(T)}}Promise.all(d).then(()=>{v()}).catch(y=>{this.reject(y)}),0===d.length&&v(),this.initialized=!0}}return s.\u0275fac=function(d){return new(d||s)(Vt(kE,8))},s.\u0275prov=Wn({token:s,factory:s.\u0275fac}),s})();const zb=new Jn("AppId"),zM={provide:zb,useFactory:function(){return`${LE()}${LE()}${LE()}`},deps:[]};function LE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $b=new Jn("Platform Initializer"),qb=new Jn("Platform ID"),BE=new Jn("appBootstrapListener");let Zb=(()=>{class s{log(d){console.log(d)}warn(d){console.warn(d)}}return s.\u0275fac=function(d){return new(d||s)},s.\u0275prov=Wn({token:s,factory:s.\u0275fac}),s})();const r_=new Jn("LocaleId"),Kb=new Jn("DefaultCurrencyCode");class dR{constructor(a,d){this.ngModuleFactory=a,this.componentFactories=d}}const VE=function(s){return new pE(s)},Yb=VE,Xb=function(s){return Promise.resolve(VE(s))},Qb=function(s){const a=VE(s),v=Aa(To(s).declarations).reduce((y,E)=>{const T=ni(E);return T&&y.push(new qv(T)),y},[]);return new dR(a,v)},Jb=Qb,eS=function(s){return Promise.resolve(Qb(s))};let o0=(()=>{class s{constructor(){this.compileModuleSync=Yb,this.compileModuleAsync=Xb,this.compileModuleAndAllComponentsSync=Jb,this.compileModuleAndAllComponentsAsync=eS}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return s.\u0275fac=function(d){return new(d||s)},s.\u0275prov=Wn({token:s,factory:s.\u0275fac}),s})();const gR=(()=>Promise.resolve(0))();function UE(s){"undefined"==typeof Zone?gR.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ja{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:v=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Sa(!1),this.onMicrotaskEmpty=new Sa(!1),this.onStable=new Sa(!1),this.onError=new Sa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const y=this;y._nesting=0,y._outer=y._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(y._inner=y._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(y._inner=y._inner.fork(Zone.longStackTraceZoneSpec)),y.shouldCoalesceEventChangeDetection=!v&&d,y.shouldCoalesceRunChangeDetection=v,y.lastRequestAnimationFrameId=-1,y.nativeRequestAnimationFrame=function(){let s=Fn.requestAnimationFrame,a=Fn.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&a){const d=s[Zone.__symbol__("OriginalDelegate")];d&&(s=d);const v=a[Zone.__symbol__("OriginalDelegate")];v&&(a=v)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(s){const a=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Fn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,HE(s),s.isCheckStableRunning=!0,s_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),HE(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,v,y,E,T,N)=>{try{return rS(s),d.invokeTask(y,E,T,N)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===E.type||s.shouldCoalesceRunChangeDetection)&&a(),yR(s)}},onInvoke:(d,v,y,E,T,N,F)=>{try{return rS(s),d.invoke(y,E,T,N,F)}finally{s.shouldCoalesceRunChangeDetection&&a(),yR(s)}},onHasTask:(d,v,y,E)=>{d.hasTask(y,E),v===y&&("microTask"==E.change?(s._hasPendingMicrotasks=E.microTask,HE(s),s_(s)):"macroTask"==E.change&&(s.hasPendingMacrotasks=E.macroTask))},onHandleError:(d,v,y,E)=>(d.handleError(y,E),s.runOutsideAngular(()=>s.onError.emit(E)),!1)})}(y)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ja.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ja.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,d,v){return this._inner.run(a,d,v)}runTask(a,d,v,y){const E=this._inner,T=E.scheduleEventTask("NgZoneEvent: "+y,a,mR,Cv,Cv);try{return E.runTask(T,d,v)}finally{E.cancelTask(T)}}runGuarded(a,d,v){return this._inner.runGuarded(a,d,v)}runOutsideAngular(a){return this._outer.run(a)}}const mR={};function s_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function HE(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function rS(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function yR(s){s._nesting--,s_(s)}class a_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Sa,this.onMicrotaskEmpty=new Sa,this.onStable=new Sa,this.onError=new Sa}run(a,d,v){return a.apply(d,v)}runGuarded(a,d,v){return a.apply(d,v)}runOutsideAngular(a){return a()}runTask(a,d,v,y){return a.apply(d,v)}}let R1=(()=>{class s{constructor(d){this._ngZone=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ja.assertNotInAngularZone(),UE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())UE(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(v=>!v.updateCb||!v.updateCb(d)||(clearTimeout(v.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,v,y){let E=-1;v&&v>0&&(E=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==E),d(this._didWork,this.getPendingTasks())},v)),this._callbacks.push({doneCb:d,timeoutId:E,updateCb:y})}whenStable(d,v,y){if(y&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,v,y),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(d,v,y){return[]}}return s.\u0275fac=function(d){return new(d||s)(Vt(Ja))},s.\u0275prov=Wn({token:s,factory:s.\u0275fac}),s})(),u_=(()=>{class s{constructor(){this._applications=new Map,jE.addToWindow(this)}registerApplication(d,v){this._applications.set(d,v)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,v=!0){return jE.findTestabilityInTree(this,d,v)}}return s.\u0275fac=function(d){return new(d||s)},s.\u0275prov=Wn({token:s,factory:s.\u0275fac}),s})();class xR{addToWindow(a){}findTestabilityInTree(a,d,v){return null}}function wR(s){jE=s}let jE=new xR,pl=!0,bt=!1;function N1(){return bt=!0,pl}function pn(){if(bt)throw new Error("Cannot enable prod mode after platform setup.");pl=!1}let Da;const wo=new Jn("AllowMultipleToken");class sf{constructor(a,d){this.name=a,this.token=d}}function oS(s,a,d=[]){const v=`Platform: ${a}`,y=new Jn(v);return(E=[])=>{let T=aS();if(!T||T.injector.get(wo,!1))if(s)s(d.concat(E).concat({provide:y,useValue:!0}));else{const N=d.concat(E).concat({provide:y,useValue:!0},{provide:Cg,useValue:"platform"});!function(s){if(Da&&!Da.destroyed&&!Da.injector.get(wo,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Da=s.get(WE);const a=s.get($b,null);a&&a.forEach(d=>d())}(yr.create({providers:N,name:v}))}return function(s){const a=aS();if(!a)throw new Error("No platform exists!");if(!a.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return a}(y)}}function aS(){return Da&&!Da.destroyed?Da:null}let WE=(()=>{class s{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,v){const N=function(s,a){let d;return d="noop"===s?new a_:("zone.js"===s?void 0:s)||new Ja({enableLongStackTrace:N1(),shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),d}(v?v.ngZone:void 0,{ngZoneEventCoalescing:v&&v.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:v&&v.ngZoneRunCoalescing||!1}),F=[{provide:Ja,useValue:N}];return N.run(()=>{const U=yr.create({providers:F,parent:this.injector,name:d.moduleType.name}),W=d.create(U),Z=W.injector.get(S,null);if(!Z)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return N.runOutsideAngular(()=>{const X=N.onError.subscribe({next:le=>{Z.handleError(le)}});W.onDestroy(()=>{P1(this._modules,W),X.unsubscribe()})}),function(s,a,d){try{const v=d();return Qx(v)?v.catch(y=>{throw a.runOutsideAngular(()=>s.handleError(y)),y}):v}catch(v){throw a.runOutsideAngular(()=>s.handleError(v)),v}}(Z,N,()=>{const X=W.injector.get(r0);return X.runInitializers(),X.donePromise.then(()=>(Zg(W.injector.get(r_,$g)||$g),this._moduleDoBootstrap(W),W))})})}bootstrapModule(d,v=[]){const y=$E({},v);return function(s,a,d){const v=new pE(d);return Promise.resolve(v)}(0,0,d).then(E=>this.bootstrapModuleFactory(E,y))}_moduleDoBootstrap(d){const v=d.injector.get(fo);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(y=>v.bootstrap(y));else{if(!d.instance.ngDoBootstrap)throw new Error(`The module ${xe(d.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);d.instance.ngDoBootstrap(v)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(d){return new(d||s)(Vt(yr))},s.\u0275prov=Wn({token:s,factory:s.\u0275fac}),s})();function $E(s,a){return Array.isArray(a)?a.reduce($E,s):Object.assign(Object.assign({},s),a)}let fo=(()=>{class s{constructor(d,v,y,E,T){this._zone=d,this._injector=v,this._exceptionHandler=y,this._componentFactoryResolver=E,this._initStatus=T,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const N=new te.y(U=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{U.next(this._stable),U.complete()})}),F=new te.y(U=>{let W;this._zone.runOutsideAngular(()=>{W=this._zone.onStable.subscribe(()=>{Ja.assertNotInAngularZone(),UE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,U.next(!0))})})});const Z=this._zone.onUnstable.subscribe(()=>{Ja.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{U.next(!1)}))});return()=>{W.unsubscribe(),Z.unsubscribe()}});this.isStable=(0,Ue.T)(N,F.pipe((0,Te.B)()))}bootstrap(d,v){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let y;y=d instanceof Vw?d:this._componentFactoryResolver.resolveComponentFactory(d),this.componentTypes.push(y.componentType);const E=function(s){return s.isBoundToModule}(y)?void 0:this._injector.get(ed),N=y.create(yr.NULL,[],v||y.selector,E),F=N.location.nativeElement,U=N.injector.get(R1,null),W=U&&N.injector.get(u_);return U&&W&&W.registerApplication(F,U),N.onDestroy(()=>{this.detachView(N.hostView),P1(this.components,N),W&&W.unregisterApplication(F)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(d))}finally{this._runningTick=!1}}attachView(d){const v=d;this._views.push(v),v.attachToAppRef(this)}detachView(d){const v=d;P1(this._views,v),v.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d),this._injector.get(BE,[]).concat(this._bootstrapListeners).forEach(y=>y(d))}ngOnDestroy(){this._views.slice().forEach(d=>d.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(d){return new(d||s)(Vt(Ja),Vt(yr),Vt(S),Vt(Fp),Vt(r0))},s.\u0275prov=Wn({token:s,factory:s.\u0275fac}),s})();function P1(s,a){const d=s.indexOf(a);d>-1&&s.splice(d,1)}class cS{}class RR{}const s0={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let dS=(()=>{class s{constructor(d,v){this._compiler=d,this._config=v||s0}load(d){return this.loadAndCompile(d)}loadAndCompile(d){let[v,y]=d.split("#");return void 0===y&&(y="default"),J(8255)(v).then(E=>E[y]).then(E=>h_(E,v,y)).then(E=>this._compiler.compileModuleAsync(E))}loadFactory(d){let[v,y]=d.split("#"),E="NgFactory";return void 0===y&&(y="default",E=""),J(8255)(this._config.factoryPathPrefix+v+this._config.factoryPathSuffix).then(T=>T[y+E]).then(T=>h_(T,v,y))}}return s.\u0275fac=function(d){return new(d||s)(Vt(o0),Vt(RR,8))},s.\u0275prov=Wn({token:s,factory:s.\u0275fac}),s})();function h_(s,a,d){if(!s)throw new Error(`Cannot find '${d}' in '${a}'`);return s}const _S=function(s){return null},VR=oS(null,"core",[{provide:qb,useValue:"unknown"},{provide:WE,deps:[yr]},{provide:u_,deps:[]},{provide:Zb,deps:[]}]),y_=[{provide:fo,useClass:fo,deps:[Ja,yr,S,Fp,r0]},{provide:cE,deps:[Ja],useFactory:function(s){let a=[];return s.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(d){a.push(d)}}},{provide:r0,useClass:r0,deps:[[new Ca,kE]]},{provide:o0,useClass:o0,deps:[]},zM,{provide:bv,useFactory:function(){return zw},deps:[]},{provide:Vp,useFactory:function(){return lO},deps:[]},{provide:r_,useFactory:function(s){return Zg(s=s||"undefined"!=typeof $localize&&$localize.locale||$g),s},deps:[[new jr(r_),new Ca,new Yc]]},{provide:Kb,useValue:"USD"}];let UR=(()=>{class s{constructor(d){}}return s.\u0275fac=function(d){return new(d||s)(Vt(fo))},s.\u0275mod=au({type:s}),s.\u0275inj=gn({providers:y_}),s})()},8939:(Dt,tt,J)=>{"use strict";J.d(tt,{hO:()=>Ee,xv:()=>me,Dh:()=>xe,GT:()=>pe,cc:()=>Ye,on:()=>q,pX:()=>Te});var A=J(7716),Ie=J(7841),te=J(6643);Dt=J.hmd(Dt);const Ue=["ngOnDestroy"],Te=(Ce,Ve,ze,Xe={})=>new Proxy(Ce,{get:(lt,St)=>ze.runOutsideAngular(()=>{var nn;if(Ce[St])return(null===(nn=null==Xe?void 0:Xe.spy)||void 0===nn?void 0:nn.get)&&Xe.spy.get(St,Ce[St]),Ce[St];if(Ue.indexOf(St)>-1)return()=>{};const Et=Ve.toPromise().then(rt=>{const de=rt&&rt[St];return"function"==typeof de?de.bind(rt):de&&de.then?de.then(Le=>ze.run(()=>Le)):ze.run(()=>de)});return new Proxy(()=>{},{get:(rt,de)=>Et[de],apply:(rt,de,Le)=>Et.then(Me=>{var Oe;const dt=Me&&Me(...Le);return(null===(Oe=null==Xe?void 0:Xe.spy)||void 0===Oe?void 0:Oe.apply)&&Xe.spy.apply(St,Le,dt),dt})})})}),pe=(Ce,Ve)=>{Ve.forEach(ze=>{Object.getOwnPropertyNames(ze.prototype||ze).forEach(Xe=>{Object.defineProperty(Ce.prototype,Xe,Object.getOwnPropertyDescriptor(ze.prototype||ze,Xe))})})};class $e{constructor(Ve){return Ve}}const xe=new A.OlP("angularfire2.app.options"),me=new A.OlP("angularfire2.app.name");function q(Ce,Ve,ze){const lt="object"==typeof ze&&ze||{};lt.name=lt.name||"string"==typeof ze&&ze||"[DEFAULT]";const nn=Ie.Z.apps.filter(Et=>Et&&Et.name===lt.name)[0]||Ve.runOutsideAngular(()=>Ie.Z.initializeApp(Ce,lt));try{JSON.stringify(Ce)!==JSON.stringify(nn.options)&&se("error",`${nn.name} Firebase App already initialized with different options${Dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Et){}return new $e(nn)}const se=(Ce,...Ve)=>{(0,A.X6Q)()&&"undefined"!=typeof console&&console[Ce](...Ve)},re={provide:$e,useFactory:q,deps:[xe,A.R0b,[new A.FiY,me]]};let Ee=(()=>{class Ce{constructor(ze){Ie.Z.registerVersion("angularfire",te.q4.full,"core"),Ie.Z.registerVersion("angularfire",te.q4.full,"app-compat"),Ie.Z.registerVersion("angular",A.q4F.full,ze.toString())}static initializeApp(ze,Xe){return{ngModule:Ce,providers:[{provide:xe,useValue:ze},{provide:me,useValue:Xe}]}}}return Ce.\u0275fac=function(ze){return new(ze||Ce)(A.LFG(A.Lbi))},Ce.\u0275mod=A.oAB({type:Ce}),Ce.\u0275inj=A.cJS({providers:[re]}),Ce})();function Ye(Ce,Ve,ze,Xe,lt){const[,St,nn]=globalThis.\u0275AngularfireInstanceCache.find(Et=>Et[0]===Ce)||[];if(St)return function(Ce,Ve){try{return Ce.toString()===Ve.toString()}catch(ze){return Ce===Ve}}(lt,nn)||(Be("error",`${Ve} was already initialized on the ${ze} Firebase App with different settings.${Pe?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:lt,was:nn})),St;{const Et=Xe();return globalThis.\u0275AngularfireInstanceCache.push([Ce,Et,lt]),Et}}const Pe=!!Dt.hot,Be=(Ce,...Ve)=>{(0,A.X6Q)()&&"undefined"!=typeof console&&console[Ce](...Ve)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6643:(Dt,tt,J)=>{"use strict";J.d(tt,{q4:()=>q0,iC:()=>f,HU:()=>Vl,vb:()=>wa,JM:()=>Ct});var A=J(7716),Ie=J(2329),te=J(8239),Ue=J(5452),Te=J(3854),pe=J(6034),$e=J(5601),xe=J(6676);const me="@firebase/installations",q="0.5.2",re=`w:${q}`,Ee="FIS_v2",Ve=new Te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ze(h){return h instanceof Te.ZR&&h.code.includes("request-failed")}function Xe({projectId:h}){return`https://firebaseinstallations.googleapis.com/v1/projects/${h}/installations`}function lt(h){return{token:h.token,requestStatus:2,expiresIn:Me(h.expiresIn),creationTime:Date.now()}}function St(h,m){return nn.apply(this,arguments)}function nn(){return(nn=(0,te.Z)(function*(h,m){const w=(yield m.json()).error;return Ve.create("request-failed",{requestName:h,serverCode:w.code,serverMessage:w.message,serverStatus:w.status})})).apply(this,arguments)}function Et({apiKey:h}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":h})}function rt(h,{refreshToken:m}){const x=Et(h);return x.append("Authorization",function(h){return`${Ee} ${h}`}(m)),x}function de(h){return Le.apply(this,arguments)}function Le(){return(Le=(0,te.Z)(function*(h){const m=yield h();return m.status>=500&&m.status<600?h():m})).apply(this,arguments)}function Me(h){return Number(h.replace("s","000"))}function dt(h,m){return je.apply(this,arguments)}function je(){return(je=(0,te.Z)(function*(h,{fid:m}){const x=Xe(h),R={method:"POST",headers:Et(h),body:JSON.stringify({fid:m,authVersion:Ee,appId:h.appId,sdkVersion:re})},L=yield de(()=>fetch(x,R));if(L.ok){const V=yield L.json();return{fid:V.fid||m,registrationStatus:2,refreshToken:V.refreshToken,authToken:lt(V.authToken)}}throw yield St("Create Installation",L)})).apply(this,arguments)}function Nt(h){return new Promise(m=>{setTimeout(m,h)})}const tn=/^[cdef][\w-]{21}$/;function sn(){try{const h=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(h),h[0]=112+h[0]%16;const x=function(h){return function(h){return btoa(String.fromCharCode(...h)).replace(/\+/g,"-").replace(/\//g,"_")}(h).substr(0,22)}(h);return tn.test(x)?x:""}catch(h){return""}}function Zn(h){return`${h.appName}!${h.appId}`}const si=new Map;function Li(h,m){const x=Zn(h);gn(x,m),function(h,m){const x=(!ai&&"BroadcastChannel"in self&&(ai=new BroadcastChannel("[Firebase] FID Change"),ai.onmessage=h=>{gn(h.data.key,h.data.fid)}),ai);x&&x.postMessage({key:h,fid:m}),0===si.size&&ai&&(ai.close(),ai=null)}(x,m)}function gn(h,m){const x=si.get(h);if(x)for(const w of x)w(m)}let ai=null;const Bi="firebase-installations-store";let xi=null;function kr(){return xi||(xi=(0,xe.openDb)("firebase-installations-database",1,h=>{switch(h.oldVersion){case 0:h.createObjectStore(Bi)}})),xi}function At(h,m){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,te.Z)(function*(h,m){const x=Zn(h),b=(yield kr()).transaction(Bi,"readwrite"),R=b.objectStore(Bi),L=yield R.get(x);return yield R.put(m,x),yield b.complete,(!L||L.fid!==m.fid)&&Li(h,m.fid),m})).apply(this,arguments)}function wi(h){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,te.Z)(function*(h){const m=Zn(h),w=(yield kr()).transaction(Bi,"readwrite");yield w.objectStore(Bi).delete(m),yield w.complete})).apply(this,arguments)}function Mt(h,m){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,te.Z)(function*(h,m){const x=Zn(h),b=(yield kr()).transaction(Bi,"readwrite"),R=b.objectStore(Bi),L=yield R.get(x),V=m(L);return void 0===V?yield R.delete(x):yield R.put(V,x),yield b.complete,V&&(!L||L.fid!==V.fid)&&Li(h,V.fid),V})).apply(this,arguments)}function on(h){return xn.apply(this,arguments)}function xn(){return(xn=(0,te.Z)(function*(h){let m;const x=yield Mt(h,w=>{const b=ui(w),R=Un(h,b);return m=R.registrationPromise,R.installationEntry});return""===x.fid?{installationEntry:yield m}:{installationEntry:x,registrationPromise:m}})).apply(this,arguments)}function ui(h){return Fn(h||{fid:sn(),registrationStatus:0})}function Un(h,m){if(0===m.registrationStatus){if(!navigator.onLine)return{installationEntry:m,registrationPromise:Promise.reject(Ve.create("app-offline"))};const x={fid:m.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:x,registrationPromise:function(h,m){return Bt.apply(this,arguments)}(h,x)}}return 1===m.registrationStatus?{installationEntry:m,registrationPromise:Vi(h)}:{installationEntry:m}}function Bt(){return(Bt=(0,te.Z)(function*(h,m){try{return At(h,yield dt(h,m))}catch(x){throw ze(x)&&409===x.customData.serverCode?yield wi(h):yield At(h,{fid:m.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Vi(h){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,te.Z)(function*(h){let m=yield $r(h);for(;1===m.registrationStatus;)yield Nt(100),m=yield $r(h);if(0===m.registrationStatus){const{installationEntry:x,registrationPromise:w}=yield on(h);return w||x}return m})).apply(this,arguments)}function $r(h){return Mt(h,m=>{if(!m)throw Ve.create("installation-not-found");return Fn(m)})}function Fn(h){return function(h){return 1===h.registrationStatus&&h.registrationTime+1e4<Date.now()}(h)?{fid:h.fid,registrationStatus:0}:h}function Ma(h,m){return ue.apply(this,arguments)}function ue(){return(ue=(0,te.Z)(function*({appConfig:h,platformLoggerProvider:m},x){const w=he(h,x),b=rt(h,x),R=m.getImmediate({optional:!0});R&&b.append("x-firebase-client",R.getPlatformInfoString());const V={method:"POST",headers:b,body:JSON.stringify({installation:{sdkVersion:re}})},H=yield de(()=>fetch(w,V));if(H.ok)return lt(yield H.json());throw yield St("Generate Auth Token",H)})).apply(this,arguments)}function he(h,{fid:m}){return`${Xe(h)}/${m}/authTokens:generate`}function ae(h){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,te.Z)(function*(h,m=!1){let x;const w=yield Mt(h.appConfig,R=>{if(!ur(R))throw Ve.create("not-registered");const L=R.authToken;if(!m&&Ui(L))return R;if(1===L.requestStatus)return x=Fe(h,m),R;{if(!navigator.onLine)throw Ve.create("app-offline");const V=Rn(R);return x=wn(h,V),V}});return x?yield x:w.authToken})).apply(this,arguments)}function Fe(h,m){return It.apply(this,arguments)}function It(){return(It=(0,te.Z)(function*(h,m){let x=yield Zt(h.appConfig);for(;1===x.authToken.requestStatus;)yield Nt(100),x=yield Zt(h.appConfig);const w=x.authToken;return 0===w.requestStatus?ae(h,m):w})).apply(this,arguments)}function Zt(h){return Mt(h,m=>{if(!ur(m))throw Ve.create("not-registered");return function(h){return 1===h.requestStatus&&h.requestTime+1e4<Date.now()}(m.authToken)?Object.assign(Object.assign({},m),{authToken:{requestStatus:0}}):m})}function wn(h,m){return zn.apply(this,arguments)}function zn(){return(zn=(0,te.Z)(function*(h,m){try{const x=yield Ma(h,m),w=Object.assign(Object.assign({},m),{authToken:x});return yield At(h.appConfig,w),x}catch(x){if(!ze(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const w=Object.assign(Object.assign({},m),{authToken:{requestStatus:0}});yield At(h.appConfig,w)}else yield wi(h.appConfig);throw x}})).apply(this,arguments)}function ur(h){return void 0!==h&&2===h.registrationStatus}function Ui(h){return 2===h.requestStatus&&!function(h){const m=Date.now();return m<h.creationTime||h.creationTime+h.expiresIn<m+36e5}(h)}function Rn(h){const m={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},h),{authToken:m})}function au(){return(au=(0,te.Z)(function*(h){const m=h,{installationEntry:x,registrationPromise:w}=yield on(m.appConfig);return w?w.catch(console.error):ae(m).catch(console.error),x.fid})).apply(this,arguments)}function Or(){return(Or=(0,te.Z)(function*(h,m=!1){const x=h;return yield Pc(x.appConfig),(yield ae(x,m)).token})).apply(this,arguments)}function Pc(h){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,te.Z)(function*(h){const{registrationPromise:m}=yield on(h);m&&(yield m)})).apply(this,arguments)}function Hn(h){return Ve.create("missing-app-config-values",{valueName:h})}const Ri="installations";(0,Ue._registerComponent)(new pe.wA(Ri,h=>{const m=h.getProvider("app").getImmediate();return{app:m,appConfig:function(h){if(!h||!h.options)throw Hn("App Configuration");if(!h.name)throw Hn("App Name");const m=["projectId","apiKey","appId"];for(const x of m)if(!h.options[x])throw Hn(x);return{appName:h.name,projectId:h.options.projectId,apiKey:h.options.apiKey,appId:h.options.appId}}(m),platformLoggerProvider:(0,Ue._getProvider)(m,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,Ue._registerComponent)(new pe.wA("installations-internal",h=>{const m=h.getProvider("app").getImmediate(),x=(0,Ue._getProvider)(m,Ri).getImmediate();return{getId:()=>function(h){return au.apply(this,arguments)}(x),getToken:b=>function(h){return Or.apply(this,arguments)}(x,b)}},"PRIVATE")),(0,Ue.registerVersion)(me,q),(0,Ue.registerVersion)(me,q,"esm2017");const ua="@firebase/remote-config",_r=new Te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class qu{constructor(m,x,w,b){this.client=m,this.storage=x,this.storageCache=w,this.logger=b}isCachedDataFresh(m,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const w=Date.now()-x,b=w<=m;return this.logger.debug(`Config fetch cache check. Cache age millis: ${w}. Cache max age millis (minimumFetchIntervalMillis setting): ${m}. Is cache hit: ${b}.`),b}fetch(m){var x=this;return(0,te.Z)(function*(){const[w,b]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(b&&x.isCachedDataFresh(m.cacheMaxAgeMillis,w))return b;m.eTag=b&&b.eTag;const R=yield x.client.fetch(m),L=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===R.status&&L.push(x.storage.setLastSuccessfulFetchResponse(R)),yield Promise.all(L),R})()}}function Pi(h=navigator){return h.languages&&h.languages[0]||h.language}class Kt{constructor(m,x,w,b,R,L){this.firebaseInstallations=m,this.sdkVersion=x,this.namespace=w,this.projectId=b,this.apiKey=R,this.appId=L}fetch(m){var x=this;return(0,te.Z)(function*(){const[w,b]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),L=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,V={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":m.eTag||"*"},H={sdk_version:x.sdkVersion,app_instance_id:w,app_instance_id_token:b,app_id:x.appId,language_code:Pi()},j={method:"POST",headers:V,body:JSON.stringify(H)},K=fetch(L,j),oe=new Promise((Je,st)=>{m.signal.addEventListener(()=>{const pt=new Error("The operation was aborted.");pt.name="AbortError",st(pt)})});let _e;try{yield Promise.race([K,oe]),_e=yield K}catch(Je){let st="fetch-client-network";throw"AbortError"===Je.name&&(st="fetch-timeout"),_r.create(st,{originalErrorMessage:Je.message})}let ve=_e.status;const ge=_e.headers.get("ETag")||void 0;let Ne,Ge;if(200===_e.status){let Je;try{Je=yield _e.json()}catch(st){throw _r.create("fetch-client-parse",{originalErrorMessage:st.message})}Ne=Je.entries,Ge=Je.state}if("INSTANCE_STATE_UNSPECIFIED"===Ge?ve=500:"NO_CHANGE"===Ge?ve=304:("NO_TEMPLATE"===Ge||"EMPTY_CONFIG"===Ge)&&(Ne={}),304!==ve&&200!==ve)throw _r.create("fetch-status",{httpStatus:ve});return{status:ve,eTag:ge,config:Ne}})()}}class Yo{constructor(m,x){this.client=m,this.storage=x}fetch(m){var x=this;return(0,te.Z)(function*(){const w=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(m,w)})()}attemptFetch(m,{throttleEndTimeMillis:x,backoffCount:w}){var b=this;return(0,te.Z)(function*(){yield function(h,m){return new Promise((x,w)=>{const b=Math.max(m-Date.now(),0),R=setTimeout(x,b);h.addEventListener(()=>{clearTimeout(R),w(_r.create("fetch-throttle",{throttleEndTimeMillis:m}))})})}(m.signal,x);try{const R=yield b.client.fetch(m);return yield b.storage.deleteThrottleMetadata(),R}catch(R){if(!function(h){if(!(h instanceof Te.ZR&&h.customData))return!1;const m=Number(h.customData.httpStatus);return 429===m||500===m||503===m||504===m}(R))throw R;const L={throttleEndTimeMillis:Date.now()+(0,Te.$s)(w),backoffCount:w+1};return yield b.storage.setThrottleMetadata(L),b.attemptFetch(m,L)}})()}}class xf{constructor(m,x,w,b,R){this.app=m,this._client=x,this._storageCache=w,this._storage=b,this._logger=R,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function fr(h,m){const x=h.target.error||void 0;return _r.create(m,{originalErrorMessage:x&&x.message})}const du="app_namespace_store";class Zu{constructor(m,x,w,b=function(){return new Promise((h,m)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=w=>{m(fr(w,"storage-open"))},x.onsuccess=w=>{h(w.target.result)},x.onupgradeneeded=w=>{const b=w.target.result;switch(w.oldVersion){case 0:b.createObjectStore(du,{keyPath:"compositeKey"})}}}catch(x){m(_r.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=m,this.appName=x,this.namespace=w,this.openDbPromise=b}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(m){return this.set("last_fetch_status",m)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(m){return this.set("last_successful_fetch_timestamp_millis",m)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(m){return this.set("last_successful_fetch_response",m)}getActiveConfig(){return this.get("active_config")}setActiveConfig(m){return this.set("active_config",m)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(m){return this.set("active_config_etag",m)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(m){return this.set("throttle_metadata",m)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(m){var x=this;return(0,te.Z)(function*(){const w=yield x.openDbPromise;return new Promise((b,R)=>{const V=w.transaction([du],"readonly").objectStore(du),H=x.createCompositeKey(m);try{const j=V.get(H);j.onerror=K=>{R(fr(K,"storage-get"))},j.onsuccess=K=>{const oe=K.target.result;b(oe?oe.value:void 0)}}catch(j){R(_r.create("storage-get",{originalErrorMessage:j&&j.message}))}})})()}set(m,x){var w=this;return(0,te.Z)(function*(){const b=yield w.openDbPromise;return new Promise((R,L)=>{const H=b.transaction([du],"readwrite").objectStore(du),j=w.createCompositeKey(m);try{const K=H.put({compositeKey:j,value:x});K.onerror=oe=>{L(fr(oe,"storage-set"))},K.onsuccess=()=>{R()}}catch(K){L(_r.create("storage-set",{originalErrorMessage:K&&K.message}))}})})()}delete(m){var x=this;return(0,te.Z)(function*(){const w=yield x.openDbPromise;return new Promise((b,R)=>{const V=w.transaction([du],"readwrite").objectStore(du),H=x.createCompositeKey(m);try{const j=V.delete(H);j.onerror=K=>{R(fr(K,"storage-delete"))},j.onsuccess=()=>{b()}}catch(j){R(_r.create("storage-delete",{originalErrorMessage:j&&j.message}))}})})()}createCompositeKey(m){return[this.appId,this.appName,this.namespace,m].join()}}class fu{constructor(m){this.storage=m}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var m=this;return(0,te.Z)(function*(){const x=m.storage.getLastFetchStatus(),w=m.storage.getLastSuccessfulFetchTimestampMillis(),b=m.storage.getActiveConfig(),R=yield x;R&&(m.lastFetchStatus=R);const L=yield w;L&&(m.lastSuccessfulFetchTimestampMillis=L);const V=yield b;V&&(m.activeConfig=V)})()}setLastFetchStatus(m){return this.lastFetchStatus=m,this.storage.setLastFetchStatus(m)}setLastSuccessfulFetchTimestampMillis(m){return this.lastSuccessfulFetchTimestampMillis=m,this.storage.setLastSuccessfulFetchTimestampMillis(m)}setActiveConfig(m){return this.activeConfig=m,this.storage.setActiveConfig(m)}}function kh(){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,te.Z)(function*(){if(!(0,Te.hl)())return!1;try{return yield(0,Te.eu)()}catch(h){return!1}})).apply(this,arguments)}(0,Ue._registerComponent)(new pe.wA("remote-config",function(m,{instanceIdentifier:x}){const w=m.getProvider("app").getImmediate(),b=m.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw _r.create("registration-window");if(!(0,Te.hl)())throw _r.create("indexed-db-unavailable");const{projectId:R,apiKey:L,appId:V}=w.options;if(!R)throw _r.create("registration-project-id");if(!L)throw _r.create("registration-api-key");if(!V)throw _r.create("registration-app-id");const H=new Zu(V,w.name,x=x||"firebase"),j=new fu(H),K=new $e.Yd(ua);K.logLevel=$e.in.ERROR;const oe=new Kt(b,Ue.SDK_VERSION,x,R,L,V),_e=new Yo(oe,H),ve=new qu(_e,H,j,K),ge=new xf(w,ve,j,H,K);return function(h){const m=(0,Te.m9)(h);m._initializePromise||(m._initializePromise=m._storageCache.loadFromStorage().then(()=>{m._isInitializationComplete=!0}))}(ge),ge},"PUBLIC").setMultipleInstances(!0)),(0,Ue.registerVersion)(ua,"0.3.1"),(0,Ue.registerVersion)(ua,"0.3.1","esm2017");const Xo="/firebase-messaging-sw.js",Se="/firebase-cloud-messaging-push-scope",ee="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Mi="google.c.a.c_id",Lr="google.c.a.c_l",Yu="google.c.a.ts",fa="google.c.a.e";var Rs=(()=>{return(h=Rs||(Rs={})).PUSH_RECEIVED="push-received",h.NOTIFICATION_CLICKED="notification-clicked",Rs;var h})();function No(h){const m=new Uint8Array(h);return btoa(String.fromCharCode(...m)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gi(h){const x=(h+"=".repeat((4-h.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),w=atob(x),b=new Uint8Array(w.length);for(let R=0;R<w.length;++R)b[R]=w.charCodeAt(R);return b}const Ln="fcm_token_details_db",Il="fcm_token_object_Store";function Po(h){return ka.apply(this,arguments)}function ka(){return(ka=(0,te.Z)(function*(h){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(R=>R.name).includes(Ln))return null;let m=null;return(yield(0,xe.openDb)(Ln,5,function(){var w=(0,te.Z)(function*(b){var R;if(b.oldVersion<2||!b.objectStoreNames.contains(Il))return;const L=b.transaction.objectStore(Il),V=yield L.index("fcmSenderId").get(h);if(yield L.clear(),V)if(2===b.oldVersion){const H=V;if(!H.auth||!H.p256dh||!H.endpoint)return;m={token:H.fcmToken,createTime:null!==(R=H.createTime)&&void 0!==R?R:Date.now(),subscriptionOptions:{auth:H.auth,p256dh:H.p256dh,endpoint:H.endpoint,swScope:H.swScope,vapidKey:"string"==typeof H.vapidKey?H.vapidKey:No(H.vapidKey)}}}else if(3===b.oldVersion){const H=V;m={token:H.fcmToken,createTime:H.createTime,subscriptionOptions:{auth:No(H.auth),p256dh:No(H.p256dh),endpoint:H.endpoint,swScope:H.swScope,vapidKey:No(H.vapidKey)}}}else if(4===b.oldVersion){const H=V;m={token:H.fcmToken,createTime:H.createTime,subscriptionOptions:{auth:No(H.auth),p256dh:No(H.p256dh),endpoint:H.endpoint,swScope:H.swScope,vapidKey:No(H.vapidKey)}}}});return function(b){return w.apply(this,arguments)}}())).close(),yield(0,xe.deleteDb)(Ln),yield(0,xe.deleteDb)("fcm_vapid_details_db"),yield(0,xe.deleteDb)("undefined"),Xu(m)?m:null})).apply(this,arguments)}function Xu(h){if(!h||!h.subscriptionOptions)return!1;const{subscriptionOptions:m}=h;return"number"==typeof h.createTime&&h.createTime>0&&"string"==typeof h.token&&h.token.length>0&&"string"==typeof m.auth&&m.auth.length>0&&"string"==typeof m.p256dh&&m.p256dh.length>0&&"string"==typeof m.endpoint&&m.endpoint.length>0&&"string"==typeof m.swScope&&m.swScope.length>0&&"string"==typeof m.vapidKey&&m.vapidKey.length>0}const ha="firebase-messaging-store";let Ju=null;function Xn(){return Ju||(Ju=(0,xe.openDb)("firebase-messaging-database",1,h=>{switch(h.oldVersion){case 0:h.createObjectStore(ha)}})),Ju}function ec(h){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,te.Z)(function*(h){const m=pa(h),w=yield(yield Xn()).transaction(ha).objectStore(ha).get(m);if(w)return w;{const b=yield Po(h.appConfig.senderId);if(b)return yield tc(h,b),b}})).apply(this,arguments)}function tc(h,m){return jn.apply(this,arguments)}function jn(){return(jn=(0,te.Z)(function*(h,m){const x=pa(h),b=(yield Xn()).transaction(ha,"readwrite");return yield b.objectStore(ha).put(m,x),yield b.complete,m})).apply(this,arguments)}function bl(h){return En.apply(this,arguments)}function En(){return(En=(0,te.Z)(function*(h){const m=pa(h),w=(yield Xn()).transaction(ha,"readwrite");yield w.objectStore(ha).delete(m),yield w.complete})).apply(this,arguments)}function pa({appConfig:h}){return h.appId}const Rr=new Te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Fc(h,m){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,te.Z)(function*(h,m){const x=yield ma(h),w=Ht(m),b={method:"POST",headers:x,body:JSON.stringify(w)};let R;try{R=yield(yield fetch(Ns(h.appConfig),b)).json()}catch(L){throw Rr.create("token-subscribe-failed",{errorInfo:L})}if(R.error)throw Rr.create("token-subscribe-failed",{errorInfo:R.error.message});if(!R.token)throw Rr.create("token-subscribe-no-token");return R.token})).apply(this,arguments)}function Wi(h,m){return nc.apply(this,arguments)}function nc(){return(nc=(0,te.Z)(function*(h,m){const x=yield ma(h),w=Ht(m.subscriptionOptions),b={method:"PATCH",headers:x,body:JSON.stringify(w)};let R;try{R=yield(yield fetch(`${Ns(h.appConfig)}/${m.token}`,b)).json()}catch(L){throw Rr.create("token-update-failed",{errorInfo:L})}if(R.error)throw Rr.create("token-update-failed",{errorInfo:R.error.message});if(!R.token)throw Rr.create("token-update-no-token");return R.token})).apply(this,arguments)}function Sl(h,m){return ga.apply(this,arguments)}function ga(){return(ga=(0,te.Z)(function*(h,m){const w={method:"DELETE",headers:yield ma(h)};try{const R=yield(yield fetch(`${Ns(h.appConfig)}/${m}`,w)).json();if(R.error)throw Rr.create("token-unsubscribe-failed",{errorInfo:R.error.message})}catch(b){throw Rr.create("token-unsubscribe-failed",{errorInfo:b})}})).apply(this,arguments)}function Ns({projectId:h}){return`https://fcmregistrations.googleapis.com/v1/projects/${h}/registrations`}function ma(h){return va.apply(this,arguments)}function va(){return(va=(0,te.Z)(function*({appConfig:h,installations:m}){const x=yield m.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":h.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ht({p256dh:h,auth:m,endpoint:x,vapidKey:w}){const b={web:{endpoint:x,auth:m,p256dh:h}};return w!==ee&&(b.web.applicationPubKey=w),b}const kc=6048e5;function xd(h){return rc.apply(this,arguments)}function rc(){return(rc=(0,te.Z)(function*(h){const m=yield Tl(h.swRegistration,h.vapidKey),x={vapidKey:h.vapidKey,swScope:h.swRegistration.scope,endpoint:m.endpoint,auth:No(m.getKey("auth")),p256dh:No(m.getKey("p256dh"))},w=yield ec(h.firebaseDependencies);if(w){if(Dl(w.subscriptionOptions,x))return Date.now()>=w.createTime+kc?Ef(h,{token:w.token,createTime:Date.now(),subscriptionOptions:x}):w.token;try{yield Sl(h.firebaseDependencies,w.token)}catch(b){console.warn(b)}return ot(h.firebaseDependencies,x)}return ot(h.firebaseDependencies,x)})).apply(this,arguments)}function wd(h){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,te.Z)(function*(h){const m=yield ec(h.firebaseDependencies);m&&(yield Sl(h.firebaseDependencies,m.token),yield bl(h.firebaseDependencies));const x=yield h.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Ef(h,m){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,te.Z)(function*(h,m){try{const x=yield Wi(h.firebaseDependencies,m),w=Object.assign(Object.assign({},m),{token:x,createTime:Date.now()});return yield tc(h.firebaseDependencies,w),x}catch(x){throw yield wd(h),x}})).apply(this,arguments)}function ot(h,m){return ln.apply(this,arguments)}function ln(){return(ln=(0,te.Z)(function*(h,m){const w={token:yield Fc(h,m),createTime:Date.now(),subscriptionOptions:m};return yield tc(h,w),w.token})).apply(this,arguments)}function Tl(h,m){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,te.Z)(function*(h,m){return(yield h.pushManager.getSubscription())||h.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gi(m)})})).apply(this,arguments)}function Dl(h,m){return m.vapidKey===h.vapidKey&&m.endpoint===h.endpoint&&m.auth===h.auth&&m.p256dh===h.p256dh}function Qo(h){const m={from:h.from,collapseKey:h.collapse_key,messageId:h.fcm_message_id};return function(h,m){if(!m.notification)return;h.notification={};const x=m.notification.title;x&&(h.notification.title=x);const w=m.notification.body;w&&(h.notification.body=w);const b=m.notification.image;b&&(h.notification.image=b)}(m,h),function(h,m){!m.data||(h.data=m.data)}(m,h),function(h,m){if(!m.fcmOptions)return;h.fcmOptions={};const x=m.fcmOptions.link;x&&(h.fcmOptions.link=x);const w=m.fcmOptions.analytics_label;w&&(h.fcmOptions.analyticsLabel=w)}(m,h),m}function Lh(h){return"object"==typeof h&&!!h&&Mi in h}function Ed(h,m){const x=[];for(let w=0;w<h.length;w++)x.push(h.charAt(w)),w<m.length&&x.push(m.charAt(w));return x.join("")}function mu(h){return Rr.create("missing-app-config-values",{valueName:h})}Ed("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ed("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Br{constructor(m,x,w){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const b=function(h){if(!h||!h.options)throw mu("App Configuration Object");if(!h.name)throw mu("App Name");const m=["projectId","apiKey","appId","messagingSenderId"],{options:x}=h;for(const w of m)if(!x[w])throw mu(w);return{appName:h.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(m);this.firebaseDependencies={app:m,appConfig:b,installations:x,analyticsProvider:w}}_delete(){return Promise.resolve()}}function dn(h){return vu.apply(this,arguments)}function vu(){return(vu=(0,te.Z)(function*(h){try{h.swRegistration=yield navigator.serviceWorker.register(Xo,{scope:Se}),h.swRegistration.update().catch(()=>{})}catch(m){throw Rr.create("failed-service-worker-registration",{browserErrorMessage:m.message})}})).apply(this,arguments)}function ko(h,m){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,te.Z)(function*(h,m){if(!m&&!h.swRegistration&&(yield dn(h)),m||!h.swRegistration){if(!(m instanceof ServiceWorkerRegistration))throw Rr.create("invalid-sw-registration");h.swRegistration=m}})).apply(this,arguments)}function Bh(h,m){return _u.apply(this,arguments)}function _u(){return(_u=(0,te.Z)(function*(h,m){m?h.vapidKey=m:h.vapidKey||(h.vapidKey=ee)})).apply(this,arguments)}function ic(){return(ic=(0,te.Z)(function*(h,m){if(!navigator)throw Rr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Rr.create("permission-blocked");return yield Bh(h,null==m?void 0:m.vapidKey),yield ko(h,null==m?void 0:m.serviceWorkerRegistration),xd(h)})).apply(this,arguments)}function Ol(h,m,x){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,te.Z)(function*(h,m,x){const w=Cd(m);(yield h.firebaseDependencies.analyticsProvider.get()).logEvent(w,{message_id:x[Mi],message_name:x[Lr],message_time:x[Yu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Cd(h){switch(h){case Rs.NOTIFICATION_CLICKED:return"notification_open";case Rs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function xu(){return(xu=(0,te.Z)(function*(h,m){const x=m.data;if(!x.isFirebaseMessaging)return;h.onMessageHandler&&x.messageType===Rs.PUSH_RECEIVED&&("function"==typeof h.onMessageHandler?h.onMessageHandler(Qo(x)):h.onMessageHandler.next(Qo(x)));const w=x.data;Lh(w)&&"1"===w[fa]&&(yield Ol(h,x.messageType,w))})).apply(this,arguments)}const wu="@firebase/messaging";function Id(){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,te.Z)(function*(){return"undefined"!=typeof window&&(0,Te.hl)()&&(yield(0,Te.eu)())&&(0,Te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,Ue._registerComponent)(new pe.wA("messaging",h=>{const m=new Br(h.getProvider("app").getImmediate(),h.getProvider("installations-internal").getImmediate(),h.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function(h,m){return xu.apply(this,arguments)}(m,x)),m},"PUBLIC")),(0,Ue._registerComponent)(new pe.wA("messaging-internal",h=>{const m=h.getProvider("messaging").getImmediate();return{getToken:w=>function(h,m){return ic.apply(this,arguments)}(m,w)}},"PRIVATE")),(0,Ue.registerVersion)(wu,"0.9.2"),(0,Ue.registerVersion)(wu,"0.9.2","esm2017");const Yn="analytics",Vc="firebase_id",_a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Uc="https://www.googletagmanager.com/gtag/js",Yr=new $e.Yd("@firebase/analytics");function bd(h){return Promise.all(h.map(m=>m.catch(x=>x)))}function Rl(h,m){const x=document.createElement("script");x.src=`${Uc}?l=${h}&id=${m}`,x.async=!0,document.head.appendChild(x)}function Hc(h,m,x,w,b,R){return sc.apply(this,arguments)}function sc(){return(sc=(0,te.Z)(function*(h,m,x,w,b,R){const L=w[b];try{if(L)yield m[L];else{const H=(yield bd(x)).find(j=>j.measurementId===b);H&&(yield m[H.appId])}}catch(V){Yr.error(V)}h("config",b,R)})).apply(this,arguments)}function Sd(h,m,x,w,b){return Va.apply(this,arguments)}function Va(){return(Va=(0,te.Z)(function*(h,m,x,w,b){try{let R=[];if(b&&b.send_to){let L=b.send_to;Array.isArray(L)||(L=[L]);const V=yield bd(x);for(const H of L){const j=V.find(oe=>oe.measurementId===H),K=j&&m[j.appId];if(!K){R=[];break}R.push(K)}}0===R.length&&(R=Object.values(m)),yield Promise.all(R),h("event",w,b||{})}catch(R){Yr.error(R)}})).apply(this,arguments)}function W0(){const h=window.document.getElementsByTagName("script");for(const m of Object.values(h))if(m.src&&m.src.includes(Uc))return m;return null}const es=new Te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ls=new class{constructor(m={},x=1e3){this.throttleMetadata=m,this.intervalMillis=x}getThrottleMetadata(m){return this.throttleMetadata[m]}setThrottleMetadata(m,x){this.throttleMetadata[m]=x}deleteThrottleMetadata(m){delete this.throttleMetadata[m]}};function Bs(h){return new Headers({Accept:"application/json","x-goog-api-key":h})}function rr(h){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,te.Z)(function*(h){var m;const{appId:x,apiKey:w}=h,b={method:"GET",headers:Bs(w)},R=_a.replace("{app-id}",x),L=yield fetch(R,b);if(200!==L.status&&304!==L.status){let V="";try{const H=yield L.json();(null===(m=H.error)||void 0===m?void 0:m.message)&&(V=H.error.message)}catch(H){}throw es.create("config-fetch-failed",{httpStatus:L.status,responseMessage:V})}return L.json()})).apply(this,arguments)}function Nl(h){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,te.Z)(function*(h,m=Ls,x){const{appId:w,apiKey:b,measurementId:R}=h.options;if(!w)throw es.create("no-app-id");if(!b){if(R)return{measurementId:R,appId:w};throw es.create("no-api-key")}const L=m.getThrottleMetadata(w)||{backoffCount:0,throttleEndTimeMillis:Date.now()},V=new Dd;return setTimeout((0,te.Z)(function*(){V.abort()}),void 0!==x?x:6e4),uc({appId:w,apiKey:b,measurementId:R},L,V,m)})).apply(this,arguments)}function uc(h,m,x){return ya.apply(this,arguments)}function ya(){return(ya=(0,te.Z)(function*(h,{throttleEndTimeMillis:m,backoffCount:x},w,b=Ls){const{appId:R,measurementId:L}=h;try{yield z0(w,m)}catch(V){if(L)return Yr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${L} provided in the "measurementId" field in the local Firebase config. [${V.message}]`),{appId:R,measurementId:L};throw V}try{const V=yield rr(h);return b.deleteThrottleMetadata(R),V}catch(V){if(!Pl(V)){if(b.deleteThrottleMetadata(R),L)return Yr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${L} provided in the "measurementId" field in the local Firebase config. [${V.message}]`),{appId:R,measurementId:L};throw V}const H=503===Number(V.customData.httpStatus)?(0,Te.$s)(x,b.intervalMillis,30):(0,Te.$s)(x,b.intervalMillis),j={throttleEndTimeMillis:Date.now()+H,backoffCount:x+1};return b.setThrottleMetadata(R,j),Yr.debug(`Calling attemptFetch again in ${H} millis`),uc(h,j,w,b)}})).apply(this,arguments)}function z0(h,m){return new Promise((x,w)=>{const b=Math.max(m-Date.now(),0),R=setTimeout(x,b);h.addEventListener(()=>{clearTimeout(R),w(es.create("fetch-throttle",{throttleEndTimeMillis:m}))})})}function Pl(h){if(!(h instanceof Te.ZR&&h.customData))return!1;const m=Number(h.customData.httpStatus);return 429===m||500===m||503===m||504===m}class Dd{constructor(){this.listeners=[]}addEventListener(m){this.listeners.push(m)}abort(){this.listeners.forEach(m=>m())}}function Ml(){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,te.Z)(function*(){if(!(0,Te.hl)())return Yr.warn(es.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Te.eu)()}catch(h){return Yr.warn(es.create("indexeddb-unavailable",{errorInfo:h}).message),!1}return!0})).apply(this,arguments)}function Us(){return(Us=(0,te.Z)(function*(h,m,x,w,b,R,L){var V;const H=Nl(h);H.then(ve=>{x[ve.measurementId]=ve.appId,h.options.measurementId&&ve.measurementId!==h.options.measurementId&&Yr.warn(`The measurement ID in the local Firebase config (${h.options.measurementId}) does not match the measurement ID fetched from the server (${ve.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ve=>Yr.error(ve)),m.push(H);const j=Ml().then(ve=>{if(ve)return w.getId()}),[K,oe]=yield Promise.all([H,j]);W0()||Rl(R,K.measurementId),b("js",new Date);const _e=null!==(V=null==L?void 0:L.config)&&void 0!==V?V:{};return _e.origin="firebase",_e.update=!0,null!=oe&&(_e[Vc]=oe),b("config",K.measurementId,_e),K.measurementId})).apply(this,arguments)}class Ft{constructor(m){this.app=m}_delete(){return delete Qn[this.app.options.appId],Promise.resolve()}}let Qn={},Ur=[];const Lo={};let Gc,Si,Ii="dataLayer",jt=!1;function Xr(h,m,x){!function(){const h=[];if((0,Te.ru)()&&h.push("This is a browser extension environment."),(0,Te.zI)()||h.push("Cookies are not available."),h.length>0){const m=h.map((w,b)=>`(${b+1}) ${w}`).join(" "),x=es.create("invalid-analytics-context",{errorInfo:m});Yr.warn(x.message)}}();const w=h.options.appId;if(!w)throw es.create("no-app-id");if(!h.options.apiKey){if(!h.options.measurementId)throw es.create("no-api-key");Yr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${h.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qn[w])throw es.create("already-exists",{id:w});if(!jt){!function(h){let m=[];Array.isArray(window[h])?m=window[h]:window[h]=m}(Ii);const{wrappedGtag:R,gtagCore:L}=function(h,m,x,w,b){let R=function(...L){window[w].push(arguments)};return window[b]&&"function"==typeof window[b]&&(R=window[b]),window[b]=function(h,m,x,w){function R(){return(R=(0,te.Z)(function*(L,V,H){try{"event"===L?yield Sd(h,m,x,V,H):"config"===L?yield Hc(h,m,x,w,V,H):h("set",V)}catch(j){Yr.error(j)}})).apply(this,arguments)}return function(L,V,H){return R.apply(this,arguments)}}(R,h,m,x),{gtagCore:R,wrappedGtag:window[b]}}(Qn,Ur,Lo,Ii,"gtag");Si=R,Gc=L,jt=!0}return Qn[w]=function(h,m,x,w,b,R,L){return Us.apply(this,arguments)}(h,Ur,Lo,m,Gc,Ii,x),new Ft(h)}function zc(){return(zc=(0,te.Z)(function*(h,m,x,w,b){if(b&&b.global)h("event",x,w);else{const R=yield m;h("event",x,Object.assign(Object.assign({},w),{send_to:R}))}})).apply(this,arguments)}function ao(){return Od.apply(this,arguments)}function Od(){return(Od=(0,te.Z)(function*(){if((0,Te.ru)()||!(0,Te.zI)()||!(0,Te.hl)())return!1;try{return yield(0,Te.eu)()}catch(h){return!1}})).apply(this,arguments)}const kl="@firebase/analytics";(0,Ue._registerComponent)(new pe.wA(Yn,(m,{options:x})=>Xr(m.getProvider("app").getImmediate(),m.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,Ue._registerComponent)(new pe.wA("analytics-internal",function(m){try{const x=m.getProvider(Yn).getImmediate();return{logEvent:(w,b,R)=>function(h,m,x,w){h=(0,Te.m9)(h),function(h,m,x,w,b){return zc.apply(this,arguments)}(Si,Qn[h.app.options.appId],m,x,w).catch(b=>Yr.error(b))}(x,w,b,R)}}catch(x){throw es.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,Ue.registerVersion)(kl,"0.7.2"),(0,Ue.registerVersion)(kl,"0.7.2","esm2017");var Ll=J(7771),Sf=J(3637),Gs=J(3342),$0=J(3101),Pd=J(6136);const q0=new A.GfV("7.1.1"),Zc="__angularfire_symbol__analyticsIsSupported",Uh="__angularfire_symbol__remoteConfigIsSupported",Vo="__angularfire_symbol__messagingIsSupported";function Ct(h,m,x){if(m){if(1===m.length)return m[0];const R=m.filter(L=>L.app===x);if(1===R.length)return R[0]}return x.container.getProvider(h).getImmediate({optional:!0})}globalThis[Zc]||(globalThis[Zc]=ao().then(h=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=h)),globalThis[Vo]||(globalThis[Vo]=Id().then(h=>globalThis.__angularfire_symbol__messagingIsSupportedValue=h)),globalThis[Uh]||(globalThis[Uh]=kh().then(h=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=h));const wa=(h,m)=>{const x=m?[m]:(0,Ie.C6)(),w=[];return x.forEach(b=>{b.container.getProvider(h).instances.forEach(L=>{w.includes(L)||w.push(L)})}),w};function co(){}class Ea{constructor(m,x=Ll.N){this.zone=m,this.delegate=x}now(){return this.delegate.now()}schedule(m,x,w){const b=this.zone;return this.delegate.schedule(function(L){b.runGuarded(()=>{m.apply(this,[L])})},x,w)}}class Tf{constructor(m){this.zone=m,this.task=null}call(m,x){const w=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",co,{},co,co)),x.pipe((0,Gs.b)({next:w,complete:w,error:w})).subscribe(m).add(w)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vl=(()=>{class h{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Ea(Zone.current)),this.insideAngular=x.run(()=>new Ea(Zone.current,Sf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return h.\u0275fac=function(x){return new(x||h)(A.LFG(A.R0b))},h.\u0275prov=A.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();function ja(){const h=globalThis.\u0275AngularFireScheduler;if(!h)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return h}function f(h){return ja(),function(h){return function(x){return(x=x.lift(new Tf(h.ngZone))).pipe((0,$0.R)(h.outsideAngular),(0,Pd.QV)(h.insideAngular))}}(ja())(h)}},4486:(Dt,tt,J)=>{"use strict";J.d(tt,{Z:()=>We});var A=J(3854),Ie=J(6034),te=J(5452),Ue=J(5601);class Te{constructor(Be,Ce){this._delegate=Be,this.firebase=Ce,(0,te._addComponent)(Be,new Ie.wA("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,te.deleteApp)(this._delegate)))}_getService(Be,Ce=te._DEFAULT_ENTRY_NAME){var Ve;this._delegate.checkDestroyed();const ze=this._delegate.container.getProvider(Be);return!ze.isInitialized()&&"EXPLICIT"===(null===(Ve=ze.getComponent())||void 0===Ve?void 0:Ve.instantiationMode)&&ze.initialize(),ze.getImmediate({identifier:Ce})}_removeServiceInstance(Be,Ce=te._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(Ce)}_addComponent(Be){(0,te._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,te._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const $e=new A.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function me(){const Pe=function(Pe){const Be={},Ce={__esModule:!0,initializeApp:function(Et,rt={}){const de=te.initializeApp(Et,rt);if((0,A.r3)(Be,de.name))return Be[de.name];const Le=new Pe(de,Ce);return Be[de.name]=Le,Le},app:ze,registerVersion:te.registerVersion,setLogLevel:te.setLogLevel,onLog:te.onLog,apps:null,SDK_VERSION:te.SDK_VERSION,INTERNAL:{registerComponent:function(Et){const rt=Et.name,de=rt.replace("-compat","");if(te._registerComponent(Et)&&"PUBLIC"===Et.type){const Le=(Me=ze())=>{if("function"!=typeof Me[de])throw $e.create("invalid-app-argument",{appName:rt});return Me[de]()};void 0!==Et.serviceProps&&(0,A.ZB)(Le,Et.serviceProps),Ce[de]=Le,Pe.prototype[de]=function(...Me){return this._getService.bind(this,rt).apply(this,Et.multipleInstances?Me:[])}}return"PUBLIC"===Et.type?Ce[de]:null},removeApp:function(Et){delete Be[Et]},useAsService:function(Et,rt){return"serverAuth"===rt?null:rt},modularAPIs:te}};function ze(Et){if(!(0,A.r3)(Be,Et=Et||te._DEFAULT_ENTRY_NAME))throw $e.create("no-app",{appName:Et});return Be[Et]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function(){return Object.keys(Be).map(Et=>Be[Et])}}),ze.App=Pe,Ce}(Te);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function(Ce){(0,A.ZB)(Pe,Ce)},createSubscribe:A.ne,ErrorFactory:A.LL,deepExtend:A.ZB}),Pe}(),se=new Ue.Yd("@firebase/app-compat");if((0,A.jU)()&&void 0!==self.firebase){se.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&se.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=q;(0,te.registerVersion)("@firebase/app-compat","0.1.5",undefined)},5452:(Dt,tt,J)=>{"use strict";J.r(tt),J.d(tt,{FirebaseError:()=>Ue.ZR,SDK_VERSION:()=>ro,_DEFAULT_ENTRY_NAME:()=>tn,_addComponent:()=>Zn,_addOrOverwriteComponent:()=>si,_apps:()=>sn,_clearComponents:()=>gn,_components:()=>Re,_getProvider:()=>Wn,_registerComponent:()=>Li,_removeServiceInstance:()=>Vn,deleteApp:()=>xi,getApp:()=>vr,getApps:()=>Bi,initializeApp:()=>Cr,onLog:()=>Tt,registerVersion:()=>At,setLogLevel:()=>wi});var A=J(8239),Ie=J(6034),te=J(5601),Ue=J(3854);class Te{constructor(Ot){this.container=Ot}getPlatformInfoString(){return this.container.getProviders().map(on=>{if(function(Mt){const Ot=Mt.getComponent();return"VERSION"===(null==Ot?void 0:Ot.type)}(on)){const xn=on.getImmediate();return`${xn.library}/${xn.version}`}return null}).filter(on=>on).join(" ")}}const $e="@firebase/app",me=new te.Yd("@firebase/app"),tn="[DEFAULT]",kt={[$e]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sn=new Map,Re=new Map;function Zn(Mt,Ot){try{Mt.container.addComponent(Ot)}catch(on){me.debug(`Component ${Ot.name} failed to register with FirebaseApp ${Mt.name}`,on)}}function si(Mt,Ot){Mt.container.addOrOverwriteComponent(Ot)}function Li(Mt){const Ot=Mt.name;if(Re.has(Ot))return me.debug(`There were multiple attempts to register component ${Ot}.`),!1;Re.set(Ot,Mt);for(const on of sn.values())Zn(on,Mt);return!0}function Wn(Mt,Ot){return Mt.container.getProvider(Ot)}function Vn(Mt,Ot,on=tn){Wn(Mt,Ot).clearInstance(on)}function gn(){Re.clear()}const ai=new Ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class sa{constructor(Ot,on,xn){this._isDeleted=!1,this._options=Object.assign({},Ot),this._config=Object.assign({},on),this._name=on.name,this._automaticDataCollectionEnabled=on.automaticDataCollectionEnabled,this._container=xn,this.container.addComponent(new Ie.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ot){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ot}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ot){this._isDeleted=Ot}checkDestroyed(){if(this.isDeleted)throw ai.create("app-deleted",{appName:this._name})}}const ro="9.1.3";function Cr(Mt,Ot={}){"object"!=typeof Ot&&(Ot={name:Ot});const on=Object.assign({name:tn,automaticDataCollectionEnabled:!1},Ot),xn=on.name;if("string"!=typeof xn||!xn)throw ai.create("bad-app-name",{appName:String(xn)});const ui=sn.get(xn);if(ui){if((0,Ue.vZ)(Mt,ui.options)&&(0,Ue.vZ)(on,ui.config))return ui;throw ai.create("duplicate-app",{appName:xn})}const Un=new Ie.H0(xn);for(const Bt of Re.values())Un.addComponent(Bt);const ft=new sa(Mt,on,Un);return sn.set(xn,ft),ft}function vr(Mt=tn){const Ot=sn.get(Mt);if(!Ot)throw ai.create("no-app",{appName:Mt});return Ot}function Bi(){return Array.from(sn.values())}function xi(Mt){return kr.apply(this,arguments)}function kr(){return(kr=(0,A.Z)(function*(Mt){const Ot=Mt.name;sn.has(Ot)&&(sn.delete(Ot),yield Promise.all(Mt.container.getProviders().map(on=>on.delete())),Mt.isDeleted=!0)})).apply(this,arguments)}function At(Mt,Ot,on){var xn;let ui=null!==(xn=kt[Mt])&&void 0!==xn?xn:Mt;on&&(ui+=`-${on}`);const Un=ui.match(/\s|\//),ft=Ot.match(/\s|\//);if(Un||ft){const Bt=[`Unable to register library "${ui}" with version "${Ot}":`];return Un&&Bt.push(`library name "${ui}" contains illegal characters (whitespace or "/")`),Un&&ft&&Bt.push("and"),ft&&Bt.push(`version name "${Ot}" contains illegal characters (whitespace or "/")`),void me.warn(Bt.join(" "))}Li(new Ie.wA(`${ui}-version`,()=>({library:ui,version:Ot}),"VERSION"))}function Tt(Mt,Ot){if(null!==Mt&&"function"!=typeof Mt)throw ai.create("invalid-log-argument");(0,te.Am)(Mt,Ot)}function wi(Mt){(0,te.Ub)(Mt)}Li(new Ie.wA("platform-logger",Ot=>new Te(Ot),"PRIVATE")),At($e,"0.7.4",""),At($e,"0.7.4","esm2017"),At("fire-js","")},6034:(Dt,tt,J)=>{"use strict";J.d(tt,{wA:()=>te,H0:()=>xe,zt:()=>Te});var A=J(4762),Ie=J(3854),te=function(){function me(q,se,re){this.name=q,this.instanceFactory=se,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return me.prototype.setInstantiationMode=function(q){return this.instantiationMode=q,this},me.prototype.setMultipleInstances=function(q){return this.multipleInstances=q,this},me.prototype.setServiceProps=function(q){return this.serviceProps=q,this},me.prototype.setInstanceCreatedCallback=function(q){return this.onInstanceCreated=q,this},me}(),Ue="[DEFAULT]",Te=function(){function me(q,se){this.name=q,this.container=se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return me.prototype.get=function(q){var se=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(se)){var re=new Ie.BH;if(this.instancesDeferred.set(se,re),this.isInitialized(se)||this.shouldAutoInitialize())try{var Ee=this.getOrInitializeService({instanceIdentifier:se});Ee&&re.resolve(Ee)}catch(Ye){}}return this.instancesDeferred.get(se).promise},me.prototype.getImmediate=function(q){var se,re=this.normalizeInstanceIdentifier(null==q?void 0:q.identifier),Ee=null!==(se=null==q?void 0:q.optional)&&void 0!==se&&se;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if(Ee)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(Ye){if(Ee)return null;throw Ye}},me.prototype.getComponent=function(){return this.component},me.prototype.setComponent=function(q){var se,re;if(q.name!==this.name)throw Error("Mismatching Component "+q.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=q,this.shouldAutoInitialize()){if(function(me){return"EAGER"===me.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch(ze){}try{for(var Ee=(0,A.XA)(this.instancesDeferred.entries()),Ye=Ee.next();!Ye.done;Ye=Ee.next()){var We=(0,A.CR)(Ye.value,2),Be=We[1],Ce=this.normalizeInstanceIdentifier(We[0]);try{var Ve=this.getOrInitializeService({instanceIdentifier:Ce});Be.resolve(Ve)}catch(ze){}}}catch(ze){se={error:ze}}finally{try{Ye&&!Ye.done&&(re=Ee.return)&&re.call(Ee)}finally{if(se)throw se.error}}}},me.prototype.clearInstance=function(q){void 0===q&&(q=Ue),this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)},me.prototype.delete=function(){return(0,A.mG)(this,void 0,void 0,function(){var q;return(0,A.Jh)(this,function(se){switch(se.label){case 0:return q=Array.from(this.instances.values()),[4,Promise.all((0,A.ev)((0,A.ev)([],(0,A.CR)(q.filter(function(re){return"INTERNAL"in re}).map(function(re){return re.INTERNAL.delete()}))),(0,A.CR)(q.filter(function(re){return"_delete"in re}).map(function(re){return re._delete()}))))];case 1:return se.sent(),[2]}})})},me.prototype.isComponentSet=function(){return null!=this.component},me.prototype.isInitialized=function(q){return void 0===q&&(q=Ue),this.instances.has(q)},me.prototype.getOptions=function(q){return void 0===q&&(q=Ue),this.instancesOptions.get(q)||{}},me.prototype.initialize=function(q){var se,re;void 0===q&&(q={});var Ee=q.options,Ye=void 0===Ee?{}:Ee,We=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(We))throw Error(this.name+"("+We+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Pe=this.getOrInitializeService({instanceIdentifier:We,options:Ye});try{for(var Be=(0,A.XA)(this.instancesDeferred.entries()),Ce=Be.next();!Ce.done;Ce=Be.next()){var Ve=(0,A.CR)(Ce.value,2),Xe=Ve[1];We===this.normalizeInstanceIdentifier(Ve[0])&&Xe.resolve(Pe)}}catch(St){se={error:St}}finally{try{Ce&&!Ce.done&&(re=Be.return)&&re.call(Be)}finally{if(se)throw se.error}}return Pe},me.prototype.onInit=function(q,se){var re,Ee=this.normalizeInstanceIdentifier(se),Ye=null!==(re=this.onInitCallbacks.get(Ee))&&void 0!==re?re:new Set;Ye.add(q),this.onInitCallbacks.set(Ee,Ye);var We=this.instances.get(Ee);return We&&q(We,Ee),function(){Ye.delete(q)}},me.prototype.invokeOnInitCallbacks=function(q,se){var re,Ee,Ye=this.onInitCallbacks.get(se);if(Ye)try{for(var We=(0,A.XA)(Ye),Pe=We.next();!Pe.done;Pe=We.next()){var Be=Pe.value;try{Be(q,se)}catch(Ce){}}}catch(Ce){re={error:Ce}}finally{try{Pe&&!Pe.done&&(Ee=We.return)&&Ee.call(We)}finally{if(re)throw re.error}}},me.prototype.getOrInitializeService=function(q){var se=q.instanceIdentifier,re=q.options,Ee=void 0===re?{}:re,Ye=this.instances.get(se);if(!Ye&&this.component&&(Ye=this.component.instanceFactory(this.container,{instanceIdentifier:pe(se),options:Ee}),this.instances.set(se,Ye),this.instancesOptions.set(se,Ee),this.invokeOnInitCallbacks(Ye,se),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,se,Ye)}catch(We){}return Ye||null},me.prototype.normalizeInstanceIdentifier=function(q){return void 0===q&&(q=Ue),this.component?this.component.multipleInstances?q:Ue:q},me.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},me}();function pe(me){return me===Ue?void 0:me}var xe=function(){function me(q){this.name=q,this.providers=new Map}return me.prototype.addComponent=function(q){var se=this.getProvider(q.name);if(se.isComponentSet())throw new Error("Component "+q.name+" has already been registered with "+this.name);se.setComponent(q)},me.prototype.addOrOverwriteComponent=function(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)},me.prototype.getProvider=function(q){if(this.providers.has(q))return this.providers.get(q);var se=new Te(q,this);return this.providers.set(q,se),se},me.prototype.getProviders=function(){return Array.from(this.providers.values())},me}()},5601:(Dt,tt,J)=>{"use strict";J.d(tt,{in:()=>Ie,Yd:()=>$e,Ub:()=>xe,Am:()=>me});const A=[];var Ie=(()=>{return(q=Ie||(Ie={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",Ie;var q})();const te={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},Ue=Ie.INFO,Te={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},pe=(q,se,...re)=>{if(se<q.logLevel)return;const Ee=(new Date).toISOString(),Ye=Te[se];if(!Ye)throw new Error(`Attempted to log a message with an invalid logType (value: ${se})`);console[Ye](`[${Ee}]  ${q.name}:`,...re)};class $e{constructor(se){this.name=se,this._logLevel=Ue,this._logHandler=pe,this._userLogHandler=null,A.push(this)}get logLevel(){return this._logLevel}set logLevel(se){if(!(se in Ie))throw new TypeError(`Invalid value "${se}" assigned to \`logLevel\``);this._logLevel=se}setLogLevel(se){this._logLevel="string"==typeof se?te[se]:se}get logHandler(){return this._logHandler}set logHandler(se){if("function"!=typeof se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=se}get userLogHandler(){return this._userLogHandler}set userLogHandler(se){this._userLogHandler=se}debug(...se){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...se),this._logHandler(this,Ie.DEBUG,...se)}log(...se){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...se),this._logHandler(this,Ie.VERBOSE,...se)}info(...se){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...se),this._logHandler(this,Ie.INFO,...se)}warn(...se){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...se),this._logHandler(this,Ie.WARN,...se)}error(...se){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...se),this._logHandler(this,Ie.ERROR,...se)}}function xe(q){A.forEach(se=>{se.setLogLevel(q)})}function me(q,se){for(const re of A){let Ee=null;se&&se.level&&(Ee=te[se.level]),re.userLogHandler=null===q?null:(Ye,We,...Pe)=>{const Be=Pe.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch(Ve){return null}}).filter(Ce=>Ce).join(" ");We>=(null!=Ee?Ee:Ye.logLevel)&&q({level:Ie[We].toLowerCase(),message:Be,args:Pe,type:Ye.name})}}}},3854:(Dt,tt,J)=>{"use strict";J.d(tt,{BH:()=>Ee,LL:()=>je,ZR:()=>dt,gQ:()=>Bi,zI:()=>Le,hu:()=>Ie,g5:()=>te,US:()=>pe,tV:()=>me,h$:()=>$e,$s:()=>$r,r3:()=>Wn,Sg:()=>Ye,ne:()=>xi,p$:()=>q,vZ:()=>ai,ZB:()=>se,gK:()=>Mt,pd:()=>vr,m9:()=>Ma,z$:()=>We,GJ:()=>Li,jU:()=>Ce,ru:()=>Ve,d:()=>Xe,xb:()=>gn,w1:()=>lt,hl:()=>rt,uI:()=>Pe,UG:()=>Be,Yr:()=>nn,b$:()=>ze,G6:()=>Et,Mn:()=>St,w9:()=>si,cI:()=>tn,UI:()=>Fr,xO:()=>ro,zd:()=>Cr,DV:()=>Vn,ug:()=>Un,dS:()=>ui,Pz:()=>kt,Dv:()=>Mn,Wj:()=>on,lb:()=>xn,eu:()=>de});const Ie=function(ue,he){if(!ue)throw te(he)},te=function(ue){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ue)},Ue=function(ue){const he=[];let ae=0;for(let Qe=0;Qe<ue.length;Qe++){let Fe=ue.charCodeAt(Qe);Fe<128?he[ae++]=Fe:Fe<2048?(he[ae++]=Fe>>6|192,he[ae++]=63&Fe|128):55296==(64512&Fe)&&Qe+1<ue.length&&56320==(64512&ue.charCodeAt(Qe+1))?(Fe=65536+((1023&Fe)<<10)+(1023&ue.charCodeAt(++Qe)),he[ae++]=Fe>>18|240,he[ae++]=Fe>>12&63|128,he[ae++]=Fe>>6&63|128,he[ae++]=63&Fe|128):(he[ae++]=Fe>>12|224,he[ae++]=Fe>>6&63|128,he[ae++]=63&Fe|128)}return he},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ue,he){if(!Array.isArray(ue))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ae=he?this.byteToCharMapWebSafe_:this.byteToCharMap_,Qe=[];for(let Fe=0;Fe<ue.length;Fe+=3){const It=ue[Fe],Zt=Fe+1<ue.length,wn=Zt?ue[Fe+1]:0,zn=Fe+2<ue.length,ur=zn?ue[Fe+2]:0;let Rn=(15&wn)<<2|ur>>6,io=63&ur;zn||(io=64,Zt||(Rn=64)),Qe.push(ae[It>>2],ae[(3&It)<<4|wn>>4],ae[Rn],ae[io])}return Qe.join("")},encodeString(ue,he){return this.HAS_NATIVE_SUPPORT&&!he?btoa(ue):this.encodeByteArray(Ue(ue),he)},decodeString(ue,he){return this.HAS_NATIVE_SUPPORT&&!he?atob(ue):function(ue){const he=[];let ae=0,Qe=0;for(;ae<ue.length;){const Fe=ue[ae++];if(Fe<128)he[Qe++]=String.fromCharCode(Fe);else if(Fe>191&&Fe<224){const It=ue[ae++];he[Qe++]=String.fromCharCode((31&Fe)<<6|63&It)}else if(Fe>239&&Fe<365){const zn=((7&Fe)<<18|(63&ue[ae++])<<12|(63&ue[ae++])<<6|63&ue[ae++])-65536;he[Qe++]=String.fromCharCode(55296+(zn>>10)),he[Qe++]=String.fromCharCode(56320+(1023&zn))}else{const It=ue[ae++],Zt=ue[ae++];he[Qe++]=String.fromCharCode((15&Fe)<<12|(63&It)<<6|63&Zt)}}return he.join("")}(this.decodeStringToByteArray(ue,he))},decodeStringToByteArray(ue,he){this.init_();const ae=he?this.charToByteMapWebSafe_:this.charToByteMap_,Qe=[];for(let Fe=0;Fe<ue.length;){const It=ae[ue.charAt(Fe++)],wn=Fe<ue.length?ae[ue.charAt(Fe)]:0;++Fe;const ur=Fe<ue.length?ae[ue.charAt(Fe)]:64;++Fe;const mn=Fe<ue.length?ae[ue.charAt(Fe)]:64;if(++Fe,null==It||null==wn||null==ur||null==mn)throw Error();Qe.push(It<<2|wn>>4),64!==ur&&(Qe.push(wn<<4&240|ur>>2),64!==mn&&Qe.push(ur<<6&192|mn))}return Qe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ue=0;ue<this.ENCODED_VALS.length;ue++)this.byteToCharMap_[ue]=this.ENCODED_VALS.charAt(ue),this.charToByteMap_[this.byteToCharMap_[ue]]=ue,this.byteToCharMapWebSafe_[ue]=this.ENCODED_VALS_WEBSAFE.charAt(ue),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ue]]=ue,ue>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ue)]=ue,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ue)]=ue)}}},$e=function(ue){const he=Ue(ue);return pe.encodeByteArray(he,!0)},xe=function(ue){return $e(ue).replace(/\./g,"")},me=function(ue){try{return pe.decodeString(ue,!0)}catch(he){console.error("base64Decode failed: ",he)}return null};function q(ue){return se(void 0,ue)}function se(ue,he){if(!(he instanceof Object))return he;switch(he.constructor){case Date:return new Date(he.getTime());case Object:void 0===ue&&(ue={});break;case Array:ue=[];break;default:return he}for(const ae in he)!he.hasOwnProperty(ae)||!re(ae)||(ue[ae]=se(ue[ae],he[ae]));return ue}function re(ue){return"__proto__"!==ue}class Ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((he,ae)=>{this.resolve=he,this.reject=ae})}wrapCallback(he){return(ae,Qe)=>{ae?this.reject(ae):this.resolve(Qe),"function"==typeof he&&(this.promise.catch(()=>{}),1===he.length?he(ae):he(ae,Qe))}}}function Ye(ue,he){if(ue.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Qe=he||"demo-project",Fe=ue.iat||0,It=ue.sub||ue.user_id;if(!It)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Zt=Object.assign({iss:`https://securetoken.google.com/${Qe}`,aud:Qe,iat:Fe,exp:Fe+3600,auth_time:Fe,sub:It,user_id:It,firebase:{sign_in_provider:"custom",identities:{}}},ue);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(Zt)),""].join(".")}function We(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ue){return!1}}function Ce(){return"object"==typeof self&&self.self===self}function Ve(){const ue="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ue&&void 0!==ue.id}function ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){return We().indexOf("Electron/")>=0}function lt(){const ue=We();return ue.indexOf("MSIE ")>=0||ue.indexOf("Trident/")>=0}function St(){return We().indexOf("MSAppHost/")>=0}function nn(){return!1}function Et(){return!Be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rt(){return"object"==typeof indexedDB}function de(){return new Promise((ue,he)=>{try{let ae=!0;const Qe="validate-browser-context-for-indexeddb-analytics-module",Fe=self.indexedDB.open(Qe);Fe.onsuccess=()=>{Fe.result.close(),ae||self.indexedDB.deleteDatabase(Qe),ue(!0)},Fe.onupgradeneeded=()=>{ae=!1},Fe.onerror=()=>{var It;he((null===(It=Fe.error)||void 0===It?void 0:It.message)||"")}}catch(ae){he(ae)}})}function Le(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class dt extends Error{constructor(he,ae,Qe){super(ae),this.code=he,this.customData=Qe,this.name="FirebaseError",Object.setPrototypeOf(this,dt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,je.prototype.create)}}class je{constructor(he,ae,Qe){this.service=he,this.serviceName=ae,this.errors=Qe}create(he,...ae){const Qe=ae[0]||{},Fe=`${this.service}/${he}`,It=this.errors[he],Zt=It?function(ue,he){return ue.replace(Pt,(ae,Qe)=>{const Fe=he[Qe];return null!=Fe?String(Fe):`<${Qe}?>`})}(It,Qe):"Error";return new dt(Fe,`${this.serviceName}: ${Zt} (${Fe}).`,Qe)}}const Pt=/\{\$([^}]+)}/g;function tn(ue){return JSON.parse(ue)}function kt(ue){return JSON.stringify(ue)}const sn=function(ue){let he={},ae={},Qe={},Fe="";try{const It=ue.split(".");he=tn(me(It[0])||""),ae=tn(me(It[1])||""),Fe=It[2],Qe=ae.d||{},delete ae.d}catch(It){}return{header:he,claims:ae,data:Qe,signature:Fe}},si=function(ue){const ae=sn(ue).claims;return!!ae&&"object"==typeof ae&&ae.hasOwnProperty("iat")},Li=function(ue){const he=sn(ue).claims;return"object"==typeof he&&!0===he.admin};function Wn(ue,he){return Object.prototype.hasOwnProperty.call(ue,he)}function Vn(ue,he){if(Object.prototype.hasOwnProperty.call(ue,he))return ue[he]}function gn(ue){for(const he in ue)if(Object.prototype.hasOwnProperty.call(ue,he))return!1;return!0}function Fr(ue,he,ae){const Qe={};for(const Fe in ue)Object.prototype.hasOwnProperty.call(ue,Fe)&&(Qe[Fe]=he.call(ae,ue[Fe],Fe,ue));return Qe}function ai(ue,he){if(ue===he)return!0;const ae=Object.keys(ue),Qe=Object.keys(he);for(const Fe of ae){if(!Qe.includes(Fe))return!1;const It=ue[Fe],Zt=he[Fe];if(sa(It)&&sa(Zt)){if(!ai(It,Zt))return!1}else if(It!==Zt)return!1}for(const Fe of Qe)if(!ae.includes(Fe))return!1;return!0}function sa(ue){return null!==ue&&"object"==typeof ue}function ro(ue){const he=[];for(const[ae,Qe]of Object.entries(ue))Array.isArray(Qe)?Qe.forEach(Fe=>{he.push(encodeURIComponent(ae)+"="+encodeURIComponent(Fe))}):he.push(encodeURIComponent(ae)+"="+encodeURIComponent(Qe));return he.length?"&"+he.join("&"):""}function Cr(ue){const he={};return ue.replace(/^\?/,"").split("&").forEach(Qe=>{if(Qe){const[Fe,It]=Qe.split("=");he[decodeURIComponent(Fe)]=decodeURIComponent(It)}}),he}function vr(ue){const he=ue.indexOf("?");if(!he)return"";const ae=ue.indexOf("#",he);return ue.substring(he,ae>0?ae:void 0)}class Bi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let he=1;he<this.blockSize;++he)this.pad_[he]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(he,ae){ae||(ae=0);const Qe=this.W_;if("string"==typeof he)for(let mn=0;mn<16;mn++)Qe[mn]=he.charCodeAt(ae)<<24|he.charCodeAt(ae+1)<<16|he.charCodeAt(ae+2)<<8|he.charCodeAt(ae+3),ae+=4;else for(let mn=0;mn<16;mn++)Qe[mn]=he[ae]<<24|he[ae+1]<<16|he[ae+2]<<8|he[ae+3],ae+=4;for(let mn=16;mn<80;mn++){const Rn=Qe[mn-3]^Qe[mn-8]^Qe[mn-14]^Qe[mn-16];Qe[mn]=4294967295&(Rn<<1|Rn>>>31)}let ur,Ui,Fe=this.chain_[0],It=this.chain_[1],Zt=this.chain_[2],wn=this.chain_[3],zn=this.chain_[4];for(let mn=0;mn<80;mn++){mn<40?mn<20?(ur=wn^It&(Zt^wn),Ui=1518500249):(ur=It^Zt^wn,Ui=1859775393):mn<60?(ur=It&Zt|wn&(It|Zt),Ui=2400959708):(ur=It^Zt^wn,Ui=3395469782);const Rn=(Fe<<5|Fe>>>27)+ur+zn+Ui+Qe[mn]&4294967295;zn=wn,wn=Zt,Zt=4294967295&(It<<30|It>>>2),It=Fe,Fe=Rn}this.chain_[0]=this.chain_[0]+Fe&4294967295,this.chain_[1]=this.chain_[1]+It&4294967295,this.chain_[2]=this.chain_[2]+Zt&4294967295,this.chain_[3]=this.chain_[3]+wn&4294967295,this.chain_[4]=this.chain_[4]+zn&4294967295}update(he,ae){if(null==he)return;void 0===ae&&(ae=he.length);const Qe=ae-this.blockSize;let Fe=0;const It=this.buf_;let Zt=this.inbuf_;for(;Fe<ae;){if(0===Zt)for(;Fe<=Qe;)this.compress_(he,Fe),Fe+=this.blockSize;if("string"==typeof he){for(;Fe<ae;)if(It[Zt]=he.charCodeAt(Fe),++Zt,++Fe,Zt===this.blockSize){this.compress_(It),Zt=0;break}}else for(;Fe<ae;)if(It[Zt]=he[Fe],++Zt,++Fe,Zt===this.blockSize){this.compress_(It),Zt=0;break}}this.inbuf_=Zt,this.total_+=ae}digest(){const he=[];let ae=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Fe=this.blockSize-1;Fe>=56;Fe--)this.buf_[Fe]=255&ae,ae/=256;this.compress_(this.buf_);let Qe=0;for(let Fe=0;Fe<5;Fe++)for(let It=24;It>=0;It-=8)he[Qe]=this.chain_[Fe]>>It&255,++Qe;return he}}function xi(ue,he){const ae=new kr(ue,he);return ae.subscribe.bind(ae)}class kr{constructor(he,ae){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ae,this.task.then(()=>{he(this)}).catch(Qe=>{this.error(Qe)})}next(he){this.forEachObserver(ae=>{ae.next(he)})}error(he){this.forEachObserver(ae=>{ae.error(he)}),this.close(he)}complete(){this.forEachObserver(he=>{he.complete()}),this.close()}subscribe(he,ae,Qe){let Fe;if(void 0===he&&void 0===ae&&void 0===Qe)throw new Error("Missing Observer.");Fe=function(ue,he){if("object"!=typeof ue||null===ue)return!1;for(const ae of["next","error","complete"])if(ae in ue&&"function"==typeof ue[ae])return!0;return!1}(he)?he:{next:he,error:ae,complete:Qe},void 0===Fe.next&&(Fe.next=wi),void 0===Fe.error&&(Fe.error=wi),void 0===Fe.complete&&(Fe.complete=wi);const It=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Fe.error(this.finalError):Fe.complete()}catch(Zt){}}),this.observers.push(Fe),It}unsubscribeOne(he){void 0===this.observers||void 0===this.observers[he]||(delete this.observers[he],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(he){if(!this.finalized)for(let ae=0;ae<this.observers.length;ae++)this.sendOne(ae,he)}sendOne(he,ae){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[he])try{ae(this.observers[he])}catch(Qe){"undefined"!=typeof console&&console.error&&console.error(Qe)}})}close(he){this.finalized||(this.finalized=!0,void 0!==he&&(this.finalError=he),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wi(){}const Mn=function(ue,he,ae,Qe){let Fe;if(Qe<he?Fe="at least "+he:Qe>ae&&(Fe=0===ae?"none":"no more than "+ae),Fe)throw new Error(ue+" failed: Was called with "+Qe+(1===Qe?" argument.":" arguments.")+" Expects "+Fe+".")};function Mt(ue,he){return`${ue} failed: ${he} argument `}function on(ue,he,ae,Qe){if((!Qe||ae)&&"function"!=typeof ae)throw new Error(Mt(ue,he)+"must be a valid function.")}function xn(ue,he,ae,Qe){if((!Qe||ae)&&("object"!=typeof ae||null===ae))throw new Error(Mt(ue,he)+"must be a valid context object.")}const ui=function(ue){const he=[];let ae=0;for(let Qe=0;Qe<ue.length;Qe++){let Fe=ue.charCodeAt(Qe);if(Fe>=55296&&Fe<=56319){const It=Fe-55296;Qe++,Ie(Qe<ue.length,"Surrogate pair missing trail surrogate."),Fe=65536+(It<<10)+(ue.charCodeAt(Qe)-56320)}Fe<128?he[ae++]=Fe:Fe<2048?(he[ae++]=Fe>>6|192,he[ae++]=63&Fe|128):Fe<65536?(he[ae++]=Fe>>12|224,he[ae++]=Fe>>6&63|128,he[ae++]=63&Fe|128):(he[ae++]=Fe>>18|240,he[ae++]=Fe>>12&63|128,he[ae++]=Fe>>6&63|128,he[ae++]=63&Fe|128)}return he},Un=function(ue){let he=0;for(let ae=0;ae<ue.length;ae++){const Qe=ue.charCodeAt(ae);Qe<128?he++:Qe<2048?he+=2:Qe>=55296&&Qe<=56319?(he+=4,ae++):he+=3}return he};function $r(ue,he=1e3,ae=2){const Qe=he*Math.pow(ae,ue),Fe=Math.round(.5*Qe*(Math.random()-.5)*2);return Math.min(144e5,Qe+Fe)}function Ma(ue){return ue&&ue._delegate?ue._delegate:ue}},5429:function(Dt,tt){!function(J){"use strict";var ko,f,te=(f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)},function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}),Ue=function(f){function u(c){var p=this.constructor,h=f.call(this,c)||this;return Object.defineProperty(h,"name",{value:p.name,enumerable:!1,configurable:!0}),function(f,u){var c=Object.setPrototypeOf;c?c(f,u):f.__proto__=u}(h,p.prototype),function(f,u){void 0===u&&(u=f.constructor);var c=Error.captureStackTrace;c&&c(f,u)}(h),h}return te(u,f),u}(Error),Te=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),pe=function(f){function u(c){void 0===c&&(c=void 0);var p=f.call(this,c)||this;return p.message=c,p}return Te(u,f),u}(Ue),$e=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),xe=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return $e(u,f),u}(pe),me=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),q=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return me(u,f),u}(pe),se=function(){function f(u){if(this.binarizer=u,null===u)throw new q("Binarizer must be non-null.")}return f.prototype.getWidth=function(){return this.binarizer.getWidth()},f.prototype.getHeight=function(){return this.binarizer.getHeight()},f.prototype.getBlackRow=function(u,c){return this.binarizer.getBlackRow(u,c)},f.prototype.getBlackMatrix=function(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},f.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},f.prototype.crop=function(u,c,p,h){var m=this.binarizer.getLuminanceSource().crop(u,c,p,h);return new f(this.binarizer.createBinarizer(m))},f.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},f.prototype.rotateCounterClockwise=function(){var u=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new f(this.binarizer.createBinarizer(u))},f.prototype.rotateCounterClockwise45=function(){var u=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new f(this.binarizer.createBinarizer(u))},f.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(u){return""}},f}(),re=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Ee=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return re(u,f),u.getChecksumInstance=function(){return new u},u}(pe),Ye=function(){function f(u){this.source=u}return f.prototype.getLuminanceSource=function(){return this.source},f.prototype.getWidth=function(){return this.source.getWidth()},f.prototype.getHeight=function(){return this.source.getHeight()},f}(),We=function(){function f(){}return f.arraycopy=function(u,c,p,h,m){for(;m--;)p[h++]=u[c++]},f.currentTimeMillis=function(){return Date.now()},f}(),Pe=function(){function f(){}return f.numberOfTrailingZeros=function(u){var c;if(0===u)return 32;var p=31;return 0!=(c=u<<16)&&(p-=16,u=c),0!=(c=u<<8)&&(p-=8,u=c),0!=(c=u<<4)&&(p-=4,u=c),0!=(c=u<<2)&&(p-=2,u=c),p-(u<<1>>>31)},f.numberOfLeadingZeros=function(u){if(0===u)return 32;var c=1;return u>>>16==0&&(c+=16,u<<=16),u>>>24==0&&(c+=8,u<<=8),u>>>28==0&&(c+=4,u<<=4),u>>>30==0&&(c+=2,u<<=2),c-(u>>>31)},f.toHexString=function(u){return u.toString(16)},f.toBinaryString=function(u){return String(parseInt(String(u),2))},f.bitCount=function(u){return u=(u=(858993459&(u-=u>>>1&1431655765))+(u>>>2&858993459))+(u>>>4)&252645135,63&(u+=u>>>8)+(u>>>16)},f.truncDivision=function(u,c){return Math.trunc(u/c)},f.parseInt=function(u,c){return void 0===c&&(c=void 0),parseInt(u,c)},f.MIN_VALUE_32_BITS=-2147483648,f.MAX_VALUE=Number.MAX_SAFE_INTEGER,f}(),Be=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Ce=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return Be(u,f),u}(pe),Ve=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),ze=function(f){function u(c,p){void 0===c&&(c=void 0),void 0===p&&(p=void 0);var h=f.call(this,p)||this;return h.index=c,h.message=p,h}return Ve(u,f),u}(Ce),Xe=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},lt=function(){function f(){}return f.fill=function(u,c){for(var p=0,h=u.length;p<h;p++)u[p]=c},f.fillWithin=function(u,c,p,h){f.rangeCheck(u.length,c,p);for(var m=c;m<p;m++)u[m]=h},f.rangeCheck=function(u,c,p){if(c>p)throw new q("fromIndex("+c+") > toIndex("+p+")");if(c<0)throw new ze(c);if(p>u)throw new ze(p)},f.asList=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return u},f.create=function(u,c,p){return Array.from({length:u}).map(function(m){return Array.from({length:c}).fill(p)})},f.createInt32Array=function(u,c,p){return Array.from({length:u}).map(function(m){return Int32Array.from({length:c}).fill(p)})},f.equals=function(u,c){if(!(u&&c&&u.length&&c.length&&u.length===c.length))return!1;for(var p=0,h=u.length;p<h;p++)if(u[p]!==c[p])return!1;return!0},f.hashCode=function(u){var c,p;if(null===u)return 0;var h=1;try{for(var m=Xe(u),x=m.next();!x.done;x=m.next())h=31*h+x.value}catch(b){c={error:b}}finally{try{x&&!x.done&&(p=m.return)&&p.call(m)}finally{if(c)throw c.error}}return h},f.fillUint8Array=function(u,c){for(var p=0;p!==u.length;p++)u[p]=c},f.copyOf=function(u,c){return u.slice(0,c)},f.copyOfUint8Array=function(u,c){if(u.length<=c){var p=new Uint8Array(c);return p.set(u),p}return u.slice(0,c)},f.copyOfRange=function(u,c,p){var h=p-c,m=new Int32Array(h);return We.arraycopy(u,c,m,0,h),m},f.binarySearch=function(u,c,p){void 0===p&&(p=f.numberComparator);for(var h=0,m=u.length-1;h<=m;){var x=m+h>>1,w=p(c,u[x]);if(w>0)h=x+1;else{if(!(w<0))return x;m=x-1}}return-h-1},f.numberComparator=function(u,c){return u-c},f}(),St=function(){function f(u,c){void 0===u?(this.size=0,this.bits=new Int32Array(1)):(this.size=u,this.bits=null==c?f.makeArray(u):c)}return f.prototype.getSize=function(){return this.size},f.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},f.prototype.ensureCapacity=function(u){if(u>32*this.bits.length){var c=f.makeArray(u);We.arraycopy(this.bits,0,c,0,this.bits.length),this.bits=c}},f.prototype.get=function(u){return 0!=(this.bits[Math.floor(u/32)]&1<<(31&u))},f.prototype.set=function(u){this.bits[Math.floor(u/32)]|=1<<(31&u)},f.prototype.flip=function(u){this.bits[Math.floor(u/32)]^=1<<(31&u)},f.prototype.getNextSet=function(u){var c=this.size;if(u>=c)return c;var p=this.bits,h=Math.floor(u/32),m=p[h];m&=~((1<<(31&u))-1);for(var x=p.length;0===m;){if(++h===x)return c;m=p[h]}var w=32*h+Pe.numberOfTrailingZeros(m);return w>c?c:w},f.prototype.getNextUnset=function(u){var c=this.size;if(u>=c)return c;var p=this.bits,h=Math.floor(u/32),m=~p[h];m&=~((1<<(31&u))-1);for(var x=p.length;0===m;){if(++h===x)return c;m=~p[h]}var w=32*h+Pe.numberOfTrailingZeros(m);return w>c?c:w},f.prototype.setBulk=function(u,c){this.bits[Math.floor(u/32)]=c},f.prototype.setRange=function(u,c){if(c<u||u<0||c>this.size)throw new q;if(c!==u){c--;for(var p=Math.floor(u/32),h=Math.floor(c/32),m=this.bits,x=p;x<=h;x++)m[x]|=(2<<(x<h?31:31&c))-(1<<(x>p?0:31&u))}},f.prototype.clear=function(){for(var u=this.bits.length,c=this.bits,p=0;p<u;p++)c[p]=0},f.prototype.isRange=function(u,c,p){if(c<u||u<0||c>this.size)throw new q;if(c===u)return!0;c--;for(var h=Math.floor(u/32),m=Math.floor(c/32),x=this.bits,w=h;w<=m;w++){var L=(2<<(w<m?31:31&c))-(1<<(w>h?0:31&u))&4294967295;if((x[w]&L)!==(p?L:0))return!1}return!0},f.prototype.appendBit=function(u){this.ensureCapacity(this.size+1),u&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},f.prototype.appendBits=function(u,c){if(c<0||c>32)throw new q("Num bits must be between 0 and 32");this.ensureCapacity(this.size+c);for(var h=c;h>0;h--)this.appendBit(1==(u>>h-1&1))},f.prototype.appendBitArray=function(u){var c=u.size;this.ensureCapacity(this.size+c);for(var h=0;h<c;h++)this.appendBit(u.get(h))},f.prototype.xor=function(u){if(this.size!==u.size)throw new q("Sizes don't match");for(var c=this.bits,p=0,h=c.length;p<h;p++)c[p]^=u.bits[p]},f.prototype.toBytes=function(u,c,p,h){for(var m=0;m<h;m++){for(var x=0,w=0;w<8;w++)this.get(u)&&(x|=1<<7-w),u++;c[p+m]=x}},f.prototype.getBitArray=function(){return this.bits},f.prototype.reverse=function(){for(var u=new Int32Array(this.bits.length),c=Math.floor((this.size-1)/32),p=c+1,h=this.bits,m=0;m<p;m++){var x=h[m];u[c-m]=x=(x=(x=(x=(x=x>>1&1431655765|(1431655765&x)<<1)>>2&858993459|(858993459&x)<<2)>>4&252645135|(252645135&x)<<4)>>8&16711935|(16711935&x)<<8)>>16&65535|(65535&x)<<16}if(this.size!==32*p){var w=32*p-this.size,b=u[0]>>>w;for(m=1;m<p;m++){var R=u[m];u[m-1]=b|=R<<32-w,b=R>>>w}u[p-1]=b}this.bits=u},f.makeArray=function(u){return new Int32Array(Math.floor((u+31)/32))},f.prototype.equals=function(u){return u instanceof f&&this.size===u.size&&lt.equals(this.bits,u.bits)},f.prototype.hashCode=function(){return 31*this.size+lt.hashCode(this.bits)},f.prototype.toString=function(){for(var u="",c=0,p=this.size;c<p;c++)0==(7&c)&&(u+=" "),u+=this.get(c)?"X":".";return u},f.prototype.clone=function(){return new f(this.size,this.bits.slice())},f}(),nn=(()=>(function(f){f[f.OTHER=0]="OTHER",f[f.PURE_BARCODE=1]="PURE_BARCODE",f[f.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",f[f.TRY_HARDER=3]="TRY_HARDER",f[f.CHARACTER_SET=4]="CHARACTER_SET",f[f.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",f[f.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",f[f.ASSUME_GS1=7]="ASSUME_GS1",f[f.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",f[f.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",f[f.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(nn||(nn={})),nn))(),Et=nn,rt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),de=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return rt(u,f),u.getFormatInstance=function(){return new u},u}(pe),Le=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Me=(()=>(function(f){f[f.Cp437=0]="Cp437",f[f.ISO8859_1=1]="ISO8859_1",f[f.ISO8859_2=2]="ISO8859_2",f[f.ISO8859_3=3]="ISO8859_3",f[f.ISO8859_4=4]="ISO8859_4",f[f.ISO8859_5=5]="ISO8859_5",f[f.ISO8859_6=6]="ISO8859_6",f[f.ISO8859_7=7]="ISO8859_7",f[f.ISO8859_8=8]="ISO8859_8",f[f.ISO8859_9=9]="ISO8859_9",f[f.ISO8859_10=10]="ISO8859_10",f[f.ISO8859_11=11]="ISO8859_11",f[f.ISO8859_13=12]="ISO8859_13",f[f.ISO8859_14=13]="ISO8859_14",f[f.ISO8859_15=14]="ISO8859_15",f[f.ISO8859_16=15]="ISO8859_16",f[f.SJIS=16]="SJIS",f[f.Cp1250=17]="Cp1250",f[f.Cp1251=18]="Cp1251",f[f.Cp1252=19]="Cp1252",f[f.Cp1256=20]="Cp1256",f[f.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",f[f.UTF8=22]="UTF8",f[f.ASCII=23]="ASCII",f[f.Big5=24]="Big5",f[f.GB18030=25]="GB18030",f[f.EUC_KR=26]="EUC_KR"}(Me||(Me={})),Me))(),Oe=function(){function f(u,c,p){for(var h,m,x=[],w=3;w<arguments.length;w++)x[w-3]=arguments[w];this.valueIdentifier=u,this.name=p,this.values="number"==typeof c?Int32Array.from([c]):c,this.otherEncodingNames=x,f.VALUE_IDENTIFIER_TO_ECI.set(u,this),f.NAME_TO_ECI.set(p,this);for(var b=this.values,R=0,L=b.length;R!==L;R++)f.VALUES_TO_ECI.set(b[R],this);try{for(var H=Le(x),j=H.next();!j.done;j=H.next())f.NAME_TO_ECI.set(j.value,this)}catch(oe){h={error:oe}}finally{try{j&&!j.done&&(m=H.return)&&m.call(H)}finally{if(h)throw h.error}}}return f.prototype.getValueIdentifier=function(){return this.valueIdentifier},f.prototype.getName=function(){return this.name},f.prototype.getValue=function(){return this.values[0]},f.getCharacterSetECIByValue=function(u){if(u<0||u>=900)throw new de("incorect value");var c=f.VALUES_TO_ECI.get(u);if(void 0===c)throw new de("incorect value");return c},f.getCharacterSetECIByName=function(u){var c=f.NAME_TO_ECI.get(u);if(void 0===c)throw new de("incorect value");return c},f.prototype.equals=function(u){if(!(u instanceof f))return!1;var c=u;return this.getName()===c.getName()},f.VALUE_IDENTIFIER_TO_ECI=new Map,f.VALUES_TO_ECI=new Map,f.NAME_TO_ECI=new Map,f.Cp437=new f(Me.Cp437,Int32Array.from([0,2]),"Cp437"),f.ISO8859_1=new f(Me.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),f.ISO8859_2=new f(Me.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),f.ISO8859_3=new f(Me.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),f.ISO8859_4=new f(Me.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),f.ISO8859_5=new f(Me.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),f.ISO8859_6=new f(Me.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),f.ISO8859_7=new f(Me.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),f.ISO8859_8=new f(Me.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),f.ISO8859_9=new f(Me.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),f.ISO8859_10=new f(Me.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),f.ISO8859_11=new f(Me.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),f.ISO8859_13=new f(Me.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),f.ISO8859_14=new f(Me.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),f.ISO8859_15=new f(Me.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),f.ISO8859_16=new f(Me.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),f.SJIS=new f(Me.SJIS,20,"SJIS","Shift_JIS"),f.Cp1250=new f(Me.Cp1250,21,"Cp1250","windows-1250"),f.Cp1251=new f(Me.Cp1251,22,"Cp1251","windows-1251"),f.Cp1252=new f(Me.Cp1252,23,"Cp1252","windows-1252"),f.Cp1256=new f(Me.Cp1256,24,"Cp1256","windows-1256"),f.UnicodeBigUnmarked=new f(Me.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),f.UTF8=new f(Me.UTF8,26,"UTF8","UTF-8"),f.ASCII=new f(Me.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),f.Big5=new f(Me.Big5,28,"Big5"),f.GB18030=new f(Me.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),f.EUC_KR=new f(Me.EUC_KR,30,"EUC_KR","EUC-KR"),f}(),dt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),je=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return dt(u,f),u}(pe),Nt=function(){function f(){}return f.decode=function(u,c){var p=this.encodingName(c);return this.customDecoder?this.customDecoder(u,p):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(p)?this.decodeFallback(u,p):new TextDecoder(p).decode(u)},f.shouldDecodeOnFallback=function(u){return!f.isBrowser()&&"ISO-8859-1"===u},f.encode=function(u,c){var p=this.encodingName(c);return this.customEncoder?this.customEncoder(u,p):"undefined"==typeof TextEncoder?this.encodeFallback(u):(new TextEncoder).encode(u)},f.isBrowser=function(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)},f.encodingName=function(u){return"string"==typeof u?u:u.getName()},f.encodingCharacterSet=function(u){return u instanceof Oe?u:Oe.getCharacterSetECIByName(u)},f.decodeFallback=function(u,c){var p=this.encodingCharacterSet(c);if(f.isDecodeFallbackSupported(p)){for(var h="",m=0,x=u.length;m<x;m++){var w=u[m].toString(16);w.length<2&&(w="0"+w),h+="%"+w}return decodeURIComponent(h)}if(p.equals(Oe.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(u.buffer));throw new je("Encoding "+this.encodingName(c)+" not supported by fallback.")},f.isDecodeFallbackSupported=function(u){return u.equals(Oe.UTF8)||u.equals(Oe.ISO8859_1)||u.equals(Oe.ASCII)},f.encodeFallback=function(u){for(var p=btoa(unescape(encodeURIComponent(u))).split(""),h=[],m=0;m<p.length;m++)h.push(p[m].charCodeAt(0));return new Uint8Array(h)},f}(),Pt=function(){function f(){}return f.castAsNonUtf8Char=function(u,c){void 0===c&&(c=null);var p=c?c.getName():this.ISO88591;return Nt.decode(new Uint8Array([u]),p)},f.guessEncoding=function(u,c){if(null!=c&&void 0!==c.get(Et.CHARACTER_SET))return c.get(Et.CHARACTER_SET).toString();for(var p=u.length,h=!0,m=!0,x=!0,w=0,b=0,R=0,L=0,V=0,H=0,j=0,K=0,oe=0,_e=0,ve=0,ge=u.length>3&&239===u[0]&&187===u[1]&&191===u[2],Ne=0;Ne<p&&(h||m||x);Ne++){var Ge=255&u[Ne];x&&(w>0?0==(128&Ge)?x=!1:w--:0!=(128&Ge)&&(0==(64&Ge)?x=!1:(w++,0==(32&Ge)?b++:(w++,0==(16&Ge)?R++:(w++,0==(8&Ge)?L++:x=!1))))),h&&(Ge>127&&Ge<160?h=!1:Ge>159&&(Ge<192||215===Ge||247===Ge)&&ve++),m&&(V>0?Ge<64||127===Ge||Ge>252?m=!1:V--:128===Ge||160===Ge||Ge>239?m=!1:Ge>160&&Ge<224?(H++,K=0,++j>oe&&(oe=j)):Ge>127?(V++,j=0,++K>_e&&(_e=K)):(j=0,K=0))}return x&&w>0&&(x=!1),m&&V>0&&(m=!1),x&&(ge||b+R+L>0)?f.UTF8:m&&(f.ASSUME_SHIFT_JIS||oe>=3||_e>=3)?f.SHIFT_JIS:h&&m?2===oe&&2===H||10*ve>=p?f.SHIFT_JIS:f.ISO88591:h?f.ISO88591:m?f.SHIFT_JIS:x?f.UTF8:f.PLATFORM_DEFAULT_ENCODING},f.format=function(u){for(var c=[],p=1;p<arguments.length;p++)c[p-1]=arguments[p];var h=-1;function m(w,b,R,L,V,H){if("%%"===w)return"%";if(void 0!==c[++h]){w=L?parseInt(L.substr(1)):void 0;var K,j=V?parseInt(V.substr(1)):void 0;switch(H){case"s":K=c[h];break;case"c":K=c[h][0];break;case"f":K=parseFloat(c[h]).toFixed(w);break;case"p":K=parseFloat(c[h]).toPrecision(w);break;case"e":K=parseFloat(c[h]).toExponential(w);break;case"x":K=parseInt(c[h]).toString(j||16);break;case"d":K=parseFloat(parseInt(c[h],j||10).toPrecision(w)).toFixed(0)}K="object"==typeof K?JSON.stringify(K):(+K).toString(j);for(var oe=parseInt(R),_e=R&&R[0]+""=="0"?"0":" ";K.length<oe;)K=void 0!==b?K+_e:_e+K;return K}}return u.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,m)},f.getBytes=function(u,c){return Nt.encode(u,c)},f.getCharCode=function(u,c){return void 0===c&&(c=0),u.charCodeAt(c)},f.getCharAt=function(u){return String.fromCharCode(u)},f.SHIFT_JIS=Oe.SJIS.getName(),f.GB2312="GB2312",f.ISO88591=Oe.ISO8859_1.getName(),f.EUC_JP="EUC_JP",f.UTF8=Oe.UTF8.getName(),f.PLATFORM_DEFAULT_ENCODING=f.UTF8,f.ASSUME_SHIFT_JIS=!1,f}(),tn=function(){function f(u){void 0===u&&(u=""),this.value=u}return f.prototype.enableDecoding=function(u){return this.encoding=u,this},f.prototype.append=function(u){return this.value+="string"==typeof u?u.toString():this.encoding?Pt.castAsNonUtf8Char(u,this.encoding):String.fromCharCode(u),this},f.prototype.length=function(){return this.value.length},f.prototype.charAt=function(u){return this.value.charAt(u)},f.prototype.deleteCharAt=function(u){this.value=this.value.substr(0,u)+this.value.substring(u+1)},f.prototype.setCharAt=function(u,c){this.value=this.value.substr(0,u)+c+this.value.substr(u+1)},f.prototype.substring=function(u,c){return this.value.substring(u,c)},f.prototype.setLengthToZero=function(){this.value=""},f.prototype.toString=function(){return this.value},f.prototype.insert=function(u,c){this.value=this.value.substr(0,u)+c+this.value.substr(u+c.length)},f}(),kt=function(){function f(u,c,p,h){if(this.width=u,this.height=c,this.rowSize=p,this.bits=h,null==c&&(c=u),this.height=c,u<1||c<1)throw new q("Both dimensions must be greater than 0");null==p&&(p=Math.floor((u+31)/32)),this.rowSize=p,null==h&&(this.bits=new Int32Array(this.rowSize*this.height))}return f.parseFromBooleanArray=function(u){for(var c=u.length,p=u[0].length,h=new f(p,c),m=0;m<c;m++)for(var x=u[m],w=0;w<p;w++)x[w]&&h.set(w,m);return h},f.parseFromString=function(u,c,p){if(null===u)throw new q("stringRepresentation cannot be null");for(var h=new Array(u.length),m=0,x=0,w=-1,b=0,R=0;R<u.length;)if("\n"===u.charAt(R)||"\r"===u.charAt(R)){if(m>x){if(-1===w)w=m-x;else if(m-x!==w)throw new q("row lengths do not match");x=m,b++}R++}else if(u.substring(R,R+c.length)===c)R+=c.length,h[m]=!0,m++;else{if(u.substring(R,R+p.length)!==p)throw new q("illegal character encountered: "+u.substring(R));R+=p.length,h[m]=!1,m++}if(m>x){if(-1===w)w=m-x;else if(m-x!==w)throw new q("row lengths do not match");b++}for(var L=new f(w,b),V=0;V<m;V++)h[V]&&L.set(Math.floor(V%w),Math.floor(V/w));return L},f.prototype.get=function(u,c){var p=c*this.rowSize+Math.floor(u/32);return 0!=(this.bits[p]>>>(31&u)&1)},f.prototype.set=function(u,c){var p=c*this.rowSize+Math.floor(u/32);this.bits[p]|=1<<(31&u)&4294967295},f.prototype.unset=function(u,c){var p=c*this.rowSize+Math.floor(u/32);this.bits[p]&=~(1<<(31&u)&4294967295)},f.prototype.flip=function(u,c){var p=c*this.rowSize+Math.floor(u/32);this.bits[p]^=1<<(31&u)&4294967295},f.prototype.xor=function(u){if(this.width!==u.getWidth()||this.height!==u.getHeight()||this.rowSize!==u.getRowSize())throw new q("input matrix dimensions do not match");for(var c=new St(Math.floor(this.width/32)+1),p=this.rowSize,h=this.bits,m=0,x=this.height;m<x;m++)for(var w=m*p,b=u.getRow(m,c).getBitArray(),R=0;R<p;R++)h[w+R]^=b[R]},f.prototype.clear=function(){for(var u=this.bits,c=u.length,p=0;p<c;p++)u[p]=0},f.prototype.setRegion=function(u,c,p,h){if(c<0||u<0)throw new q("Left and top must be nonnegative");if(h<1||p<1)throw new q("Height and width must be at least 1");var m=u+p,x=c+h;if(x>this.height||m>this.width)throw new q("The region must fit inside the matrix");for(var w=this.rowSize,b=this.bits,R=c;R<x;R++)for(var L=R*w,V=u;V<m;V++)b[L+Math.floor(V/32)]|=1<<(31&V)&4294967295},f.prototype.getRow=function(u,c){null==c||c.getSize()<this.width?c=new St(this.width):c.clear();for(var p=this.rowSize,h=this.bits,m=u*p,x=0;x<p;x++)c.setBulk(32*x,h[m+x]);return c},f.prototype.setRow=function(u,c){We.arraycopy(c.getBitArray(),0,this.bits,u*this.rowSize,this.rowSize)},f.prototype.rotate180=function(){for(var u=this.getWidth(),c=this.getHeight(),p=new St(u),h=new St(u),m=0,x=Math.floor((c+1)/2);m<x;m++)p=this.getRow(m,p),h=this.getRow(c-1-m,h),p.reverse(),h.reverse(),this.setRow(m,h),this.setRow(c-1-m,p)},f.prototype.getEnclosingRectangle=function(){for(var c=this.height,p=this.rowSize,h=this.bits,m=this.width,x=c,w=-1,b=-1,R=0;R<c;R++)for(var L=0;L<p;L++){var V=h[R*p+L];if(0!==V){if(R<x&&(x=R),R>b&&(b=R),32*L<m){for(var H=0;0==(V<<31-H&4294967295);)H++;32*L+H<m&&(m=32*L+H)}if(32*L+31>w){for(H=31;V>>>H==0;)H--;32*L+H>w&&(w=32*L+H)}}}return w<m||b<x?null:Int32Array.from([m,x,w-m+1,b-x+1])},f.prototype.getTopLeftOnBit=function(){for(var u=this.rowSize,c=this.bits,p=0;p<c.length&&0===c[p];)p++;if(p===c.length)return null;for(var h=p/u,m=p%u*32,x=c[p],w=0;0==(x<<31-w&4294967295);)w++;return Int32Array.from([m+=w,h])},f.prototype.getBottomRightOnBit=function(){for(var u=this.rowSize,c=this.bits,p=c.length-1;p>=0&&0===c[p];)p--;if(p<0)return null;for(var h=Math.floor(p/u),m=32*Math.floor(p%u),x=c[p],w=31;x>>>w==0;)w--;return Int32Array.from([m+=w,h])},f.prototype.getWidth=function(){return this.width},f.prototype.getHeight=function(){return this.height},f.prototype.getRowSize=function(){return this.rowSize},f.prototype.equals=function(u){return u instanceof f&&this.width===u.width&&this.height===u.height&&this.rowSize===u.rowSize&&lt.equals(this.bits,u.bits)},f.prototype.hashCode=function(){var u=this.width;return 31*(u=31*(u=31*(u=31*u+this.width)+this.height)+this.rowSize)+lt.hashCode(this.bits)},f.prototype.toString=function(u,c,p){return void 0===u&&(u="X "),void 0===c&&(c="  "),void 0===p&&(p="\n"),this.buildToString(u,c,p)},f.prototype.buildToString=function(u,c,p){for(var h=new tn,m=0,x=this.height;m<x;m++){for(var w=0,b=this.width;w<b;w++)h.append(this.get(w,m)?u:c);h.append(p)}return h.toString()},f.prototype.clone=function(){return new f(this.width,this.height,this.rowSize,this.bits.slice())},f}(),sn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Re=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return sn(u,f),u.getNotFoundInstance=function(){return new u},u}(pe),Zn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),si=function(f){function u(c){var p=f.call(this,c)||this;return p.luminances=u.EMPTY,p.buckets=new Int32Array(u.LUMINANCE_BUCKETS),p}return Zn(u,f),u.prototype.getBlackRow=function(c,p){var h=this.getLuminanceSource(),m=h.getWidth();null==p||p.getSize()<m?p=new St(m):p.clear(),this.initArrays(m);for(var x=h.getRow(c,this.luminances),w=this.buckets,b=0;b<m;b++)w[(255&x[b])>>u.LUMINANCE_SHIFT]++;var R=u.estimateBlackPoint(w);if(m<3)for(b=0;b<m;b++)(255&x[b])<R&&p.set(b);else{var L=255&x[0],V=255&x[1];for(b=1;b<m-1;b++){var H=255&x[b+1];(4*V-L-H)/2<R&&p.set(b),L=V,V=H}}return p},u.prototype.getBlackMatrix=function(){var c=this.getLuminanceSource(),p=c.getWidth(),h=c.getHeight(),m=new kt(p,h);this.initArrays(p);for(var x=this.buckets,w=1;w<5;w++)for(var b=Math.floor(h*w/5),R=c.getRow(b,this.luminances),L=Math.floor(4*p/5),V=Math.floor(p/5);V<L;V++)x[(255&R[V])>>u.LUMINANCE_SHIFT]++;var j=u.estimateBlackPoint(x),K=c.getMatrix();for(w=0;w<h;w++){var oe=w*p;for(V=0;V<p;V++)(255&K[oe+V])<j&&m.set(V,w)}return m},u.prototype.createBinarizer=function(c){return new u(c)},u.prototype.initArrays=function(c){this.luminances.length<c&&(this.luminances=new Uint8ClampedArray(c));for(var p=this.buckets,h=0;h<u.LUMINANCE_BUCKETS;h++)p[h]=0},u.estimateBlackPoint=function(c){for(var p=c.length,h=0,m=0,x=0,w=0;w<p;w++)c[w]>x&&(m=w,x=c[w]),c[w]>h&&(h=c[w]);var b=0,R=0;for(w=0;w<p;w++){var L=w-m;(V=c[w]*L*L)>R&&(b=w,R=V)}if(m>b){var H=m;m=b,b=H}if(b-m<=p/16)throw new Re;var j=b-1,K=-1;for(w=b-1;w>m;w--){var V,oe=w-m;(V=oe*oe*(b-w)*(h-c[w]))>K&&(j=w,K=V)}return j<<u.LUMINANCE_SHIFT},u.LUMINANCE_SHIFT=8-(u.LUMINANCE_BITS=5),u.LUMINANCE_BUCKETS=1<<u.LUMINANCE_BITS,u.EMPTY=Uint8ClampedArray.from([0]),u}(Ye),Li=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Wn=function(f){function u(c){var p=f.call(this,c)||this;return p.matrix=null,p}return Li(u,f),u.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var c=this.getLuminanceSource(),p=c.getWidth(),h=c.getHeight();if(p>=u.MINIMUM_DIMENSION&&h>=u.MINIMUM_DIMENSION){var m=c.getMatrix(),x=p>>u.BLOCK_SIZE_POWER;0!=(p&u.BLOCK_SIZE_MASK)&&x++;var w=h>>u.BLOCK_SIZE_POWER;0!=(h&u.BLOCK_SIZE_MASK)&&w++;var b=u.calculateBlackPoints(m,x,w,p,h),R=new kt(p,h);u.calculateThresholdForBlock(m,x,w,p,h,b,R),this.matrix=R}else this.matrix=f.prototype.getBlackMatrix.call(this);return this.matrix},u.prototype.createBinarizer=function(c){return new u(c)},u.calculateThresholdForBlock=function(c,p,h,m,x,w,b){for(var R=x-u.BLOCK_SIZE,L=m-u.BLOCK_SIZE,V=0;V<h;V++){var H=V<<u.BLOCK_SIZE_POWER;H>R&&(H=R);for(var j=u.cap(V,2,h-3),K=0;K<p;K++){var oe=K<<u.BLOCK_SIZE_POWER;oe>L&&(oe=L);for(var _e=u.cap(K,2,p-3),ve=0,ge=-2;ge<=2;ge++){var Ne=w[j+ge];ve+=Ne[_e-2]+Ne[_e-1]+Ne[_e]+Ne[_e+1]+Ne[_e+2]}u.thresholdBlock(c,oe,H,ve/25,m,b)}}},u.cap=function(c,p,h){return c<p?p:c>h?h:c},u.thresholdBlock=function(c,p,h,m,x,w){for(var b=0,R=h*x+p;b<u.BLOCK_SIZE;b++,R+=x)for(var L=0;L<u.BLOCK_SIZE;L++)(255&c[R+L])<=m&&w.set(p+L,h+b)},u.calculateBlackPoints=function(c,p,h,m,x){for(var w=x-u.BLOCK_SIZE,b=m-u.BLOCK_SIZE,R=new Array(h),L=0;L<h;L++){R[L]=new Int32Array(p);var V=L<<u.BLOCK_SIZE_POWER;V>w&&(V=w);for(var H=0;H<p;H++){var j=H<<u.BLOCK_SIZE_POWER;j>b&&(j=b);for(var K=0,oe=255,_e=0,ve=0,ge=V*m+j;ve<u.BLOCK_SIZE;ve++,ge+=m){for(var Ne=0;Ne<u.BLOCK_SIZE;Ne++){var Ge=255&c[ge+Ne];K+=Ge,Ge<oe&&(oe=Ge),Ge>_e&&(_e=Ge)}if(_e-oe>u.MIN_DYNAMIC_RANGE)for(ve++,ge+=m;ve<u.BLOCK_SIZE;ve++,ge+=m)for(Ne=0;Ne<u.BLOCK_SIZE;Ne++)K+=255&c[ge+Ne]}var Je=K>>2*u.BLOCK_SIZE_POWER;if(_e-oe<=u.MIN_DYNAMIC_RANGE&&(Je=oe/2,L>0&&H>0)){var st=(R[L-1][H]+2*R[L][H-1]+R[L-1][H-1])/4;oe<st&&(Je=st)}R[L][H]=Je}}return R},u.BLOCK_SIZE_MASK=(u.BLOCK_SIZE=1<<(u.BLOCK_SIZE_POWER=3))-1,u.MINIMUM_DIMENSION=5*u.BLOCK_SIZE,u.MIN_DYNAMIC_RANGE=24,u}(si),Vn=function(){function f(u,c){this.width=u,this.height=c}return f.prototype.getWidth=function(){return this.width},f.prototype.getHeight=function(){return this.height},f.prototype.isCropSupported=function(){return!1},f.prototype.crop=function(u,c,p,h){throw new je("This luminance source does not support cropping.")},f.prototype.isRotateSupported=function(){return!1},f.prototype.rotateCounterClockwise=function(){throw new je("This luminance source does not support rotation by 90 degrees.")},f.prototype.rotateCounterClockwise45=function(){throw new je("This luminance source does not support rotation by 45 degrees.")},f.prototype.toString=function(){for(var u=new Uint8ClampedArray(this.width),c=new tn,p=0;p<this.height;p++){for(var h=this.getRow(p,u),m=0;m<this.width;m++){var x=255&h[m];c.append(x<64?"#":x<128?"+":x<192?".":" ")}c.append("\n")}return c.toString()},f}(),gn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Fr=function(f){function u(c){var p=f.call(this,c.getWidth(),c.getHeight())||this;return p.delegate=c,p}return gn(u,f),u.prototype.getRow=function(c,p){for(var h=this.delegate.getRow(c,p),m=this.getWidth(),x=0;x<m;x++)h[x]=255-(255&h[x]);return h},u.prototype.getMatrix=function(){for(var c=this.delegate.getMatrix(),p=this.getWidth()*this.getHeight(),h=new Uint8ClampedArray(p),m=0;m<p;m++)h[m]=255-(255&c[m]);return h},u.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},u.prototype.crop=function(c,p,h,m){return new u(this.delegate.crop(c,p,h,m))},u.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},u.prototype.invert=function(){return this.delegate},u.prototype.rotateCounterClockwise=function(){return new u(this.delegate.rotateCounterClockwise())},u.prototype.rotateCounterClockwise45=function(){return new u(this.delegate.rotateCounterClockwise45())},u}(Vn),ai=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),sa=function(f){function u(c){var p=f.call(this,c.width,c.height)||this;return p.canvas=c,p.tempCanvasElement=null,p.buffer=u.makeBufferFromCanvasImageData(c),p}return ai(u,f),u.makeBufferFromCanvasImageData=function(c){var p=c.getContext("2d").getImageData(0,0,c.width,c.height);return u.toGrayscaleBuffer(p.data,c.width,c.height)},u.toGrayscaleBuffer=function(c,p,h){for(var m=new Uint8ClampedArray(p*h),x=0,w=0,b=c.length;x<b;x+=4,w++)m[w]=0===c[x+3]?255:306*c[x]+601*c[x+1]+117*c[x+2]+512>>10;return m},u.prototype.getRow=function(c,p){if(c<0||c>=this.getHeight())throw new q("Requested row is outside the image: "+c);var h=this.getWidth(),m=c*h;return null===p?p=this.buffer.slice(m,m+h):(p.length<h&&(p=new Uint8ClampedArray(h)),p.set(this.buffer.slice(m,m+h))),p},u.prototype.getMatrix=function(){return this.buffer},u.prototype.isCropSupported=function(){return!0},u.prototype.crop=function(c,p,h,m){return f.prototype.crop.call(this,c,p,h,m),this},u.prototype.isRotateSupported=function(){return!0},u.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},u.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},u.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var c=this.canvas.ownerDocument.createElement("canvas");c.width=this.canvas.width,c.height=this.canvas.height,this.tempCanvasElement=c}return this.tempCanvasElement},u.prototype.rotate=function(c){var p=this.getTempCanvasElement(),h=p.getContext("2d"),m=c*u.DEGREE_TO_RADIANS,x=this.canvas.width,w=this.canvas.height,b=Math.ceil(Math.abs(Math.cos(m))*x+Math.abs(Math.sin(m))*w),R=Math.ceil(Math.abs(Math.sin(m))*x+Math.abs(Math.cos(m))*w);return p.width=b,p.height=R,h.translate(b/2,R/2),h.rotate(m),h.drawImage(this.canvas,x/-2,w/-2),this.buffer=u.makeBufferFromCanvasImageData(p),this},u.prototype.invert=function(){return new Fr(this)},u.DEGREE_TO_RADIANS=Math.PI/180,u}(Vn),ro=function(){function f(u,c,p){this.deviceId=u,this.label=c,this.kind="videoinput",this.groupId=p||void 0}return f.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},f}(),Cr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__awaiter:void 0)||function(f,u,c,p){return new(c||(c=Promise))(function(m,x){function w(L){try{R(p.next(L))}catch(V){x(V)}}function b(L){try{R(p.throw(L))}catch(V){x(V)}}function R(L){L.done?m(L.value):function(m){return m instanceof c?m:new c(function(x){x(m)})}(L.value).then(w,b)}R((p=p.apply(f,u||[])).next())})},vr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__generator:void 0)||function(f,u){var p,h,m,x,c={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return x={next:w(0),throw:w(1),return:w(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x;function w(R){return function(L){return function(R){if(p)throw new TypeError("Generator is already executing.");for(;c;)try{if(p=1,h&&(m=2&R[0]?h.return:R[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,R[1])).done)return m;switch(h=0,m&&(R=[2&R[0],m.value]),R[0]){case 0:case 1:m=R;break;case 4:return c.label++,{value:R[1],done:!1};case 5:c.label++,h=R[1],R=[0];continue;case 7:R=c.ops.pop(),c.trys.pop();continue;default:if(!(m=(m=c.trys).length>0&&m[m.length-1])&&(6===R[0]||2===R[0])){c=0;continue}if(3===R[0]&&(!m||R[1]>m[0]&&R[1]<m[3])){c.label=R[1];break}if(6===R[0]&&c.label<m[1]){c.label=m[1],m=R;break}if(m&&c.label<m[2]){c.label=m[2],c.ops.push(R);break}m[2]&&c.ops.pop(),c.trys.pop();continue}R=u.call(f,c)}catch(L){R=[6,L],h=0}finally{p=m=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([R,L])}}},Bi=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},xi=function(){function f(u,c,p){void 0===c&&(c=500),this.reader=u,this.timeBetweenScansMillis=c,this._hints=p,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(f.prototype,"hasNavigator",{get:function(){return"undefined"!=typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(u){this._timeBetweenDecodingAttempts=u<0?0:u},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"hints",{get:function(){return this._hints},set:function(u){this._hints=u||null},enumerable:!1,configurable:!0}),f.prototype.listVideoInputDevices=function(){return Cr(this,void 0,void 0,function(){var u,c,p,h,m,x,V,H;return vr(this,function(j){switch(j.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:u=j.sent(),c=[];try{for(p=Bi(u),h=p.next();!h.done;h=p.next())"videoinput"===(x="video"===(m=h.value).kind?"videoinput":m.kind)&&c.push({deviceId:m.deviceId||m.id,label:m.label||"Video device "+(c.length+1),kind:x,groupId:m.groupId})}catch(K){V={error:K}}finally{try{h&&!h.done&&(H=p.return)&&H.call(p)}finally{if(V)throw V.error}}return[2,c]}})})},f.prototype.getVideoInputDevices=function(){return Cr(this,void 0,void 0,function(){return vr(this,function(c){switch(c.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,c.sent().map(function(p){return new ro(p.deviceId,p.label)})]}})})},f.prototype.findDeviceById=function(u){return Cr(this,void 0,void 0,function(){var c;return vr(this,function(p){switch(p.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(c=p.sent())?[2,c.find(function(h){return h.deviceId===u})]:[2,null]}})})},f.prototype.decodeFromInputVideoDevice=function(u,c){return Cr(this,void 0,void 0,function(){return vr(this,function(p){switch(p.label){case 0:return[4,this.decodeOnceFromVideoDevice(u,c)];case 1:return[2,p.sent()]}})})},f.prototype.decodeOnceFromVideoDevice=function(u,c){return Cr(this,void 0,void 0,function(){return vr(this,function(m){switch(m.label){case 0:return this.reset(),[4,this.decodeOnceFromConstraints({video:u?{deviceId:{exact:u}}:{facingMode:"environment"}},c)];case 1:return[2,m.sent()]}})})},f.prototype.decodeOnceFromConstraints=function(u,c){return Cr(this,void 0,void 0,function(){var p;return vr(this,function(h){switch(h.label){case 0:return[4,navigator.mediaDevices.getUserMedia(u)];case 1:return p=h.sent(),[4,this.decodeOnceFromStream(p,c)];case 2:return[2,h.sent()]}})})},f.prototype.decodeOnceFromStream=function(u,c){return Cr(this,void 0,void 0,function(){var p;return vr(this,function(m){switch(m.label){case 0:return this.reset(),[4,this.attachStreamToVideo(u,c)];case 1:return p=m.sent(),[4,this.decodeOnce(p)];case 2:return[2,m.sent()]}})})},f.prototype.decodeFromInputVideoDeviceContinuously=function(u,c,p){return Cr(this,void 0,void 0,function(){return vr(this,function(h){switch(h.label){case 0:return[4,this.decodeFromVideoDevice(u,c,p)];case 1:return[2,h.sent()]}})})},f.prototype.decodeFromVideoDevice=function(u,c,p){return Cr(this,void 0,void 0,function(){return vr(this,function(x){switch(x.label){case 0:return[4,this.decodeFromConstraints({video:u?{deviceId:{exact:u}}:{facingMode:"environment"}},c,p)];case 1:return[2,x.sent()]}})})},f.prototype.decodeFromConstraints=function(u,c,p){return Cr(this,void 0,void 0,function(){var h;return vr(this,function(m){switch(m.label){case 0:return[4,navigator.mediaDevices.getUserMedia(u)];case 1:return h=m.sent(),[4,this.decodeFromStream(h,c,p)];case 2:return[2,m.sent()]}})})},f.prototype.decodeFromStream=function(u,c,p){return Cr(this,void 0,void 0,function(){var h;return vr(this,function(m){switch(m.label){case 0:return this.reset(),[4,this.attachStreamToVideo(u,c)];case 1:return h=m.sent(),[4,this.decodeContinuously(h,p)];case 2:return[2,m.sent()]}})})},f.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},f.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},f.prototype.attachStreamToVideo=function(u,c){return Cr(this,void 0,void 0,function(){var p;return vr(this,function(h){switch(h.label){case 0:return p=this.prepareVideoElement(c),this.addVideoSource(p,u),this.videoElement=p,this.stream=u,[4,this.playVideoOnLoadAsync(p)];case 1:return h.sent(),[2,p]}})})},f.prototype.playVideoOnLoadAsync=function(u){var c=this;return new Promise(function(p,h){return c.playVideoOnLoad(u,function(){return p()})})},f.prototype.playVideoOnLoad=function(u,c){var p=this;this.videoEndedListener=function(){return p.stopStreams()},this.videoCanPlayListener=function(){return p.tryPlayVideo(u)},u.addEventListener("ended",this.videoEndedListener),u.addEventListener("canplay",this.videoCanPlayListener),u.addEventListener("playing",c),this.tryPlayVideo(u)},f.prototype.isVideoPlaying=function(u){return u.currentTime>0&&!u.paused&&!u.ended&&u.readyState>2},f.prototype.tryPlayVideo=function(u){return Cr(this,void 0,void 0,function(){return vr(this,function(p){switch(p.label){case 0:if(this.isVideoPlaying(u))return console.warn("Trying to play video that is already playing."),[2];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,u.play()];case 2:return p.sent(),[3,4];case 3:return p.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},f.prototype.getMediaElement=function(u,c){var p=document.getElementById(u);if(!p)throw new xe("element with id '"+u+"' not found");if(p.nodeName.toLowerCase()!==c.toLowerCase())throw new xe("element with id '"+u+"' must be an "+c+" element");return p},f.prototype.decodeFromImage=function(u,c){if(!u&&!c)throw new xe("either imageElement with a src set or an url must be provided");return c&&!u?this.decodeFromImageUrl(c):this.decodeFromImageElement(u)},f.prototype.decodeFromVideo=function(u,c){if(!u&&!c)throw new xe("Either an element with a src set or an URL must be provided");return c&&!u?this.decodeFromVideoUrl(c):this.decodeFromVideoElement(u)},f.prototype.decodeFromVideoContinuously=function(u,c,p){if(void 0===u&&void 0===c)throw new xe("Either an element with a src set or an URL must be provided");return c&&!u?this.decodeFromVideoUrlContinuously(c,p):this.decodeFromVideoElementContinuously(u,p)},f.prototype.decodeFromImageElement=function(u){if(!u)throw new xe("An image element must be provided.");this.reset();var c=this.prepareImageElement(u);return this.imageElement=c,this.isImageLoaded(c)?this.decodeOnce(c,!1,!0):this._decodeOnLoadImage(c)},f.prototype.decodeFromVideoElement=function(u){var c=this._decodeFromVideoElementSetup(u);return this._decodeOnLoadVideo(c)},f.prototype.decodeFromVideoElementContinuously=function(u,c){var p=this._decodeFromVideoElementSetup(u);return this._decodeOnLoadVideoContinuously(p,c)},f.prototype._decodeFromVideoElementSetup=function(u){if(!u)throw new xe("A video element must be provided.");this.reset();var c=this.prepareVideoElement(u);return this.videoElement=c,c},f.prototype.decodeFromImageUrl=function(u){if(!u)throw new xe("An URL must be provided.");this.reset();var c=this.prepareImageElement();this.imageElement=c;var p=this._decodeOnLoadImage(c);return c.src=u,p},f.prototype.decodeFromVideoUrl=function(u){if(!u)throw new xe("An URL must be provided.");this.reset();var c=this.prepareVideoElement(),p=this.decodeFromVideoElement(c);return c.src=u,p},f.prototype.decodeFromVideoUrlContinuously=function(u,c){if(!u)throw new xe("An URL must be provided.");this.reset();var p=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(p,c);return p.src=u,h},f.prototype._decodeOnLoadImage=function(u){var c=this;return new Promise(function(p,h){c.imageLoadedListener=function(){return c.decodeOnce(u,!1,!0).then(p,h)},u.addEventListener("load",c.imageLoadedListener)})},f.prototype._decodeOnLoadVideo=function(u){return Cr(this,void 0,void 0,function(){return vr(this,function(c){switch(c.label){case 0:return[4,this.playVideoOnLoadAsync(u)];case 1:return c.sent(),[4,this.decodeOnce(u)];case 2:return[2,c.sent()]}})})},f.prototype._decodeOnLoadVideoContinuously=function(u,c){return Cr(this,void 0,void 0,function(){return vr(this,function(p){switch(p.label){case 0:return[4,this.playVideoOnLoadAsync(u)];case 1:return p.sent(),this.decodeContinuously(u,c),[2]}})})},f.prototype.isImageLoaded=function(u){return!(!u.complete||0===u.naturalWidth)},f.prototype.prepareImageElement=function(u){var c;return void 0===u&&((c=document.createElement("img")).width=200,c.height=200),"string"==typeof u&&(c=this.getMediaElement(u,"img")),u instanceof HTMLImageElement&&(c=u),c},f.prototype.prepareVideoElement=function(u){var c;return!u&&"undefined"!=typeof document&&((c=document.createElement("video")).width=200,c.height=200),"string"==typeof u&&(c=this.getMediaElement(u,"video")),u instanceof HTMLVideoElement&&(c=u),c.setAttribute("autoplay","true"),c.setAttribute("muted","true"),c.setAttribute("playsinline","true"),c},f.prototype.decodeOnce=function(u,c,p){var h=this;void 0===c&&(c=!0),void 0===p&&(p=!0),this._stopAsyncDecode=!1;var m=function(x,w){if(h._stopAsyncDecode)return w(new Re("Video stream has ended before any code could be detected.")),void(h._stopAsyncDecode=void 0);try{x(h.decode(u))}catch(H){if(c&&H instanceof Re||(H instanceof Ee||H instanceof de)&&p)return setTimeout(m,h._timeBetweenDecodingAttempts,x,w);w(H)}};return new Promise(function(x,w){return m(x,w)})},f.prototype.decodeContinuously=function(u,c){var p=this;this._stopContinuousDecode=!1;var h=function(){if(p._stopContinuousDecode)p._stopContinuousDecode=void 0;else try{var m=p.decode(u);c(m,null),setTimeout(h,p.timeBetweenScansMillis)}catch(b){c(null,b),(b instanceof Ee||b instanceof de||b instanceof Re)&&setTimeout(h,p._timeBetweenDecodingAttempts)}};h()},f.prototype.decode=function(u){var c=this.createBinaryBitmap(u);return this.decodeBitmap(c)},f.prototype.createBinaryBitmap=function(u){var c=this.getCaptureCanvasContext(u);this.drawImageOnCanvas(c,u);var p=this.getCaptureCanvas(u),h=new sa(p),m=new Wn(h);return new se(m)},f.prototype.getCaptureCanvasContext=function(u){if(!this.captureCanvasContext){var p=this.getCaptureCanvas(u).getContext("2d");this.captureCanvasContext=p}return this.captureCanvasContext},f.prototype.getCaptureCanvas=function(u){if(!this.captureCanvas){var c=this.createCaptureCanvas(u);this.captureCanvas=c}return this.captureCanvas},f.prototype.drawImageOnCanvas=function(u,c){u.drawImage(c,0,0)},f.prototype.decodeBitmap=function(u){return this.reader.decode(u,this._hints)},f.prototype.createCaptureCanvas=function(u){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;var p,h,c=document.createElement("canvas");return void 0!==u&&(u instanceof HTMLVideoElement?(p=u.videoWidth,h=u.videoHeight):u instanceof HTMLImageElement&&(p=u.naturalWidth||u.width,h=u.naturalHeight||u.height)),c.style.width=p+"px",c.style.height=h+"px",c.width=p,c.height=h,c},f.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(u){return u.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},f.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},f.prototype._destroyVideoElement=function(){!this.videoElement||(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},f.prototype._destroyImageElement=function(){!this.imageElement||(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},f.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},f.prototype.addVideoSource=function(u,c){try{u.srcObject=c}catch(p){u.src=URL.createObjectURL(c)}},f.prototype.cleanVideoSource=function(u){try{u.srcObject=null}catch(c){u.src=""}this.videoElement.removeAttribute("src")},f}(),kr=function(){function f(u,c,p,h,m,x){void 0===p&&(p=null==c?0:8*c.length),void 0===x&&(x=We.currentTimeMillis()),this.text=u,this.rawBytes=c,this.numBits=p,this.resultPoints=h,this.format=m,this.timestamp=x,this.text=u,this.rawBytes=c,this.numBits=null==p?null==c?0:8*c.length:p,this.resultPoints=h,this.format=m,this.resultMetadata=null,this.timestamp=null==x?We.currentTimeMillis():x}return f.prototype.getText=function(){return this.text},f.prototype.getRawBytes=function(){return this.rawBytes},f.prototype.getNumBits=function(){return this.numBits},f.prototype.getResultPoints=function(){return this.resultPoints},f.prototype.getBarcodeFormat=function(){return this.format},f.prototype.getResultMetadata=function(){return this.resultMetadata},f.prototype.putMetadata=function(u,c){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(u,c)},f.prototype.putAllMetadata=function(u){null!==u&&(this.resultMetadata=null===this.resultMetadata?u:new Map(u))},f.prototype.addResultPoints=function(u){var c=this.resultPoints;if(null===c)this.resultPoints=u;else if(null!==u&&u.length>0){var p=new Array(c.length+u.length);We.arraycopy(c,0,p,0,c.length),We.arraycopy(u,0,p,c.length,u.length),this.resultPoints=p}},f.prototype.getTimestamp=function(){return this.timestamp},f.prototype.toString=function(){return this.text},f}(),At=(()=>(function(f){f[f.AZTEC=0]="AZTEC",f[f.CODABAR=1]="CODABAR",f[f.CODE_39=2]="CODE_39",f[f.CODE_93=3]="CODE_93",f[f.CODE_128=4]="CODE_128",f[f.DATA_MATRIX=5]="DATA_MATRIX",f[f.EAN_8=6]="EAN_8",f[f.EAN_13=7]="EAN_13",f[f.ITF=8]="ITF",f[f.MAXICODE=9]="MAXICODE",f[f.PDF_417=10]="PDF_417",f[f.QR_CODE=11]="QR_CODE",f[f.RSS_14=12]="RSS_14",f[f.RSS_EXPANDED=13]="RSS_EXPANDED",f[f.UPC_A=14]="UPC_A",f[f.UPC_E=15]="UPC_E",f[f.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(At||(At={})),At))(),Tt=At,wi=(()=>(function(f){f[f.OTHER=0]="OTHER",f[f.ORIENTATION=1]="ORIENTATION",f[f.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",f[f.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",f[f.ISSUE_NUMBER=4]="ISSUE_NUMBER",f[f.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",f[f.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",f[f.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",f[f.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",f[f.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",f[f.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(wi||(wi={})),wi))(),Mn=wi,Mt=function(){function f(u,c,p,h,m,x){void 0===m&&(m=-1),void 0===x&&(x=-1),this.rawBytes=u,this.text=c,this.byteSegments=p,this.ecLevel=h,this.structuredAppendSequenceNumber=m,this.structuredAppendParity=x,this.numBits=null==u?0:8*u.length}return f.prototype.getRawBytes=function(){return this.rawBytes},f.prototype.getNumBits=function(){return this.numBits},f.prototype.setNumBits=function(u){this.numBits=u},f.prototype.getText=function(){return this.text},f.prototype.getByteSegments=function(){return this.byteSegments},f.prototype.getECLevel=function(){return this.ecLevel},f.prototype.getErrorsCorrected=function(){return this.errorsCorrected},f.prototype.setErrorsCorrected=function(u){this.errorsCorrected=u},f.prototype.getErasures=function(){return this.erasures},f.prototype.setErasures=function(u){this.erasures=u},f.prototype.getOther=function(){return this.other},f.prototype.setOther=function(u){this.other=u},f.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},f.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},f.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},f}(),Ot=function(){function f(){}return f.prototype.exp=function(u){return this.expTable[u]},f.prototype.log=function(u){if(0===u)throw new q;return this.logTable[u]},f.addOrSubtract=function(u,c){return u^c},f}(),on=function(){function f(u,c){if(0===c.length)throw new q;this.field=u;var p=c.length;if(p>1&&0===c[0]){for(var h=1;h<p&&0===c[h];)h++;h===p?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(p-h),We.arraycopy(c,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}return f.prototype.getCoefficients=function(){return this.coefficients},f.prototype.getDegree=function(){return this.coefficients.length-1},f.prototype.isZero=function(){return 0===this.coefficients[0]},f.prototype.getCoefficient=function(u){return this.coefficients[this.coefficients.length-1-u]},f.prototype.evaluateAt=function(u){if(0===u)return this.getCoefficient(0);var p,c=this.coefficients;if(1===u){p=0;for(var h=0,m=c.length;h!==m;h++)p=Ot.addOrSubtract(p,c[h]);return p}p=c[0];var w=c.length,b=this.field;for(h=1;h<w;h++)p=Ot.addOrSubtract(b.multiply(u,p),c[h]);return p},f.prototype.addOrSubtract=function(u){if(!this.field.equals(u.field))throw new q("GenericGFPolys do not have same GenericGF field");if(this.isZero())return u;if(u.isZero())return this;var c=this.coefficients,p=u.coefficients;if(c.length>p.length){var h=c;c=p,p=h}var m=new Int32Array(p.length),x=p.length-c.length;We.arraycopy(p,0,m,0,x);for(var w=x;w<p.length;w++)m[w]=Ot.addOrSubtract(c[w-x],p[w]);return new f(this.field,m)},f.prototype.multiply=function(u){if(!this.field.equals(u.field))throw new q("GenericGFPolys do not have same GenericGF field");if(this.isZero()||u.isZero())return this.field.getZero();for(var c=this.coefficients,p=c.length,h=u.coefficients,m=h.length,x=new Int32Array(p+m-1),w=this.field,b=0;b<p;b++)for(var R=c[b],L=0;L<m;L++)x[b+L]=Ot.addOrSubtract(x[b+L],w.multiply(R,h[L]));return new f(w,x)},f.prototype.multiplyScalar=function(u){if(0===u)return this.field.getZero();if(1===u)return this;for(var c=this.coefficients.length,p=this.field,h=new Int32Array(c),m=this.coefficients,x=0;x<c;x++)h[x]=p.multiply(m[x],u);return new f(p,h)},f.prototype.multiplyByMonomial=function(u,c){if(u<0)throw new q;if(0===c)return this.field.getZero();for(var p=this.coefficients,h=p.length,m=new Int32Array(h+u),x=this.field,w=0;w<h;w++)m[w]=x.multiply(p[w],c);return new f(x,m)},f.prototype.divide=function(u){if(!this.field.equals(u.field))throw new q("GenericGFPolys do not have same GenericGF field");if(u.isZero())throw new q("Divide by 0");for(var c=this.field,p=c.getZero(),h=this,m=u.getCoefficient(u.getDegree()),x=c.inverse(m);h.getDegree()>=u.getDegree()&&!h.isZero();){var w=h.getDegree()-u.getDegree(),b=c.multiply(h.getCoefficient(h.getDegree()),x),R=u.multiplyByMonomial(w,b),L=c.buildMonomial(w,b);p=p.addOrSubtract(L),h=h.addOrSubtract(R)}return[p,h]},f.prototype.toString=function(){for(var u="",c=this.getDegree();c>=0;c--){var p=this.getCoefficient(c);if(0!==p){if(p<0?(u+=" - ",p=-p):u.length>0&&(u+=" + "),0===c||1!==p){var h=this.field.log(p);0===h?u+="1":1===h?u+="a":(u+="a^",u+=h)}0!==c&&(1===c?u+="x":(u+="x^",u+=c))}}return u},f}(),xn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),ui=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return xn(u,f),u}(pe),Un=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),ft=function(f){function u(c,p,h){var m=f.call(this)||this;m.primitive=c,m.size=p,m.generatorBase=h;for(var x=new Int32Array(p),w=1,b=0;b<p;b++)x[b]=w,(w*=2)>=p&&(w^=c,w&=p-1);m.expTable=x;var R=new Int32Array(p);for(b=0;b<p-1;b++)R[x[b]]=b;return m.logTable=R,m.zero=new on(m,Int32Array.from([0])),m.one=new on(m,Int32Array.from([1])),m}return Un(u,f),u.prototype.getZero=function(){return this.zero},u.prototype.getOne=function(){return this.one},u.prototype.buildMonomial=function(c,p){if(c<0)throw new q;if(0===p)return this.zero;var h=new Int32Array(c+1);return h[0]=p,new on(this,h)},u.prototype.inverse=function(c){if(0===c)throw new ui;return this.expTable[this.size-this.logTable[c]-1]},u.prototype.multiply=function(c,p){return 0===c||0===p?0:this.expTable[(this.logTable[c]+this.logTable[p])%(this.size-1)]},u.prototype.getSize=function(){return this.size},u.prototype.getGeneratorBase=function(){return this.generatorBase},u.prototype.toString=function(){return"GF(0x"+Pe.toHexString(this.primitive)+","+this.size+")"},u.prototype.equals=function(c){return c===this},u.AZTEC_DATA_12=new u(4201,4096,1),u.AZTEC_DATA_10=new u(1033,1024,1),u.AZTEC_DATA_6=new u(67,64,1),u.AZTEC_PARAM=new u(19,16,1),u.QR_CODE_FIELD_256=new u(285,256,0),u.DATA_MATRIX_FIELD_256=new u(301,256,1),u.AZTEC_DATA_8=u.DATA_MATRIX_FIELD_256,u.MAXICODE_FIELD_64=u.AZTEC_DATA_6,u}(Ot),Bt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Vi=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return Bt(u,f),u}(pe),Zo=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),$r=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return Zo(u,f),u}(pe),Fn=function(){function f(u){this.field=u}return f.prototype.decode=function(u,c){for(var p=this.field,h=new on(p,u),m=new Int32Array(c),x=!0,w=0;w<c;w++){var b=h.evaluateAt(p.exp(w+p.getGeneratorBase()));m[m.length-1-w]=b,0!==b&&(x=!1)}if(!x){var R=new on(p,m),L=this.runEuclideanAlgorithm(p.buildMonomial(c,1),R,c),H=L[1],j=this.findErrorLocations(L[0]),K=this.findErrorMagnitudes(H,j);for(w=0;w<j.length;w++){var oe=u.length-1-p.log(j[w]);if(oe<0)throw new Vi("Bad error location");u[oe]=ft.addOrSubtract(u[oe],K[w])}}},f.prototype.runEuclideanAlgorithm=function(u,c,p){if(u.getDegree()<c.getDegree()){var h=u;u=c,c=h}for(var m=this.field,x=u,w=c,b=m.getZero(),R=m.getOne();w.getDegree()>=(p/2|0);){var L=x,V=b;if(b=R,(x=w).isZero())throw new Vi("r_{i-1} was zero");w=L;for(var H=m.getZero(),j=x.getCoefficient(x.getDegree()),K=m.inverse(j);w.getDegree()>=x.getDegree()&&!w.isZero();){var oe=w.getDegree()-x.getDegree(),_e=m.multiply(w.getCoefficient(w.getDegree()),K);H=H.addOrSubtract(m.buildMonomial(oe,_e)),w=w.addOrSubtract(x.multiplyByMonomial(oe,_e))}if(R=H.multiply(b).addOrSubtract(V),w.getDegree()>=x.getDegree())throw new $r("Division algorithm failed to reduce polynomial?")}var ve=R.getCoefficient(0);if(0===ve)throw new Vi("sigmaTilde(0) was zero");var ge=m.inverse(ve);return[R.multiplyScalar(ge),w.multiplyScalar(ge)]},f.prototype.findErrorLocations=function(u){var c=u.getDegree();if(1===c)return Int32Array.from([u.getCoefficient(1)]);for(var p=new Int32Array(c),h=0,m=this.field,x=1;x<m.getSize()&&h<c;x++)0===u.evaluateAt(x)&&(p[h]=m.inverse(x),h++);if(h!==c)throw new Vi("Error locator degree does not match number of roots");return p},f.prototype.findErrorMagnitudes=function(u,c){for(var p=c.length,h=new Int32Array(p),m=this.field,x=0;x<p;x++){for(var w=m.inverse(c[x]),b=1,R=0;R<p;R++)if(x!==R){var L=m.multiply(c[R],w);b=m.multiply(b,0==(1&L)?1|L:-2&L)}h[x]=m.multiply(u.evaluateAt(w),m.inverse(b)),0!==m.getGeneratorBase()&&(h[x]=m.multiply(h[x],w))}return h},f}(),kn=(()=>(function(f){f[f.UPPER=0]="UPPER",f[f.LOWER=1]="LOWER",f[f.MIXED=2]="MIXED",f[f.DIGIT=3]="DIGIT",f[f.PUNCT=4]="PUNCT",f[f.BINARY=5]="BINARY"}(kn||(kn={})),kn))(),Ma=function(){function f(){}return f.prototype.decode=function(u){this.ddata=u;var c=u.getBits(),p=this.extractBits(c),h=this.correctBits(p),m=f.convertBoolArrayToByteArray(h),x=f.getEncodedData(h),w=new Mt(m,x,null,null);return w.setNumBits(h.length),w},f.highLevelDecode=function(u){return this.getEncodedData(u)},f.getEncodedData=function(u){for(var c=u.length,p=kn.UPPER,h=kn.UPPER,m="",x=0;x<c;)if(h===kn.BINARY){if(c-x<5)break;var w=f.readCode(u,x,5);if(x+=5,0===w){if(c-x<11)break;w=f.readCode(u,x,11)+31,x+=11}for(var b=0;b<w;b++){if(c-x<8){x=c;break}var R=f.readCode(u,x,8);m+=Pt.castAsNonUtf8Char(R),x+=8}h=p}else{var L=h===kn.DIGIT?4:5;if(c-x<L)break;R=f.readCode(u,x,L),x+=L;var V=f.getCharacter(h,R);V.startsWith("CTRL_")?(p=h,h=f.getTable(V.charAt(5)),"L"===V.charAt(6)&&(p=h)):(m+=V,h=p)}return m},f.getTable=function(u){switch(u){case"L":return kn.LOWER;case"P":return kn.PUNCT;case"M":return kn.MIXED;case"D":return kn.DIGIT;case"B":return kn.BINARY;case"U":default:return kn.UPPER}},f.getCharacter=function(u,c){switch(u){case kn.UPPER:return f.UPPER_TABLE[c];case kn.LOWER:return f.LOWER_TABLE[c];case kn.MIXED:return f.MIXED_TABLE[c];case kn.PUNCT:return f.PUNCT_TABLE[c];case kn.DIGIT:return f.DIGIT_TABLE[c];default:throw new $r("Bad table")}},f.prototype.correctBits=function(u){var c,p;this.ddata.getNbLayers()<=2?(p=6,c=ft.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(p=8,c=ft.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(p=10,c=ft.AZTEC_DATA_10):(p=12,c=ft.AZTEC_DATA_12);var h=this.ddata.getNbDatablocks(),m=u.length/p;if(m<h)throw new de;for(var x=u.length%p,w=new Int32Array(m),b=0;b<m;b++,x+=p)w[b]=f.readCode(u,x,p);try{new Fn(c).decode(w,m-h)}catch(_e){throw new de(_e)}var L=(1<<p)-1,V=0;for(b=0;b<h;b++){if(0===(H=w[b])||H===L)throw new de;(1===H||H===L-1)&&V++}var j=new Array(h*p-V),K=0;for(b=0;b<h;b++){var H;if(1===(H=w[b])||H===L-1)j.fill(H>1,K,K+p-1),K+=p-1;else for(var oe=p-1;oe>=0;--oe)j[K++]=0!=(H&1<<oe)}return j},f.prototype.extractBits=function(u){var c=this.ddata.isCompact(),p=this.ddata.getNbLayers(),h=(c?11:14)+4*p,m=new Int32Array(h),x=new Array(this.totalBitsInLayer(p,c));if(c)for(var w=0;w<m.length;w++)m[w]=w;else{var b=h+1+2*Pe.truncDivision(Pe.truncDivision(h,2)-1,15),R=h/2,L=Pe.truncDivision(b,2);for(w=0;w<R;w++){var V=w+Pe.truncDivision(w,15);m[R-w-1]=L-V-1,m[R+w]=L+V+1}}w=0;for(var H=0;w<p;w++){for(var j=4*(p-w)+(c?9:12),K=2*w,oe=h-1-K,_e=0;_e<j;_e++)for(var ve=2*_e,ge=0;ge<2;ge++)x[H+ve+ge]=u.get(m[K+ge],m[K+_e]),x[H+2*j+ve+ge]=u.get(m[K+_e],m[oe-ge]),x[H+4*j+ve+ge]=u.get(m[oe-ge],m[oe-_e]),x[H+6*j+ve+ge]=u.get(m[oe-_e],m[K+ge]);H+=8*j}return x},f.readCode=function(u,c,p){for(var h=0,m=c;m<c+p;m++)h<<=1,u[m]&&(h|=1);return h},f.readByte=function(u,c){var p=u.length-c;return p>=8?f.readCode(u,c,8):f.readCode(u,c,p)<<8-p},f.convertBoolArrayToByteArray=function(u){for(var c=new Uint8Array((u.length+7)/8),p=0;p<c.length;p++)c[p]=f.readByte(u,8*p);return c},f.prototype.totalBitsInLayer=function(u,c){return((c?88:112)+16*u)*u},f.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],f.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],f.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],f.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],f.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],f}(),ue=function(){function f(){}return f.prototype.MathUtils=function(){},f.round=function(u){return NaN===u?0:u<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:u>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:u+(u<0?-.5:.5)|0},f.distance=function(u,c,p,h){var m=u-p,x=c-h;return Math.sqrt(m*m+x*x)},f.sum=function(u){for(var c=0,p=0,h=u.length;p!==h;p++)c+=u[p];return c},f}(),he=function(){function f(){}return f.floatToIntBits=function(u){return u},f.MAX_VALUE=Number.MAX_SAFE_INTEGER,f}(),ae=function(){function f(u,c){this.x=u,this.y=c}return f.prototype.getX=function(){return this.x},f.prototype.getY=function(){return this.y},f.prototype.equals=function(u){return u instanceof f&&this.x===u.x&&this.y===u.y},f.prototype.hashCode=function(){return 31*he.floatToIntBits(this.x)+he.floatToIntBits(this.y)},f.prototype.toString=function(){return"("+this.x+","+this.y+")"},f.orderBestPatterns=function(u){var m,x,w,c=this.distance(u[0],u[1]),p=this.distance(u[1],u[2]),h=this.distance(u[0],u[2]);if(p>=c&&p>=h?(x=u[0],m=u[1],w=u[2]):h>=p&&h>=c?(x=u[1],m=u[0],w=u[2]):(x=u[2],m=u[0],w=u[1]),this.crossProductZ(m,x,w)<0){var b=m;m=w,w=b}u[0]=m,u[1]=x,u[2]=w},f.distance=function(u,c){return ue.distance(u.x,u.y,c.x,c.y)},f.crossProductZ=function(u,c,p){var h=c.x,m=c.y;return(p.x-h)*(u.y-m)-(p.y-m)*(u.x-h)},f}(),Qe=function(){function f(u,c){this.bits=u,this.points=c}return f.prototype.getBits=function(){return this.bits},f.prototype.getPoints=function(){return this.points},f}(),Fe=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),It=function(f){function u(c,p,h,m,x){var w=f.call(this,c,p)||this;return w.compact=h,w.nbDatablocks=m,w.nbLayers=x,w}return Fe(u,f),u.prototype.getNbLayers=function(){return this.nbLayers},u.prototype.getNbDatablocks=function(){return this.nbDatablocks},u.prototype.isCompact=function(){return this.compact},u}(Qe),Zt=function(){function f(u,c,p,h){this.image=u,this.height=u.getHeight(),this.width=u.getWidth(),null==c&&(c=f.INIT_SIZE),null==p&&(p=u.getWidth()/2|0),null==h&&(h=u.getHeight()/2|0);var m=c/2|0;if(this.leftInit=p-m,this.rightInit=p+m,this.upInit=h-m,this.downInit=h+m,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Re}return f.prototype.detect=function(){for(var u=this.leftInit,c=this.rightInit,p=this.upInit,h=this.downInit,m=!1,x=!0,w=!1,b=!1,R=!1,L=!1,V=!1,H=this.width,j=this.height;x;){x=!1;for(var K=!0;(K||!b)&&c<H;)(K=this.containsBlackPoint(p,h,c,!1))?(c++,x=!0,b=!0):b||c++;if(c>=H){m=!0;break}for(var oe=!0;(oe||!R)&&h<j;)(oe=this.containsBlackPoint(u,c,h,!0))?(h++,x=!0,R=!0):R||h++;if(h>=j){m=!0;break}for(var _e=!0;(_e||!L)&&u>=0;)(_e=this.containsBlackPoint(p,h,u,!1))?(u--,x=!0,L=!0):L||u--;if(u<0){m=!0;break}for(var ve=!0;(ve||!V)&&p>=0;)(ve=this.containsBlackPoint(u,c,p,!0))?(p--,x=!0,V=!0):V||p--;if(p<0){m=!0;break}x&&(w=!0)}if(!m&&w){for(var ge=c-u,Ne=null,Ge=1;null===Ne&&Ge<ge;Ge++)Ne=this.getBlackPointOnSegment(u,h-Ge,u+Ge,h);if(null==Ne)throw new Re;var Je=null;for(Ge=1;null===Je&&Ge<ge;Ge++)Je=this.getBlackPointOnSegment(u,p+Ge,u+Ge,p);if(null==Je)throw new Re;var st=null;for(Ge=1;null===st&&Ge<ge;Ge++)st=this.getBlackPointOnSegment(c,p+Ge,c-Ge,p);if(null==st)throw new Re;var pt=null;for(Ge=1;null===pt&&Ge<ge;Ge++)pt=this.getBlackPointOnSegment(c,h-Ge,c-Ge,h);if(null==pt)throw new Re;return this.centerEdges(pt,Ne,st,Je)}throw new Re},f.prototype.getBlackPointOnSegment=function(u,c,p,h){for(var m=ue.round(ue.distance(u,c,p,h)),x=(p-u)/m,w=(h-c)/m,b=this.image,R=0;R<m;R++){var L=ue.round(u+R*x),V=ue.round(c+R*w);if(b.get(L,V))return new ae(L,V)}return null},f.prototype.centerEdges=function(u,c,p,h){var m=u.getX(),x=u.getY(),w=c.getX(),b=c.getY(),R=p.getX(),L=p.getY(),V=h.getX(),H=h.getY(),j=f.CORR;return m<this.width/2?[new ae(V-j,H+j),new ae(w+j,b+j),new ae(R-j,L-j),new ae(m+j,x-j)]:[new ae(V+j,H+j),new ae(w+j,b-j),new ae(R-j,L+j),new ae(m-j,x-j)]},f.prototype.containsBlackPoint=function(u,c,p,h){var m=this.image;if(h){for(var x=u;x<=c;x++)if(m.get(x,p))return!0}else for(var w=u;w<=c;w++)if(m.get(p,w))return!0;return!1},f.INIT_SIZE=10,f.CORR=1,f}(),wn=function(){function f(){}return f.checkAndNudgePoints=function(u,c){for(var p=u.getWidth(),h=u.getHeight(),m=!0,x=0;x<c.length&&m;x+=2){var w=Math.floor(c[x]),b=Math.floor(c[x+1]);if(w<-1||w>p||b<-1||b>h)throw new Re;m=!1,-1===w?(c[x]=0,m=!0):w===p&&(c[x]=p-1,m=!0),-1===b?(c[x+1]=0,m=!0):b===h&&(c[x+1]=h-1,m=!0)}for(m=!0,x=c.length-2;x>=0&&m;x-=2){if(w=Math.floor(c[x]),b=Math.floor(c[x+1]),w<-1||w>p||b<-1||b>h)throw new Re;m=!1,-1===w?(c[x]=0,m=!0):w===p&&(c[x]=p-1,m=!0),-1===b?(c[x+1]=0,m=!0):b===h&&(c[x+1]=h-1,m=!0)}},f}(),zn=function(){function f(u,c,p,h,m,x,w,b,R){this.a11=u,this.a21=c,this.a31=p,this.a12=h,this.a22=m,this.a32=x,this.a13=w,this.a23=b,this.a33=R}return f.quadrilateralToQuadrilateral=function(u,c,p,h,m,x,w,b,R,L,V,H,j,K,oe,_e){var ve=f.quadrilateralToSquare(u,c,p,h,m,x,w,b);return f.squareToQuadrilateral(R,L,V,H,j,K,oe,_e).times(ve)},f.prototype.transformPoints=function(u){for(var c=u.length,p=this.a11,h=this.a12,m=this.a13,x=this.a21,w=this.a22,b=this.a23,R=this.a31,L=this.a32,V=this.a33,H=0;H<c;H+=2){var j=u[H],K=u[H+1],oe=m*j+b*K+V;u[H]=(p*j+x*K+R)/oe,u[H+1]=(h*j+w*K+L)/oe}},f.prototype.transformPointsWithValues=function(u,c){for(var p=this.a11,h=this.a12,m=this.a13,x=this.a21,w=this.a22,b=this.a23,R=this.a31,L=this.a32,V=this.a33,H=u.length,j=0;j<H;j++){var K=u[j],oe=c[j],_e=m*K+b*oe+V;u[j]=(p*K+x*oe+R)/_e,c[j]=(h*K+w*oe+L)/_e}},f.squareToQuadrilateral=function(u,c,p,h,m,x,w,b){var R=u-p+m-w,L=c-h+x-b;if(0===R&&0===L)return new f(p-u,m-p,u,h-c,x-h,c,0,0,1);var V=p-m,H=w-m,j=h-x,K=b-x,oe=V*K-H*j,_e=(R*K-H*L)/oe,ve=(V*L-R*j)/oe;return new f(p-u+_e*p,w-u+ve*w,u,h-c+_e*h,b-c+ve*b,c,_e,ve,1)},f.quadrilateralToSquare=function(u,c,p,h,m,x,w,b){return f.squareToQuadrilateral(u,c,p,h,m,x,w,b).buildAdjoint()},f.prototype.buildAdjoint=function(){return new f(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},f.prototype.times=function(u){return new f(this.a11*u.a11+this.a21*u.a12+this.a31*u.a13,this.a11*u.a21+this.a21*u.a22+this.a31*u.a23,this.a11*u.a31+this.a21*u.a32+this.a31*u.a33,this.a12*u.a11+this.a22*u.a12+this.a32*u.a13,this.a12*u.a21+this.a22*u.a22+this.a32*u.a23,this.a12*u.a31+this.a22*u.a32+this.a32*u.a33,this.a13*u.a11+this.a23*u.a12+this.a33*u.a13,this.a13*u.a21+this.a23*u.a22+this.a33*u.a23,this.a13*u.a31+this.a23*u.a32+this.a33*u.a33)},f}(),ur=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Ui=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return ur(u,f),u.prototype.sampleGrid=function(c,p,h,m,x,w,b,R,L,V,H,j,K,oe,_e,ve,ge,Ne,Ge){var Je=zn.quadrilateralToQuadrilateral(m,x,w,b,R,L,V,H,j,K,oe,_e,ve,ge,Ne,Ge);return this.sampleGridWithTransform(c,p,h,Je)},u.prototype.sampleGridWithTransform=function(c,p,h,m){if(p<=0||h<=0)throw new Re;for(var x=new kt(p,h),w=new Float32Array(2*p),b=0;b<h;b++){for(var R=w.length,L=b+.5,V=0;V<R;V+=2)w[V]=V/2+.5,w[V+1]=L;m.transformPoints(w),wn.checkAndNudgePoints(c,w);try{for(V=0;V<R;V+=2)c.get(Math.floor(w[V]),Math.floor(w[V+1]))&&x.set(V/2,b)}catch(H){throw new Re}}return x},u}(wn),mn=function(){function f(){}return f.setGridSampler=function(u){f.gridSampler=u},f.getInstance=function(){return f.gridSampler},f.gridSampler=new Ui,f}(),Rn=function(){function f(u,c){this.x=u,this.y=c}return f.prototype.toResultPoint=function(){return new ae(this.getX(),this.getY())},f.prototype.getX=function(){return this.x},f.prototype.getY=function(){return this.y},f}(),io=function(){function f(u){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=u}return f.prototype.detect=function(){return this.detectMirror(!1)},f.prototype.detectMirror=function(u){var c=this.getMatrixCenter(),p=this.getBullsEyeCorners(c);if(u){var h=p[0];p[0]=p[2],p[2]=h}this.extractParameters(p);var m=this.sampleGrid(this.image,p[this.shift%4],p[(this.shift+1)%4],p[(this.shift+2)%4],p[(this.shift+3)%4]),x=this.getMatrixCornerPoints(p);return new It(m,x,this.compact,this.nbDataBlocks,this.nbLayers)},f.prototype.extractParameters=function(u){if(!(this.isValidPoint(u[0])&&this.isValidPoint(u[1])&&this.isValidPoint(u[2])&&this.isValidPoint(u[3])))throw new Re;var c=2*this.nbCenterLayers,p=new Int32Array([this.sampleLine(u[0],u[1],c),this.sampleLine(u[1],u[2],c),this.sampleLine(u[2],u[3],c),this.sampleLine(u[3],u[0],c)]);this.shift=this.getRotation(p,c);for(var h=0,m=0;m<4;m++){var x=p[(this.shift+m)%4];this.compact?(h<<=7,h+=x>>1&127):(h<<=10,h+=(x>>2&992)+(x>>1&31))}var w=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=1+(w>>6),this.nbDataBlocks=1+(63&w)):(this.nbLayers=1+(w>>11),this.nbDataBlocks=1+(2047&w))},f.prototype.getRotation=function(u,c){var p=0;u.forEach(function(m,x,w){p=(m>>c-2<<1)+(1&m)+(p<<3)}),p=((1&p)<<11)+(p>>1);for(var h=0;h<4;h++)if(Pe.bitCount(p^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new Re},f.prototype.getCorrectedParameterData=function(u,c){var p,h;c?(p=7,h=2):(p=10,h=4);for(var m=p-h,x=new Int32Array(p),w=p-1;w>=0;--w)x[w]=15&u,u>>=4;try{new Fn(ft.AZTEC_PARAM).decode(x,m)}catch(L){throw new Re}var R=0;for(w=0;w<h;w++)R=(R<<4)+x[w];return R},f.prototype.getBullsEyeCorners=function(u){var c=u,p=u,h=u,m=u,x=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var w=this.getFirstDifferent(c,x,1,-1),b=this.getFirstDifferent(p,x,1,1),R=this.getFirstDifferent(h,x,-1,1),L=this.getFirstDifferent(m,x,-1,-1);if(this.nbCenterLayers>2){var V=this.distancePoint(L,w)*this.nbCenterLayers/(this.distancePoint(m,c)*(this.nbCenterLayers+2));if(V<.75||V>1.25||!this.isWhiteOrBlackRectangle(w,b,R,L))break}c=w,p=b,h=R,m=L,x=!x}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new Re;this.compact=5===this.nbCenterLayers;var H=new ae(c.getX()+.5,c.getY()-.5),j=new ae(p.getX()+.5,p.getY()+.5),K=new ae(h.getX()-.5,h.getY()+.5),oe=new ae(m.getX()-.5,m.getY()-.5);return this.expandSquare([H,j,K,oe],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},f.prototype.getMatrixCenter=function(){var u,c,p,h;try{u=(m=new Zt(this.image).detect())[0],c=m[1],p=m[2],h=m[3]}catch(L){var x=this.image.getWidth()/2,w=this.image.getHeight()/2;u=this.getFirstDifferent(new Rn(x+7,w-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new Rn(x+7,w+7),!1,1,1).toResultPoint(),p=this.getFirstDifferent(new Rn(x-7,w+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Rn(x-7,w-7),!1,-1,-1).toResultPoint()}var b=ue.round((u.getX()+h.getX()+c.getX()+p.getX())/4),R=ue.round((u.getY()+h.getY()+c.getY()+p.getY())/4);try{var m;u=(m=new Zt(this.image,15,b,R).detect())[0],c=m[1],p=m[2],h=m[3]}catch(L){u=this.getFirstDifferent(new Rn(b+7,R-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new Rn(b+7,R+7),!1,1,1).toResultPoint(),p=this.getFirstDifferent(new Rn(b-7,R+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Rn(b-7,R-7),!1,-1,-1).toResultPoint()}return b=ue.round((u.getX()+h.getX()+c.getX()+p.getX())/4),R=ue.round((u.getY()+h.getY()+c.getY()+p.getY())/4),new Rn(b,R)},f.prototype.getMatrixCornerPoints=function(u){return this.expandSquare(u,2*this.nbCenterLayers,this.getDimension())},f.prototype.sampleGrid=function(u,c,p,h,m){var x=mn.getInstance(),w=this.getDimension(),b=w/2-this.nbCenterLayers,R=w/2+this.nbCenterLayers;return x.sampleGrid(u,w,w,b,b,R,b,R,R,b,R,c.getX(),c.getY(),p.getX(),p.getY(),h.getX(),h.getY(),m.getX(),m.getY())},f.prototype.sampleLine=function(u,c,p){for(var h=0,m=this.distanceResultPoint(u,c),x=m/p,w=u.getX(),b=u.getY(),R=x*(c.getX()-u.getX())/m,L=x*(c.getY()-u.getY())/m,V=0;V<p;V++)this.image.get(ue.round(w+V*R),ue.round(b+V*L))&&(h|=1<<p-V-1);return h},f.prototype.isWhiteOrBlackRectangle=function(u,c,p,h){u=new Rn(u.getX()-3,u.getY()+3),c=new Rn(c.getX()-3,c.getY()-3),p=new Rn(p.getX()+3,p.getY()-3),h=new Rn(h.getX()+3,h.getY()+3);var x=this.getColor(h,u);if(0===x)return!1;var w=this.getColor(u,c);return w===x&&(w=this.getColor(c,p))===x&&(w=this.getColor(p,h))===x},f.prototype.getColor=function(u,c){for(var p=this.distancePoint(u,c),h=(c.getX()-u.getX())/p,m=(c.getY()-u.getY())/p,x=0,w=u.getX(),b=u.getY(),R=this.image.get(u.getX(),u.getY()),L=Math.ceil(p),V=0;V<L;V++)b+=m,this.image.get(ue.round(w+=h),ue.round(b))!==R&&x++;var H=x/p;return H>.1&&H<.9?0:H<=.1===R?1:-1},f.prototype.getFirstDifferent=function(u,c,p,h){for(var m=u.getX()+p,x=u.getY()+h;this.isValid(m,x)&&this.image.get(m,x)===c;)m+=p,x+=h;for(m-=p,x-=h;this.isValid(m,x)&&this.image.get(m,x)===c;)m+=p;for(m-=p;this.isValid(m,x)&&this.image.get(m,x)===c;)x+=h;return new Rn(m,x-=h)},f.prototype.expandSquare=function(u,c,p){var h=p/(2*c),m=u[0].getX()-u[2].getX(),x=u[0].getY()-u[2].getY(),w=(u[0].getX()+u[2].getX())/2,b=(u[0].getY()+u[2].getY())/2,R=new ae(w+h*m,b+h*x),L=new ae(w-h*m,b-h*x);return m=u[1].getX()-u[3].getX(),x=u[1].getY()-u[3].getY(),w=(u[1].getX()+u[3].getX())/2,b=(u[1].getY()+u[3].getY())/2,[R,new ae(w+h*m,b+h*x),L,new ae(w-h*m,b-h*x)]},f.prototype.isValid=function(u,c){return u>=0&&u<this.image.getWidth()&&c>0&&c<this.image.getHeight()},f.prototype.isValidPoint=function(u){var c=ue.round(u.getX()),p=ue.round(u.getY());return this.isValid(c,p)},f.prototype.distancePoint=function(u,c){return ue.distance(u.getX(),u.getY(),c.getX(),c.getY())},f.prototype.distanceResultPoint=function(u,c){return ue.distance(u.getX(),u.getY(),c.getX(),c.getY())},f.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Pe.truncDivision(this.nbLayers-4,8)+1)+15},f}(),aa=function(){function f(){}return f.prototype.decode=function(u,c){void 0===c&&(c=null);var p=null,h=new io(u.getBlackMatrix()),m=null,x=null;try{m=(w=h.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(c,m),x=(new Ma).decode(w)}catch(V){p=V}if(null==x)try{var w;m=(w=h.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(c,m),x=(new Ma).decode(w)}catch(V){throw null!=p?p:V}var b=new kr(x.getText(),x.getRawBytes(),x.getNumBits(),m,Tt.AZTEC,We.currentTimeMillis()),R=x.getByteSegments();null!=R&&b.putMetadata(Mn.BYTE_SEGMENTS,R);var L=x.getECLevel();return null!=L&&b.putMetadata(Mn.ERROR_CORRECTION_LEVEL,L),b},f.prototype.reportFoundResultPoints=function(u,c){if(null!=u){var p=u.get(Et.NEED_RESULT_POINT_CALLBACK);null!=p&&c.forEach(function(h,m,x){p.foundPossibleResultPoint(h)})}},f.prototype.reset=function(){},f}(),au=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Or=(function(f){au(function(c){return void 0===c&&(c=500),f.call(this,new aa,c)||this},f)}(xi),function(){function f(){}return f.prototype.decode=function(u,c){try{return this.doDecode(u,c)}catch(V){if(c&&!0===c.get(Et.TRY_HARDER)&&u.isRotateSupported()){var h=u.rotateCounterClockwise(),m=this.doDecode(h,c),x=m.getResultMetadata(),w=270;null!==x&&!0===x.get(Mn.ORIENTATION)&&(w+=x.get(Mn.ORIENTATION)%360),m.putMetadata(Mn.ORIENTATION,w);var b=m.getResultPoints();if(null!==b)for(var R=h.getHeight(),L=0;L<b.length;L++)b[L]=new ae(R-b[L].getY()-1,b[L].getX());return m}throw new Re}},f.prototype.reset=function(){},f.prototype.doDecode=function(u,c){var b,p=u.getWidth(),h=u.getHeight(),m=new St(p),x=c&&!0===c.get(Et.TRY_HARDER),w=Math.max(1,h>>(x?8:5));b=x?h:15;for(var R=Math.trunc(h/2),L=0;L<b;L++){var V=Math.trunc((L+1)/2),j=R+w*(0==(1&L)?V:-V);if(j<0||j>=h)break;try{m=u.getBlackRow(j,m)}catch(ge){continue}for(var K=function(ge){if(1===ge&&(m.reverse(),c&&!0===c.get(Et.NEED_RESULT_POINT_CALLBACK))){var Ne=new Map;c.forEach(function(st,pt){return Ne.set(pt,st)}),Ne.delete(Et.NEED_RESULT_POINT_CALLBACK),c=Ne}try{var Ge=oe.decodeRow(j,m,c);if(1===ge){Ge.putMetadata(Mn.ORIENTATION,180);var Je=Ge.getResultPoints();null!==Je&&(Je[0]=new ae(p-Je[0].getX()-1,Je[0].getY()),Je[1]=new ae(p-Je[1].getX()-1,Je[1].getY()))}return{value:Ge}}catch(st){}},oe=this,_e=0;_e<2;_e++){var ve=K(_e);if("object"==typeof ve)return ve.value}}throw new Re},f.recordPattern=function(u,c,p){for(var h=p.length,m=0;m<h;m++)p[m]=0;var x=u.getSize();if(c>=x)throw new Re;for(var w=!u.get(c),b=0,R=c;R<x;){if(u.get(R)!==w)p[b]++;else{if(++b===h)break;p[b]=1,w=!w}R++}if(b!==h&&(b!==h-1||R!==x))throw new Re},f.recordPatternInReverse=function(u,c,p){for(var h=p.length,m=u.get(c);c>0&&h>=0;)u.get(--c)!==m&&(h--,m=!m);if(h>=0)throw new Re;f.recordPattern(u,c+1,p)},f.patternMatchVariance=function(u,c,p){for(var h=u.length,m=0,x=0,w=0;w<h;w++)m+=u[w],x+=c[w];if(m<x)return Number.POSITIVE_INFINITY;var b=m/x;p*=b;for(var R=0,L=0;L<h;L++){var V=u[L],H=c[L]*b,j=V>H?V-H:H-V;if(j>p)return Number.POSITIVE_INFINITY;R+=j}return R/m},f}()),Pc=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Ko=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},ni=function(f){function u(c,p){void 0===c&&(c=!1),void 0===p&&(p=!1);var h=f.call(this)||this;return h.usingCheckDigit=c,h.extendedMode=p,h.decodeRowResult="",h.counters=new Array(9),h}return Pc(u,f),u.prototype.decodeRow=function(c,p,h){var m,x,w,b,R=this.counters;R.fill(0),this.decodeRowResult="";var j,K,L=u.findAsteriskPattern(p,R),V=p.getNextSet(L[1]),H=p.getSize();do{u.recordPattern(p,V,R);var oe=u.toNarrowWidePattern(R);if(oe<0)throw new Re;j=u.patternToChar(oe),this.decodeRowResult+=j,K=V;try{for(var _e=(m=void 0,Ko(R)),ve=_e.next();!ve.done;ve=_e.next())V+=ve.value}catch(er){m={error:er}}finally{try{ve&&!ve.done&&(x=_e.return)&&x.call(_e)}finally{if(m)throw m.error}}V=p.getNextSet(V)}while("*"!==j);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var qt,Ne=0;try{for(var Ge=Ko(R),Je=Ge.next();!Je.done;Je=Ge.next())Ne+=Je.value}catch(er){w={error:er}}finally{try{Je&&!Je.done&&(b=Ge.return)&&b.call(Ge)}finally{if(w)throw w.error}}if(V!==H&&2*(V-K-Ne)<Ne)throw new Re;if(this.usingCheckDigit){for(var pt=this.decodeRowResult.length-1,Rt=0,Vt=0;Vt<pt;Vt++)Rt+=u.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Vt));if(this.decodeRowResult.charAt(pt)!==u.ALPHABET_STRING.charAt(Rt%43))throw new Ee;this.decodeRowResult=this.decodeRowResult.substring(0,pt)}if(0===this.decodeRowResult.length)throw new Re;qt=this.extendedMode?u.decodeExtended(this.decodeRowResult):this.decodeRowResult;var _n=K+Ne/2;return new kr(qt,null,0,[new ae((L[1]+L[0])/2,c),new ae(_n,c)],Tt.CODE_39,(new Date).getTime())},u.findAsteriskPattern=function(c,p){for(var h=c.getSize(),m=c.getNextSet(0),x=0,w=m,b=!1,R=p.length,L=m;L<h;L++)if(c.get(L)!==b)p[x]++;else{if(x===R-1){if(this.toNarrowWidePattern(p)===u.ASTERISK_ENCODING&&c.isRange(Math.max(0,w-Math.floor((L-w)/2)),w,!1))return[w,L];w+=p[0]+p[1],p.copyWithin(0,2,2+x-1),p[x-1]=0,p[x]=0,x--}else x++;p[x]=1,b=!b}throw new Re},u.toNarrowWidePattern=function(c){var p,h,w,m=c.length,x=0;do{var b=2147483647;try{for(var R=(p=void 0,Ko(c)),L=R.next();!L.done;L=R.next())(V=L.value)<b&&V>x&&(b=V)}catch(oe){p={error:oe}}finally{try{L&&!L.done&&(h=R.return)&&h.call(R)}finally{if(p)throw p.error}}x=b,w=0;for(var H=0,j=0,K=0;K<m;K++)(V=c[K])>x&&(j|=1<<m-1-K,w++,H+=V);if(3===w){for(K=0;K<m&&w>0;K++){var V;if((V=c[K])>x&&(w--,2*V>=H))return-1}return j}}while(w>3);return-1},u.patternToChar=function(c){for(var p=0;p<u.CHARACTER_ENCODINGS.length;p++)if(u.CHARACTER_ENCODINGS[p]===c)return u.ALPHABET_STRING.charAt(p);if(c===u.ASTERISK_ENCODING)return"*";throw new Re},u.decodeExtended=function(c){for(var p=c.length,h="",m=0;m<p;m++){var x=c.charAt(m);if("+"===x||"$"===x||"%"===x||"/"===x){var w=c.charAt(m+1),b="\0";switch(x){case"+":if(!(w>="A"&&w<="Z"))throw new de;b=String.fromCharCode(w.charCodeAt(0)+32);break;case"$":if(!(w>="A"&&w<="Z"))throw new de;b=String.fromCharCode(w.charCodeAt(0)-64);break;case"%":if(w>="A"&&w<="E")b=String.fromCharCode(w.charCodeAt(0)-38);else if(w>="F"&&w<="J")b=String.fromCharCode(w.charCodeAt(0)-11);else if(w>="K"&&w<="O")b=String.fromCharCode(w.charCodeAt(0)+16);else if(w>="P"&&w<="T")b=String.fromCharCode(w.charCodeAt(0)+43);else if("U"===w)b="\0";else if("V"===w)b="@";else if("W"===w)b="`";else{if("X"!==w&&"Y"!==w&&"Z"!==w)throw new de;b="\x7f"}break;case"/":if(w>="A"&&w<="O")b=String.fromCharCode(w.charCodeAt(0)-32);else{if("Z"!==w)throw new de;b=":"}}h+=b,m++}else h+=x}return h},u.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",u.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],u.ASTERISK_ENCODING=148,u}(Or),Hi=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),ci=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return Hi(u,f),u.findStartPattern=function(c){for(var p=c.getSize(),h=c.getNextSet(0),m=0,x=[0,0,0,0,0,0],w=h,b=!1,L=h;L<p;L++)if(c.get(L)!==b)x[m]++;else{if(5===m){for(var V=u.MAX_AVG_VARIANCE,H=-1,j=u.CODE_START_A;j<=u.CODE_START_C;j++){var K=Or.patternMatchVariance(x,u.CODE_PATTERNS[j],u.MAX_INDIVIDUAL_VARIANCE);K<V&&(V=K,H=j)}if(H>=0&&c.isRange(Math.max(0,w-(L-w)/2),w,!1))return[w,L,H];w+=x[0]+x[1],x.splice(0,2),x[m-1]=0,x[m]=0,m--}else m++;x[m]=1,b=!b}throw new Re},u.decodeCode=function(c,p,h){Or.recordPattern(c,h,p);for(var m=u.MAX_AVG_VARIANCE,x=-1,w=0;w<u.CODE_PATTERNS.length;w++){var R=this.patternMatchVariance(p,u.CODE_PATTERNS[w],u.MAX_INDIVIDUAL_VARIANCE);R<m&&(m=R,x=w)}if(x>=0)return x;throw new Re},u.prototype.decodeRow=function(c,p,h){var L,m=h&&!0===h.get(Et.ASSUME_GS1),x=u.findStartPattern(p),w=x[2],b=0,R=new Uint8Array(20);switch(R[b++]=w,w){case u.CODE_START_A:L=u.CODE_CODE_A;break;case u.CODE_START_B:L=u.CODE_CODE_B;break;case u.CODE_START_C:L=u.CODE_CODE_C;break;default:throw new de}for(var V=!1,H=!1,j="",K=x[0],oe=x[1],_e=[0,0,0,0,0,0],ve=0,ge=0,Ne=w,Ge=0,Je=!0,st=!1,pt=!1;!V;){var Rt=H;switch(H=!1,ve=ge,ge=u.decodeCode(p,_e,oe),R[b++]=ge,ge!==u.CODE_STOP&&(Je=!0),ge!==u.CODE_STOP&&(Ne+=++Ge*ge),K=oe,oe+=_e.reduce(function(pr,jr){return pr+jr},0),ge){case u.CODE_START_A:case u.CODE_START_B:case u.CODE_START_C:throw new de}switch(L){case u.CODE_CODE_A:if(ge<64)j+=String.fromCharCode(pt===st?" ".charCodeAt(0)+ge:" ".charCodeAt(0)+ge+128),pt=!1;else if(ge<96)j+=String.fromCharCode(pt===st?ge-64:ge+64),pt=!1;else switch(ge!==u.CODE_STOP&&(Je=!1),ge){case u.CODE_FNC_1:m&&(j+=0===j.length?"]C1":String.fromCharCode(29));break;case u.CODE_FNC_2:case u.CODE_FNC_3:break;case u.CODE_FNC_4_A:!st&&pt?(st=!0,pt=!1):st&&pt?(st=!1,pt=!1):pt=!0;break;case u.CODE_SHIFT:H=!0,L=u.CODE_CODE_B;break;case u.CODE_CODE_B:L=u.CODE_CODE_B;break;case u.CODE_CODE_C:L=u.CODE_CODE_C;break;case u.CODE_STOP:V=!0}break;case u.CODE_CODE_B:if(ge<96)j+=String.fromCharCode(pt===st?" ".charCodeAt(0)+ge:" ".charCodeAt(0)+ge+128),pt=!1;else switch(ge!==u.CODE_STOP&&(Je=!1),ge){case u.CODE_FNC_1:m&&(j+=0===j.length?"]C1":String.fromCharCode(29));break;case u.CODE_FNC_2:case u.CODE_FNC_3:break;case u.CODE_FNC_4_B:!st&&pt?(st=!0,pt=!1):st&&pt?(st=!1,pt=!1):pt=!0;break;case u.CODE_SHIFT:H=!0,L=u.CODE_CODE_A;break;case u.CODE_CODE_A:L=u.CODE_CODE_A;break;case u.CODE_CODE_C:L=u.CODE_CODE_C;break;case u.CODE_STOP:V=!0}break;case u.CODE_CODE_C:if(ge<100)ge<10&&(j+="0"),j+=ge;else switch(ge!==u.CODE_STOP&&(Je=!1),ge){case u.CODE_FNC_1:m&&(j+=0===j.length?"]C1":String.fromCharCode(29));break;case u.CODE_CODE_A:L=u.CODE_CODE_A;break;case u.CODE_CODE_B:L=u.CODE_CODE_B;break;case u.CODE_STOP:V=!0}}Rt&&(L=L===u.CODE_CODE_A?u.CODE_CODE_B:u.CODE_CODE_A)}var Vt=oe-K;if(oe=p.getNextUnset(oe),!p.isRange(oe,Math.min(p.getSize(),oe+(oe-K)/2),!1))throw new Re;if((Ne-=Ge*ve)%103!==ve)throw new Ee;var qt=j.length;if(0===qt)throw new Re;qt>0&&Je&&(j=j.substring(0,L===u.CODE_CODE_C?qt-2:qt-1));for(var Jr=(x[1]+x[0])/2,_n=K+Vt/2,er=R.length,hi=new Uint8Array(er),rs=0;rs<er;rs++)hi[rs]=R[rs];var Kc=[new ae(Jr,c),new ae(_n,c)];return new kr(j,hi,0,Kc,Tt.CODE_128,(new Date).getTime())},u.CODE_PATTERNS=[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]],u.MAX_AVG_VARIANCE=.25,u.MAX_INDIVIDUAL_VARIANCE=.7,u.CODE_SHIFT=98,u.CODE_CODE_C=99,u.CODE_CODE_B=100,u.CODE_CODE_A=101,u.CODE_FNC_1=102,u.CODE_FNC_2=97,u.CODE_FNC_3=96,u.CODE_FNC_4_A=101,u.CODE_FNC_4_B=100,u.CODE_START_A=103,u.CODE_START_B=104,u.CODE_START_C=105,u.CODE_STOP=106,u}(Or),To=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),El=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},qr=function(f){function u(){var c=f.call(this)||this;return c.decodeFinderCounters=new Array(4),c.dataCharacterCounters=new Array(8),c.oddRoundingErrors=new Array(4),c.evenRoundingErrors=new Array(4),c.oddCounts=new Array(c.dataCharacterCounters.length/2),c.evenCounts=new Array(c.dataCharacterCounters.length/2),c}return To(u,f),u.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},u.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},u.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},u.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},u.prototype.getOddCounts=function(){return this.oddCounts},u.prototype.getEvenCounts=function(){return this.evenCounts},u.prototype.parseFinderValue=function(c,p){for(var h=0;h<p.length;h++)if(Or.patternMatchVariance(c,p[h],u.MAX_INDIVIDUAL_VARIANCE)<u.MAX_AVG_VARIANCE)return h;throw new Re},u.count=function(c){return ue.sum(new Int32Array(c))},u.increment=function(c,p){for(var h=0,m=p[0],x=1;x<c.length;x++)p[x]>m&&(m=p[x],h=x);c[h]++},u.decrement=function(c,p){for(var h=0,m=p[0],x=1;x<c.length;x++)p[x]<m&&(m=p[x],h=x);c[h]--},u.isFinderPattern=function(c){var p,h,m=c[0]+c[1],w=m/(m+c[2]+c[3]);if(w>=u.MIN_FINDER_PATTERN_RATIO&&w<=u.MAX_FINDER_PATTERN_RATIO){var b=Number.MAX_SAFE_INTEGER,R=Number.MIN_SAFE_INTEGER;try{for(var L=El(c),V=L.next();!V.done;V=L.next()){var H=V.value;H>R&&(R=H),H<b&&(b=H)}}catch(j){p={error:j}}finally{try{V&&!V.done&&(h=L.return)&&h.call(L)}finally{if(p)throw p.error}}return R<10*b}return!1},u.MAX_AVG_VARIANCE=.2,u.MAX_INDIVIDUAL_VARIANCE=.45,u.MIN_FINDER_PATTERN_RATIO=9.5/12,u.MAX_FINDER_PATTERN_RATIO=12.5/14,u}(Or),mt=function(){function f(u,c){this.value=u,this.checksumPortion=c}return f.prototype.getValue=function(){return this.value},f.prototype.getChecksumPortion=function(){return this.checksumPortion},f.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},f.prototype.equals=function(u){return u instanceof f&&this.value===u.value&&this.checksumPortion===u.checksumPortion},f.prototype.hashCode=function(){return this.value^this.checksumPortion},f}(),vn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Hn=function(f){function u(c,p,h){var m=f.call(this,c,p)||this;return m.count=0,m.finderPattern=h,m}return vn(u,f),u.prototype.getFinderPattern=function(){return this.finderPattern},u.prototype.getCount=function(){return this.count},u.prototype.incrementCount=function(){this.count++},u}(mt),Ri=function(){function f(u,c,p,h,m){this.value=u,this.startEnd=c,this.value=u,this.startEnd=c,this.resultPoints=new Array,this.resultPoints.push(new ae(p,m)),this.resultPoints.push(new ae(h,m))}return f.prototype.getValue=function(){return this.value},f.prototype.getStartEnd=function(){return this.startEnd},f.prototype.getResultPoints=function(){return this.resultPoints},f.prototype.equals=function(u){return u instanceof f&&this.value===u.value},f.prototype.hashCode=function(){return this.value},f}(),cr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},lr=function(){function f(){}return f.prototype.RSSUtils=function(){},f.getRSSvalue=function(u,c,p){var h,m,x=0;try{for(var w=cr(u),b=w.next();!b.done;b=w.next())x+=b.value}catch(ge){h={error:ge}}finally{try{b&&!b.done&&(m=w.return)&&m.call(w)}finally{if(h)throw h.error}}for(var L=0,V=0,H=u.length,j=0;j<H-1;j++){var K=void 0;for(K=1,V|=1<<j;K<u[j];K++,V&=~(1<<j)){var oe=f.combins(x-K-1,H-j-2);if(p&&0===V&&x-K-(H-j-1)>=H-j-1&&(oe-=f.combins(x-K-(H-j),H-j-2)),H-j-1>1){for(var _e=0,ve=x-K-(H-j-2);ve>c;ve--)_e+=f.combins(x-K-ve-1,H-j-3);oe-=_e*(H-1-j)}else x-K>c&&oe--;L+=oe}x-=K}return L},f.combins=function(u,c){var p,h;u-c>c?(h=c,p=u-c):(h=u-c,p=c);for(var m=1,x=1,w=u;w>p;w--)m*=w,x<=h&&(m/=x,x++);for(;x<=h;)m/=x,x++;return m},f}(),Ss=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),dr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},ua=function(f){function u(){var c=null!==f&&f.apply(this,arguments)||this;return c.possibleLeftPairs=[],c.possibleRightPairs=[],c}return Ss(u,f),u.prototype.decodeRow=function(c,p,h){var m,x,w,b,R=this.decodePair(p,!1,c,h);u.addOrTally(this.possibleLeftPairs,R),p.reverse();var L=this.decodePair(p,!0,c,h);u.addOrTally(this.possibleRightPairs,L),p.reverse();try{for(var V=dr(this.possibleLeftPairs),H=V.next();!H.done;H=V.next()){var j=H.value;if(j.getCount()>1)try{for(var K=(w=void 0,dr(this.possibleRightPairs)),oe=K.next();!oe.done;oe=K.next()){var _e=oe.value;if(_e.getCount()>1&&u.checkChecksum(j,_e))return u.constructResult(j,_e)}}catch(ve){w={error:ve}}finally{try{oe&&!oe.done&&(b=K.return)&&b.call(K)}finally{if(w)throw w.error}}}}catch(ve){m={error:ve}}finally{try{H&&!H.done&&(x=V.return)&&x.call(V)}finally{if(m)throw m.error}}throw new Re},u.addOrTally=function(c,p){var h,m;if(null!=p){var x=!1;try{for(var w=dr(c),b=w.next();!b.done;b=w.next()){var R=b.value;if(R.getValue()===p.getValue()){R.incrementCount(),x=!0;break}}}catch(L){h={error:L}}finally{try{b&&!b.done&&(m=w.return)&&m.call(w)}finally{if(h)throw h.error}}x||c.push(p)}},u.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},u.constructResult=function(c,p){for(var h=4537077*c.getValue()+p.getValue(),m=new String(h).toString(),x=new tn,w=13-m.length;w>0;w--)x.append("0");x.append(m);var b=0;for(w=0;w<13;w++){var R=x.charAt(w).charCodeAt(0)-"0".charCodeAt(0);b+=0==(1&w)?3*R:R}10==(b=10-b%10)&&(b=0),x.append(b.toString());var L=c.getFinderPattern().getResultPoints(),V=p.getFinderPattern().getResultPoints();return new kr(x.toString(),null,0,[L[0],L[1],V[0],V[1]],Tt.RSS_14,(new Date).getTime())},u.checkChecksum=function(c,p){var h=(c.getChecksumPortion()+16*p.getChecksumPortion())%79,m=9*c.getFinderPattern().getValue()+p.getFinderPattern().getValue();return m>72&&m--,m>8&&m--,h===m},u.prototype.decodePair=function(c,p,h,m){try{var x=this.findFinderPattern(c,p),w=this.parseFoundFinderPattern(c,h,p,x),b=null==m?null:m.get(Et.NEED_RESULT_POINT_CALLBACK);if(null!=b){var R=(x[0]+x[1])/2;p&&(R=c.getSize()-1-R),b.foundPossibleResultPoint(new ae(R,h))}var L=this.decodeDataCharacter(c,w,!0),V=this.decodeDataCharacter(c,w,!1);return new Hn(1597*L.getValue()+V.getValue(),L.getChecksumPortion()+4*V.getChecksumPortion(),w)}catch(H){return null}},u.prototype.decodeDataCharacter=function(c,p,h){for(var m=this.getDataCharacterCounters(),x=0;x<m.length;x++)m[x]=0;if(h)Or.recordPatternInReverse(c,p.getStartEnd()[0],m);else{Or.recordPattern(c,p.getStartEnd()[1]+1,m);for(var w=0,b=m.length-1;w<b;w++,b--){var R=m[w];m[w]=m[b],m[b]=R}}var L=h?16:15,V=ue.sum(new Int32Array(m))/L,H=this.getOddCounts(),j=this.getEvenCounts(),K=this.getOddRoundingErrors(),oe=this.getEvenRoundingErrors();for(w=0;w<m.length;w++){var _e=m[w]/V,ve=Math.floor(_e+.5);ve<1?ve=1:ve>8&&(ve=8);var ge=Math.floor(w/2);0==(1&w)?(H[ge]=ve,K[ge]=_e-ve):(j[ge]=ve,oe[ge]=_e-ve)}this.adjustOddEvenCounts(h,L);var Ne=0,Ge=0;for(w=H.length-1;w>=0;w--)Ge*=9,Ge+=H[w],Ne+=H[w];var Je=0,st=0;for(w=j.length-1;w>=0;w--)Je*=9,Je+=j[w],st+=j[w];var Rt,Vt,pt=Ge+3*Je;if(h){if(0!=(1&Ne)||Ne>12||Ne<4)throw new Re;var qt=9-(Vt=u.OUTSIDE_ODD_WIDEST[Rt=(12-Ne)/2]),Jr=lr.getRSSvalue(H,Vt,!1),_n=lr.getRSSvalue(j,qt,!0);return new mt(Jr*u.OUTSIDE_EVEN_TOTAL_SUBSET[Rt]+_n+u.OUTSIDE_GSUM[Rt],pt)}if(0!=(1&st)||st>10||st<4)throw new Re;return qt=9-(Vt=u.INSIDE_ODD_WIDEST[Rt=(10-st)/2]),Jr=lr.getRSSvalue(H,Vt,!0),_n=lr.getRSSvalue(j,qt,!1),new mt(_n*u.INSIDE_ODD_TOTAL_SUBSET[Rt]+Jr+u.INSIDE_GSUM[Rt],pt)},u.prototype.findFinderPattern=function(c,p){var h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var m=c.getSize(),x=!1,w=0;w<m&&p!==(x=!c.get(w));)w++;for(var b=0,R=w,L=w;L<m;L++)if(c.get(L)!==x)h[b]++;else{if(3===b){if(qr.isFinderPattern(h))return[R,L];R+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,b--}else b++;h[b]=1,x=!x}throw new Re},u.prototype.parseFoundFinderPattern=function(c,p,h,m){for(var x=c.get(m[0]),w=m[0]-1;w>=0&&x!==c.get(w);)w--;w++;var b=m[0]-w,R=this.getDecodeFinderCounters(),L=new Array(R.length);We.arraycopy(R,0,L,1,R.length-1),L[0]=b;var V=this.parseFinderValue(L,u.FINDER_PATTERNS),H=w,j=m[1];return h&&(H=c.getSize()-1-H,j=c.getSize()-1-j),new Ri(V,[w,m[1]],H,j,p)},u.prototype.adjustOddEvenCounts=function(c,p){var h=ue.sum(new Int32Array(this.getOddCounts())),m=ue.sum(new Int32Array(this.getEvenCounts())),x=!1,w=!1,b=!1,R=!1;c?(h>12?w=!0:h<4&&(x=!0),m>12?R=!0:m<4&&(b=!0)):(h>11?w=!0:h<5&&(x=!0),m>10?R=!0:m<4&&(b=!0));var L=h+m-p,V=(1&h)==(c?1:0),H=1==(1&m);if(1===L)if(V){if(H)throw new Re;w=!0}else{if(!H)throw new Re;R=!0}else if(-1===L)if(V){if(H)throw new Re;x=!0}else{if(!H)throw new Re;b=!0}else{if(0!==L)throw new Re;if(V){if(!H)throw new Re;h<m?(x=!0,R=!0):(w=!0,b=!0)}else if(H)throw new Re}if(x){if(w)throw new Re;qr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(w&&qr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),b){if(R)throw new Re;qr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}R&&qr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},u.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],u.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],u.OUTSIDE_GSUM=[0,161,961,2015,2715],u.INSIDE_GSUM=[0,336,1036,1516],u.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],u.INSIDE_ODD_WIDEST=[2,4,6,8],u.FINDER_PATTERNS=[[3,8,2,1],[3,5,5,1],[3,3,7,1],[3,1,9,1],[2,7,4,1],[2,5,6,1],[2,3,8,1],[1,5,7,1],[1,3,9,1]],u}(qr),ca=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),rn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},ji=function(f){function u(){var c=null!==f&&f.apply(this,arguments)||this;return c.narrowLineWidth=-1,c}return ca(u,f),u.prototype.decodeRow=function(c,p,h){var m,x,w=this.decodeStart(p),b=this.decodeEnd(p),R=new tn;u.decodeMiddle(p,w[1],b[0],R);var L=R.toString(),V=null;null!=h&&(V=h.get(Et.ALLOWED_LENGTHS)),null==V&&(V=u.DEFAULT_ALLOWED_LENGTHS);var H=L.length,j=!1,K=0;try{for(var oe=rn(V),_e=oe.next();!_e.done;_e=oe.next()){var ve=_e.value;if(H===ve){j=!0;break}ve>K&&(K=ve)}}catch(Ge){m={error:Ge}}finally{try{_e&&!_e.done&&(x=oe.return)&&x.call(oe)}finally{if(m)throw m.error}}if(!j&&H>K&&(j=!0),!j)throw new de;var ge=[new ae(w[1],c),new ae(b[0],c)];return new kr(L,null,0,ge,Tt.ITF,(new Date).getTime())},u.decodeMiddle=function(c,p,h,m){var x=new Array(10),w=new Array(5),b=new Array(5);for(x.fill(0),w.fill(0),b.fill(0);p<h;){Or.recordPattern(c,p,x);for(var R=0;R<5;R++){var L=2*R;w[R]=x[L],b[R]=x[L+1]}var V=u.decodeDigit(w);m.append(V.toString()),V=this.decodeDigit(b),m.append(V.toString()),x.forEach(function(H){p+=H})}},u.prototype.decodeStart=function(c){var p=u.skipWhiteSpace(c),h=u.findGuardPattern(c,p,u.START_PATTERN);return this.narrowLineWidth=(h[1]-h[0])/4,this.validateQuietZone(c,h[0]),h},u.prototype.validateQuietZone=function(c,p){var h=10*this.narrowLineWidth;h=h<p?h:p;for(var m=p-1;h>0&&m>=0&&!c.get(m);m--)h--;if(0!==h)throw new Re},u.skipWhiteSpace=function(c){var p=c.getSize(),h=c.getNextSet(0);if(h===p)throw new Re;return h},u.prototype.decodeEnd=function(c){c.reverse();try{var p=u.skipWhiteSpace(c),h=void 0;try{h=u.findGuardPattern(c,p,u.END_PATTERN_REVERSED[0])}catch(x){h=u.findGuardPattern(c,p,u.END_PATTERN_REVERSED[1])}this.validateQuietZone(c,h[0]);var m=h[0];return h[0]=c.getSize()-h[1],h[1]=c.getSize()-m,h}finally{c.reverse()}},u.findGuardPattern=function(c,p,h){var m=h.length,x=new Array(m),w=c.getSize(),b=!1,R=0,L=p;x.fill(0);for(var V=p;V<w;V++)if(c.get(V)!==b)x[R]++;else{if(R===m-1){if(Or.patternMatchVariance(x,h,u.MAX_INDIVIDUAL_VARIANCE)<u.MAX_AVG_VARIANCE)return[L,V];L+=x[0]+x[1],We.arraycopy(x,2,x,0,R-1),x[R-1]=0,x[R]=0,R--}else R++;x[R]=1,b=!b}throw new Re},u.decodeDigit=function(c){for(var p=u.MAX_AVG_VARIANCE,h=-1,m=u.PATTERNS.length,x=0;x<m;x++){var b=Or.patternMatchVariance(c,u.PATTERNS[x],u.MAX_INDIVIDUAL_VARIANCE);b<p?(p=b,h=x):b===p&&(h=-1)}if(h>=0)return h%10;throw new Re},u.W=3,u.w=2,u.N=1,u.PATTERNS=[[1,1,2,2,1],[2,1,1,1,2],[1,2,1,1,2],[2,2,1,1,1],[1,1,2,1,2],[2,1,2,1,1],[1,2,2,1,1],[1,1,1,2,2],[2,1,1,2,1],[1,2,1,2,1],[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],u.MAX_AVG_VARIANCE=.38,u.MAX_INDIVIDUAL_VARIANCE=.5,u.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],u.START_PATTERN=[1,1,1,1],u.END_PATTERN_REVERSED=[[1,1,2],[1,1,3]],u}(Or),la=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),_r=function(f){function u(){var c=null!==f&&f.apply(this,arguments)||this;return c.decodeRowStringBuffer="",c}return la(u,f),u.findStartGuardPattern=function(c){for(var p=!1,h=null,m=0;!p;){var w=(h=u.findGuardPattern(c,m,!1,this.START_END_PATTERN,[0,0,0]))[0],b=w-((m=h[1])-w);b>=0&&(p=c.isRange(b,w,!1))}return h},u.checkChecksum=function(c){return u.checkStandardUPCEANChecksum(c)},u.checkStandardUPCEANChecksum=function(c){var p=c.length;if(0===p)return!1;var h=parseInt(c.charAt(p-1),10);return u.getStandardUPCEANChecksum(c.substring(0,p-1))===h},u.getStandardUPCEANChecksum=function(c){for(var p=c.length,h=0,m=p-1;m>=0;m-=2){if((x=c.charAt(m).charCodeAt(0)-"0".charCodeAt(0))<0||x>9)throw new de;h+=x}for(h*=3,m=p-2;m>=0;m-=2){var x;if((x=c.charAt(m).charCodeAt(0)-"0".charCodeAt(0))<0||x>9)throw new de;h+=x}return(1e3-h)%10},u.decodeEnd=function(c,p){return u.findGuardPattern(c,p,!1,u.START_END_PATTERN,new Array(u.START_END_PATTERN.length).fill(0))},u.findGuardPattern=function(c,p,h,m,x){for(var w=c.getSize(),b=0,R=p=h?c.getNextUnset(p):c.getNextSet(p),L=m.length,V=h,H=p;H<w;H++)if(c.get(H)!==V)x[b]++;else{if(b===L-1){if(Or.patternMatchVariance(x,m,u.MAX_INDIVIDUAL_VARIANCE)<u.MAX_AVG_VARIANCE)return[R,H];R+=x[0]+x[1];for(var j=x.slice(2,x.length),K=0;K<b-1;K++)x[K]=j[K];x[b-1]=0,x[b]=0,b--}else b++;x[b]=1,V=!V}throw new Re},u.decodeDigit=function(c,p,h,m){this.recordPattern(c,h,p);for(var x=this.MAX_AVG_VARIANCE,w=-1,b=m.length,R=0;R<b;R++){var V=Or.patternMatchVariance(p,m[R],u.MAX_INDIVIDUAL_VARIANCE);V<x&&(x=V,w=R)}if(w>=0)return w;throw new Re},u.MAX_AVG_VARIANCE=.48,u.MAX_INDIVIDUAL_VARIANCE=.7,u.START_END_PATTERN=[1,1,1],u.MIDDLE_PATTERN=[1,1,1,1,1],u.END_PATTERN=[1,1,1,1,1,1],u.L_PATTERNS=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],u}(Or),uu=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},li=function(){function f(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=[0,0,0,0],this.decodeRowStringBuffer=""}return f.prototype.decodeRow=function(u,c,p){var h=this.decodeRowStringBuffer,m=this.decodeMiddle(c,p,h),x=h.toString(),w=f.parseExtensionString(x),b=[new ae((p[0]+p[1])/2,u),new ae(m,u)],R=new kr(x,null,0,b,Tt.UPC_EAN_EXTENSION,(new Date).getTime());return null!=w&&R.putAllMetadata(w),R},f.prototype.decodeMiddle=function(u,c,p){var h,m,x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;for(var w=u.getSize(),b=c[1],R=0,L=0;L<5&&b<w;L++){var V=_r.decodeDigit(u,x,b,_r.L_AND_G_PATTERNS);p+=String.fromCharCode("0".charCodeAt(0)+V%10);try{for(var H=(h=void 0,uu(x)),j=H.next();!j.done;j=H.next())b+=j.value}catch(_e){h={error:_e}}finally{try{j&&!j.done&&(m=H.return)&&m.call(H)}finally{if(h)throw h.error}}V>=10&&(R|=1<<4-L),4!==L&&(b=u.getNextSet(b),b=u.getNextUnset(b))}if(5!==p.length)throw new Re;var oe=this.determineCheckDigit(R);if(f.extensionChecksum(p.toString())!==oe)throw new Re;return b},f.extensionChecksum=function(u){for(var c=u.length,p=0,h=c-2;h>=0;h-=2)p+=u.charAt(h).charCodeAt(0)-"0".charCodeAt(0);for(p*=3,h=c-1;h>=0;h-=2)p+=u.charAt(h).charCodeAt(0)-"0".charCodeAt(0);return(p*=3)%10},f.prototype.determineCheckDigit=function(u){for(var c=0;c<10;c++)if(u===this.CHECK_DIGIT_ENCODINGS[c])return c;throw new Re},f.parseExtensionString=function(u){if(5!==u.length)return null;var c=f.parseExtension5String(u);return null==c?null:new Map([[Mn.SUGGESTED_PRICE,c]])},f.parseExtension5String=function(u){var c;switch(u.charAt(0)){case"0":c="\xa3";break;case"5":c="$";break;case"9":switch(u){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}c="";break;default:c=""}var p=parseInt(u.substring(1)),m=p%100;return c+(p/100).toString()+"."+(m<10?"0"+m:m.toString())},f}(),$u=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Ts=function(){function f(){this.decodeMiddleCounters=[0,0,0,0],this.decodeRowStringBuffer=""}return f.prototype.decodeRow=function(u,c,p){var h=this.decodeRowStringBuffer,m=this.decodeMiddle(c,p,h),x=h.toString(),w=f.parseExtensionString(x),b=[new ae((p[0]+p[1])/2,u),new ae(m,u)],R=new kr(x,null,0,b,Tt.UPC_EAN_EXTENSION,(new Date).getTime());return null!=w&&R.putAllMetadata(w),R},f.prototype.decodeMiddle=function(u,c,p){var h,m,x=this.decodeMiddleCounters;x[0]=0,x[1]=0,x[2]=0,x[3]=0;for(var w=u.getSize(),b=c[1],R=0,L=0;L<2&&b<w;L++){var V=_r.decodeDigit(u,x,b,_r.L_AND_G_PATTERNS);p+=String.fromCharCode("0".charCodeAt(0)+V%10);try{for(var H=(h=void 0,$u(x)),j=H.next();!j.done;j=H.next())b+=j.value}catch(oe){h={error:oe}}finally{try{j&&!j.done&&(m=H.return)&&m.call(H)}finally{if(h)throw h.error}}V>=10&&(R|=1<<1-L),1!==L&&(b=u.getNextSet(b),b=u.getNextUnset(b))}if(2!==p.length)throw new Re;if(parseInt(p.toString())%4!==R)throw new Re;return b},f.parseExtensionString=function(u){return 2!==u.length?null:new Map([[Mn.ISSUE_NUMBER,parseInt(u)]])},f}(),Do=function(){function f(){}return f.decodeRow=function(u,c,p){var h=_r.findGuardPattern(c,p,!1,this.EXTENSION_START_PATTERN,new Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new li).decodeRow(u,c,h)}catch(w){return(new Ts).decodeRow(u,c,h)}},f.EXTENSION_START_PATTERN=[1,1,2],f}(),Nn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Zr=function(f){function u(){var c=f.call(this)||this;c.decodeRowStringBuffer="",u.L_AND_G_PATTERNS=u.L_PATTERNS.map(function(w){return w.slice()});for(var p=10;p<20;p++){for(var h=u.L_PATTERNS[p-10],m=new Array(h.length),x=0;x<h.length;x++)m[x]=h[h.length-x-1];u.L_AND_G_PATTERNS[p]=m}return c}return Nn(u,f),u.prototype.decodeRow=function(c,p,h){var m=u.findStartGuardPattern(p),x=null==h?null:h.get(Et.NEED_RESULT_POINT_CALLBACK);if(null!=x){var w=new ae((m[0]+m[1])/2,c);x.foundPossibleResultPoint(w)}var b=this.decodeMiddle(p,m,this.decodeRowStringBuffer),R=b.rowOffset,L=b.resultString;if(null!=x){var V=new ae(R,c);x.foundPossibleResultPoint(V)}var H=u.decodeEnd(p,R);if(null!=x){var j=new ae((H[0]+H[1])/2,c);x.foundPossibleResultPoint(j)}var K=H[1],oe=K+(K-H[0]);if(oe>=p.getSize()||!p.isRange(K,oe,!1))throw new Re;var _e=L.toString();if(_e.length<8)throw new de;if(!u.checkChecksum(_e))throw new Ee;var ve=(m[1]+m[0])/2,ge=(H[1]+H[0])/2,Ne=this.getBarcodeFormat(),Ge=[new ae(ve,c),new ae(ge,c)],Je=new kr(_e,null,0,Ge,Ne,(new Date).getTime()),st=0;try{var pt=Do.decodeRow(c,p,H[1]);Je.putMetadata(Mn.UPC_EAN_EXTENSION,pt.getText()),Je.putAllMetadata(pt.getResultMetadata()),Je.addResultPoints(pt.getResultPoints()),st=pt.getText().length}catch(Jr){}var Rt=null==h?null:h.get(Et.ALLOWED_EAN_EXTENSIONS);if(null!=Rt){var Vt=!1;for(var qt in Rt)if(st.toString()===qt){Vt=!0;break}if(!Vt)throw new Re}return Je},u.checkChecksum=function(c){return u.checkStandardUPCEANChecksum(c)},u.checkStandardUPCEANChecksum=function(c){var p=c.length;if(0===p)return!1;var h=parseInt(c.charAt(p-1),10);return u.getStandardUPCEANChecksum(c.substring(0,p-1))===h},u.getStandardUPCEANChecksum=function(c){for(var p=c.length,h=0,m=p-1;m>=0;m-=2){if((x=c.charAt(m).charCodeAt(0)-"0".charCodeAt(0))<0||x>9)throw new de;h+=x}for(h*=3,m=p-2;m>=0;m-=2){var x;if((x=c.charAt(m).charCodeAt(0)-"0".charCodeAt(0))<0||x>9)throw new de;h+=x}return(1e3-h)%10},u.decodeEnd=function(c,p){return u.findGuardPattern(c,p,!1,u.START_END_PATTERN,new Array(u.START_END_PATTERN.length).fill(0))},u}(_r),Cl=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),da=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},cu=function(f){function u(){var c=f.call(this)||this;return c.decodeMiddleCounters=[0,0,0,0],c}return Cl(u,f),u.prototype.decodeMiddle=function(c,p,h){var m,x,w,b,R=this.decodeMiddleCounters;R[0]=0,R[1]=0,R[2]=0,R[3]=0;for(var L=c.getSize(),V=p[1],H=0,j=0;j<6&&V<L;j++){var K=Zr.decodeDigit(c,R,V,Zr.L_AND_G_PATTERNS);h+=String.fromCharCode("0".charCodeAt(0)+K%10);try{for(var oe=(m=void 0,da(R)),_e=oe.next();!_e.done;_e=oe.next())V+=_e.value}catch(Je){m={error:Je}}finally{try{_e&&!_e.done&&(x=oe.return)&&x.call(oe)}finally{if(m)throw m.error}}K>=10&&(H|=1<<5-j)}for(h=u.determineFirstDigit(h,H),V=Zr.findGuardPattern(c,V,!0,Zr.MIDDLE_PATTERN,new Array(Zr.MIDDLE_PATTERN.length).fill(0))[1],j=0;j<6&&V<L;j++){K=Zr.decodeDigit(c,R,V,Zr.L_PATTERNS),h+=String.fromCharCode("0".charCodeAt(0)+K);try{for(var Ne=(w=void 0,da(R)),Ge=Ne.next();!Ge.done;Ge=Ne.next())V+=Ge.value}catch(pt){w={error:pt}}finally{try{Ge&&!Ge.done&&(b=Ne.return)&&b.call(Ne)}finally{if(w)throw w.error}}}return{rowOffset:V,resultString:h}},u.prototype.getBarcodeFormat=function(){return Tt.EAN_13},u.determineFirstDigit=function(c,p){for(var h=0;h<10;h++)if(p===this.FIRST_DIGIT_ENCODINGS[h])return String.fromCharCode("0".charCodeAt(0)+h)+c;throw new Re},u.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],u}(Zr),lu=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Oo=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Ds=function(f){function u(){var c=f.call(this)||this;return c.decodeMiddleCounters=[0,0,0,0],c}return lu(u,f),u.prototype.decodeMiddle=function(c,p,h){var m,x,w,b,R=this.decodeMiddleCounters;R[0]=0,R[1]=0,R[2]=0,R[3]=0;for(var L=c.getSize(),V=p[1],H=0;H<4&&V<L;H++){var j=Zr.decodeDigit(c,R,V,Zr.L_PATTERNS);h+=String.fromCharCode("0".charCodeAt(0)+j);try{for(var K=(m=void 0,Oo(R)),oe=K.next();!oe.done;oe=K.next())V+=oe.value}catch(Ge){m={error:Ge}}finally{try{oe&&!oe.done&&(x=K.return)&&x.call(K)}finally{if(m)throw m.error}}}for(V=Zr.findGuardPattern(c,V,!0,Zr.MIDDLE_PATTERN,new Array(Zr.MIDDLE_PATTERN.length).fill(0))[1],H=0;H<4&&V<L;H++){j=Zr.decodeDigit(c,R,V,Zr.L_PATTERNS),h+=String.fromCharCode("0".charCodeAt(0)+j);try{for(var ge=(w=void 0,Oo(R)),Ne=ge.next();!Ne.done;Ne=ge.next())V+=Ne.value}catch(st){w={error:st}}finally{try{Ne&&!Ne.done&&(b=ge.return)&&b.call(ge)}finally{if(w)throw w.error}}}return{rowOffset:V,resultString:h}},u.prototype.getBarcodeFormat=function(){return Tt.EAN_8},u}(Zr),di=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),vf=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Ro=function(f){function u(c){var p=f.call(this)||this,h=null==c?null:c.get(Et.POSSIBLE_FORMATS),m=[];return null!=h&&(h.indexOf(Tt.EAN_13)>-1&&m.push(new cu),h.indexOf(Tt.EAN_8)>-1&&m.push(new Ds)),0===m.length&&(m.push(new cu),m.push(new Ds)),p.readers=m,p}return di(u,f),u.prototype.decodeRow=function(c,p,h){var m,x;try{for(var w=vf(this.readers),b=w.next();!b.done;b=w.next()){var R=b.value;try{return R.decodeRow(c,p,h)}catch(L){}}}catch(L){m={error:L}}finally{try{b&&!b.done&&(x=w.return)&&x.call(w)}finally{if(m)throw m.error}}throw new Re},u.prototype.reset=function(){var c,p;try{for(var h=vf(this.readers),m=h.next();!m.done;m=h.next())m.value.reset()}catch(w){c={error:w}}finally{try{m&&!m.done&&(p=h.return)&&p.call(h)}finally{if(c)throw c.error}}},u}(Or),Ni=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Os=function(f){function u(c){var p=f.call(this)||this;p.readers=[];var h=c?c.get(Et.POSSIBLE_FORMATS):null,m=c&&void 0!==c.get(Et.ASSUME_CODE_39_CHECK_DIGIT);return h&&((h.includes(Tt.EAN_13)||h.includes(Tt.EAN_8))&&p.readers.push(new Ro(c)),h.includes(Tt.CODE_39)&&p.readers.push(new ni(m)),h.includes(Tt.CODE_128)&&p.readers.push(new ci),h.includes(Tt.ITF)&&p.readers.push(new ji),h.includes(Tt.RSS_14)&&p.readers.push(new ua)),0===p.readers.length&&(p.readers.push(new ni),p.readers.push(new Ro(c)),p.readers.push(new ci),p.readers.push(new ji),p.readers.push(new ua)),p}return Ni(u,f),u.prototype.decodeRow=function(c,p,h){for(var m=0;m<this.readers.length;m++)try{return this.readers[m].decodeRow(c,p,h)}catch(x){}throw new Re},u.prototype.reset=function(){this.readers.forEach(function(c){return c.reset()})},u}(Or),Mc=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Pi=(function(f){Mc(function(c,p){return void 0===c&&(c=500),f.call(this,new Os(p),c,p)||this},f)}(xi),(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")}),Kt=function(){function f(u,c,p){this.ecCodewords=u,this.ecBlocks=[c],p&&this.ecBlocks.push(p)}return f.prototype.getECCodewords=function(){return this.ecCodewords},f.prototype.getECBlocks=function(){return this.ecBlocks},f}(),Tn=function(){function f(u,c){this.count=u,this.dataCodewords=c}return f.prototype.getCount=function(){return this.count},f.prototype.getDataCodewords=function(){return this.dataCodewords},f}(),_f=function(){function f(u,c,p,h,m,x){var w,b;this.versionNumber=u,this.symbolSizeRows=c,this.symbolSizeColumns=p,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=m,this.ecBlocks=x;var R=0,L=x.getECCodewords(),V=x.getECBlocks();try{for(var H=Pi(V),j=H.next();!j.done;j=H.next()){var K=j.value;R+=K.getCount()*(K.getDataCodewords()+L)}}catch(oe){w={error:oe}}finally{try{j&&!j.done&&(b=H.return)&&b.call(H)}finally{if(w)throw w.error}}this.totalCodewords=R}return f.prototype.getVersionNumber=function(){return this.versionNumber},f.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},f.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},f.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},f.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},f.prototype.getTotalCodewords=function(){return this.totalCodewords},f.prototype.getECBlocks=function(){return this.ecBlocks},f.getVersionForDimensions=function(u,c){var p,h;if(0!=(1&u)||0!=(1&c))throw new de;try{for(var m=Pi(f.VERSIONS),x=m.next();!x.done;x=m.next()){var w=x.value;if(w.symbolSizeRows===u&&w.symbolSizeColumns===c)return w}}catch(b){p={error:b}}finally{try{x&&!x.done&&(h=m.return)&&h.call(m)}finally{if(p)throw p.error}}throw new de},f.prototype.toString=function(){return""+this.versionNumber},f.buildVersions=function(){return[new f(1,10,10,8,8,new Kt(5,new Tn(1,3))),new f(2,12,12,10,10,new Kt(7,new Tn(1,5))),new f(3,14,14,12,12,new Kt(10,new Tn(1,8))),new f(4,16,16,14,14,new Kt(12,new Tn(1,12))),new f(5,18,18,16,16,new Kt(14,new Tn(1,18))),new f(6,20,20,18,18,new Kt(18,new Tn(1,22))),new f(7,22,22,20,20,new Kt(20,new Tn(1,30))),new f(8,24,24,22,22,new Kt(24,new Tn(1,36))),new f(9,26,26,24,24,new Kt(28,new Tn(1,44))),new f(10,32,32,14,14,new Kt(36,new Tn(1,62))),new f(11,36,36,16,16,new Kt(42,new Tn(1,86))),new f(12,40,40,18,18,new Kt(48,new Tn(1,114))),new f(13,44,44,20,20,new Kt(56,new Tn(1,144))),new f(14,48,48,22,22,new Kt(68,new Tn(1,174))),new f(15,52,52,24,24,new Kt(42,new Tn(2,102))),new f(16,64,64,14,14,new Kt(56,new Tn(2,140))),new f(17,72,72,16,16,new Kt(36,new Tn(4,92))),new f(18,80,80,18,18,new Kt(48,new Tn(4,114))),new f(19,88,88,20,20,new Kt(56,new Tn(4,144))),new f(20,96,96,22,22,new Kt(68,new Tn(4,174))),new f(21,104,104,24,24,new Kt(56,new Tn(6,136))),new f(22,120,120,18,18,new Kt(68,new Tn(6,175))),new f(23,132,132,20,20,new Kt(62,new Tn(8,163))),new f(24,144,144,22,22,new Kt(62,new Tn(8,156),new Tn(2,155))),new f(25,8,18,6,16,new Kt(7,new Tn(1,5))),new f(26,8,32,6,14,new Kt(11,new Tn(1,10))),new f(27,12,26,10,24,new Kt(14,new Tn(1,16))),new f(28,12,36,10,16,new Kt(18,new Tn(1,22))),new f(29,16,36,14,16,new Kt(24,new Tn(1,32))),new f(30,16,48,14,22,new Kt(28,new Tn(1,49)))]},f.VERSIONS=f.buildVersions(),f}(),Yo=function(){function f(u){var c=u.getHeight();if(c<8||c>144||0!=(1&c))throw new de;this.version=f.readVersion(u),this.mappingBitMatrix=this.extractDataRegion(u),this.readMappingMatrix=new kt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return f.prototype.getVersion=function(){return this.version},f.readVersion=function(u){var c=u.getHeight(),p=u.getWidth();return _f.getVersionForDimensions(c,p)},f.prototype.readCodewords=function(){var u=new Int8Array(this.version.getTotalCodewords()),c=0,p=4,h=0,m=this.mappingBitMatrix.getHeight(),x=this.mappingBitMatrix.getWidth(),w=!1,b=!1,R=!1,L=!1;do{if(p!==m||0!==h||w)if(p!==m-2||0!==h||0==(3&x)||b)if(p!==m+4||2!==h||0!=(7&x)||R)if(p!==m-2||0!==h||4!=(7&x)||L){do{p<m&&h>=0&&!this.readMappingMatrix.get(h,p)&&(u[c++]=255&this.readUtah(p,h,m,x)),p-=2,h+=2}while(p>=0&&h<x);p+=1,h+=3;do{p>=0&&h<x&&!this.readMappingMatrix.get(h,p)&&(u[c++]=255&this.readUtah(p,h,m,x)),p+=2,h-=2}while(p<m&&h>=0);p+=3,h+=1}else u[c++]=255&this.readCorner4(m,x),p-=2,h+=2,L=!0;else u[c++]=255&this.readCorner3(m,x),p-=2,h+=2,R=!0;else u[c++]=255&this.readCorner2(m,x),p-=2,h+=2,b=!0;else u[c++]=255&this.readCorner1(m,x),p-=2,h+=2,w=!0}while(p<m||h<x);if(c!==this.version.getTotalCodewords())throw new de;return u},f.prototype.readModule=function(u,c,p,h){return u<0&&(u+=p,c+=4-(p+4&7)),c<0&&(c+=h,u+=4-(h+4&7)),this.readMappingMatrix.set(c,u),this.mappingBitMatrix.get(c,u)},f.prototype.readUtah=function(u,c,p,h){var m=0;return this.readModule(u-2,c-2,p,h)&&(m|=1),m<<=1,this.readModule(u-2,c-1,p,h)&&(m|=1),m<<=1,this.readModule(u-1,c-2,p,h)&&(m|=1),m<<=1,this.readModule(u-1,c-1,p,h)&&(m|=1),m<<=1,this.readModule(u-1,c,p,h)&&(m|=1),m<<=1,this.readModule(u,c-2,p,h)&&(m|=1),m<<=1,this.readModule(u,c-1,p,h)&&(m|=1),m<<=1,this.readModule(u,c,p,h)&&(m|=1),m},f.prototype.readCorner1=function(u,c){var p=0;return this.readModule(u-1,0,u,c)&&(p|=1),p<<=1,this.readModule(u-1,1,u,c)&&(p|=1),p<<=1,this.readModule(u-1,2,u,c)&&(p|=1),p<<=1,this.readModule(0,c-2,u,c)&&(p|=1),p<<=1,this.readModule(0,c-1,u,c)&&(p|=1),p<<=1,this.readModule(1,c-1,u,c)&&(p|=1),p<<=1,this.readModule(2,c-1,u,c)&&(p|=1),p<<=1,this.readModule(3,c-1,u,c)&&(p|=1),p},f.prototype.readCorner2=function(u,c){var p=0;return this.readModule(u-3,0,u,c)&&(p|=1),p<<=1,this.readModule(u-2,0,u,c)&&(p|=1),p<<=1,this.readModule(u-1,0,u,c)&&(p|=1),p<<=1,this.readModule(0,c-4,u,c)&&(p|=1),p<<=1,this.readModule(0,c-3,u,c)&&(p|=1),p<<=1,this.readModule(0,c-2,u,c)&&(p|=1),p<<=1,this.readModule(0,c-1,u,c)&&(p|=1),p<<=1,this.readModule(1,c-1,u,c)&&(p|=1),p},f.prototype.readCorner3=function(u,c){var p=0;return this.readModule(u-1,0,u,c)&&(p|=1),p<<=1,this.readModule(u-1,c-1,u,c)&&(p|=1),p<<=1,this.readModule(0,c-3,u,c)&&(p|=1),p<<=1,this.readModule(0,c-2,u,c)&&(p|=1),p<<=1,this.readModule(0,c-1,u,c)&&(p|=1),p<<=1,this.readModule(1,c-3,u,c)&&(p|=1),p<<=1,this.readModule(1,c-2,u,c)&&(p|=1),p<<=1,this.readModule(1,c-1,u,c)&&(p|=1),p},f.prototype.readCorner4=function(u,c){var p=0;return this.readModule(u-3,0,u,c)&&(p|=1),p<<=1,this.readModule(u-2,0,u,c)&&(p|=1),p<<=1,this.readModule(u-1,0,u,c)&&(p|=1),p<<=1,this.readModule(0,c-2,u,c)&&(p|=1),p<<=1,this.readModule(0,c-1,u,c)&&(p|=1),p<<=1,this.readModule(1,c-1,u,c)&&(p|=1),p<<=1,this.readModule(2,c-1,u,c)&&(p|=1),p<<=1,this.readModule(3,c-1,u,c)&&(p|=1),p},f.prototype.extractDataRegion=function(u){var c=this.version.getSymbolSizeRows(),p=this.version.getSymbolSizeColumns();if(u.getHeight()!==c)throw new q("Dimension of bitMatrix must match the version size");for(var h=this.version.getDataRegionSizeRows(),m=this.version.getDataRegionSizeColumns(),x=c/h|0,w=p/m|0,L=new kt(w*m,x*h),V=0;V<x;++V)for(var H=V*h,j=0;j<w;++j)for(var K=j*m,oe=0;oe<h;++oe)for(var _e=V*(h+2)+1+oe,ve=H+oe,ge=0;ge<m;++ge)u.get(j*(m+2)+1+ge,_e)&&L.set(K+ge,ve);return L},f}(),yf=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},_d=function(){function f(u,c){this.numDataCodewords=u,this.codewords=c}return f.getDataBlocks=function(u,c){var p,h,m,x,w=c.getECBlocks(),b=0,R=w.getECBlocks();try{for(var L=yf(R),V=L.next();!V.done;V=L.next())b+=(H=V.value).getCount()}catch(hi){p={error:hi}}finally{try{V&&!V.done&&(h=L.return)&&h.call(L)}finally{if(p)throw p.error}}var j=new Array(b),K=0;try{for(var oe=yf(R),_e=oe.next();!_e.done;_e=oe.next())for(var H=_e.value,ve=0;ve<H.getCount();ve++){var ge=H.getDataCodewords(),Ne=w.getECCodewords()+ge;j[K++]=new f(ge,new Uint8Array(Ne))}}catch(hi){m={error:hi}}finally{try{_e&&!_e.done&&(x=oe.return)&&x.call(oe)}finally{if(m)throw m.error}}var Je=j[0].codewords.length-w.getECCodewords(),st=Je-1,pt=0;for(ve=0;ve<st;ve++)for(var Rt=0;Rt<K;Rt++)j[Rt].codewords[ve]=u[pt++];var Vt=24===c.getVersionNumber(),qt=Vt?8:K;for(Rt=0;Rt<qt;Rt++)j[Rt].codewords[Je-1]=u[pt++];var Jr=j[0].codewords.length;for(ve=Je;ve<Jr;ve++)for(Rt=0;Rt<K;Rt++){var _n=Vt?(Rt+8)%K:Rt;j[_n].codewords[Vt&&_n>7?ve-1:ve]=u[pt++]}if(pt!==u.length)throw new q;return j},f.prototype.getNumDataCodewords=function(){return this.numDataCodewords},f.prototype.getCodewords=function(){return this.codewords},f}(),xf=function(){function f(u){this.bytes=u,this.byteOffset=0,this.bitOffset=0}return f.prototype.getBitOffset=function(){return this.bitOffset},f.prototype.getByteOffset=function(){return this.byteOffset},f.prototype.readBits=function(u){if(u<1||u>32||u>this.available())throw new q(""+u);var c=0,p=this.bitOffset,h=this.byteOffset,m=this.bytes;if(p>0){var x=8-p,w=u<x?u:x;c=(m[h]&255>>8-w<<(b=x-w))>>b,u-=w,8===(p+=w)&&(p=0,h++)}if(u>0){for(;u>=8;)c=c<<8|255&m[h],h++,u-=8;var b;u>0&&(c=c<<u|(m[h]&255>>(b=8-u)<<b)>>b,p+=u)}return this.bitOffset=p,this.byteOffset=h,c},f.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},f}(),fr=(()=>(function(f){f[f.PAD_ENCODE=0]="PAD_ENCODE",f[f.ASCII_ENCODE=1]="ASCII_ENCODE",f[f.C40_ENCODE=2]="C40_ENCODE",f[f.TEXT_ENCODE=3]="TEXT_ENCODE",f[f.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",f[f.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",f[f.BASE256_ENCODE=6]="BASE256_ENCODE"}(fr||(fr={})),fr))(),du=function(){function f(){}return f.decode=function(u){var c=new xf(u),p=new tn,h=new tn,m=new Array,x=fr.ASCII_ENCODE;do{if(x===fr.ASCII_ENCODE)x=this.decodeAsciiSegment(c,p,h);else{switch(x){case fr.C40_ENCODE:this.decodeC40Segment(c,p);break;case fr.TEXT_ENCODE:this.decodeTextSegment(c,p);break;case fr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(c,p);break;case fr.EDIFACT_ENCODE:this.decodeEdifactSegment(c,p);break;case fr.BASE256_ENCODE:this.decodeBase256Segment(c,p,m);break;default:throw new de}x=fr.ASCII_ENCODE}}while(x!==fr.PAD_ENCODE&&c.available()>0);return h.length()>0&&p.append(h.toString()),new Mt(u,p.toString(),0===m.length?null:m,null)},f.decodeAsciiSegment=function(u,c,p){var h=!1;do{var m=u.readBits(8);if(0===m)throw new de;if(m<=128)return h&&(m+=128),c.append(String.fromCharCode(m-1)),fr.ASCII_ENCODE;if(129===m)return fr.PAD_ENCODE;if(m<=229){var x=m-130;x<10&&c.append("0"),c.append(""+x)}else switch(m){case 230:return fr.C40_ENCODE;case 231:return fr.BASE256_ENCODE;case 232:c.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:h=!0;break;case 236:c.append("[)>\x1e05\x1d"),p.insert(0,"\x1e\x04");break;case 237:c.append("[)>\x1e06\x1d"),p.insert(0,"\x1e\x04");break;case 238:return fr.ANSIX12_ENCODE;case 239:return fr.TEXT_ENCODE;case 240:return fr.EDIFACT_ENCODE;case 241:break;default:if(254!==m||0!==u.available())throw new de}}while(u.available()>0);return fr.ASCII_ENCODE},f.decodeC40Segment=function(u,c){var p=!1,h=[],m=0;do{if(8===u.available())return;var x=u.readBits(8);if(254===x)return;this.parseTwoBytes(x,u.readBits(8),h);for(var w=0;w<3;w++){var b=h[w];switch(m){case 0:if(b<3)m=b+1;else{if(!(b<this.C40_BASIC_SET_CHARS.length))throw new de;var R=this.C40_BASIC_SET_CHARS[b];p?(c.append(String.fromCharCode(R.charCodeAt(0)+128)),p=!1):c.append(R)}break;case 1:p?(c.append(String.fromCharCode(b+128)),p=!1):c.append(String.fromCharCode(b)),m=0;break;case 2:if(b<this.C40_SHIFT2_SET_CHARS.length)R=this.C40_SHIFT2_SET_CHARS[b],p?(c.append(String.fromCharCode(R.charCodeAt(0)+128)),p=!1):c.append(R);else switch(b){case 27:c.append(String.fromCharCode(29));break;case 30:p=!0;break;default:throw new de}m=0;break;case 3:p?(c.append(String.fromCharCode(b+224)),p=!1):c.append(String.fromCharCode(b+96)),m=0;break;default:throw new de}}}while(u.available()>0)},f.decodeTextSegment=function(u,c){var p=!1,h=[],m=0;do{if(8===u.available())return;var x=u.readBits(8);if(254===x)return;this.parseTwoBytes(x,u.readBits(8),h);for(var w=0;w<3;w++){var b=h[w];switch(m){case 0:if(b<3)m=b+1;else{if(!(b<this.TEXT_BASIC_SET_CHARS.length))throw new de;var R=this.TEXT_BASIC_SET_CHARS[b];p?(c.append(String.fromCharCode(R.charCodeAt(0)+128)),p=!1):c.append(R)}break;case 1:p?(c.append(String.fromCharCode(b+128)),p=!1):c.append(String.fromCharCode(b)),m=0;break;case 2:if(b<this.TEXT_SHIFT2_SET_CHARS.length)R=this.TEXT_SHIFT2_SET_CHARS[b],p?(c.append(String.fromCharCode(R.charCodeAt(0)+128)),p=!1):c.append(R);else switch(b){case 27:c.append(String.fromCharCode(29));break;case 30:p=!0;break;default:throw new de}m=0;break;case 3:if(!(b<this.TEXT_SHIFT3_SET_CHARS.length))throw new de;R=this.TEXT_SHIFT3_SET_CHARS[b],p?(c.append(String.fromCharCode(R.charCodeAt(0)+128)),p=!1):c.append(R),m=0;break;default:throw new de}}}while(u.available()>0)},f.decodeAnsiX12Segment=function(u,c){var p=[];do{if(8===u.available())return;var h=u.readBits(8);if(254===h)return;this.parseTwoBytes(h,u.readBits(8),p);for(var m=0;m<3;m++){var x=p[m];switch(x){case 0:c.append("\r");break;case 1:c.append("*");break;case 2:c.append(">");break;case 3:c.append(" ");break;default:if(x<14)c.append(String.fromCharCode(x+44));else{if(!(x<40))throw new de;c.append(String.fromCharCode(x+51))}}}}while(u.available()>0)},f.parseTwoBytes=function(u,c,p){var h=(u<<8)+c-1,m=Math.floor(h/1600);p[0]=m,h-=1600*m,m=Math.floor(h/40),p[1]=m,p[2]=h-40*m},f.decodeEdifactSegment=function(u,c){do{if(u.available()<=16)return;for(var p=0;p<4;p++){var h=u.readBits(6);if(31===h){var m=8-u.getBitOffset();return void(8!==m&&u.readBits(m))}0==(32&h)&&(h|=64),c.append(String.fromCharCode(h))}}while(u.available()>0)},f.decodeBase256Segment=function(u,c,p){var x,h=1+u.getByteOffset(),m=this.unrandomize255State(u.readBits(8),h++);if((x=0===m?u.available()/8|0:m<250?m:250*(m-249)+this.unrandomize255State(u.readBits(8),h++))<0)throw new de;for(var w=new Uint8Array(x),b=0;b<x;b++){if(u.available()<8)throw new de;w[b]=this.unrandomize255State(u.readBits(8),h++)}p.push(w);try{c.append(Nt.decode(w,Pt.ISO88591))}catch(R){throw new $r("Platform does not support required encoding: "+R.message)}},f.unrandomize255State=function(u,c){var h=u-(149*c%255+1);return h>=0?h:h+256},f.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],f.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],f.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],f.TEXT_SHIFT2_SET_CHARS=f.C40_SHIFT2_SET_CHARS,f.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],f}(),yd=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Mh=function(){function f(){this.rsDecoder=new Fn(ft.DATA_MATRIX_FIELD_256)}return f.prototype.decode=function(u){var c,p,h=new Yo(u),m=h.getVersion(),x=h.readCodewords(),w=_d.getDataBlocks(x,m),b=0;try{for(var R=yd(w),L=R.next();!L.done;L=R.next())b+=L.value.getNumDataCodewords()}catch(Ne){c={error:Ne}}finally{try{L&&!L.done&&(p=R.return)&&p.call(R)}finally{if(c)throw c.error}}for(var H=new Uint8Array(b),j=w.length,K=0;K<j;K++){var oe=w[K],_e=oe.getCodewords(),ve=oe.getNumDataCodewords();this.correctErrors(_e,ve);for(var ge=0;ge<ve;ge++)H[ge*j+K]=_e[ge]}return du.decode(H)},f.prototype.correctErrors=function(u,c){var h=new Int32Array(u);try{this.rsDecoder.decode(h,u.length-c)}catch(x){throw new Ee}for(var m=0;m<c;m++)u[m]=h[m]},f}(),Fh=function(){function f(u){this.image=u,this.rectangleDetector=new Zt(this.image)}return f.prototype.detect=function(){var u=this.rectangleDetector.detect(),c=this.detectSolid1(u);if((c=this.detectSolid2(c))[3]=this.correctTopRight(c),!c[3])throw new Re;var p=(c=this.shiftToModuleCenter(c))[0],h=c[1],m=c[2],x=c[3],w=this.transitionsBetween(p,x)+1,b=this.transitionsBetween(m,x)+1;1==(1&w)&&(w+=1),1==(1&b)&&(b+=1),4*w<7*b&&4*b<7*w&&(w=b=Math.max(w,b));var R=f.sampleGrid(this.image,p,h,m,x,w,b);return new Qe(R,[p,h,m,x])},f.shiftPoint=function(u,c,p){var h=(c.getX()-u.getX())/(p+1),m=(c.getY()-u.getY())/(p+1);return new ae(u.getX()+h,u.getY()+m)},f.moveAway=function(u,c,p){var h=u.getX(),m=u.getY();return h<c?h-=1:h+=1,m<p?m-=1:m+=1,new ae(h,m)},f.prototype.detectSolid1=function(u){var c=u[0],p=u[1],h=u[3],m=u[2],x=this.transitionsBetween(c,p),w=this.transitionsBetween(p,h),b=this.transitionsBetween(h,m),R=this.transitionsBetween(m,c),L=x,V=[m,c,p,h];return L>w&&(L=w,V[0]=c,V[1]=p,V[2]=h,V[3]=m),L>b&&(L=b,V[0]=p,V[1]=h,V[2]=m,V[3]=c),L>R&&(V[0]=h,V[1]=m,V[2]=c,V[3]=p),V},f.prototype.detectSolid2=function(u){var c=u[0],p=u[1],h=u[2],m=u[3],x=this.transitionsBetween(c,m),w=f.shiftPoint(p,h,4*(x+1)),b=f.shiftPoint(h,p,4*(x+1));return this.transitionsBetween(w,c)<this.transitionsBetween(b,m)?(u[0]=c,u[1]=p,u[2]=h,u[3]=m):(u[0]=p,u[1]=h,u[2]=m,u[3]=c),u},f.prototype.correctTopRight=function(u){var c=u[0],p=u[1],h=u[2],m=u[3],x=this.transitionsBetween(c,m),w=this.transitionsBetween(p,m),b=f.shiftPoint(c,p,4*(w+1)),R=f.shiftPoint(h,p,4*(x+1));x=this.transitionsBetween(b,m),w=this.transitionsBetween(R,m);var L=new ae(m.getX()+(h.getX()-p.getX())/(x+1),m.getY()+(h.getY()-p.getY())/(x+1)),V=new ae(m.getX()+(c.getX()-p.getX())/(w+1),m.getY()+(c.getY()-p.getY())/(w+1));return this.isValid(L)?this.isValid(V)?this.transitionsBetween(b,L)+this.transitionsBetween(R,L)>this.transitionsBetween(b,V)+this.transitionsBetween(R,V)?L:V:L:this.isValid(V)?V:null},f.prototype.shiftToModuleCenter=function(u){var c=u[0],p=u[1],h=u[2],m=u[3],x=this.transitionsBetween(c,m)+1,w=this.transitionsBetween(h,m)+1,b=f.shiftPoint(c,p,4*w),R=f.shiftPoint(h,p,4*x);1==(1&(x=this.transitionsBetween(b,m)+1))&&(x+=1),1==(1&(w=this.transitionsBetween(R,m)+1))&&(w+=1);var H,j,L=(c.getX()+p.getX()+h.getX()+m.getX())/4,V=(c.getY()+p.getY()+h.getY()+m.getY())/4;return c=f.moveAway(c,L,V),p=f.moveAway(p,L,V),h=f.moveAway(h,L,V),m=f.moveAway(m,L,V),b=f.shiftPoint(c,p,4*w),b=f.shiftPoint(b,m,4*x),H=f.shiftPoint(p,c,4*w),H=f.shiftPoint(H,h,4*x),R=f.shiftPoint(h,m,4*w),R=f.shiftPoint(R,p,4*x),j=f.shiftPoint(m,h,4*w),[b,H,R,j=f.shiftPoint(j,c,4*x)]},f.prototype.isValid=function(u){return u.getX()>=0&&u.getX()<this.image.getWidth()&&u.getY()>0&&u.getY()<this.image.getHeight()},f.sampleGrid=function(u,c,p,h,m,x,w){return mn.getInstance().sampleGrid(u,x,w,.5,.5,x-.5,.5,x-.5,w-.5,.5,w-.5,c.getX(),c.getY(),m.getX(),m.getY(),h.getX(),h.getY(),p.getX(),p.getY())},f.prototype.transitionsBetween=function(u,c){var p=Math.trunc(u.getX()),h=Math.trunc(u.getY()),m=Math.trunc(c.getX()),x=Math.trunc(c.getY()),w=Math.abs(x-h)>Math.abs(m-p);if(w){var b=p;p=h,h=b,b=m,m=x,x=b}for(var R=Math.abs(m-p),L=Math.abs(x-h),V=-R/2,H=h<x?1:-1,j=p<m?1:-1,K=0,oe=this.image.get(w?h:p,w?p:h),_e=p,ve=h;_e!==m;_e+=j){var ge=this.image.get(w?ve:_e,w?_e:ve);if(ge!==oe&&(K++,oe=ge),(V+=L)>0){if(ve===x)break;ve+=H,V-=R}}return K},f}(),Zu=function(){function f(){this.decoder=new Mh}return f.prototype.decode=function(u,c){var p,h;if(void 0===c&&(c=null),null!=c&&c.has(Et.PURE_BARCODE)){var m=f.extractPureBits(u.getBlackMatrix());p=this.decoder.decode(m),h=f.NO_POINTS}else{var x=new Fh(u.getBlackMatrix()).detect();p=this.decoder.decode(x.getBits()),h=x.getPoints()}var w=p.getRawBytes(),b=new kr(p.getText(),w,8*w.length,h,Tt.DATA_MATRIX,We.currentTimeMillis()),R=p.getByteSegments();null!=R&&b.putMetadata(Mn.BYTE_SEGMENTS,R);var L=p.getECLevel();return null!=L&&b.putMetadata(Mn.ERROR_CORRECTION_LEVEL,L),b},f.prototype.reset=function(){},f.extractPureBits=function(u){var c=u.getTopLeftOnBit(),p=u.getBottomRightOnBit();if(null==c||null==p)throw new Re;var h=this.moduleSize(c,u),m=c[1],w=c[0],R=(p[0]-w+1)/h,L=(p[1]-m+1)/h;if(R<=0||L<=0)throw new Re;var V=h/2;m+=V,w+=V;for(var H=new kt(R,L),j=0;j<L;j++)for(var K=m+j*h,oe=0;oe<R;oe++)u.get(w+oe*h,K)&&H.set(oe,j);return H},f.moduleSize=function(u,c){for(var p=c.getWidth(),h=u[0],m=u[1];h<p&&c.get(h,m);)h++;if(h===p)throw new Re;var x=h-u[0];if(0===x)throw new Re;return x},f.NO_POINTS=[],f}(),fu=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Ku=(function(f){fu(function(c){return void 0===c&&(c=500),f.call(this,new Zu,c)||this},f)}(xi),(()=>(function(f){f[f.L=0]="L",f[f.M=1]="M",f[f.Q=2]="Q",f[f.H=3]="H"}(Ku||(Ku={})),Ku))()),go=function(){function f(u,c,p){this.value=u,this.stringValue=c,this.bits=p,f.FOR_BITS.set(p,this),f.FOR_VALUE.set(u,this)}return f.prototype.getValue=function(){return this.value},f.prototype.getBits=function(){return this.bits},f.fromString=function(u){switch(u){case"L":return f.L;case"M":return f.M;case"Q":return f.Q;case"H":return f.H;default:throw new xe(u+"not available")}},f.prototype.toString=function(){return this.stringValue},f.prototype.equals=function(u){return u instanceof f&&this.value===u.value},f.forBits=function(u){if(u<0||u>=f.FOR_BITS.size)throw new q;return f.FOR_BITS.get(u)},f.FOR_BITS=new Map,f.FOR_VALUE=new Map,f.L=new f(Ku.L,"L",1),f.M=new f(Ku.M,"M",0),f.Q=new f(Ku.Q,"Q",3),f.H=new f(Ku.H,"H",2),f}(),kh=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Fa=function(){function f(u){this.errorCorrectionLevel=go.forBits(u>>3&3),this.dataMask=7&u}return f.numBitsDiffering=function(u,c){return Pe.bitCount(u^c)},f.decodeFormatInformation=function(u,c){var p=f.doDecodeFormatInformation(u,c);return null!==p?p:f.doDecodeFormatInformation(u^f.FORMAT_INFO_MASK_QR,c^f.FORMAT_INFO_MASK_QR)},f.doDecodeFormatInformation=function(u,c){var p,h,m=Number.MAX_SAFE_INTEGER,x=0;try{for(var w=kh(f.FORMAT_INFO_DECODE_LOOKUP),b=w.next();!b.done;b=w.next()){var R=b.value,L=R[0];if(L===u||L===c)return new f(R[1]);var V=f.numBitsDiffering(u,L);V<m&&(x=R[1],m=V),u!==c&&(V=f.numBitsDiffering(c,L))<m&&(x=R[1],m=V)}}catch(H){p={error:H}}finally{try{b&&!b.done&&(h=w.return)&&h.call(w)}finally{if(p)throw p.error}}return m<=3?new f(x):null},f.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},f.prototype.getDataMask=function(){return this.dataMask},f.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},f.prototype.equals=function(u){return u instanceof f&&this.errorCorrectionLevel===u.errorCorrectionLevel&&this.dataMask===u.dataMask},f.FORMAT_INFO_MASK_QR=21522,f.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],f}(),Xo=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Se=function(){function f(u){for(var c=[],p=1;p<arguments.length;p++)c[p-1]=arguments[p];this.ecCodewordsPerBlock=u,this.ecBlocks=c}return f.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},f.prototype.getNumBlocks=function(){var u,c,p=0,h=this.ecBlocks;try{for(var m=Xo(h),x=m.next();!x.done;x=m.next())p+=x.value.getCount()}catch(b){u={error:b}}finally{try{x&&!x.done&&(c=m.return)&&c.call(m)}finally{if(u)throw u.error}}return p},f.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},f.prototype.getECBlocks=function(){return this.ecBlocks},f}(),ee=function(){function f(u,c){this.count=u,this.dataCodewords=c}return f.prototype.getCount=function(){return this.count},f.prototype.getDataCodewords=function(){return this.dataCodewords},f}(),Al=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Mi=function(){function f(u,c){for(var p,h,m=[],x=2;x<arguments.length;x++)m[x-2]=arguments[x];this.versionNumber=u,this.alignmentPatternCenters=c,this.ecBlocks=m;var w=0,b=m[0].getECCodewordsPerBlock(),R=m[0].getECBlocks();try{for(var L=Al(R),V=L.next();!V.done;V=L.next()){var H=V.value;w+=H.getCount()*(H.getDataCodewords()+b)}}catch(j){p={error:j}}finally{try{V&&!V.done&&(h=L.return)&&h.call(L)}finally{if(p)throw p.error}}this.totalCodewords=w}return f.prototype.getVersionNumber=function(){return this.versionNumber},f.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},f.prototype.getTotalCodewords=function(){return this.totalCodewords},f.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},f.prototype.getECBlocksForLevel=function(u){return this.ecBlocks[u.getValue()]},f.getProvisionalVersionForDimension=function(u){if(u%4!=1)throw new de;try{return this.getVersionForNumber((u-17)/4)}catch(c){throw new de}},f.getVersionForNumber=function(u){if(u<1||u>40)throw new q;return f.VERSIONS[u-1]},f.decodeVersionInformation=function(u){for(var c=Number.MAX_SAFE_INTEGER,p=0,h=0;h<f.VERSION_DECODE_INFO.length;h++){var m=f.VERSION_DECODE_INFO[h];if(m===u)return f.getVersionForNumber(h+7);var x=Fa.numBitsDiffering(u,m);x<c&&(p=h+7,c=x)}return c<=3?f.getVersionForNumber(p):null},f.prototype.buildFunctionPattern=function(){var u=this.getDimensionForVersion(),c=new kt(u);c.setRegion(0,0,9,9),c.setRegion(u-8,0,8,9),c.setRegion(0,u-8,9,8);for(var p=this.alignmentPatternCenters.length,h=0;h<p;h++)for(var m=this.alignmentPatternCenters[h]-2,x=0;x<p;x++)0===h&&(0===x||x===p-1)||h===p-1&&0===x||c.setRegion(this.alignmentPatternCenters[x]-2,m,5,5);return c.setRegion(6,9,1,u-17),c.setRegion(9,6,u-17,1),this.versionNumber>6&&(c.setRegion(u-11,0,3,6),c.setRegion(0,u-11,6,3)),c},f.prototype.toString=function(){return""+this.versionNumber},f.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),f.VERSIONS=[new f(1,new Int32Array(0),new Se(7,new ee(1,19)),new Se(10,new ee(1,16)),new Se(13,new ee(1,13)),new Se(17,new ee(1,9))),new f(2,Int32Array.from([6,18]),new Se(10,new ee(1,34)),new Se(16,new ee(1,28)),new Se(22,new ee(1,22)),new Se(28,new ee(1,16))),new f(3,Int32Array.from([6,22]),new Se(15,new ee(1,55)),new Se(26,new ee(1,44)),new Se(18,new ee(2,17)),new Se(22,new ee(2,13))),new f(4,Int32Array.from([6,26]),new Se(20,new ee(1,80)),new Se(18,new ee(2,32)),new Se(26,new ee(2,24)),new Se(16,new ee(4,9))),new f(5,Int32Array.from([6,30]),new Se(26,new ee(1,108)),new Se(24,new ee(2,43)),new Se(18,new ee(2,15),new ee(2,16)),new Se(22,new ee(2,11),new ee(2,12))),new f(6,Int32Array.from([6,34]),new Se(18,new ee(2,68)),new Se(16,new ee(4,27)),new Se(24,new ee(4,19)),new Se(28,new ee(4,15))),new f(7,Int32Array.from([6,22,38]),new Se(20,new ee(2,78)),new Se(18,new ee(4,31)),new Se(18,new ee(2,14),new ee(4,15)),new Se(26,new ee(4,13),new ee(1,14))),new f(8,Int32Array.from([6,24,42]),new Se(24,new ee(2,97)),new Se(22,new ee(2,38),new ee(2,39)),new Se(22,new ee(4,18),new ee(2,19)),new Se(26,new ee(4,14),new ee(2,15))),new f(9,Int32Array.from([6,26,46]),new Se(30,new ee(2,116)),new Se(22,new ee(3,36),new ee(2,37)),new Se(20,new ee(4,16),new ee(4,17)),new Se(24,new ee(4,12),new ee(4,13))),new f(10,Int32Array.from([6,28,50]),new Se(18,new ee(2,68),new ee(2,69)),new Se(26,new ee(4,43),new ee(1,44)),new Se(24,new ee(6,19),new ee(2,20)),new Se(28,new ee(6,15),new ee(2,16))),new f(11,Int32Array.from([6,30,54]),new Se(20,new ee(4,81)),new Se(30,new ee(1,50),new ee(4,51)),new Se(28,new ee(4,22),new ee(4,23)),new Se(24,new ee(3,12),new ee(8,13))),new f(12,Int32Array.from([6,32,58]),new Se(24,new ee(2,92),new ee(2,93)),new Se(22,new ee(6,36),new ee(2,37)),new Se(26,new ee(4,20),new ee(6,21)),new Se(28,new ee(7,14),new ee(4,15))),new f(13,Int32Array.from([6,34,62]),new Se(26,new ee(4,107)),new Se(22,new ee(8,37),new ee(1,38)),new Se(24,new ee(8,20),new ee(4,21)),new Se(22,new ee(12,11),new ee(4,12))),new f(14,Int32Array.from([6,26,46,66]),new Se(30,new ee(3,115),new ee(1,116)),new Se(24,new ee(4,40),new ee(5,41)),new Se(20,new ee(11,16),new ee(5,17)),new Se(24,new ee(11,12),new ee(5,13))),new f(15,Int32Array.from([6,26,48,70]),new Se(22,new ee(5,87),new ee(1,88)),new Se(24,new ee(5,41),new ee(5,42)),new Se(30,new ee(5,24),new ee(7,25)),new Se(24,new ee(11,12),new ee(7,13))),new f(16,Int32Array.from([6,26,50,74]),new Se(24,new ee(5,98),new ee(1,99)),new Se(28,new ee(7,45),new ee(3,46)),new Se(24,new ee(15,19),new ee(2,20)),new Se(30,new ee(3,15),new ee(13,16))),new f(17,Int32Array.from([6,30,54,78]),new Se(28,new ee(1,107),new ee(5,108)),new Se(28,new ee(10,46),new ee(1,47)),new Se(28,new ee(1,22),new ee(15,23)),new Se(28,new ee(2,14),new ee(17,15))),new f(18,Int32Array.from([6,30,56,82]),new Se(30,new ee(5,120),new ee(1,121)),new Se(26,new ee(9,43),new ee(4,44)),new Se(28,new ee(17,22),new ee(1,23)),new Se(28,new ee(2,14),new ee(19,15))),new f(19,Int32Array.from([6,30,58,86]),new Se(28,new ee(3,113),new ee(4,114)),new Se(26,new ee(3,44),new ee(11,45)),new Se(26,new ee(17,21),new ee(4,22)),new Se(26,new ee(9,13),new ee(16,14))),new f(20,Int32Array.from([6,34,62,90]),new Se(28,new ee(3,107),new ee(5,108)),new Se(26,new ee(3,41),new ee(13,42)),new Se(30,new ee(15,24),new ee(5,25)),new Se(28,new ee(15,15),new ee(10,16))),new f(21,Int32Array.from([6,28,50,72,94]),new Se(28,new ee(4,116),new ee(4,117)),new Se(26,new ee(17,42)),new Se(28,new ee(17,22),new ee(6,23)),new Se(30,new ee(19,16),new ee(6,17))),new f(22,Int32Array.from([6,26,50,74,98]),new Se(28,new ee(2,111),new ee(7,112)),new Se(28,new ee(17,46)),new Se(30,new ee(7,24),new ee(16,25)),new Se(24,new ee(34,13))),new f(23,Int32Array.from([6,30,54,78,102]),new Se(30,new ee(4,121),new ee(5,122)),new Se(28,new ee(4,47),new ee(14,48)),new Se(30,new ee(11,24),new ee(14,25)),new Se(30,new ee(16,15),new ee(14,16))),new f(24,Int32Array.from([6,28,54,80,106]),new Se(30,new ee(6,117),new ee(4,118)),new Se(28,new ee(6,45),new ee(14,46)),new Se(30,new ee(11,24),new ee(16,25)),new Se(30,new ee(30,16),new ee(2,17))),new f(25,Int32Array.from([6,32,58,84,110]),new Se(26,new ee(8,106),new ee(4,107)),new Se(28,new ee(8,47),new ee(13,48)),new Se(30,new ee(7,24),new ee(22,25)),new Se(30,new ee(22,15),new ee(13,16))),new f(26,Int32Array.from([6,30,58,86,114]),new Se(28,new ee(10,114),new ee(2,115)),new Se(28,new ee(19,46),new ee(4,47)),new Se(28,new ee(28,22),new ee(6,23)),new Se(30,new ee(33,16),new ee(4,17))),new f(27,Int32Array.from([6,34,62,90,118]),new Se(30,new ee(8,122),new ee(4,123)),new Se(28,new ee(22,45),new ee(3,46)),new Se(30,new ee(8,23),new ee(26,24)),new Se(30,new ee(12,15),new ee(28,16))),new f(28,Int32Array.from([6,26,50,74,98,122]),new Se(30,new ee(3,117),new ee(10,118)),new Se(28,new ee(3,45),new ee(23,46)),new Se(30,new ee(4,24),new ee(31,25)),new Se(30,new ee(11,15),new ee(31,16))),new f(29,Int32Array.from([6,30,54,78,102,126]),new Se(30,new ee(7,116),new ee(7,117)),new Se(28,new ee(21,45),new ee(7,46)),new Se(30,new ee(1,23),new ee(37,24)),new Se(30,new ee(19,15),new ee(26,16))),new f(30,Int32Array.from([6,26,52,78,104,130]),new Se(30,new ee(5,115),new ee(10,116)),new Se(28,new ee(19,47),new ee(10,48)),new Se(30,new ee(15,24),new ee(25,25)),new Se(30,new ee(23,15),new ee(25,16))),new f(31,Int32Array.from([6,30,56,82,108,134]),new Se(30,new ee(13,115),new ee(3,116)),new Se(28,new ee(2,46),new ee(29,47)),new Se(30,new ee(42,24),new ee(1,25)),new Se(30,new ee(23,15),new ee(28,16))),new f(32,Int32Array.from([6,34,60,86,112,138]),new Se(30,new ee(17,115)),new Se(28,new ee(10,46),new ee(23,47)),new Se(30,new ee(10,24),new ee(35,25)),new Se(30,new ee(19,15),new ee(35,16))),new f(33,Int32Array.from([6,30,58,86,114,142]),new Se(30,new ee(17,115),new ee(1,116)),new Se(28,new ee(14,46),new ee(21,47)),new Se(30,new ee(29,24),new ee(19,25)),new Se(30,new ee(11,15),new ee(46,16))),new f(34,Int32Array.from([6,34,62,90,118,146]),new Se(30,new ee(13,115),new ee(6,116)),new Se(28,new ee(14,46),new ee(23,47)),new Se(30,new ee(44,24),new ee(7,25)),new Se(30,new ee(59,16),new ee(1,17))),new f(35,Int32Array.from([6,30,54,78,102,126,150]),new Se(30,new ee(12,121),new ee(7,122)),new Se(28,new ee(12,47),new ee(26,48)),new Se(30,new ee(39,24),new ee(14,25)),new Se(30,new ee(22,15),new ee(41,16))),new f(36,Int32Array.from([6,24,50,76,102,128,154]),new Se(30,new ee(6,121),new ee(14,122)),new Se(28,new ee(6,47),new ee(34,48)),new Se(30,new ee(46,24),new ee(10,25)),new Se(30,new ee(2,15),new ee(64,16))),new f(37,Int32Array.from([6,28,54,80,106,132,158]),new Se(30,new ee(17,122),new ee(4,123)),new Se(28,new ee(29,46),new ee(14,47)),new Se(30,new ee(49,24),new ee(10,25)),new Se(30,new ee(24,15),new ee(46,16))),new f(38,Int32Array.from([6,32,58,84,110,136,162]),new Se(30,new ee(4,122),new ee(18,123)),new Se(28,new ee(13,46),new ee(32,47)),new Se(30,new ee(48,24),new ee(14,25)),new Se(30,new ee(42,15),new ee(32,16))),new f(39,Int32Array.from([6,26,54,82,110,138,166]),new Se(30,new ee(20,117),new ee(4,118)),new Se(28,new ee(40,47),new ee(7,48)),new Se(30,new ee(43,24),new ee(22,25)),new Se(30,new ee(10,15),new ee(67,16))),new f(40,Int32Array.from([6,30,58,86,114,142,170]),new Se(30,new ee(19,118),new ee(6,119)),new Se(28,new ee(18,47),new ee(31,48)),new Se(30,new ee(34,24),new ee(34,25)),new Se(30,new ee(20,15),new ee(61,16)))],f}(),Lr=(()=>(function(f){f[f.DATA_MASK_000=0]="DATA_MASK_000",f[f.DATA_MASK_001=1]="DATA_MASK_001",f[f.DATA_MASK_010=2]="DATA_MASK_010",f[f.DATA_MASK_011=3]="DATA_MASK_011",f[f.DATA_MASK_100=4]="DATA_MASK_100",f[f.DATA_MASK_101=5]="DATA_MASK_101",f[f.DATA_MASK_110=6]="DATA_MASK_110",f[f.DATA_MASK_111=7]="DATA_MASK_111"}(Lr||(Lr={})),Lr))(),Yu=function(){function f(u,c){this.value=u,this.isMasked=c}return f.prototype.unmaskBitMatrix=function(u,c){for(var p=0;p<c;p++)for(var h=0;h<c;h++)this.isMasked(p,h)&&u.flip(h,p)},f.values=new Map([[Lr.DATA_MASK_000,new f(Lr.DATA_MASK_000,function(u,c){return 0==(u+c&1)})],[Lr.DATA_MASK_001,new f(Lr.DATA_MASK_001,function(u,c){return 0==(1&u)})],[Lr.DATA_MASK_010,new f(Lr.DATA_MASK_010,function(u,c){return c%3==0})],[Lr.DATA_MASK_011,new f(Lr.DATA_MASK_011,function(u,c){return(u+c)%3==0})],[Lr.DATA_MASK_100,new f(Lr.DATA_MASK_100,function(u,c){return 0==(Math.floor(u/2)+Math.floor(c/3)&1)})],[Lr.DATA_MASK_101,new f(Lr.DATA_MASK_101,function(u,c){return u*c%6==0})],[Lr.DATA_MASK_110,new f(Lr.DATA_MASK_110,function(u,c){return u*c%6<3})],[Lr.DATA_MASK_111,new f(Lr.DATA_MASK_111,function(u,c){return 0==(u+c+u*c%3&1)})]]),f}(),fa=function(){function f(u){var c=u.getHeight();if(c<21||1!=(3&c))throw new de;this.bitMatrix=u}return f.prototype.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var u=0,c=0;c<6;c++)u=this.copyBit(c,8,u);u=this.copyBit(7,8,u),u=this.copyBit(8,8,u),u=this.copyBit(8,7,u);for(var p=5;p>=0;p--)u=this.copyBit(8,p,u);var h=this.bitMatrix.getHeight(),m=0,x=h-7;for(p=h-1;p>=x;p--)m=this.copyBit(8,p,m);for(c=h-8;c<h;c++)m=this.copyBit(c,8,m);if(this.parsedFormatInfo=Fa.decodeFormatInformation(u,m),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new de},f.prototype.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var u=this.bitMatrix.getHeight(),c=Math.floor((u-17)/4);if(c<=6)return Mi.getVersionForNumber(c);for(var p=0,h=u-11,m=5;m>=0;m--)for(var x=u-9;x>=h;x--)p=this.copyBit(x,m,p);var w=Mi.decodeVersionInformation(p);if(null!==w&&w.getDimensionForVersion()===u)return this.parsedVersion=w,w;for(p=0,x=5;x>=0;x--)for(m=u-9;m>=h;m--)p=this.copyBit(x,m,p);if(null!==(w=Mi.decodeVersionInformation(p))&&w.getDimensionForVersion()===u)return this.parsedVersion=w,w;throw new de},f.prototype.copyBit=function(u,c,p){return(this.isMirror?this.bitMatrix.get(c,u):this.bitMatrix.get(u,c))?p<<1|1:p<<1},f.prototype.readCodewords=function(){var u=this.readFormatInformation(),c=this.readVersion(),p=Yu.values.get(u.getDataMask()),h=this.bitMatrix.getHeight();p.unmaskBitMatrix(this.bitMatrix,h);for(var m=c.buildFunctionPattern(),x=!0,w=new Uint8Array(c.getTotalCodewords()),b=0,R=0,L=0,V=h-1;V>0;V-=2){6===V&&V--;for(var H=0;H<h;H++)for(var j=x?h-1-H:H,K=0;K<2;K++)m.get(V-K,j)||(L++,R<<=1,this.bitMatrix.get(V-K,j)&&(R|=1),8===L&&(w[b++]=R,L=0,R=0));x=!x}if(b!==c.getTotalCodewords())throw new de;return w},f.prototype.remask=function(){if(null!==this.parsedFormatInfo){var u=Yu.values[this.parsedFormatInfo.getDataMask()],c=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,c)}},f.prototype.setMirror=function(u){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=u},f.prototype.mirror=function(){for(var u=this.bitMatrix,c=0,p=u.getWidth();c<p;c++)for(var h=c+1,m=u.getHeight();h<m;h++)u.get(c,h)!==u.get(h,c)&&(u.flip(h,c),u.flip(c,h))},f}(),wf=function(){function f(u){this.mirrored=u}return f.prototype.isMirrored=function(){return this.mirrored},f.prototype.applyMirroredCorrection=function(u){if(this.mirrored&&null!==u&&!(u.length<3)){var c=u[0];u[0]=u[2],u[2]=c}},f}(),Rs=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},No=function(){function f(u,c){this.numDataCodewords=u,this.codewords=c}return f.getDataBlocks=function(u,c,p){var h,m,x,w;if(u.length!==c.getTotalCodewords())throw new q;var b=c.getECBlocksForLevel(p),R=0,L=b.getECBlocks();try{for(var V=Rs(L),H=V.next();!H.done;H=V.next())R+=(j=H.value).getCount()}catch(er){h={error:er}}finally{try{H&&!H.done&&(m=V.return)&&m.call(V)}finally{if(h)throw h.error}}var K=new Array(R),oe=0;try{for(var _e=Rs(L),ve=_e.next();!ve.done;ve=_e.next())for(var j=ve.value,ge=0;ge<j.getCount();ge++){var Ne=j.getDataCodewords(),Ge=b.getECCodewordsPerBlock()+Ne;K[oe++]=new f(Ne,new Uint8Array(Ge))}}catch(er){x={error:er}}finally{try{ve&&!ve.done&&(w=_e.return)&&w.call(_e)}finally{if(x)throw x.error}}for(var Je=K[0].codewords.length,st=K.length-1;st>=0&&K[st].codewords.length!==Je;)st--;st++;var Rt=Je-b.getECCodewordsPerBlock(),Vt=0;for(ge=0;ge<Rt;ge++)for(var qt=0;qt<oe;qt++)K[qt].codewords[ge]=u[Vt++];for(qt=st;qt<oe;qt++)K[qt].codewords[Rt]=u[Vt++];var Jr=K[0].codewords.length;for(ge=Rt;ge<Jr;ge++)for(qt=0;qt<oe;qt++)K[qt].codewords[qt<st?ge:ge+1]=u[Vt++];return K},f.prototype.getNumDataCodewords=function(){return this.numDataCodewords},f.prototype.getCodewords=function(){return this.codewords},f}(),Gi=(()=>(function(f){f[f.TERMINATOR=0]="TERMINATOR",f[f.NUMERIC=1]="NUMERIC",f[f.ALPHANUMERIC=2]="ALPHANUMERIC",f[f.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",f[f.BYTE=4]="BYTE",f[f.ECI=5]="ECI",f[f.KANJI=6]="KANJI",f[f.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",f[f.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",f[f.HANZI=9]="HANZI"}(Gi||(Gi={})),Gi))(),Ln=function(){function f(u,c,p,h){this.value=u,this.stringValue=c,this.characterCountBitsForVersions=p,this.bits=h,f.FOR_BITS.set(h,this),f.FOR_VALUE.set(u,this)}return f.forBits=function(u){var c=f.FOR_BITS.get(u);if(void 0===c)throw new q;return c},f.prototype.getCharacterCountBits=function(u){var c=u.getVersionNumber();return this.characterCountBitsForVersions[c<=9?0:c<=26?1:2]},f.prototype.getValue=function(){return this.value},f.prototype.getBits=function(){return this.bits},f.prototype.equals=function(u){return u instanceof f&&this.value===u.value},f.prototype.toString=function(){return this.stringValue},f.FOR_BITS=new Map,f.FOR_VALUE=new Map,f.TERMINATOR=new f(Gi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),f.NUMERIC=new f(Gi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),f.ALPHANUMERIC=new f(Gi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),f.STRUCTURED_APPEND=new f(Gi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),f.BYTE=new f(Gi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),f.ECI=new f(Gi.ECI,"ECI",Int32Array.from([0,0,0]),7),f.KANJI=new f(Gi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),f.FNC1_FIRST_POSITION=new f(Gi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),f.FNC1_SECOND_POSITION=new f(Gi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),f.HANZI=new f(Gi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),f}(),oo=function(){function f(){}return f.decode=function(u,c,p,h){var m=new xf(u),x=new tn,w=new Array,b=-1,R=-1;try{var L=null,V=!1,H=void 0;do{if(m.available()<4)H=Ln.TERMINATOR;else{var j=m.readBits(4);H=Ln.forBits(j)}switch(H){case Ln.TERMINATOR:break;case Ln.FNC1_FIRST_POSITION:case Ln.FNC1_SECOND_POSITION:V=!0;break;case Ln.STRUCTURED_APPEND:if(m.available()<16)throw new de;b=m.readBits(8),R=m.readBits(8);break;case Ln.ECI:var K=f.parseECIValue(m);if(null===(L=Oe.getCharacterSetECIByValue(K)))throw new de;break;case Ln.HANZI:var oe=m.readBits(4),_e=m.readBits(H.getCharacterCountBits(c));oe===f.GB2312_SUBSET&&f.decodeHanziSegment(m,x,_e);break;default:var ve=m.readBits(H.getCharacterCountBits(c));switch(H){case Ln.NUMERIC:f.decodeNumericSegment(m,x,ve);break;case Ln.ALPHANUMERIC:f.decodeAlphanumericSegment(m,x,ve,V);break;case Ln.BYTE:f.decodeByteSegment(m,x,ve,L,w,h);break;case Ln.KANJI:f.decodeKanjiSegment(m,x,ve);break;default:throw new de}}}while(H!==Ln.TERMINATOR)}catch(ge){throw new de}return new Mt(u,x.toString(),0===w.length?null:w,null===p?null:p.toString(),b,R)},f.decodeHanziSegment=function(u,c,p){if(13*p>u.available())throw new de;for(var h=new Uint8Array(2*p),m=0;p>0;){var x=u.readBits(13),w=x/96<<8&4294967295|x%96;h[m]=(w+=w<959?41377:42657)>>8&255,h[m+1]=255&w,m+=2,p--}try{c.append(Nt.decode(h,Pt.GB2312))}catch(b){throw new de(b)}},f.decodeKanjiSegment=function(u,c,p){if(13*p>u.available())throw new de;for(var h=new Uint8Array(2*p),m=0;p>0;){var x=u.readBits(13),w=x/192<<8&4294967295|x%192;h[m]=(w+=w<7936?33088:49472)>>8,h[m+1]=w,m+=2,p--}try{c.append(Nt.decode(h,Pt.SHIFT_JIS))}catch(b){throw new de(b)}},f.decodeByteSegment=function(u,c,p,h,m,x){if(8*p>u.available())throw new de;for(var w=new Uint8Array(p),b=0;b<p;b++)w[b]=u.readBits(8);var R;R=null===h?Pt.guessEncoding(w,x):h.getName();try{c.append(Nt.decode(w,R))}catch(L){throw new de(L)}m.push(w)},f.toAlphaNumericChar=function(u){if(u>=f.ALPHANUMERIC_CHARS.length)throw new de;return f.ALPHANUMERIC_CHARS[u]},f.decodeAlphanumericSegment=function(u,c,p,h){for(var m=c.length();p>1;){if(u.available()<11)throw new de;var x=u.readBits(11);c.append(f.toAlphaNumericChar(Math.floor(x/45))),c.append(f.toAlphaNumericChar(x%45)),p-=2}if(1===p){if(u.available()<6)throw new de;c.append(f.toAlphaNumericChar(u.readBits(6)))}if(h)for(var w=m;w<c.length();w++)"%"===c.charAt(w)&&(w<c.length()-1&&"%"===c.charAt(w+1)?c.deleteCharAt(w+1):c.setCharAt(w,String.fromCharCode(29)))},f.decodeNumericSegment=function(u,c,p){for(;p>=3;){if(u.available()<10)throw new de;var h=u.readBits(10);if(h>=1e3)throw new de;c.append(f.toAlphaNumericChar(Math.floor(h/100))),c.append(f.toAlphaNumericChar(Math.floor(h/10)%10)),c.append(f.toAlphaNumericChar(h%10)),p-=3}if(2===p){if(u.available()<7)throw new de;var m=u.readBits(7);if(m>=100)throw new de;c.append(f.toAlphaNumericChar(Math.floor(m/10))),c.append(f.toAlphaNumericChar(m%10))}else if(1===p){if(u.available()<4)throw new de;var x=u.readBits(4);if(x>=10)throw new de;c.append(f.toAlphaNumericChar(x))}},f.parseECIValue=function(u){var c=u.readBits(8);if(0==(128&c))return 127&c;if(128==(192&c))return(63&c)<<8&4294967295|u.readBits(8);if(192==(224&c))return(31&c)<<16&4294967295|u.readBits(16);throw new de},f.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",f.GB2312_SUBSET=1,f}(),Il=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Po=function(){function f(){this.rsDecoder=new Fn(ft.QR_CODE_FIELD_256)}return f.prototype.decodeBooleanArray=function(u,c){return this.decodeBitMatrix(kt.parseFromBooleanArray(u),c)},f.prototype.decodeBitMatrix=function(u,c){var p=new fa(u),h=null;try{return this.decodeBitMatrixParser(p,c)}catch(x){h=x}try{p.remask(),p.setMirror(!0),p.readVersion(),p.readFormatInformation(),p.mirror();var m=this.decodeBitMatrixParser(p,c);return m.setOther(new wf(!0)),m}catch(x){throw null!==h?h:x}},f.prototype.decodeBitMatrixParser=function(u,c){var p,h,m,x,w=u.readVersion(),b=u.readFormatInformation().getErrorCorrectionLevel(),R=u.readCodewords(),L=No.getDataBlocks(R,w,b),V=0;try{for(var H=Il(L),j=H.next();!j.done;j=H.next())V+=(K=j.value).getNumDataCodewords()}catch(st){p={error:st}}finally{try{j&&!j.done&&(h=H.return)&&h.call(H)}finally{if(p)throw p.error}}var oe=new Uint8Array(V),_e=0;try{for(var ve=Il(L),ge=ve.next();!ge.done;ge=ve.next()){var K,Ne=(K=ge.value).getCodewords(),Ge=K.getNumDataCodewords();this.correctErrors(Ne,Ge);for(var Je=0;Je<Ge;Je++)oe[_e++]=Ne[Je]}}catch(st){m={error:st}}finally{try{ge&&!ge.done&&(x=ve.return)&&x.call(ve)}finally{if(m)throw m.error}}return oo.decode(oe,w,b,c)},f.prototype.correctErrors=function(u,c){var h=new Int32Array(u);try{this.rsDecoder.decode(h,u.length-c)}catch(x){throw new Ee}for(var m=0;m<c;m++)u[m]=h[m]},f}(),ka=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Xu=function(f){function u(c,p,h,m){var x=f.call(this,c,p)||this;return x.estimatedModuleSize=h,x.count=m,void 0===m&&(x.count=1),x}return ka(u,f),u.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},u.prototype.getCount=function(){return this.count},u.prototype.aboutEquals=function(c,p,h){if(Math.abs(p-this.getY())<=c&&Math.abs(h-this.getX())<=c){var m=Math.abs(c-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1},u.prototype.combineEstimate=function(c,p,h){var m=this.count+1;return new u((this.count*this.getX()+p)/m,(this.count*this.getY()+c)/m,(this.count*this.estimatedModuleSize+h)/m,m)},u}(ae),Qu=function(){function f(u){this.bottomLeft=u[0],this.topLeft=u[1],this.topRight=u[2]}return f.prototype.getBottomLeft=function(){return this.bottomLeft},f.prototype.getTopLeft=function(){return this.topLeft},f.prototype.getTopRight=function(){return this.topRight},f}(),hu=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},ha=function(){function f(u,c){this.image=u,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=c}return f.prototype.getImage=function(){return this.image},f.prototype.getPossibleCenters=function(){return this.possibleCenters},f.prototype.find=function(u){var c=null!=u&&void 0!==u.get(Et.TRY_HARDER),p=null!=u&&void 0!==u.get(Et.PURE_BARCODE),h=this.image,m=h.getHeight(),x=h.getWidth(),w=Math.floor(3*m/(4*f.MAX_MODULES));(w<f.MIN_SKIP||c)&&(w=f.MIN_SKIP);for(var b=!1,R=new Int32Array(5),L=w-1;L<m&&!b;L+=w){R[0]=0,R[1]=0,R[2]=0,R[3]=0,R[4]=0;for(var V=0,H=0;H<x;H++)if(h.get(H,L))1==(1&V)&&V++,R[V]++;else if(0==(1&V))if(4===V)if(f.foundPatternCross(R)){if(!0!==this.handlePossibleCenter(R,L,H,p)){R[0]=R[2],R[1]=R[3],R[2]=R[4],R[3]=1,R[4]=0,V=3;continue}if(w=2,!0===this.hasSkipped)b=this.haveMultiplyConfirmedCenters();else{var K=this.findRowSkip();K>R[2]&&(L+=K-R[2]-w,H=x-1)}V=0,R[0]=0,R[1]=0,R[2]=0,R[3]=0,R[4]=0}else R[0]=R[2],R[1]=R[3],R[2]=R[4],R[3]=1,R[4]=0,V=3;else R[++V]++;else R[V]++;f.foundPatternCross(R)&&!0===this.handlePossibleCenter(R,L,x,p)&&(w=R[0],this.hasSkipped&&(b=this.haveMultiplyConfirmedCenters()))}var oe=this.selectBestPatterns();return ae.orderBestPatterns(oe),new Qu(oe)},f.centerFromEnd=function(u,c){return c-u[4]-u[3]-u[2]/2},f.foundPatternCross=function(u){for(var c=0,p=0;p<5;p++){var h=u[p];if(0===h)return!1;c+=h}if(c<7)return!1;var m=c/7,x=m/2;return Math.abs(m-u[0])<x&&Math.abs(m-u[1])<x&&Math.abs(3*m-u[2])<3*x&&Math.abs(m-u[3])<x&&Math.abs(m-u[4])<x},f.prototype.getCrossCheckStateCount=function(){var u=this.crossCheckStateCount;return u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u},f.prototype.crossCheckDiagonal=function(u,c,p,h){for(var m=this.getCrossCheckStateCount(),x=0,w=this.image;u>=x&&c>=x&&w.get(c-x,u-x);)m[2]++,x++;if(u<x||c<x)return!1;for(;u>=x&&c>=x&&!w.get(c-x,u-x)&&m[1]<=p;)m[1]++,x++;if(u<x||c<x||m[1]>p)return!1;for(;u>=x&&c>=x&&w.get(c-x,u-x)&&m[0]<=p;)m[0]++,x++;if(m[0]>p)return!1;var b=w.getHeight(),R=w.getWidth();for(x=1;u+x<b&&c+x<R&&w.get(c+x,u+x);)m[2]++,x++;if(u+x>=b||c+x>=R)return!1;for(;u+x<b&&c+x<R&&!w.get(c+x,u+x)&&m[3]<p;)m[3]++,x++;if(u+x>=b||c+x>=R||m[3]>=p)return!1;for(;u+x<b&&c+x<R&&w.get(c+x,u+x)&&m[4]<p;)m[4]++,x++;return!(m[4]>=p)&&Math.abs(m[0]+m[1]+m[2]+m[3]+m[4]-h)<2*h&&f.foundPatternCross(m)},f.prototype.crossCheckVertical=function(u,c,p,h){for(var m=this.image,x=m.getHeight(),w=this.getCrossCheckStateCount(),b=u;b>=0&&m.get(c,b);)w[2]++,b--;if(b<0)return NaN;for(;b>=0&&!m.get(c,b)&&w[1]<=p;)w[1]++,b--;if(b<0||w[1]>p)return NaN;for(;b>=0&&m.get(c,b)&&w[0]<=p;)w[0]++,b--;if(w[0]>p)return NaN;for(b=u+1;b<x&&m.get(c,b);)w[2]++,b++;if(b===x)return NaN;for(;b<x&&!m.get(c,b)&&w[3]<p;)w[3]++,b++;if(b===x||w[3]>=p)return NaN;for(;b<x&&m.get(c,b)&&w[4]<p;)w[4]++,b++;return w[4]>=p||5*Math.abs(w[0]+w[1]+w[2]+w[3]+w[4]-h)>=2*h?NaN:f.foundPatternCross(w)?f.centerFromEnd(w,b):NaN},f.prototype.crossCheckHorizontal=function(u,c,p,h){for(var m=this.image,x=m.getWidth(),w=this.getCrossCheckStateCount(),b=u;b>=0&&m.get(b,c);)w[2]++,b--;if(b<0)return NaN;for(;b>=0&&!m.get(b,c)&&w[1]<=p;)w[1]++,b--;if(b<0||w[1]>p)return NaN;for(;b>=0&&m.get(b,c)&&w[0]<=p;)w[0]++,b--;if(w[0]>p)return NaN;for(b=u+1;b<x&&m.get(b,c);)w[2]++,b++;if(b===x)return NaN;for(;b<x&&!m.get(b,c)&&w[3]<p;)w[3]++,b++;if(b===x||w[3]>=p)return NaN;for(;b<x&&m.get(b,c)&&w[4]<p;)w[4]++,b++;return w[4]>=p||5*Math.abs(w[0]+w[1]+w[2]+w[3]+w[4]-h)>=h?NaN:f.foundPatternCross(w)?f.centerFromEnd(w,b):NaN},f.prototype.handlePossibleCenter=function(u,c,p,h){var m=u[0]+u[1]+u[2]+u[3]+u[4],x=f.centerFromEnd(u,p),w=this.crossCheckVertical(c,Math.floor(x),u[2],m);if(!isNaN(w)&&(x=this.crossCheckHorizontal(Math.floor(x),Math.floor(w),u[2],m),!isNaN(x)&&(!h||this.crossCheckDiagonal(Math.floor(w),Math.floor(x),u[2],m)))){for(var b=m/7,R=!1,L=this.possibleCenters,V=0,H=L.length;V<H;V++){var j=L[V];if(j.aboutEquals(b,w,x)){L[V]=j.combineEstimate(w,x,b),R=!0;break}}if(!R){var K=new Xu(x,w,b);L.push(K),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(K)}return!0}return!1},f.prototype.findRowSkip=function(){var u,c;if(this.possibleCenters.length<=1)return 0;var h=null;try{for(var m=hu(this.possibleCenters),x=m.next();!x.done;x=m.next()){var w=x.value;if(w.getCount()>=f.CENTER_QUORUM){if(null!=h)return this.hasSkipped=!0,Math.floor((Math.abs(h.getX()-w.getX())-Math.abs(h.getY()-w.getY()))/2);h=w}}}catch(b){u={error:b}}finally{try{x&&!x.done&&(c=m.return)&&c.call(m)}finally{if(u)throw u.error}}return 0},f.prototype.haveMultiplyConfirmedCenters=function(){var u,c,p,h,m=0,x=0,w=this.possibleCenters.length;try{for(var b=hu(this.possibleCenters),R=b.next();!R.done;R=b.next())(L=R.value).getCount()>=f.CENTER_QUORUM&&(m++,x+=L.getEstimatedModuleSize())}catch(oe){u={error:oe}}finally{try{R&&!R.done&&(c=b.return)&&c.call(b)}finally{if(u)throw u.error}}if(m<3)return!1;var V=x/w,H=0;try{for(var j=hu(this.possibleCenters),K=j.next();!K.done;K=j.next()){var L=K.value;H+=Math.abs(L.getEstimatedModuleSize()-V)}}catch(oe){p={error:oe}}finally{try{K&&!K.done&&(h=j.return)&&h.call(j)}finally{if(p)throw p.error}}return H<=.05*x},f.prototype.selectBestPatterns=function(){var u,c,p,h,m=this.possibleCenters.length;if(m<3)throw new Re;var w,x=this.possibleCenters;if(m>3){var b=0,R=0;try{for(var L=hu(this.possibleCenters),V=L.next();!V.done;V=L.next()){var j=V.value.getEstimatedModuleSize();b+=j,R+=j*j}}catch(Je){u={error:Je}}finally{try{V&&!V.done&&(c=L.return)&&c.call(L)}finally{if(u)throw u.error}}w=b/m;var K=Math.sqrt(R/m-w*w);x.sort(function(Je,st){var pt=Math.abs(st.getEstimatedModuleSize()-w),Rt=Math.abs(Je.getEstimatedModuleSize()-w);return pt<Rt?-1:pt>Rt?1:0});for(var oe=Math.max(.2*w,K),_e=0;_e<x.length&&x.length>3;_e++)Math.abs(x[_e].getEstimatedModuleSize()-w)>oe&&(x.splice(_e,1),_e--)}if(x.length>3){b=0;try{for(var ge=hu(x),Ne=ge.next();!Ne.done;Ne=ge.next())b+=Ne.value.getEstimatedModuleSize()}catch(st){p={error:st}}finally{try{Ne&&!Ne.done&&(h=ge.return)&&h.call(ge)}finally{if(p)throw p.error}}w=b/x.length,x.sort(function(st,pt){if(pt.getCount()===st.getCount()){var Rt=Math.abs(pt.getEstimatedModuleSize()-w),Vt=Math.abs(st.getEstimatedModuleSize()-w);return Rt<Vt?1:Rt>Vt?-1:0}return pt.getCount()-st.getCount()}),x.splice(3)}return[x[0],x[1],x[2]]},f.CENTER_QUORUM=2,f.MIN_SKIP=3,f.MAX_MODULES=57,f}(),Ju=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Xn=function(f){function u(c,p,h){var m=f.call(this,c,p)||this;return m.estimatedModuleSize=h,m}return Ju(u,f),u.prototype.aboutEquals=function(c,p,h){if(Math.abs(p-this.getY())<=c&&Math.abs(h-this.getX())<=c){var m=Math.abs(c-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1},u.prototype.combineEstimate=function(c,p,h){return new u((this.getX()+p)/2,(this.getY()+c)/2,(this.estimatedModuleSize+h)/2)},u}(ae),ec=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Mo=function(){function f(u,c,p,h,m,x,w){this.image=u,this.startX=c,this.startY=p,this.width=h,this.height=m,this.moduleSize=x,this.resultPointCallback=w,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return f.prototype.find=function(){for(var u=this.startX,c=this.height,h=u+this.width,m=this.startY+c/2,x=new Int32Array(3),w=this.image,b=0;b<c;b++){var R=m+(0==(1&b)?Math.floor((b+1)/2):-Math.floor((b+1)/2));x[0]=0,x[1]=0,x[2]=0;for(var L=u;L<h&&!w.get(L,R);)L++;for(var V=0;L<h;){if(w.get(L,R))if(1===V)x[1]++;else if(2===V){var H;if(this.foundPatternCross(x)&&null!==(H=this.handlePossibleCenter(x,R,L)))return H;x[0]=x[2],x[1]=1,x[2]=0,V=1}else x[++V]++;else 1===V&&V++,x[V]++;L++}if(this.foundPatternCross(x)&&null!==(H=this.handlePossibleCenter(x,R,h)))return H}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new Re},f.centerFromEnd=function(u,c){return c-u[2]-u[1]/2},f.prototype.foundPatternCross=function(u){for(var c=this.moduleSize,p=c/2,h=0;h<3;h++)if(Math.abs(c-u[h])>=p)return!1;return!0},f.prototype.crossCheckVertical=function(u,c,p,h){var m=this.image,x=m.getHeight(),w=this.crossCheckStateCount;w[0]=0,w[1]=0,w[2]=0;for(var b=u;b>=0&&m.get(c,b)&&w[1]<=p;)w[1]++,b--;if(b<0||w[1]>p)return NaN;for(;b>=0&&!m.get(c,b)&&w[0]<=p;)w[0]++,b--;if(w[0]>p)return NaN;for(b=u+1;b<x&&m.get(c,b)&&w[1]<=p;)w[1]++,b++;if(b===x||w[1]>p)return NaN;for(;b<x&&!m.get(c,b)&&w[2]<=p;)w[2]++,b++;return w[2]>p||5*Math.abs(w[0]+w[1]+w[2]-h)>=2*h?NaN:this.foundPatternCross(w)?f.centerFromEnd(w,b):NaN},f.prototype.handlePossibleCenter=function(u,c,p){var h,m,x=u[0]+u[1]+u[2],w=f.centerFromEnd(u,p),b=this.crossCheckVertical(c,w,2*u[1],x);if(!isNaN(b)){var R=(u[0]+u[1]+u[2])/3;try{for(var L=ec(this.possibleCenters),V=L.next();!V.done;V=L.next()){var H=V.value;if(H.aboutEquals(R,b,w))return H.combineEstimate(b,w,R)}}catch(K){h={error:K}}finally{try{V&&!V.done&&(m=L.return)&&m.call(L)}finally{if(h)throw h.error}}var j=new Xn(w,b,R);this.possibleCenters.push(j),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(j)}return null},f}(),tc=function(){function f(u){this.image=u}return f.prototype.getImage=function(){return this.image},f.prototype.getResultPointCallback=function(){return this.resultPointCallback},f.prototype.detect=function(u){this.resultPointCallback=null==u?null:u.get(Et.NEED_RESULT_POINT_CALLBACK);var p=new ha(this.image,this.resultPointCallback).find(u);return this.processFinderPatternInfo(p)},f.prototype.processFinderPatternInfo=function(u){var c=u.getTopLeft(),p=u.getTopRight(),h=u.getBottomLeft(),m=this.calculateModuleSize(c,p,h);if(m<1)throw new Re("No pattern found in proccess finder.");var x=f.computeDimension(c,p,h,m),w=Mi.getProvisionalVersionForDimension(x),b=w.getDimensionForVersion()-7,R=null;if(w.getAlignmentPatternCenters().length>0)for(var L=p.getX()-c.getX()+h.getX(),V=p.getY()-c.getY()+h.getY(),H=1-3/b,j=Math.floor(c.getX()+H*(L-c.getX())),K=Math.floor(c.getY()+H*(V-c.getY())),oe=4;oe<=16;oe<<=1)try{R=this.findAlignmentInRegion(m,j,K,oe);break}catch(Ne){if(!(Ne instanceof Re))throw Ne}var _e=f.createTransform(c,p,h,R,x),ve=f.sampleGrid(this.image,_e,x);return new Qe(ve,null===R?[h,c,p]:[h,c,p,R])},f.createTransform=function(u,c,p,h,m){var w,b,R,L,x=m-3.5;return null!==h?(w=h.getX(),b=h.getY(),L=R=x-3):(w=c.getX()-u.getX()+p.getX(),b=c.getY()-u.getY()+p.getY(),R=x,L=x),zn.quadrilateralToQuadrilateral(3.5,3.5,x,3.5,R,L,3.5,x,u.getX(),u.getY(),c.getX(),c.getY(),w,b,p.getX(),p.getY())},f.sampleGrid=function(u,c,p){return mn.getInstance().sampleGridWithTransform(u,p,p,c)},f.computeDimension=function(u,c,p,h){var m=ue.round(ae.distance(u,c)/h),x=ue.round(ae.distance(u,p)/h),w=Math.floor((m+x)/2)+7;switch(3&w){case 0:w++;break;case 2:w--;break;case 3:throw new Re("Dimensions could be not found.")}return w},f.prototype.calculateModuleSize=function(u,c,p){return(this.calculateModuleSizeOneWay(u,c)+this.calculateModuleSizeOneWay(u,p))/2},f.prototype.calculateModuleSizeOneWay=function(u,c){var p=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(c.getX()),Math.floor(c.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(c.getX()),Math.floor(c.getY()),Math.floor(u.getX()),Math.floor(u.getY()));return isNaN(p)?h/7:isNaN(h)?p/7:(p+h)/14},f.prototype.sizeOfBlackWhiteBlackRunBothWays=function(u,c,p,h){var m=this.sizeOfBlackWhiteBlackRun(u,c,p,h),x=1,w=u-(p-u);w<0?(x=u/(u-w),w=0):w>=this.image.getWidth()&&(x=(this.image.getWidth()-1-u)/(w-u),w=this.image.getWidth()-1);var b=Math.floor(c-(h-c)*x);return x=1,b<0?(x=c/(c-b),b=0):b>=this.image.getHeight()&&(x=(this.image.getHeight()-1-c)/(b-c),b=this.image.getHeight()-1),w=Math.floor(u+(w-u)*x),(m+=this.sizeOfBlackWhiteBlackRun(u,c,w,b))-1},f.prototype.sizeOfBlackWhiteBlackRun=function(u,c,p,h){var m=Math.abs(h-c)>Math.abs(p-u);if(m){var x=u;u=c,c=x,x=p,p=h,h=x}for(var w=Math.abs(p-u),b=Math.abs(h-c),R=-w/2,L=u<p?1:-1,V=c<h?1:-1,H=0,j=p+L,K=u,oe=c;K!==j;K+=L){if(1===H===this.image.get(m?oe:K,m?K:oe)){if(2===H)return ue.distance(K,oe,u,c);H++}if((R+=b)>0){if(oe===h)break;oe+=V,R-=w}}return 2===H?ue.distance(p+L,h,u,c):NaN},f.prototype.findAlignmentInRegion=function(u,c,p,h){var m=Math.floor(h*u),x=Math.max(0,c-m),w=Math.min(this.image.getWidth()-1,c+m);if(w-x<3*u)throw new Re("Alignment top exceeds estimated module size.");var b=Math.max(0,p-m),R=Math.min(this.image.getHeight()-1,p+m);if(R-b<3*u)throw new Re("Alignment bottom exceeds estimated module size.");return new Mo(this.image,x,b,w-x,R-b,u,this.resultPointCallback).find()},f}(),jn=function(){function f(){this.decoder=new Po}return f.prototype.getDecoder=function(){return this.decoder},f.prototype.decode=function(u,c){var p,h;if(null!=c&&void 0!==c.get(Et.PURE_BARCODE)){var m=f.extractPureBits(u.getBlackMatrix());p=this.decoder.decodeBitMatrix(m,c),h=f.NO_POINTS}else{var x=new tc(u.getBlackMatrix()).detect(c);p=this.decoder.decodeBitMatrix(x.getBits(),c),h=x.getPoints()}p.getOther()instanceof wf&&p.getOther().applyMirroredCorrection(h);var w=new kr(p.getText(),p.getRawBytes(),void 0,h,Tt.QR_CODE,void 0),b=p.getByteSegments();null!==b&&w.putMetadata(Mn.BYTE_SEGMENTS,b);var R=p.getECLevel();return null!==R&&w.putMetadata(Mn.ERROR_CORRECTION_LEVEL,R),p.hasStructuredAppend()&&(w.putMetadata(Mn.STRUCTURED_APPEND_SEQUENCE,p.getStructuredAppendSequenceNumber()),w.putMetadata(Mn.STRUCTURED_APPEND_PARITY,p.getStructuredAppendParity())),w},f.prototype.reset=function(){},f.extractPureBits=function(u){var c=u.getTopLeftOnBit(),p=u.getBottomRightOnBit();if(null===c||null===p)throw new Re;var h=this.moduleSize(c,u),m=c[1],x=p[1],w=c[0],b=p[0];if(w>=b||m>=x)throw new Re;if(x-m!=b-w&&(b=w+(x-m))>=u.getWidth())throw new Re;var R=Math.round((b-w+1)/h),L=Math.round((x-m+1)/h);if(R<=0||L<=0)throw new Re;if(L!==R)throw new Re;var V=Math.floor(h/2);m+=V;var H=(w+=V)+Math.floor((R-1)*h)-b;if(H>0){if(H>V)throw new Re;w-=H}var j=m+Math.floor((L-1)*h)-x;if(j>0){if(j>V)throw new Re;m-=j}for(var K=new kt(R,L),oe=0;oe<L;oe++)for(var _e=m+Math.floor(oe*h),ve=0;ve<R;ve++)u.get(w+Math.floor(ve*h),_e)&&K.set(ve,oe);return K},f.moduleSize=function(u,c){for(var p=c.getHeight(),h=c.getWidth(),m=u[0],x=u[1],w=!0,b=0;m<h&&x<p;){if(w!==c.get(m,x)){if(5==++b)break;w=!w}m++,x++}if(m===h||x===p)throw new Re;return(m-u[0])/7},f.NO_POINTS=new Array,f}(),bl=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},En=function(){function f(){}return f.prototype.PDF417Common=function(){},f.getBitCountSum=function(u){return ue.sum(u)},f.toIntArray=function(u){var c,p;if(null==u||!u.length)return f.EMPTY_INT_ARRAY;var h=new Int32Array(u.length),m=0;try{for(var x=bl(u),w=x.next();!w.done;w=x.next())h[m++]=w.value}catch(R){c={error:R}}finally{try{w&&!w.done&&(p=x.return)&&p.call(x)}finally{if(c)throw c.error}}return h},f.getCodeword=function(u){var c=lt.binarySearch(f.SYMBOL_TABLE,262143&u);return c<0?-1:(f.CODEWORD_TABLE[c]-1)%f.NUMBER_OF_CODEWORDS},f.MAX_CODEWORDS_IN_BARCODE=(f.NUMBER_OF_CODEWORDS=929)-1,f.MIN_ROWS_IN_BARCODE=3,f.MAX_ROWS_IN_BARCODE=90,f.MODULES_IN_CODEWORD=17,f.MODULES_IN_STOP_PATTERN=18,f.BARS_IN_MODULE=8,f.EMPTY_INT_ARRAY=new Int32Array([]),f.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),f.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),f}(),pa=function(){function f(u,c){this.bits=u,this.points=c}return f.prototype.getBits=function(){return this.bits},f.prototype.getPoints=function(){return this.points},f}(),Fi=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Rr=function(){function f(){}return f.detectMultiple=function(u,c,p){var h=u.getBlackMatrix(),m=f.detect(p,h);return m.length||((h=h.clone()).rotate180(),m=f.detect(p,h)),new pa(h,m)},f.detect=function(u,c){for(var p,h,m=new Array,x=0,w=0,b=!1;x<c.getHeight();){var R=f.findVertices(c,x,w);if(null!=R[0]||null!=R[3]){if(b=!0,m.push(R),!u)break;null!=R[2]?(w=Math.trunc(R[2].getX()),x=Math.trunc(R[2].getY())):(w=Math.trunc(R[4].getX()),x=Math.trunc(R[4].getY()))}else{if(!b)break;b=!1,w=0;try{for(var L=(p=void 0,Fi(m)),V=L.next();!V.done;V=L.next()){var H=V.value;null!=H[1]&&(x=Math.trunc(Math.max(x,H[1].getY()))),null!=H[3]&&(x=Math.max(x,Math.trunc(H[3].getY())))}}catch(j){p={error:j}}finally{try{V&&!V.done&&(h=L.return)&&h.call(L)}finally{if(p)throw p.error}}x+=f.ROW_STEP}}return m},f.findVertices=function(u,c,p){var h=u.getHeight(),m=u.getWidth(),x=new Array(8);return f.copyToResult(x,f.findRowsWithPattern(u,h,m,c,p,f.START_PATTERN),f.INDEXES_START_PATTERN),null!=x[4]&&(p=Math.trunc(x[4].getX()),c=Math.trunc(x[4].getY())),f.copyToResult(x,f.findRowsWithPattern(u,h,m,c,p,f.STOP_PATTERN),f.INDEXES_STOP_PATTERN),x},f.copyToResult=function(u,c,p){for(var h=0;h<p.length;h++)u[p[h]]=c[h]},f.findRowsWithPattern=function(u,c,p,h,m,x){for(var w=new Array(4),b=!1,R=new Int32Array(x.length);h<c;h+=f.ROW_STEP)if(null!=(L=f.findGuardPattern(u,m,h,p,!1,x,R))){for(;h>0;){if(null==(V=f.findGuardPattern(u,m,--h,p,!1,x,R))){h++;break}L=V}w[0]=new ae(L[0],h),w[1]=new ae(L[1],h),b=!0;break}var H=h+1;if(b){for(var j=0,V=Int32Array.from([Math.trunc(w[0].getX()),Math.trunc(w[1].getX())]);H<c;H++){var L;if(null!=(L=f.findGuardPattern(u,V[0],H,p,!1,x,R))&&Math.abs(V[0]-L[0])<f.MAX_PATTERN_DRIFT&&Math.abs(V[1]-L[1])<f.MAX_PATTERN_DRIFT)V=L,j=0;else{if(j>f.SKIPPED_ROW_COUNT_MAX)break;j++}}w[2]=new ae(V[0],H-=j+1),w[3]=new ae(V[1],H)}return H-h<f.BARCODE_MIN_HEIGHT&&lt.fill(w,null),w},f.findGuardPattern=function(u,c,p,h,m,x,w){lt.fillWithin(w,0,w.length,0);for(var b=c,R=0;u.get(b,p)&&b>0&&R++<f.MAX_PIXEL_DRIFT;)b--;for(var L=b,V=0,H=x.length,j=m;L<h;L++)if(u.get(L,p)!==j)w[V]++;else{if(V===H-1){if(f.patternMatchVariance(w,x,f.MAX_INDIVIDUAL_VARIANCE)<f.MAX_AVG_VARIANCE)return new Int32Array([b,L]);b+=w[0]+w[1],We.arraycopy(w,2,w,0,V-1),w[V-1]=0,w[V]=0,V--}else V++;w[V]=1,j=!j}return V===H-1&&f.patternMatchVariance(w,x,f.MAX_INDIVIDUAL_VARIANCE)<f.MAX_AVG_VARIANCE?new Int32Array([b,L-1]):null},f.patternMatchVariance=function(u,c,p){for(var h=u.length,m=0,x=0,w=0;w<h;w++)m+=u[w],x+=c[w];if(m<x)return 1/0;var b=m/x;p*=b;for(var R=0,L=0;L<h;L++){var V=u[L],H=c[L]*b,j=V>H?V-H:H-V;if(j>p)return 1/0;R+=j}return R/m},f.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),f.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),f.MAX_AVG_VARIANCE=.42,f.MAX_INDIVIDUAL_VARIANCE=.8,f.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),f.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),f.MAX_PIXEL_DRIFT=3,f.MAX_PATTERN_DRIFT=5,f.SKIPPED_ROW_COUNT_MAX=25,f.ROW_STEP=5,f.BARCODE_MIN_HEIGHT=10,f}(),Fc=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Ei=function(){function f(u,c){if(0===c.length)throw new q;this.field=u;var p=c.length;if(p>1&&0===c[0]){for(var h=1;h<p&&0===c[h];)h++;h===p?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(p-h),We.arraycopy(c,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}return f.prototype.getCoefficients=function(){return this.coefficients},f.prototype.getDegree=function(){return this.coefficients.length-1},f.prototype.isZero=function(){return 0===this.coefficients[0]},f.prototype.getCoefficient=function(u){return this.coefficients[this.coefficients.length-1-u]},f.prototype.evaluateAt=function(u){var c,p;if(0===u)return this.getCoefficient(0);if(1===u){var h=0;try{for(var m=Fc(this.coefficients),x=m.next();!x.done;x=m.next())h=this.field.add(h,x.value)}catch(V){c={error:V}}finally{try{x&&!x.done&&(p=m.return)&&p.call(m)}finally{if(c)throw c.error}}return h}for(var b=this.coefficients[0],R=this.coefficients.length,L=1;L<R;L++)b=this.field.add(this.field.multiply(u,b),this.coefficients[L]);return b},f.prototype.add=function(u){if(!this.field.equals(u.field))throw new q("ModulusPolys do not have same ModulusGF field");if(this.isZero())return u;if(u.isZero())return this;var c=this.coefficients,p=u.coefficients;if(c.length>p.length){var h=c;c=p,p=h}var m=new Int32Array(p.length),x=p.length-c.length;We.arraycopy(p,0,m,0,x);for(var w=x;w<p.length;w++)m[w]=this.field.add(c[w-x],p[w]);return new f(this.field,m)},f.prototype.subtract=function(u){if(!this.field.equals(u.field))throw new q("ModulusPolys do not have same ModulusGF field");return u.isZero()?this:this.add(u.negative())},f.prototype.multiply=function(u){return u instanceof f?this.multiplyOther(u):this.multiplyScalar(u)},f.prototype.multiplyOther=function(u){if(!this.field.equals(u.field))throw new q("ModulusPolys do not have same ModulusGF field");if(this.isZero()||u.isZero())return new f(this.field,new Int32Array([0]));for(var c=this.coefficients,p=c.length,h=u.coefficients,m=h.length,x=new Int32Array(p+m-1),w=0;w<p;w++)for(var b=c[w],R=0;R<m;R++)x[w+R]=this.field.add(x[w+R],this.field.multiply(b,h[R]));return new f(this.field,x)},f.prototype.negative=function(){for(var u=this.coefficients.length,c=new Int32Array(u),p=0;p<u;p++)c[p]=this.field.subtract(0,this.coefficients[p]);return new f(this.field,c)},f.prototype.multiplyScalar=function(u){if(0===u)return new f(this.field,new Int32Array([0]));if(1===u)return this;for(var c=this.coefficients.length,p=new Int32Array(c),h=0;h<c;h++)p[h]=this.field.multiply(this.coefficients[h],u);return new f(this.field,p)},f.prototype.multiplyByMonomial=function(u,c){if(u<0)throw new q;if(0===c)return new f(this.field,new Int32Array([0]));for(var p=this.coefficients.length,h=new Int32Array(p+u),m=0;m<p;m++)h[m]=this.field.multiply(this.coefficients[m],c);return new f(this.field,h)},f.prototype.toString=function(){for(var u=new tn,c=this.getDegree();c>=0;c--){var p=this.getCoefficient(c);0!==p&&(p<0?(u.append(" - "),p=-p):u.length()>0&&u.append(" + "),(0===c||1!==p)&&u.append(p),0!==c&&(1===c?u.append("x"):(u.append("x^"),u.append(c))))}return u.toString()},f}(),Wi=function(){function f(){}return f.prototype.add=function(u,c){return(u+c)%this.modulus},f.prototype.subtract=function(u,c){return(this.modulus+u-c)%this.modulus},f.prototype.exp=function(u){return this.expTable[u]},f.prototype.log=function(u){if(0===u)throw new q;return this.logTable[u]},f.prototype.inverse=function(u){if(0===u)throw new ui;return this.expTable[this.modulus-this.logTable[u]-1]},f.prototype.multiply=function(u,c){return 0===u||0===c?0:this.expTable[(this.logTable[u]+this.logTable[c])%(this.modulus-1)]},f.prototype.getSize=function(){return this.modulus},f.prototype.equals=function(u){return u===this},f}(),nc=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Sl=function(f){function u(c,p){var h=f.call(this)||this;h.modulus=c,h.expTable=new Int32Array(c),h.logTable=new Int32Array(c);for(var m=1,x=0;x<c;x++)h.expTable[x]=m,m=m*p%c;for(x=0;x<c-1;x++)h.logTable[h.expTable[x]]=x;return h.zero=new Ei(h,new Int32Array([0])),h.one=new Ei(h,new Int32Array([1])),h}return nc(u,f),u.prototype.getZero=function(){return this.zero},u.prototype.getOne=function(){return this.one},u.prototype.buildMonomial=function(c,p){if(c<0)throw new q;if(0===p)return this.zero;var h=new Int32Array(c+1);return h[0]=p,new Ei(this,h)},u.PDF417_GF=new u(En.NUMBER_OF_CODEWORDS,3),u}(Wi),ga=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Ns=function(){function f(){this.field=Sl.PDF417_GF}return f.prototype.decode=function(u,c,p){for(var h,m,x=new Ei(this.field,u),w=new Int32Array(c),b=!1,R=c;R>0;R--){var L=x.evaluateAt(this.field.exp(R));w[c-R]=L,0!==L&&(b=!0)}if(!b)return 0;var V=this.field.getOne();if(null!=p)try{for(var H=ga(p),j=H.next();!j.done;j=H.next()){var oe=this.field.exp(u.length-1-j.value),_e=new Ei(this.field,new Int32Array([this.field.subtract(0,oe),1]));V=V.multiply(_e)}}catch(Rt){h={error:Rt}}finally{try{j&&!j.done&&(m=H.return)&&m.call(H)}finally{if(h)throw h.error}}var ve=new Ei(this.field,w),ge=this.runEuclideanAlgorithm(this.field.buildMonomial(c,1),ve,c),Ne=ge[0],Ge=ge[1],Je=this.findErrorLocations(Ne),st=this.findErrorMagnitudes(Ge,Ne,Je);for(R=0;R<Je.length;R++){var pt=u.length-1-this.field.log(Je[R]);if(pt<0)throw Ee.getChecksumInstance();u[pt]=this.field.subtract(u[pt],st[R])}return Je.length},f.prototype.runEuclideanAlgorithm=function(u,c,p){if(u.getDegree()<c.getDegree()){var h=u;u=c,c=h}for(var m=u,x=c,w=this.field.getZero(),b=this.field.getOne();x.getDegree()>=Math.round(p/2);){var R=m,L=w;if(w=b,(m=x).isZero())throw Ee.getChecksumInstance();x=R;for(var V=this.field.getZero(),H=m.getCoefficient(m.getDegree()),j=this.field.inverse(H);x.getDegree()>=m.getDegree()&&!x.isZero();){var K=x.getDegree()-m.getDegree(),oe=this.field.multiply(x.getCoefficient(x.getDegree()),j);V=V.add(this.field.buildMonomial(K,oe)),x=x.subtract(m.multiplyByMonomial(K,oe))}b=V.multiply(w).subtract(L).negative()}var _e=b.getCoefficient(0);if(0===_e)throw Ee.getChecksumInstance();var ve=this.field.inverse(_e);return[b.multiply(ve),x.multiply(ve)]},f.prototype.findErrorLocations=function(u){for(var c=u.getDegree(),p=new Int32Array(c),h=0,m=1;m<this.field.getSize()&&h<c;m++)0===u.evaluateAt(m)&&(p[h]=this.field.inverse(m),h++);if(h!==c)throw Ee.getChecksumInstance();return p},f.prototype.findErrorMagnitudes=function(u,c,p){for(var h=c.getDegree(),m=new Int32Array(h),x=1;x<=h;x++)m[h-x]=this.field.multiply(x,c.getCoefficient(x));var w=new Ei(this.field,m),b=p.length,R=new Int32Array(b);for(x=0;x<b;x++){var L=this.field.inverse(p[x]),V=this.field.subtract(0,u.evaluateAt(L)),H=this.field.inverse(w.evaluateAt(L));R[x]=this.field.multiply(V,H)}return R},f}(),ma=function(){function f(u,c,p,h,m){u instanceof f?this.constructor_2(u):this.constructor_1(u,c,p,h,m)}return f.prototype.constructor_1=function(u,c,p,h,m){var x=null==c||null==p,w=null==h||null==m;if(x&&w)throw new Re;x?(c=new ae(0,h.getY()),p=new ae(0,m.getY())):w&&(h=new ae(u.getWidth()-1,c.getY()),m=new ae(u.getWidth()-1,p.getY())),this.image=u,this.topLeft=c,this.bottomLeft=p,this.topRight=h,this.bottomRight=m,this.minX=Math.trunc(Math.min(c.getX(),p.getX())),this.maxX=Math.trunc(Math.max(h.getX(),m.getX())),this.minY=Math.trunc(Math.min(c.getY(),h.getY())),this.maxY=Math.trunc(Math.max(p.getY(),m.getY()))},f.prototype.constructor_2=function(u){this.image=u.image,this.topLeft=u.getTopLeft(),this.bottomLeft=u.getBottomLeft(),this.topRight=u.getTopRight(),this.bottomRight=u.getBottomRight(),this.minX=u.getMinX(),this.maxX=u.getMaxX(),this.minY=u.getMinY(),this.maxY=u.getMaxY()},f.merge=function(u,c){return null==u?c:null==c?u:new f(u.image,u.topLeft,u.bottomLeft,c.topRight,c.bottomRight)},f.prototype.addMissingRows=function(u,c,p){var h=this.topLeft,m=this.bottomLeft,x=this.topRight,w=this.bottomRight;if(u>0){var b=p?this.topLeft:this.topRight,R=Math.trunc(b.getY()-u);R<0&&(R=0);var L=new ae(b.getX(),R);p?h=L:x=L}if(c>0){var V=p?this.bottomLeft:this.bottomRight,H=Math.trunc(V.getY()+c);H>=this.image.getHeight()&&(H=this.image.getHeight()-1);var j=new ae(V.getX(),H);p?m=j:w=j}return new f(this.image,h,m,x,w)},f.prototype.getMinX=function(){return this.minX},f.prototype.getMaxX=function(){return this.maxX},f.prototype.getMinY=function(){return this.minY},f.prototype.getMaxY=function(){return this.maxY},f.prototype.getTopLeft=function(){return this.topLeft},f.prototype.getTopRight=function(){return this.topRight},f.prototype.getBottomLeft=function(){return this.bottomLeft},f.prototype.getBottomRight=function(){return this.bottomRight},f}(),va=function(){function f(u,c,p,h){this.columnCount=u,this.errorCorrectionLevel=h,this.rowCountUpperPart=c,this.rowCountLowerPart=p,this.rowCount=c+p}return f.prototype.getColumnCount=function(){return this.columnCount},f.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},f.prototype.getRowCount=function(){return this.rowCount},f.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},f.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},f}(),Ht=function(){function f(){this.buffer=""}return f.form=function(u,c){var p=-1;return u.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(x,w,b,R,L,V){if("%%"===x)return"%";if(void 0!==c[++p]){x=R?parseInt(R.substr(1)):void 0;var j,H=L?parseInt(L.substr(1)):void 0;switch(V){case"s":j=c[p];break;case"c":j=c[p][0];break;case"f":j=parseFloat(c[p]).toFixed(x);break;case"p":j=parseFloat(c[p]).toPrecision(x);break;case"e":j=parseFloat(c[p]).toExponential(x);break;case"x":j=parseInt(c[p]).toString(H||16);break;case"d":j=parseFloat(parseInt(c[p],H||10).toPrecision(x)).toFixed(0)}j="object"==typeof j?JSON.stringify(j):(+j).toString(H);for(var K=parseInt(b),oe=b&&b[0]+""=="0"?"0":" ";j.length<K;)j=void 0!==w?j+oe:oe+j;return j}})},f.prototype.format=function(u){for(var c=[],p=1;p<arguments.length;p++)c[p-1]=arguments[p];this.buffer+=f.form(u,c)},f.prototype.toString=function(){return this.buffer},f}(),kc=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},xd=function(){function f(u){this.boundingBox=new ma(u),this.codewords=new Array(u.getMaxY()-u.getMinY()+1)}return f.prototype.getCodewordNearby=function(u){var c=this.getCodeword(u);if(null!=c)return c;for(var p=1;p<f.MAX_NEARBY_DISTANCE;p++){var h=this.imageRowToCodewordIndex(u)-p;if(h>=0&&null!=(c=this.codewords[h])||(h=this.imageRowToCodewordIndex(u)+p)<this.codewords.length&&null!=(c=this.codewords[h]))return c}return null},f.prototype.imageRowToCodewordIndex=function(u){return u-this.boundingBox.getMinY()},f.prototype.setCodeword=function(u,c){this.codewords[this.imageRowToCodewordIndex(u)]=c},f.prototype.getCodeword=function(u){return this.codewords[this.imageRowToCodewordIndex(u)]},f.prototype.getBoundingBox=function(){return this.boundingBox},f.prototype.getCodewords=function(){return this.codewords},f.prototype.toString=function(){var u,c,p=new Ht,h=0;try{for(var m=kc(this.codewords),x=m.next();!x.done;x=m.next()){var w=x.value;null!=w?p.format("%3d: %3d|%3d%n",h++,w.getRowNumber(),w.getValue()):p.format("%3d:    |   %n",h++)}}catch(b){u={error:b}}finally{try{x&&!x.done&&(c=m.return)&&c.call(m)}finally{if(u)throw u.error}}return p.toString()},f.MAX_NEARBY_DISTANCE=5,f}(),rc=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},wd=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__read:void 0)||function(f,u){var c="function"==typeof Symbol&&f[Symbol.iterator];if(!c)return f;var h,x,p=c.call(f),m=[];try{for(;(void 0===u||u-- >0)&&!(h=p.next()).done;)m.push(h.value)}catch(w){x={error:w}}finally{try{h&&!h.done&&(c=p.return)&&c.call(p)}finally{if(x)throw x.error}}return m},Ps=function(){function f(){this.values=new Map}return f.prototype.setValue=function(u){u=Math.trunc(u);var c=this.values.get(u);null==c&&(c=0),c++,this.values.set(u,c)},f.prototype.getValue=function(){var u,c,p=-1,h=new Array,m=function(V,H){var j_getKey=function(){return V},j_getValue=function(){return H};j_getValue()>p?(p=j_getValue(),(h=[]).push(j_getKey())):j_getValue()===p&&h.push(j_getKey())};try{for(var x=rc(this.values.entries()),w=x.next();!w.done;w=x.next()){var b=wd(w.value,2);m(b[0],b[1])}}catch(V){u={error:V}}finally{try{w&&!w.done&&(c=x.return)&&c.call(x)}finally{if(u)throw u.error}}return En.toIntArray(h)},f.prototype.getConfidence=function(u){return this.values.get(u)},f}(),Ef=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Fo=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},ot=function(f){function u(c,p){var h=f.call(this,c)||this;return h._isLeft=p,h}return Ef(u,f),u.prototype.setRowNumbers=function(){var c,p;try{for(var h=Fo(this.getCodewords()),m=h.next();!m.done;m=h.next()){var x=m.value;null!=x&&x.setRowNumberAsRowIndicatorColumn()}}catch(w){c={error:w}}finally{try{m&&!m.done&&(p=h.return)&&p.call(h)}finally{if(c)throw c.error}}},u.prototype.adjustCompleteIndicatorColumnRowNumbers=function(c){var p=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(p,c);for(var h=this.getBoundingBox(),m=this._isLeft?h.getTopLeft():h.getTopRight(),x=this._isLeft?h.getBottomLeft():h.getBottomRight(),w=this.imageRowToCodewordIndex(Math.trunc(m.getY())),b=this.imageRowToCodewordIndex(Math.trunc(x.getY())),R=-1,L=1,V=0,H=w;H<b;H++)if(null!=p[H]){var j=p[H],K=j.getRowNumber()-R;if(0===K)V++;else if(1===K)L=Math.max(L,V),V=1,R=j.getRowNumber();else if(K<0||j.getRowNumber()>=c.getRowCount()||K>H)p[H]=null;else{for(var oe,_e=(oe=L>2?(L-2)*K:K)>=H,ve=1;ve<=oe&&!_e;ve++)_e=null!=p[H-ve];_e?p[H]=null:(R=j.getRowNumber(),V=1)}}},u.prototype.getRowHeights=function(){var c,p,h=this.getBarcodeMetadata();if(null==h)return null;this.adjustIncompleteIndicatorColumnRowNumbers(h);var m=new Int32Array(h.getRowCount());try{for(var x=Fo(this.getCodewords()),w=x.next();!w.done;w=x.next()){var b=w.value;if(null!=b){var R=b.getRowNumber();if(R>=m.length)continue;m[R]++}}}catch(L){c={error:L}}finally{try{w&&!w.done&&(p=x.return)&&p.call(x)}finally{if(c)throw c.error}}return m},u.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(c){for(var p=this.getBoundingBox(),h=this._isLeft?p.getTopLeft():p.getTopRight(),m=this._isLeft?p.getBottomLeft():p.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(h.getY())),w=this.imageRowToCodewordIndex(Math.trunc(m.getY())),b=this.getCodewords(),R=-1,L=x;L<w;L++)if(null!=b[L]){var V=b[L];V.setRowNumberAsRowIndicatorColumn();var H=V.getRowNumber()-R;0===H||(1===H?R=V.getRowNumber():V.getRowNumber()>=c.getRowCount()?b[L]=null:R=V.getRowNumber())}},u.prototype.getBarcodeMetadata=function(){var c,p,h=this.getCodewords(),m=new Ps,x=new Ps,w=new Ps,b=new Ps;try{for(var R=Fo(h),L=R.next();!L.done;L=R.next()){var V=L.value;if(null!=V){V.setRowNumberAsRowIndicatorColumn();var H=V.getValue()%30,j=V.getRowNumber();switch(this._isLeft||(j+=2),j%3){case 0:x.setValue(3*H+1);break;case 1:b.setValue(H/3),w.setValue(H%3);break;case 2:m.setValue(H+1)}}}}catch(oe){c={error:oe}}finally{try{L&&!L.done&&(p=R.return)&&p.call(R)}finally{if(c)throw c.error}}if(0===m.getValue().length||0===x.getValue().length||0===w.getValue().length||0===b.getValue().length||m.getValue()[0]<1||x.getValue()[0]+w.getValue()[0]<En.MIN_ROWS_IN_BARCODE||x.getValue()[0]+w.getValue()[0]>En.MAX_ROWS_IN_BARCODE)return null;var K=new va(m.getValue()[0],x.getValue()[0],w.getValue()[0],b.getValue()[0]);return this.removeIncorrectCodewords(h,K),K},u.prototype.removeIncorrectCodewords=function(c,p){for(var h=0;h<c.length;h++){var m=c[h];if(null!=c[h]){var x=m.getValue()%30,w=m.getRowNumber();if(w>p.getRowCount()){c[h]=null;continue}switch(this._isLeft||(w+=2),w%3){case 0:3*x+1!==p.getRowCountUpperPart()&&(c[h]=null);break;case 1:(Math.trunc(x/3)!==p.getErrorCorrectionLevel()||x%3!==p.getRowCountLowerPart())&&(c[h]=null);break;case 2:x+1!==p.getColumnCount()&&(c[h]=null)}}}},u.prototype.isLeft=function(){return this._isLeft},u.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+f.prototype.toString.call(this)},u}(xd),ln=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Tl=function(){function f(u,c){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=u,this.barcodeColumnCount=u.getColumnCount(),this.boundingBox=c,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return f.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var c,u=En.MAX_CODEWORDS_IN_BARCODE;do{c=u,u=this.adjustRowNumbersAndGetCount()}while(u>0&&u<c);return this.detectionResultColumns},f.prototype.adjustIndicatorColumnRowNumbers=function(u){null!=u&&u.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},f.prototype.adjustRowNumbersAndGetCount=function(){var u=this.adjustRowNumbersByRow();if(0===u)return 0;for(var c=1;c<this.barcodeColumnCount+1;c++)for(var p=this.detectionResultColumns[c].getCodewords(),h=0;h<p.length;h++)null!=p[h]&&(p[h].hasValidRowNumber()||this.adjustRowNumbers(c,h,p));return u},f.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},f.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var u=this.detectionResultColumns[0].getCodewords(),c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),p=0;p<u.length;p++)if(null!=u[p]&&null!=c[p]&&u[p].getRowNumber()===c[p].getRowNumber())for(var h=1;h<=this.barcodeColumnCount;h++){var m=this.detectionResultColumns[h].getCodewords()[p];null!=m&&(m.setRowNumber(u[p].getRowNumber()),m.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[p]=null))}},f.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var u=0,c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),p=0;p<c.length;p++)if(null!=c[p])for(var h=c[p].getRowNumber(),m=0,x=this.barcodeColumnCount+1;x>0&&m<this.ADJUST_ROW_NUMBER_SKIP;x--){var w=this.detectionResultColumns[x].getCodewords()[p];null!=w&&(m=f.adjustRowNumberIfValid(h,m,w),w.hasValidRowNumber()||u++)}return u},f.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var u=0,c=this.detectionResultColumns[0].getCodewords(),p=0;p<c.length;p++)if(null!=c[p])for(var h=c[p].getRowNumber(),m=0,x=1;x<this.barcodeColumnCount+1&&m<this.ADJUST_ROW_NUMBER_SKIP;x++){var w=this.detectionResultColumns[x].getCodewords()[p];null!=w&&(m=f.adjustRowNumberIfValid(h,m,w),w.hasValidRowNumber()||u++)}return u},f.adjustRowNumberIfValid=function(u,c,p){return null==p||p.hasValidRowNumber()||(p.isValidRowNumber(u)?(p.setRowNumber(u),c=0):++c),c},f.prototype.adjustRowNumbers=function(u,c,p){var h,m,x=p[c],w=this.detectionResultColumns[u-1].getCodewords(),b=w;null!=this.detectionResultColumns[u+1]&&(b=this.detectionResultColumns[u+1].getCodewords());var R=new Array(14);R[2]=w[c],R[3]=b[c],c>0&&(R[0]=p[c-1],R[4]=w[c-1],R[5]=b[c-1]),c>1&&(R[8]=p[c-2],R[10]=w[c-2],R[11]=b[c-2]),c<p.length-1&&(R[1]=p[c+1],R[6]=w[c+1],R[7]=b[c+1]),c<p.length-2&&(R[9]=p[c+2],R[12]=w[c+2],R[13]=b[c+2]);try{for(var L=ln(R),V=L.next();!V.done;V=L.next())if(f.adjustRowNumber(x,V.value))return}catch(j){h={error:j}}finally{try{V&&!V.done&&(m=L.return)&&m.call(L)}finally{if(h)throw h.error}}},f.adjustRowNumber=function(u,c){return!(null==c||!c.hasValidRowNumber()||c.getBucket()!==u.getBucket()||(u.setRowNumber(c.getRowNumber()),0))},f.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},f.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},f.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},f.prototype.setBoundingBox=function(u){this.boundingBox=u},f.prototype.getBoundingBox=function(){return this.boundingBox},f.prototype.setDetectionResultColumn=function(u,c){this.detectionResultColumns[u]=c},f.prototype.getDetectionResultColumn=function(u){return this.detectionResultColumns[u]},f.prototype.toString=function(){var u=this.detectionResultColumns[0];null==u&&(u=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var c=new Ht,p=0;p<u.getCodewords().length;p++){c.format("CW %3d:",p);for(var h=0;h<this.barcodeColumnCount+2;h++)if(null!=this.detectionResultColumns[h]){var m=this.detectionResultColumns[h].getCodewords()[p];null!=m?c.format(" %3d|%3d",m.getRowNumber(),m.getValue()):c.format("    |   ")}else c.format("    |   ");c.format("%n")}return c.toString()},f}(),Kn=function(){function f(u,c,p,h){this.rowNumber=f.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(u),this.endX=Math.trunc(c),this.bucket=Math.trunc(p),this.value=Math.trunc(h)}return f.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},f.prototype.isValidRowNumber=function(u){return u!==f.BARCODE_ROW_UNKNOWN&&this.bucket===u%3*3},f.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},f.prototype.getWidth=function(){return this.endX-this.startX},f.prototype.getStartX=function(){return this.startX},f.prototype.getEndX=function(){return this.endX},f.prototype.getBucket=function(){return this.bucket},f.prototype.getValue=function(){return this.value},f.prototype.getRowNumber=function(){return this.rowNumber},f.prototype.setRowNumber=function(u){this.rowNumber=u},f.prototype.toString=function(){return this.rowNumber+"|"+this.value},f.BARCODE_ROW_UNKNOWN=-1,f}(),Dl=function(){function f(){}return f.initialize=function(){for(var u=0;u<En.SYMBOL_TABLE.length;u++)for(var c=En.SYMBOL_TABLE[u],p=1&c,h=0;h<En.BARS_IN_MODULE;h++){for(var m=0;(1&c)===p;)m+=1,c>>=1;p=1&c,f.RATIOS_TABLE[u]||(f.RATIOS_TABLE[u]=new Array(En.BARS_IN_MODULE)),f.RATIOS_TABLE[u][En.BARS_IN_MODULE-h-1]=Math.fround(m/En.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},f.getDecodedValue=function(u){var c=f.getDecodedCodewordValue(f.sampleBitCounts(u));return-1!==c?c:f.getClosestDecodedValue(u)},f.sampleBitCounts=function(u){for(var c=ue.sum(u),p=new Int32Array(En.BARS_IN_MODULE),h=0,m=0,x=0;x<En.MODULES_IN_CODEWORD;x++)m+u[h]<=c/(2*En.MODULES_IN_CODEWORD)+x*c/En.MODULES_IN_CODEWORD&&(m+=u[h],h++),p[h]++;return p},f.getDecodedCodewordValue=function(u){var c=f.getBitValue(u);return-1===En.getCodeword(c)?-1:c},f.getBitValue=function(u){for(var c=0,p=0;p<u.length;p++)for(var h=0;h<u[p];h++)c=c<<1|(p%2==0?1:0);return Math.trunc(c)},f.getClosestDecodedValue=function(u){var c=ue.sum(u),p=new Array(En.BARS_IN_MODULE);if(c>1)for(var h=0;h<p.length;h++)p[h]=Math.fround(u[h]/c);var m=he.MAX_VALUE,x=-1;this.bSymbolTableReady||f.initialize();for(var w=0;w<f.RATIOS_TABLE.length;w++){for(var b=0,R=f.RATIOS_TABLE[w],L=0;L<En.BARS_IN_MODULE;L++){var V=Math.fround(R[L]-p[L]);if((b+=Math.fround(V*V))>=m)break}b<m&&(m=b,x=En.SYMBOL_TABLE[w])}return x},f.bSymbolTableReady=!1,f.RATIOS_TABLE=new Array(En.SYMBOL_TABLE.length).map(function(u){return new Array(En.BARS_IN_MODULE)}),f}(),Qo=function(){function f(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return f.prototype.getSegmentIndex=function(){return this.segmentIndex},f.prototype.setSegmentIndex=function(u){this.segmentIndex=u},f.prototype.getFileId=function(){return this.fileId},f.prototype.setFileId=function(u){this.fileId=u},f.prototype.getOptionalData=function(){return this.optionalData},f.prototype.setOptionalData=function(u){this.optionalData=u},f.prototype.isLastSegment=function(){return this.lastSegment},f.prototype.setLastSegment=function(u){this.lastSegment=u},f.prototype.getSegmentCount=function(){return this.segmentCount},f.prototype.setSegmentCount=function(u){this.segmentCount=u},f.prototype.getSender=function(){return this.sender||null},f.prototype.setSender=function(u){this.sender=u},f.prototype.getAddressee=function(){return this.addressee||null},f.prototype.setAddressee=function(u){this.addressee=u},f.prototype.getFileName=function(){return this.fileName},f.prototype.setFileName=function(u){this.fileName=u},f.prototype.getFileSize=function(){return this.fileSize},f.prototype.setFileSize=function(u){this.fileSize=u},f.prototype.getChecksum=function(){return this.checksum},f.prototype.setChecksum=function(u){this.checksum=u},f.prototype.getTimestamp=function(){return this.timestamp},f.prototype.setTimestamp=function(u){this.timestamp=u},f}(),so=function(){function f(){}return f.parseLong=function(u,c){return void 0===c&&(c=void 0),parseInt(u,c)},f}(),Lc=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),pu=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return Lc(u,f),u}(pe),Lh=function(){function f(){}return f.prototype.writeBytes=function(u){this.writeBytesOffset(u,0,u.length)},f.prototype.writeBytesOffset=function(u,c,p){if(null==u)throw new pu;if(c<0||c>u.length||p<0||c+p>u.length||c+p<0)throw new Ce;if(0!==p)for(var h=0;h<p;h++)this.write(u[c+h])},f.prototype.flush=function(){},f.prototype.close=function(){},f}(),Ed=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),gu=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return Ed(u,f),u}(pe),mu=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Br=function(f){function u(c){void 0===c&&(c=32);var p=f.call(this)||this;if(p.count=0,c<0)throw new q("Negative initial size: "+c);return p.buf=new Uint8Array(c),p}return mu(u,f),u.prototype.ensureCapacity=function(c){c-this.buf.length>0&&this.grow(c)},u.prototype.grow=function(c){var h=this.buf.length<<1;if(h-c<0&&(h=c),h<0){if(c<0)throw new gu;h=Pe.MAX_VALUE}this.buf=lt.copyOfUint8Array(this.buf,h)},u.prototype.write=function(c){this.ensureCapacity(this.count+1),this.buf[this.count]=c,this.count+=1},u.prototype.writeBytesOffset=function(c,p,h){if(p<0||p>c.length||h<0||p+h-c.length>0)throw new Ce;this.ensureCapacity(this.count+h),We.arraycopy(c,p,this.buf,this.count,h),this.count+=h},u.prototype.writeTo=function(c){c.writeBytesOffset(this.buf,0,this.count)},u.prototype.reset=function(){this.count=0},u.prototype.toByteArray=function(){return lt.copyOfUint8Array(this.buf,this.count)},u.prototype.size=function(){return this.count},u.prototype.toString=function(c){return c?"string"==typeof c?this.toString_string(c):this.toString_number(c):this.toString_void()},u.prototype.toString_void=function(){return new String(this.buf).toString()},u.prototype.toString_string=function(c){return new String(this.buf).toString()},u.prototype.toString_number=function(c){return new String(this.buf).toString()},u.prototype.close=function(){},u}(Lh),dn=(()=>(function(f){f[f.ALPHA=0]="ALPHA",f[f.LOWER=1]="LOWER",f[f.MIXED=2]="MIXED",f[f.PUNCT=3]="PUNCT",f[f.ALPHA_SHIFT=4]="ALPHA_SHIFT",f[f.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(dn||(dn={})),dn))();function vu(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function Ar(f){if(void 0===ko&&(ko=vu()),null===ko)throw new Error("BigInt is not supported!");return ko(f)}var _u=function(){function f(){}return f.decode=function(u,c){var p=new tn(""),h=Oe.ISO8859_1;p.enableDecoding(h);for(var m=1,x=u[m++],w=new Qo;m<u[0];){switch(x){case f.TEXT_COMPACTION_MODE_LATCH:m=f.textCompaction(u,m,p);break;case f.BYTE_COMPACTION_MODE_LATCH:case f.BYTE_COMPACTION_MODE_LATCH_6:m=f.byteCompaction(x,u,h,m,p);break;case f.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p.append(u[m++]);break;case f.NUMERIC_COMPACTION_MODE_LATCH:m=f.numericCompaction(u,m,p);break;case f.ECI_CHARSET:Oe.getCharacterSetECIByValue(u[m++]);break;case f.ECI_GENERAL_PURPOSE:m+=2;break;case f.ECI_USER_DEFINED:m++;break;case f.BEGIN_MACRO_PDF417_CONTROL_BLOCK:m=f.decodeMacroBlock(u,m,w);break;case f.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case f.MACRO_PDF417_TERMINATOR:throw new de;default:m--,m=f.textCompaction(u,m,p)}if(!(m<u.length))throw de.getFormatInstance();x=u[m++]}if(0===p.length())throw de.getFormatInstance();var R=new Mt(null,p.toString(),null,c);return R.setOther(w),R},f.decodeMacroBlock=function(u,c,p){if(c+f.NUMBER_OF_SEQUENCE_CODEWORDS>u[0])throw de.getFormatInstance();for(var h=new Int32Array(f.NUMBER_OF_SEQUENCE_CODEWORDS),m=0;m<f.NUMBER_OF_SEQUENCE_CODEWORDS;m++,c++)h[m]=u[c];p.setSegmentIndex(Pe.parseInt(f.decodeBase900toBase10(h,f.NUMBER_OF_SEQUENCE_CODEWORDS)));var x=new tn;c=f.textCompaction(u,c,x),p.setFileId(x.toString());var w=-1;for(u[c]===f.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(w=c+1);c<u[0];)switch(u[c]){case f.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(u[++c]){case f.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var b=new tn;c=f.textCompaction(u,c+1,b),p.setFileName(b.toString());break;case f.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var R=new tn;c=f.textCompaction(u,c+1,R),p.setSender(R.toString());break;case f.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var L=new tn;c=f.textCompaction(u,c+1,L),p.setAddressee(L.toString());break;case f.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var V=new tn;c=f.numericCompaction(u,c+1,V),p.setSegmentCount(Pe.parseInt(V.toString()));break;case f.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var H=new tn;c=f.numericCompaction(u,c+1,H),p.setTimestamp(so.parseLong(H.toString()));break;case f.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var j=new tn;c=f.numericCompaction(u,c+1,j),p.setChecksum(Pe.parseInt(j.toString()));break;case f.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var K=new tn;c=f.numericCompaction(u,c+1,K),p.setFileSize(so.parseLong(K.toString()));break;default:throw de.getFormatInstance()}break;case f.MACRO_PDF417_TERMINATOR:c++,p.setLastSegment(!0);break;default:throw de.getFormatInstance()}if(-1!==w){var oe=c-w;p.isLastSegment()&&oe--,p.setOptionalData(lt.copyOfRange(u,w,w+oe))}return c},f.textCompaction=function(u,c,p){for(var h=new Int32Array(2*(u[0]-c)),m=new Int32Array(2*(u[0]-c)),x=0,w=!1;c<u[0]&&!w;){var b=u[c++];if(b<f.TEXT_COMPACTION_MODE_LATCH)h[x]=b/30,h[x+1]=b%30,x+=2;else switch(b){case f.TEXT_COMPACTION_MODE_LATCH:h[x++]=f.TEXT_COMPACTION_MODE_LATCH;break;case f.BYTE_COMPACTION_MODE_LATCH:case f.BYTE_COMPACTION_MODE_LATCH_6:case f.NUMERIC_COMPACTION_MODE_LATCH:case f.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case f.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case f.MACRO_PDF417_TERMINATOR:c--,w=!0;break;case f.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[x]=f.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,b=u[c++],m[x]=b,x++}}return f.decodeTextCompaction(h,m,x,p),c},f.decodeTextCompaction=function(u,c,p,h){for(var m=dn.ALPHA,x=dn.ALPHA,w=0;w<p;){var b=u[w],R="";switch(m){case dn.ALPHA:if(b<26)R=String.fromCharCode(65+b);else switch(b){case 26:R=" ";break;case f.LL:m=dn.LOWER;break;case f.ML:m=dn.MIXED;break;case f.PS:x=m,m=dn.PUNCT_SHIFT;break;case f.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(c[w]);break;case f.TEXT_COMPACTION_MODE_LATCH:m=dn.ALPHA}break;case dn.LOWER:if(b<26)R=String.fromCharCode(97+b);else switch(b){case 26:R=" ";break;case f.AS:x=m,m=dn.ALPHA_SHIFT;break;case f.ML:m=dn.MIXED;break;case f.PS:x=m,m=dn.PUNCT_SHIFT;break;case f.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(c[w]);break;case f.TEXT_COMPACTION_MODE_LATCH:m=dn.ALPHA}break;case dn.MIXED:if(b<f.PL)R=f.MIXED_CHARS[b];else switch(b){case f.PL:m=dn.PUNCT;break;case 26:R=" ";break;case f.LL:m=dn.LOWER;break;case f.AL:m=dn.ALPHA;break;case f.PS:x=m,m=dn.PUNCT_SHIFT;break;case f.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(c[w]);break;case f.TEXT_COMPACTION_MODE_LATCH:m=dn.ALPHA}break;case dn.PUNCT:if(b<f.PAL)R=f.PUNCT_CHARS[b];else switch(b){case f.PAL:m=dn.ALPHA;break;case f.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(c[w]);break;case f.TEXT_COMPACTION_MODE_LATCH:m=dn.ALPHA}break;case dn.ALPHA_SHIFT:if(m=x,b<26)R=String.fromCharCode(65+b);else switch(b){case 26:R=" ";break;case f.TEXT_COMPACTION_MODE_LATCH:m=dn.ALPHA}break;case dn.PUNCT_SHIFT:if(m=x,b<f.PAL)R=f.PUNCT_CHARS[b];else switch(b){case f.PAL:m=dn.ALPHA;break;case f.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(c[w]);break;case f.TEXT_COMPACTION_MODE_LATCH:m=dn.ALPHA}}""!==R&&h.append(R),w++}},f.byteCompaction=function(u,c,p,h,m){var x=new Br,w=0,b=0,R=!1;switch(u){case f.BYTE_COMPACTION_MODE_LATCH:for(var L=new Int32Array(6),V=c[h++];h<c[0]&&!R;)switch(L[w++]=V,b=900*b+V,V=c[h++],V){case f.TEXT_COMPACTION_MODE_LATCH:case f.BYTE_COMPACTION_MODE_LATCH:case f.NUMERIC_COMPACTION_MODE_LATCH:case f.BYTE_COMPACTION_MODE_LATCH_6:case f.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case f.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case f.MACRO_PDF417_TERMINATOR:h--,R=!0;break;default:if(w%5==0&&w>0){for(var H=0;H<6;++H)x.write(Number(Ar(b)>>Ar(8*(5-H))));b=0,w=0}}h===c[0]&&V<f.TEXT_COMPACTION_MODE_LATCH&&(L[w++]=V);for(var j=0;j<w;j++)x.write(L[j]);break;case f.BYTE_COMPACTION_MODE_LATCH_6:for(;h<c[0]&&!R;){var K=c[h++];if(K<f.TEXT_COMPACTION_MODE_LATCH)w++,b=900*b+K;else switch(K){case f.TEXT_COMPACTION_MODE_LATCH:case f.BYTE_COMPACTION_MODE_LATCH:case f.NUMERIC_COMPACTION_MODE_LATCH:case f.BYTE_COMPACTION_MODE_LATCH_6:case f.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case f.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case f.MACRO_PDF417_TERMINATOR:h--,R=!0}if(w%5==0&&w>0){for(H=0;H<6;++H)x.write(Number(Ar(b)>>Ar(8*(5-H))));b=0,w=0}}}return m.append(Nt.decode(x.toByteArray(),p)),h},f.numericCompaction=function(u,c,p){for(var h=0,m=!1,x=new Int32Array(f.MAX_NUMERIC_CODEWORDS);c<u[0]&&!m;){var w=u[c++];if(c===u[0]&&(m=!0),w<f.TEXT_COMPACTION_MODE_LATCH)x[h]=w,h++;else switch(w){case f.TEXT_COMPACTION_MODE_LATCH:case f.BYTE_COMPACTION_MODE_LATCH:case f.BYTE_COMPACTION_MODE_LATCH_6:case f.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case f.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case f.MACRO_PDF417_TERMINATOR:c--,m=!0}(h%f.MAX_NUMERIC_CODEWORDS==0||w===f.NUMERIC_COMPACTION_MODE_LATCH||m)&&h>0&&(p.append(f.decodeBase900toBase10(x,h)),h=0)}return c},f.decodeBase900toBase10=function(u,c){for(var p=Ar(0),h=0;h<c;h++)p+=f.EXP900[c-h-1]*Ar(u[h]);var m=p.toString();if("1"!==m.charAt(0))throw new de;return m.substring(1)},f.TEXT_COMPACTION_MODE_LATCH=900,f.BYTE_COMPACTION_MODE_LATCH=901,f.NUMERIC_COMPACTION_MODE_LATCH=902,f.BYTE_COMPACTION_MODE_LATCH_6=924,f.ECI_USER_DEFINED=925,f.ECI_GENERAL_PURPOSE=926,f.ECI_CHARSET=927,f.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,f.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,f.MACRO_PDF417_TERMINATOR=922,f.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,f.MAX_NUMERIC_CODEWORDS=15,f.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,f.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,f.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,f.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,f.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,f.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,f.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,f.PL=25,f.LL=27,f.AS=27,f.ML=28,f.AL=28,f.PS=29,f.PAL=29,f.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",f.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",f.EXP900=vu()?function(){var f=[];f[0]=Ar(1);var u=Ar(900);f[1]=u;for(var c=2;c<16;c++)f[c]=f[c-1]*u;return f}():[],f.NUMBER_OF_SEQUENCE_CODEWORDS=2,f}(),La=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},ic=function(){function f(){}return f.decode=function(u,c,p,h,m,x,w){for(var V,b=new ma(u,c,p,h,m),R=null,L=null,H=!0;;H=!1){if(null!=c&&(R=f.getRowIndicatorColumn(u,b,c,!0,x,w)),null!=h&&(L=f.getRowIndicatorColumn(u,b,h,!1,x,w)),null==(V=f.merge(R,L)))throw Re.getNotFoundInstance();var j=V.getBoundingBox();if(!H||null==j||!(j.getMinY()<b.getMinY()||j.getMaxY()>b.getMaxY()))break;b=j}V.setBoundingBox(b);var K=V.getBarcodeColumnCount()+1;V.setDetectionResultColumn(0,R),V.setDetectionResultColumn(K,L);for(var oe=null!=R,_e=1;_e<=K;_e++){var ve=oe?_e:K-_e;if(void 0===V.getDetectionResultColumn(ve)){var ge=void 0;ge=0===ve||ve===K?new ot(b,0===ve):new xd(b),V.setDetectionResultColumn(ve,ge);for(var Ne=-1,Ge=Ne,Je=b.getMinY();Je<=b.getMaxY();Je++){if((Ne=f.getStartColumn(V,ve,Je,oe))<0||Ne>b.getMaxX()){if(-1===Ge)continue;Ne=Ge}var st=f.detectCodeword(u,b.getMinX(),b.getMaxX(),oe,Ne,Je,x,w);null!=st&&(ge.setCodeword(Je,st),Ge=Ne,x=Math.min(x,st.getWidth()),w=Math.max(w,st.getWidth()))}}}return f.createDecoderResult(V)},f.merge=function(u,c){if(null==u&&null==c)return null;var p=f.getBarcodeMetadata(u,c);if(null==p)return null;var h=ma.merge(f.adjustBoundingBox(u),f.adjustBoundingBox(c));return new Tl(p,h)},f.adjustBoundingBox=function(u){var c,p;if(null==u)return null;var h=u.getRowHeights();if(null==h)return null;var m=f.getMax(h),x=0;try{for(var w=La(h),b=w.next();!b.done;b=w.next()){var R=b.value;if(x+=m-R,R>0)break}}catch(j){c={error:j}}finally{try{b&&!b.done&&(p=w.return)&&p.call(w)}finally{if(c)throw c.error}}for(var L=u.getCodewords(),V=0;x>0&&null==L[V];V++)x--;var H=0;for(V=h.length-1;V>=0&&(H+=m-h[V],!(h[V]>0));V--);for(V=L.length-1;H>0&&null==L[V];V--)H--;return u.getBoundingBox().addMissingRows(x,H,u.isLeft())},f.getMax=function(u){var c,p,h=-1;try{for(var m=La(u),x=m.next();!x.done;x=m.next())h=Math.max(h,x.value)}catch(b){c={error:b}}finally{try{x&&!x.done&&(p=m.return)&&p.call(m)}finally{if(c)throw c.error}}return h},f.getBarcodeMetadata=function(u,c){var p,h;return null==u||null==(p=u.getBarcodeMetadata())?null==c?null:c.getBarcodeMetadata():null==c||null==(h=c.getBarcodeMetadata())?p:p.getColumnCount()!==h.getColumnCount()&&p.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&p.getRowCount()!==h.getRowCount()?null:p},f.getRowIndicatorColumn=function(u,c,p,h,m,x){for(var w=new ot(c,h),b=0;b<2;b++)for(var R=0===b?1:-1,L=Math.trunc(Math.trunc(p.getX())),V=Math.trunc(Math.trunc(p.getY()));V<=c.getMaxY()&&V>=c.getMinY();V+=R){var H=f.detectCodeword(u,0,u.getWidth(),h,L,V,m,x);null!=H&&(w.setCodeword(V,H),L=h?H.getStartX():H.getEndX())}return w},f.adjustCodewordCount=function(u,c){var p=c[0][1],h=p.getValue(),m=u.getBarcodeColumnCount()*u.getBarcodeRowCount()-f.getNumberOfECCodeWords(u.getBarcodeECLevel());if(0===h.length){if(m<1||m>En.MAX_CODEWORDS_IN_BARCODE)throw Re.getNotFoundInstance();p.setValue(m)}else h[0]!==m&&p.setValue(m)},f.createDecoderResult=function(u){var c=f.createBarcodeMatrix(u);f.adjustCodewordCount(u,c);for(var p=new Array,h=new Int32Array(u.getBarcodeRowCount()*u.getBarcodeColumnCount()),m=[],x=new Array,w=0;w<u.getBarcodeRowCount();w++)for(var b=0;b<u.getBarcodeColumnCount();b++){var R=c[w][b+1].getValue(),L=w*u.getBarcodeColumnCount()+b;0===R.length?p.push(L):1===R.length?h[L]=R[0]:(x.push(L),m.push(R))}for(var V=new Array(m.length),H=0;H<V.length;H++)V[H]=m[H];return f.createDecoderResultFromAmbiguousValues(u.getBarcodeECLevel(),h,En.toIntArray(p),En.toIntArray(x),V)},f.createDecoderResultFromAmbiguousValues=function(u,c,p,h,m){for(var x=new Int32Array(h.length),w=100;w-- >0;){for(var b=0;b<x.length;b++)c[h[b]]=m[b][x[b]];try{return f.decodeCodewords(c,u,p)}catch(L){if(!(L instanceof Ee))throw L}if(0===x.length)throw Ee.getChecksumInstance();for(b=0;b<x.length;b++){if(x[b]<m[b].length-1){x[b]++;break}if(x[b]=0,b===x.length-1)throw Ee.getChecksumInstance()}}throw Ee.getChecksumInstance()},f.createBarcodeMatrix=function(u){for(var c,p,h,m,x=Array.from({length:u.getBarcodeRowCount()},function(){return new Array(u.getBarcodeColumnCount()+2)}),w=0;w<x.length;w++)for(var b=0;b<x[w].length;b++)x[w][b]=new Ps;var R=0;try{for(var L=La(u.getDetectionResultColumns()),V=L.next();!V.done;V=L.next()){var H=V.value;if(null!=H)try{for(var j=(h=void 0,La(H.getCodewords())),K=j.next();!K.done;K=j.next()){var oe=K.value;if(null!=oe){var _e=oe.getRowNumber();if(_e>=0){if(_e>=x.length)continue;x[_e][R].setValue(oe.getValue())}}}}catch(ve){h={error:ve}}finally{try{K&&!K.done&&(m=j.return)&&m.call(j)}finally{if(h)throw h.error}}R++}}catch(ve){c={error:ve}}finally{try{V&&!V.done&&(p=L.return)&&p.call(L)}finally{if(c)throw c.error}}return x},f.isValidBarcodeColumn=function(u,c){return c>=0&&c<=u.getBarcodeColumnCount()+1},f.getStartColumn=function(u,c,p,h){var m,x,w=h?1:-1,b=null;if(f.isValidBarcodeColumn(u,c-w)&&(b=u.getDetectionResultColumn(c-w).getCodeword(p)),null!=b)return h?b.getEndX():b.getStartX();if(null!=(b=u.getDetectionResultColumn(c).getCodewordNearby(p)))return h?b.getStartX():b.getEndX();if(f.isValidBarcodeColumn(u,c-w)&&(b=u.getDetectionResultColumn(c-w).getCodewordNearby(p)),null!=b)return h?b.getEndX():b.getStartX();for(var R=0;f.isValidBarcodeColumn(u,c-w);){c-=w;try{for(var L=(m=void 0,La(u.getDetectionResultColumn(c).getCodewords())),V=L.next();!V.done;V=L.next()){var H=V.value;if(null!=H)return(h?H.getEndX():H.getStartX())+w*R*(H.getEndX()-H.getStartX())}}catch(j){m={error:j}}finally{try{V&&!V.done&&(x=L.return)&&x.call(L)}finally{if(m)throw m.error}}R++}return h?u.getBoundingBox().getMinX():u.getBoundingBox().getMaxX()},f.detectCodeword=function(u,c,p,h,m,x,w,b){m=f.adjustCodewordStartColumn(u,c,p,h,m,x);var R=f.getModuleBitCount(u,c,p,h,m,x);if(null==R)return null;var L,V=ue.sum(R);if(h)L=m+V;else{for(var H=0;H<R.length/2;H++){var j=R[H];R[H]=R[R.length-1-H],R[R.length-1-H]=j}m=(L=m)-V}if(!f.checkCodewordSkew(V,w,b))return null;var K=Dl.getDecodedValue(R),oe=En.getCodeword(K);return-1===oe?null:new Kn(m,L,f.getCodewordBucketNumber(K),oe)},f.getModuleBitCount=function(u,c,p,h,m,x){for(var w=m,b=new Int32Array(8),R=0,L=h?1:-1,V=h;(h?w<p:w>=c)&&R<b.length;)u.get(w,x)===V?(b[R]++,w+=L):(R++,V=!V);return R===b.length||w===(h?p:c)&&R===b.length-1?b:null},f.getNumberOfECCodeWords=function(u){return 2<<u},f.adjustCodewordStartColumn=function(u,c,p,h,m,x){for(var w=m,b=h?-1:1,R=0;R<2;R++){for(;(h?w>=c:w<p)&&h===u.get(w,x);){if(Math.abs(m-w)>f.CODEWORD_SKEW_SIZE)return m;w+=b}b=-b,h=!h}return w},f.checkCodewordSkew=function(u,c,p){return c-f.CODEWORD_SKEW_SIZE<=u&&u<=p+f.CODEWORD_SKEW_SIZE},f.decodeCodewords=function(u,c,p){if(0===u.length)throw de.getFormatInstance();var h=1<<c+1,m=f.correctErrors(u,p,h);f.verifyCodewordCount(u,h);var x=_u.decode(u,""+c);return x.setErrorsCorrected(m),x.setErasures(p.length),x},f.correctErrors=function(u,c,p){if(null!=c&&c.length>p/2+f.MAX_ERRORS||p<0||p>f.MAX_EC_CODEWORDS)throw Ee.getChecksumInstance();return f.errorCorrection.decode(u,p,c)},f.verifyCodewordCount=function(u,c){if(u.length<4)throw de.getFormatInstance();var p=u[0];if(p>u.length)throw de.getFormatInstance();if(0===p){if(!(c<u.length))throw de.getFormatInstance();u[0]=u.length-c}},f.getBitCountForCodeword=function(u){for(var c=new Int32Array(8),p=0,h=c.length-1;!((1&u)!==p&&(p=1&u,h--,h<0));)c[h]++,u>>=1;return c},f.getCodewordBucketNumber=function(u){return u instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(u):this.getCodewordBucketNumber_number(u)},f.getCodewordBucketNumber_number=function(u){return f.getCodewordBucketNumber(f.getBitCountForCodeword(u))},f.getCodewordBucketNumber_Int32Array=function(u){return(u[0]-u[2]+u[4]-u[6]+9)%9},f.toString=function(u){for(var c=new Ht,p=0;p<u.length;p++){c.format("Row %2d: ",p);for(var h=0;h<u[p].length;h++){var m=u[p][h];0===m.getValue().length?c.format("        ",null):c.format("%4d(%2d)",m.getValue()[0],m.getConfidence(m.getValue()[0]))}c.format("%n")}return c.toString()},f.CODEWORD_SKEW_SIZE=2,f.MAX_ERRORS=3,f.MAX_EC_CODEWORDS=512,f.errorCorrection=new Ns,f}(),Ol=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Jo=function(){function f(){}return f.prototype.decode=function(u,c){void 0===c&&(c=null);var p=f.decode(u,c,!1);if(null==p||0===p.length||null==p[0])throw Re.getNotFoundInstance();return p[0]},f.prototype.decodeMultiple=function(u,c){void 0===c&&(c=null);try{return f.decode(u,c,!0)}catch(p){throw p instanceof de||p instanceof Ee?Re.getNotFoundInstance():p}},f.decode=function(u,c,p){var h,m,x=new Array,w=Rr.detectMultiple(u,c,p);try{for(var b=Ol(w.getPoints()),R=b.next();!R.done;R=b.next()){var L=R.value,V=ic.decode(w.getBits(),L[4],L[5],L[6],L[7],f.getMinCodewordWidth(L),f.getMaxCodewordWidth(L)),H=new kr(V.getText(),V.getRawBytes(),void 0,L,Tt.PDF_417);H.putMetadata(Mn.ERROR_CORRECTION_LEVEL,V.getECLevel());var j=V.getOther();null!=j&&H.putMetadata(Mn.PDF417_EXTRA_METADATA,j),x.push(H)}}catch(K){h={error:K}}finally{try{R&&!R.done&&(m=b.return)&&m.call(b)}finally{if(h)throw h.error}}return x.map(function(K){return K})},f.getMaxWidth=function(u,c){return null==u||null==c?0:Math.trunc(Math.abs(u.getX()-c.getX()))},f.getMinWidth=function(u,c){return null==u||null==c?Pe.MAX_VALUE:Math.trunc(Math.abs(u.getX()-c.getX()))},f.getMaxCodewordWidth=function(u){return Math.floor(Math.max(Math.max(f.getMaxWidth(u[0],u[4]),f.getMaxWidth(u[6],u[2])*En.MODULES_IN_CODEWORD/En.MODULES_IN_STOP_PATTERN),Math.max(f.getMaxWidth(u[1],u[5]),f.getMaxWidth(u[7],u[3])*En.MODULES_IN_CODEWORD/En.MODULES_IN_STOP_PATTERN)))},f.getMinCodewordWidth=function(u){return Math.floor(Math.min(Math.min(f.getMinWidth(u[0],u[4]),f.getMinWidth(u[6],u[2])*En.MODULES_IN_CODEWORD/En.MODULES_IN_STOP_PATTERN),Math.min(f.getMinWidth(u[1],u[5]),f.getMinWidth(u[7],u[3])*En.MODULES_IN_CODEWORD/En.MODULES_IN_STOP_PATTERN)))},f.prototype.reset=function(){},f}(),Cd=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),yu=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return Cd(u,f),u}(pe),xu=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},wu=function(){function f(){}return f.prototype.decode=function(u,c){return this.setHints(c),this.decodeInternal(u)},f.prototype.decodeWithState=function(u){return null==this.readers&&this.setHints(null),this.decodeInternal(u)},f.prototype.setHints=function(u){this.hints=u;var c=null!=u&&void 0!==u.get(Et.TRY_HARDER),p=null==u?null:u.get(Et.POSSIBLE_FORMATS),h=new Array;if(null!=p){var m=p.some(function(x){return x===Tt.UPC_A||x===Tt.UPC_E||x===Tt.EAN_13||x===Tt.EAN_8||x===Tt.CODABAR||x===Tt.CODE_39||x===Tt.CODE_93||x===Tt.CODE_128||x===Tt.ITF||x===Tt.RSS_14||x===Tt.RSS_EXPANDED});m&&!c&&h.push(new Os(u)),p.includes(Tt.QR_CODE)&&h.push(new jn),p.includes(Tt.DATA_MATRIX)&&h.push(new Zu),p.includes(Tt.AZTEC)&&h.push(new aa),p.includes(Tt.PDF_417)&&h.push(new Jo),m&&c&&h.push(new Os(u))}0===h.length&&(c||h.push(new Os(u)),h.push(new jn),h.push(new Zu),h.push(new aa),h.push(new Jo),c&&h.push(new Os(u))),this.readers=h},f.prototype.reset=function(){var u,c;if(null!==this.readers)try{for(var p=xu(this.readers),h=p.next();!h.done;h=p.next())h.value.reset()}catch(x){u={error:x}}finally{try{h&&!h.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}},f.prototype.decodeInternal=function(u){var c,p;if(null===this.readers)throw new yu("No readers where selected, nothing can be read.");try{for(var h=xu(this.readers),m=h.next();!m.done;m=h.next()){var x=m.value;try{return x.decode(u,this.hints)}catch(w){if(w instanceof yu)continue}}}catch(w){c={error:w}}finally{try{m&&!m.done&&(p=h.return)&&p.call(h)}finally{if(c)throw c.error}}throw new Re("No MultiFormat Readers were able to detect the code.")},f}(),oc=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Ad=(function(f){function u(c,p){void 0===c&&(c=null),void 0===p&&(p=500);var m=new wu;return m.setHints(c),f.call(this,m,p)||this}oc(u,f),u.prototype.decodeBitmap=function(c){return this.reader.decodeWithState(c)}}(xi),(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}()),Id=(function(f){Ad(function(c){return void 0===c&&(c=500),f.call(this,new Jo,c)||this},f)}(xi),(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}()),Bc=(function(f){Id(function(c){return void 0===c&&(c=500),f.call(this,new jn,c)||this},f)}(xi),(()=>(function(f){f[f.ERROR_CORRECTION=0]="ERROR_CORRECTION",f[f.CHARACTER_SET=1]="CHARACTER_SET",f[f.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",f[f.MIN_SIZE=3]="MIN_SIZE",f[f.MAX_SIZE=4]="MAX_SIZE",f[f.MARGIN=5]="MARGIN",f[f.PDF417_COMPACT=6]="PDF417_COMPACT",f[f.PDF417_COMPACTION=7]="PDF417_COMPACTION",f[f.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",f[f.AZTEC_LAYERS=9]="AZTEC_LAYERS",f[f.QR_VERSION=10]="QR_VERSION"}(Bc||(Bc={})),Bc))()),hr=Bc,Ci=function(){function f(u){this.field=u,this.cachedGenerators=[],this.cachedGenerators.push(new on(u,Int32Array.from([1])))}return f.prototype.buildGenerator=function(u){var c=this.cachedGenerators;if(u>=c.length)for(var p=c[c.length-1],h=this.field,m=c.length;m<=u;m++){var x=p.multiply(new on(h,Int32Array.from([1,h.exp(m-1+h.getGeneratorBase())])));c.push(x),p=x}return c[u]},f.prototype.encode=function(u,c){if(0===c)throw new q("No error correction bytes");var p=u.length-c;if(p<=0)throw new q("No data bytes provided");var h=this.buildGenerator(c),m=new Int32Array(p);We.arraycopy(u,0,m,0,p);for(var x=new on(this.field,m),b=(x=x.multiplyByMonomial(c,1)).divide(h)[1].getCoefficients(),R=c-b.length,L=0;L<R;L++)u[p+L]=0;We.arraycopy(b,0,u,p+R,b.length)},f}(),Ms=function(){function f(){}return f.applyMaskPenaltyRule1=function(u){return f.applyMaskPenaltyRule1Internal(u,!0)+f.applyMaskPenaltyRule1Internal(u,!1)},f.applyMaskPenaltyRule2=function(u){for(var c=0,p=u.getArray(),h=u.getWidth(),m=u.getHeight(),x=0;x<m-1;x++)for(var w=p[x],b=0;b<h-1;b++){var R=w[b];R===w[b+1]&&R===p[x+1][b]&&R===p[x+1][b+1]&&c++}return f.N2*c},f.applyMaskPenaltyRule3=function(u){for(var c=0,p=u.getArray(),h=u.getWidth(),m=u.getHeight(),x=0;x<m;x++)for(var w=0;w<h;w++){var b=p[x];w+6<h&&1===b[w]&&0===b[w+1]&&1===b[w+2]&&1===b[w+3]&&1===b[w+4]&&0===b[w+5]&&1===b[w+6]&&(f.isWhiteHorizontal(b,w-4,w)||f.isWhiteHorizontal(b,w+7,w+11))&&c++,x+6<m&&1===p[x][w]&&0===p[x+1][w]&&1===p[x+2][w]&&1===p[x+3][w]&&1===p[x+4][w]&&0===p[x+5][w]&&1===p[x+6][w]&&(f.isWhiteVertical(p,w,x-4,x)||f.isWhiteVertical(p,w,x+7,x+11))&&c++}return c*f.N3},f.isWhiteHorizontal=function(u,c,p){c=Math.max(c,0),p=Math.min(p,u.length);for(var h=c;h<p;h++)if(1===u[h])return!1;return!0},f.isWhiteVertical=function(u,c,p,h){p=Math.max(p,0),h=Math.min(h,u.length);for(var m=p;m<h;m++)if(1===u[m][c])return!1;return!0},f.applyMaskPenaltyRule4=function(u){for(var c=0,p=u.getArray(),h=u.getWidth(),m=u.getHeight(),x=0;x<m;x++)for(var w=p[x],b=0;b<h;b++)1===w[b]&&c++;var R=u.getHeight()*u.getWidth();return Math.floor(10*Math.abs(2*c-R)/R)*f.N4},f.getDataMaskBit=function(u,c,p){var h,m;switch(u){case 0:h=p+c&1;break;case 1:h=1&p;break;case 2:h=c%3;break;case 3:h=(p+c)%3;break;case 4:h=Math.floor(p/2)+Math.floor(c/3)&1;break;case 5:h=(1&(m=p*c))+m%3;break;case 6:h=(1&(m=p*c))+m%3&1;break;case 7:h=(m=p*c)%3+(p+c&1)&1;break;default:throw new q("Invalid mask pattern: "+u)}return 0===h},f.applyMaskPenaltyRule1Internal=function(u,c){for(var p=0,h=c?u.getHeight():u.getWidth(),m=c?u.getWidth():u.getHeight(),x=u.getArray(),w=0;w<h;w++){for(var b=0,R=-1,L=0;L<m;L++){var V=c?x[w][L]:x[L][w];V===R?b++:(b>=5&&(p+=f.N1+(b-5)),b=1,R=V)}b>=5&&(p+=f.N1+(b-5))}return p},f.N1=3,f.N2=3,f.N3=40,f.N4=10,f}(),Kr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Af=function(){function f(u,c){this.width=u,this.height=c;for(var p=new Array(c),h=0;h!==c;h++)p[h]=new Uint8Array(u);this.bytes=p}return f.prototype.getHeight=function(){return this.height},f.prototype.getWidth=function(){return this.width},f.prototype.get=function(u,c){return this.bytes[c][u]},f.prototype.getArray=function(){return this.bytes},f.prototype.setNumber=function(u,c,p){this.bytes[c][u]=p},f.prototype.setBoolean=function(u,c,p){this.bytes[c][u]=p?1:0},f.prototype.clear=function(u){var c,p;try{for(var h=Kr(this.bytes),m=h.next();!m.done;m=h.next())lt.fill(m.value,u)}catch(w){c={error:w}}finally{try{m&&!m.done&&(p=h.return)&&p.call(h)}finally{if(c)throw c.error}}},f.prototype.equals=function(u){if(!(u instanceof f))return!1;var c=u;if(this.width!==c.width||this.height!==c.height)return!1;for(var p=0,h=this.height;p<h;++p)for(var m=this.bytes[p],x=c.bytes[p],w=0,b=this.width;w<b;++w)if(m[w]!==x[w])return!1;return!0},f.prototype.toString=function(){for(var u=new tn,c=0,p=this.height;c<p;++c){for(var h=this.bytes[c],m=0,x=this.width;m<x;++m)switch(h[m]){case 0:u.append(" 0");break;case 1:u.append(" 1");break;default:u.append("  ")}u.append("\n")}return u.toString()},f}(),Vh=function(){function f(){this.maskPattern=-1}return f.prototype.getMode=function(){return this.mode},f.prototype.getECLevel=function(){return this.ecLevel},f.prototype.getVersion=function(){return this.version},f.prototype.getMaskPattern=function(){return this.maskPattern},f.prototype.getMatrix=function(){return this.matrix},f.prototype.toString=function(){var u=new tn;return u.append("<<\n"),u.append(" mode: "),u.append(this.mode?this.mode.toString():"null"),u.append("\n ecLevel: "),u.append(this.ecLevel?this.ecLevel.toString():"null"),u.append("\n version: "),u.append(this.version?this.version.toString():"null"),u.append("\n maskPattern: "),u.append(this.maskPattern.toString()),this.matrix?(u.append("\n matrix:\n"),u.append(this.matrix.toString())):u.append("\n matrix: null\n"),u.append(">>\n"),u.toString()},f.prototype.setMode=function(u){this.mode=u},f.prototype.setECLevel=function(u){this.ecLevel=u},f.prototype.setVersion=function(u){this.version=u},f.prototype.setMaskPattern=function(u){this.maskPattern=u},f.prototype.setMatrix=function(u){this.matrix=u},f.isValidMaskPattern=function(u){return u>=0&&u<f.NUM_MASK_PATTERNS},f.NUM_MASK_PATTERNS=8,f}(),G0=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Yn=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return G0(u,f),u}(pe),Vc=function(){function f(){}return f.clearMatrix=function(u){u.clear(255)},f.buildMatrix=function(u,c,p,h,m){f.clearMatrix(m),f.embedBasicPatterns(p,m),f.embedTypeInfo(c,h,m),f.maybeEmbedVersionInfo(p,m),f.embedDataBits(u,h,m)},f.embedBasicPatterns=function(u,c){f.embedPositionDetectionPatternsAndSeparators(c),f.embedDarkDotAtLeftBottomCorner(c),f.maybeEmbedPositionAdjustmentPatterns(u,c),f.embedTimingPatterns(c)},f.embedTypeInfo=function(u,c,p){var h=new St;f.makeTypeInfoBits(u,c,h);for(var m=0,x=h.getSize();m<x;++m){var w=h.get(h.getSize()-1-m),b=f.TYPE_INFO_COORDINATES[m];if(p.setBoolean(b[0],b[1],w),m<8){var V=p.getWidth()-m-1;p.setBoolean(V,H=8,w)}else{V=8;var H=p.getHeight()-7+(m-8);p.setBoolean(V,H,w)}}},f.maybeEmbedVersionInfo=function(u,c){if(!(u.getVersionNumber()<7)){var p=new St;f.makeVersionInfoBits(u,p);for(var h=17,m=0;m<6;++m)for(var x=0;x<3;++x){var w=p.get(h);h--,c.setBoolean(m,c.getHeight()-11+x,w),c.setBoolean(c.getHeight()-11+x,m,w)}}},f.embedDataBits=function(u,c,p){for(var h=0,m=-1,x=p.getWidth()-1,w=p.getHeight()-1;x>0;){for(6===x&&(x-=1);w>=0&&w<p.getHeight();){for(var b=0;b<2;++b){var R=x-b;if(f.isEmpty(p.get(R,w))){var L=void 0;h<u.getSize()?(L=u.get(h),++h):L=!1,255!==c&&Ms.getDataMaskBit(c,R,w)&&(L=!L),p.setBoolean(R,w,L)}}w+=m}w+=m=-m,x-=2}if(h!==u.getSize())throw new Yn("Not all bits consumed: "+h+"/"+u.getSize())},f.findMSBSet=function(u){return 32-Pe.numberOfLeadingZeros(u)},f.calculateBCHCode=function(u,c){if(0===c)throw new q("0 polynomial");var p=f.findMSBSet(c);for(u<<=p-1;f.findMSBSet(u)>=p;)u^=c<<f.findMSBSet(u)-p;return u},f.makeTypeInfoBits=function(u,c,p){if(!Vh.isValidMaskPattern(c))throw new Yn("Invalid mask pattern");var h=u.getBits()<<3|c;p.appendBits(h,5);var m=f.calculateBCHCode(h,f.TYPE_INFO_POLY);p.appendBits(m,10);var x=new St;if(x.appendBits(f.TYPE_INFO_MASK_PATTERN,15),p.xor(x),15!==p.getSize())throw new Yn("should not happen but we got: "+p.getSize())},f.makeVersionInfoBits=function(u,c){c.appendBits(u.getVersionNumber(),6);var p=f.calculateBCHCode(u.getVersionNumber(),f.VERSION_INFO_POLY);if(c.appendBits(p,12),18!==c.getSize())throw new Yn("should not happen but we got: "+c.getSize())},f.isEmpty=function(u){return 255===u},f.embedTimingPatterns=function(u){for(var c=8;c<u.getWidth()-8;++c){var p=(c+1)%2;f.isEmpty(u.get(c,6))&&u.setNumber(c,6,p),f.isEmpty(u.get(6,c))&&u.setNumber(6,c,p)}},f.embedDarkDotAtLeftBottomCorner=function(u){if(0===u.get(8,u.getHeight()-8))throw new Yn;u.setNumber(8,u.getHeight()-8,1)},f.embedHorizontalSeparationPattern=function(u,c,p){for(var h=0;h<8;++h){if(!f.isEmpty(p.get(u+h,c)))throw new Yn;p.setNumber(u+h,c,0)}},f.embedVerticalSeparationPattern=function(u,c,p){for(var h=0;h<7;++h){if(!f.isEmpty(p.get(u,c+h)))throw new Yn;p.setNumber(u,c+h,0)}},f.embedPositionAdjustmentPattern=function(u,c,p){for(var h=0;h<5;++h)for(var m=f.POSITION_ADJUSTMENT_PATTERN[h],x=0;x<5;++x)p.setNumber(u+x,c+h,m[x])},f.embedPositionDetectionPattern=function(u,c,p){for(var h=0;h<7;++h)for(var m=f.POSITION_DETECTION_PATTERN[h],x=0;x<7;++x)p.setNumber(u+x,c+h,m[x])},f.embedPositionDetectionPatternsAndSeparators=function(u){var c=f.POSITION_DETECTION_PATTERN[0].length;f.embedPositionDetectionPattern(0,0,u),f.embedPositionDetectionPattern(u.getWidth()-c,0,u),f.embedPositionDetectionPattern(0,u.getWidth()-c,u);f.embedHorizontalSeparationPattern(0,7,u),f.embedHorizontalSeparationPattern(u.getWidth()-8,7,u),f.embedHorizontalSeparationPattern(0,u.getWidth()-8,u);f.embedVerticalSeparationPattern(7,0,u),f.embedVerticalSeparationPattern(u.getHeight()-7-1,0,u),f.embedVerticalSeparationPattern(7,u.getHeight()-7,u)},f.maybeEmbedPositionAdjustmentPatterns=function(u,c){if(!(u.getVersionNumber()<2))for(var p=u.getVersionNumber()-1,h=f.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[p],m=0,x=h.length;m!==x;m++){var w=h[m];if(w>=0)for(var b=0;b!==x;b++){var R=h[b];R>=0&&f.isEmpty(c.get(R,w))&&f.embedPositionAdjustmentPattern(R-2,w-2,c)}}},f.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),f.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),f.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),f.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),f.VERSION_INFO_POLY=7973,f.TYPE_INFO_POLY=1335,f.TYPE_INFO_MASK_PATTERN=21522,f}(),Fs=function(){function f(u,c){this.dataBytes=u,this.errorCorrectionBytes=c}return f.prototype.getDataBytes=function(){return this.dataBytes},f.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},f}(),Ba=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},_a=function(){function f(){}return f.calculateMaskPenalty=function(u){return Ms.applyMaskPenaltyRule1(u)+Ms.applyMaskPenaltyRule2(u)+Ms.applyMaskPenaltyRule3(u)+Ms.applyMaskPenaltyRule4(u)},f.encode=function(u,c,p){void 0===p&&(p=null);var h=f.DEFAULT_BYTE_MODE_ENCODING,m=null!==p&&void 0!==p.get(hr.CHARACTER_SET);m&&(h=p.get(hr.CHARACTER_SET).toString());var x=this.chooseMode(u,h),w=new St;if(x===Ln.BYTE&&(m||f.DEFAULT_BYTE_MODE_ENCODING!==h)){var b=Oe.getCharacterSetECIByName(h);void 0!==b&&this.appendECI(b,w)}this.appendModeInfo(x,w);var L,R=new St;if(this.appendBytes(u,x,R,h),null!==p&&void 0!==p.get(hr.QR_VERSION)){var V=Number.parseInt(p.get(hr.QR_VERSION).toString(),10);L=Mi.getVersionForNumber(V);var H=this.calculateBitsNeeded(x,w,R,L);if(!this.willFit(H,L,c))throw new Yn("Data too big for requested version")}else L=this.recommendVersion(c,x,w,R);var j=new St;j.appendBitArray(w);var K=x===Ln.BYTE?R.getSizeInBytes():u.length;this.appendLengthInfo(K,L,x,j),j.appendBitArray(R);var oe=L.getECBlocksForLevel(c),_e=L.getTotalCodewords()-oe.getTotalECCodewords();this.terminateBits(_e,j);var ve=this.interleaveWithECBytes(j,L.getTotalCodewords(),_e,oe.getNumBlocks()),ge=new Vh;ge.setECLevel(c),ge.setMode(x),ge.setVersion(L);var Ne=L.getDimensionForVersion(),Ge=new Af(Ne,Ne),Je=this.chooseMaskPattern(ve,c,L,Ge);return ge.setMaskPattern(Je),Vc.buildMatrix(ve,c,L,Je,Ge),ge.setMatrix(Ge),ge},f.recommendVersion=function(u,c,p,h){var m=this.calculateBitsNeeded(c,p,h,Mi.getVersionForNumber(1)),x=this.chooseVersion(m,u),w=this.calculateBitsNeeded(c,p,h,x);return this.chooseVersion(w,u)},f.calculateBitsNeeded=function(u,c,p,h){return c.getSize()+u.getCharacterCountBits(h)+p.getSize()},f.getAlphanumericCode=function(u){return u<f.ALPHANUMERIC_TABLE.length?f.ALPHANUMERIC_TABLE[u]:-1},f.chooseMode=function(u,c){if(void 0===c&&(c=null),Oe.SJIS.getName()===c&&this.isOnlyDoubleByteKanji(u))return Ln.KANJI;for(var p=!1,h=!1,m=0,x=u.length;m<x;++m){var w=u.charAt(m);if(f.isDigit(w))p=!0;else{if(-1===this.getAlphanumericCode(w.charCodeAt(0)))return Ln.BYTE;h=!0}}return h?Ln.ALPHANUMERIC:p?Ln.NUMERIC:Ln.BYTE},f.isOnlyDoubleByteKanji=function(u){var c;try{c=Nt.encode(u,Oe.SJIS)}catch(x){return!1}var p=c.length;if(p%2!=0)return!1;for(var h=0;h<p;h+=2){var m=255&c[h];if((m<129||m>159)&&(m<224||m>235))return!1}return!0},f.chooseMaskPattern=function(u,c,p,h){for(var m=Number.MAX_SAFE_INTEGER,x=-1,w=0;w<Vh.NUM_MASK_PATTERNS;w++){Vc.buildMatrix(u,c,p,w,h);var b=this.calculateMaskPenalty(h);b<m&&(m=b,x=w)}return x},f.chooseVersion=function(u,c){for(var p=1;p<=40;p++){var h=Mi.getVersionForNumber(p);if(f.willFit(u,h,c))return h}throw new Yn("Data too big")},f.willFit=function(u,c,p){return c.getTotalCodewords()-c.getECBlocksForLevel(p).getTotalECCodewords()>=(u+7)/8},f.terminateBits=function(u,c){var p=8*u;if(c.getSize()>p)throw new Yn("data bits cannot fit in the QR Code"+c.getSize()+" > "+p);for(var h=0;h<4&&c.getSize()<p;++h)c.appendBit(!1);var m=7&c.getSize();if(m>0)for(h=m;h<8;h++)c.appendBit(!1);var x=u-c.getSizeInBytes();for(h=0;h<x;++h)c.appendBits(0==(1&h)?236:17,8);if(c.getSize()!==p)throw new Yn("Bits size does not equal capacity")},f.getNumDataBytesAndNumECBytesForBlockID=function(u,c,p,h,m,x){if(h>=p)throw new Yn("Block ID too large");var w=u%p,b=p-w,R=Math.floor(u/p),L=R+1,V=Math.floor(c/p),H=V+1,j=R-V,K=L-H;if(j!==K)throw new Yn("EC bytes mismatch");if(p!==b+w)throw new Yn("RS blocks mismatch");if(u!==(V+j)*b+(H+K)*w)throw new Yn("Total bytes mismatch");h<b?(m[0]=V,x[0]=j):(m[0]=H,x[0]=K)},f.interleaveWithECBytes=function(u,c,p,h){var m,x,w,b;if(u.getSizeInBytes()!==p)throw new Yn("Number of bits and data bytes does not match");for(var R=0,L=0,V=0,H=new Array,j=0;j<h;++j){var K=new Int32Array(1),oe=new Int32Array(1);f.getNumDataBytesAndNumECBytesForBlockID(c,p,h,j,K,oe);var _e=K[0],ve=new Uint8Array(_e);u.toBytes(8*R,ve,0,_e);var ge=f.generateECBytes(ve,oe[0]);H.push(new Fs(ve,ge)),L=Math.max(L,_e),V=Math.max(V,ge.length),R+=K[0]}if(p!==R)throw new Yn("Data bytes does not match offset");var Ne=new St;for(j=0;j<L;++j)try{for(var Ge=(m=void 0,Ba(H)),Je=Ge.next();!Je.done;Je=Ge.next())j<(ve=Je.value.getDataBytes()).length&&Ne.appendBits(ve[j],8)}catch(qt){m={error:qt}}finally{try{Je&&!Je.done&&(x=Ge.return)&&x.call(Ge)}finally{if(m)throw m.error}}for(j=0;j<V;++j)try{for(var pt=(w=void 0,Ba(H)),Rt=pt.next();!Rt.done;Rt=pt.next())j<(ge=Rt.value.getErrorCorrectionBytes()).length&&Ne.appendBits(ge[j],8)}catch(qt){w={error:qt}}finally{try{Rt&&!Rt.done&&(b=pt.return)&&b.call(pt)}finally{if(w)throw w.error}}if(c!==Ne.getSizeInBytes())throw new Yn("Interleaving error: "+c+" and "+Ne.getSizeInBytes()+" differ.");return Ne},f.generateECBytes=function(u,c){for(var p=u.length,h=new Int32Array(p+c),m=0;m<p;m++)h[m]=255&u[m];new Ci(ft.QR_CODE_FIELD_256).encode(h,c);var x=new Uint8Array(c);for(m=0;m<c;m++)x[m]=h[p+m];return x},f.appendModeInfo=function(u,c){c.appendBits(u.getBits(),4)},f.appendLengthInfo=function(u,c,p,h){var m=p.getCharacterCountBits(c);if(u>=1<<m)throw new Yn(u+" is bigger than "+((1<<m)-1));h.appendBits(u,m)},f.appendBytes=function(u,c,p,h){switch(c){case Ln.NUMERIC:f.appendNumericBytes(u,p);break;case Ln.ALPHANUMERIC:f.appendAlphanumericBytes(u,p);break;case Ln.BYTE:f.append8BitBytes(u,p,h);break;case Ln.KANJI:f.appendKanjiBytes(u,p);break;default:throw new Yn("Invalid mode: "+c)}},f.getDigit=function(u){return u.charCodeAt(0)-48},f.isDigit=function(u){var c=f.getDigit(u);return c>=0&&c<=9},f.appendNumericBytes=function(u,c){for(var p=u.length,h=0;h<p;){var m=f.getDigit(u.charAt(h));if(h+2<p){var x=f.getDigit(u.charAt(h+1)),w=f.getDigit(u.charAt(h+2));c.appendBits(100*m+10*x+w,10),h+=3}else h+1<p?(x=f.getDigit(u.charAt(h+1)),c.appendBits(10*m+x,7),h+=2):(c.appendBits(m,4),h++)}},f.appendAlphanumericBytes=function(u,c){for(var p=u.length,h=0;h<p;){var m=f.getAlphanumericCode(u.charCodeAt(h));if(-1===m)throw new Yn;if(h+1<p){var x=f.getAlphanumericCode(u.charCodeAt(h+1));if(-1===x)throw new Yn;c.appendBits(45*m+x,11),h+=2}else c.appendBits(m,6),h++}},f.append8BitBytes=function(u,c,p){var h;try{h=Nt.encode(u,p)}catch(b){throw new Yn(b)}for(var m=0,x=h.length;m!==x;m++)c.appendBits(h[m],8)},f.appendKanjiBytes=function(u,c){var p;try{p=Nt.encode(u,Oe.SJIS)}catch(V){throw new Yn(V)}for(var h=p.length,m=0;m<h;m+=2){var b=(255&p[m])<<8&4294967295|255&p[m+1],R=-1;if(b>=33088&&b<=40956?R=b-33088:b>=57408&&b<=60351&&(R=b-49472),-1===R)throw new Yn("Invalid byte sequence");c.appendBits(192*(R>>8)+(255&R),13)}},f.appendECI=function(u,c){c.appendBits(Ln.ECI.getBits(),4),c.appendBits(u.getValue(),8)},f.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),f.DEFAULT_BYTE_MODE_ENCODING=Oe.UTF8.getName(),f}(),Yr=(function(){function f(){}f.prototype.encode=function(u,c,p,h,m){if(0===u.length)throw new q("Found empty contents");if(c!==Tt.QR_CODE)throw new q("Can only encode QR_CODE, but got "+c);if(p<0||h<0)throw new q("Requested dimensions are too small: "+p+"x"+h);var x=go.L,w=f.QUIET_ZONE_SIZE;null!==m&&(void 0!==m.get(hr.ERROR_CORRECTION)&&(x=go.fromString(m.get(hr.ERROR_CORRECTION).toString())),void 0!==m.get(hr.MARGIN)&&(w=Number.parseInt(m.get(hr.MARGIN).toString(),10)));var b=_a.encode(u,x,m);return f.renderResult(b,p,h,w)},f.renderResult=function(u,c,p,h){var m=u.getMatrix();if(null===m)throw new $r;for(var x=m.getWidth(),w=m.getHeight(),b=x+2*h,R=w+2*h,L=Math.max(c,b),V=Math.max(p,R),H=Math.min(Math.floor(L/b),Math.floor(V/R)),j=Math.floor((L-x*H)/2),K=Math.floor((V-w*H)/2),oe=new kt(L,V),_e=0,ve=K;_e<w;_e++,ve+=H)for(var ge=0,Ne=j;ge<x;ge++,Ne+=H)1===m.get(ge,_e)&&oe.setRegion(Ne,ve,H,H);return oe},f.QUIET_ZONE_SIZE=4}(),(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}()),Rl=(function(f){function u(c,p,h,m,x,w,b,R){var L=f.call(this,w,b)||this;if(L.yuvData=c,L.dataWidth=p,L.dataHeight=h,L.left=m,L.top=x,m+w>p||x+b>h)throw new q("Crop rectangle does not fit within image data.");return R&&L.reverseHorizontal(w,b),L}Yr(u,f),u.prototype.getRow=function(c,p){if(c<0||c>=this.getHeight())throw new q("Requested row is outside the image: "+c);var h=this.getWidth();return(null==p||p.length<h)&&(p=new Uint8ClampedArray(h)),We.arraycopy(this.yuvData,(c+this.top)*this.dataWidth+this.left,p,0,h),p},u.prototype.getMatrix=function(){var c=this.getWidth(),p=this.getHeight();if(c===this.dataWidth&&p===this.dataHeight)return this.yuvData;var h=c*p,m=new Uint8ClampedArray(h),x=this.top*this.dataWidth+this.left;if(c===this.dataWidth)return We.arraycopy(this.yuvData,x,m,0,h),m;for(var w=0;w<p;w++)We.arraycopy(this.yuvData,x,m,w*c,c),x+=this.dataWidth;return m},u.prototype.isCropSupported=function(){return!0},u.prototype.crop=function(c,p,h,m){return new u(this.yuvData,this.dataWidth,this.dataHeight,this.left+c,this.top+p,h,m,!1)},u.prototype.renderThumbnail=function(){for(var c=this.getWidth()/u.THUMBNAIL_SCALE_FACTOR,p=this.getHeight()/u.THUMBNAIL_SCALE_FACTOR,h=new Int32Array(c*p),m=this.yuvData,x=this.top*this.dataWidth+this.left,w=0;w<p;w++){for(var b=w*c,R=0;R<c;R++)h[b+R]=4278190080|65793*(255&m[x+R*u.THUMBNAIL_SCALE_FACTOR]);x+=this.dataWidth*u.THUMBNAIL_SCALE_FACTOR}return h},u.prototype.getThumbnailWidth=function(){return this.getWidth()/u.THUMBNAIL_SCALE_FACTOR},u.prototype.getThumbnailHeight=function(){return this.getHeight()/u.THUMBNAIL_SCALE_FACTOR},u.prototype.reverseHorizontal=function(c,p){for(var h=this.yuvData,m=0,x=this.top*this.dataWidth+this.left;m<p;m++,x+=this.dataWidth)for(var w=x+c/2,b=x,R=x+c-1;b<w;b++,R--){var L=h[b];h[b]=h[R],h[R]=L}},u.prototype.invert=function(){return new Fr(this)},u.THUMBNAIL_SCALE_FACTOR=2}(Vn),(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}()),Hc=(function(f){function u(c,p,h,m,x,w,b){var R=f.call(this,p,h)||this;if(R.dataWidth=m,R.dataHeight=x,R.left=w,R.top=b,4===c.BYTES_PER_ELEMENT){for(var L=p*h,V=new Uint8ClampedArray(L),H=0;H<L;H++){var j=c[H];V[H]=((j>>16&255)+(j>>7&510)+(255&j))/4&255}R.luminances=V}else R.luminances=c;if(void 0===m&&(R.dataWidth=p),void 0===x&&(R.dataHeight=h),void 0===w&&(R.left=0),void 0===b&&(R.top=0),R.left+p>R.dataWidth||R.top+h>R.dataHeight)throw new q("Crop rectangle does not fit within image data.");return R}Rl(u,f),u.prototype.getRow=function(c,p){if(c<0||c>=this.getHeight())throw new q("Requested row is outside the image: "+c);var h=this.getWidth();return(null==p||p.length<h)&&(p=new Uint8ClampedArray(h)),We.arraycopy(this.luminances,(c+this.top)*this.dataWidth+this.left,p,0,h),p},u.prototype.getMatrix=function(){var c=this.getWidth(),p=this.getHeight();if(c===this.dataWidth&&p===this.dataHeight)return this.luminances;var h=c*p,m=new Uint8ClampedArray(h),x=this.top*this.dataWidth+this.left;if(c===this.dataWidth)return We.arraycopy(this.luminances,x,m,0,h),m;for(var w=0;w<p;w++)We.arraycopy(this.luminances,x,m,w*c,c),x+=this.dataWidth;return m},u.prototype.isCropSupported=function(){return!0},u.prototype.crop=function(c,p,h,m){return new u(this.luminances,h,m,this.dataWidth,this.dataHeight,this.left+c,this.top+p)},u.prototype.invert=function(){return new Fr(this)}}(Vn),(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}()),sc=function(f){function u(){return null!==f&&f.apply(this,arguments)||this}return Hc(u,f),u.forName=function(c){return this.getCharacterSetECIByName(c)},u}(Oe),Sd=function(){function f(){}return f.ISO_8859_1=Oe.ISO8859_1,f}(),Va=function(){function f(){}return f.prototype.isCompact=function(){return this.compact},f.prototype.setCompact=function(u){this.compact=u},f.prototype.getSize=function(){return this.size},f.prototype.setSize=function(u){this.size=u},f.prototype.getLayers=function(){return this.layers},f.prototype.setLayers=function(u){this.layers=u},f.prototype.getCodeWords=function(){return this.codeWords},f.prototype.setCodeWords=function(u){this.codeWords=u},f.prototype.getMatrix=function(){return this.matrix},f.prototype.setMatrix=function(u){this.matrix=u},f}(),jc=function(){function f(){}return f.singletonList=function(u){return[u]},f.min=function(u,c){return u.sort(c)[0]},f}(),If=function(){function f(u){this.previous=u}return f.prototype.getPrevious=function(){return this.previous},f}(),W0=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),ac=function(f){function u(c,p,h){var m=f.call(this,c)||this;return m.value=p,m.bitCount=h,m}return W0(u,f),u.prototype.appendTo=function(c,p){c.appendBits(this.value,this.bitCount)},u.prototype.add=function(c,p){return new u(this,c,p)},u.prototype.addBinaryShift=function(c,p){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new u(this,c,p)},u.prototype.toString=function(){var c=this.value&(1<<this.bitCount)-1;return"<"+Pe.toBinaryString((c|=1<<this.bitCount)|1<<this.bitCount).substring(1)+">"},u}(If),es=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),ts=function(f){function u(c,p,h){var m=f.call(this,c,0,0)||this;return m.binaryShiftStart=p,m.binaryShiftByteCount=h,m}return es(u,f),u.prototype.appendTo=function(c,p){for(var h=0;h<this.binaryShiftByteCount;h++)(0===h||31===h&&this.binaryShiftByteCount<=62)&&(c.appendBits(31,5),this.binaryShiftByteCount>62?c.appendBits(this.binaryShiftByteCount-31,16):c.appendBits(0===h?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),c.appendBits(p[this.binaryShiftStart+h],8)},u.prototype.addBinaryShift=function(c,p){return new u(this,c,p)},u.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},u}(ac);function zi(f,u,c){return new ac(f,u,c)}var Ls=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],uc=new ac(null,0,0),ya=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],z0=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};var Dd=function(f){var u,c;try{for(var p=z0(f),h=p.next();!h.done;h=p.next())lt.fill(h.value,-1)}catch(x){u={error:x}}finally{try{h&&!h.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return f[0][4]=0,f[1][4]=0,f[1][0]=28,f[3][4]=0,f[2][4]=0,f[2][0]=15,f}(lt.createInt32Array(6,6)),Ml=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Fl=function(){function f(u,c,p,h){this.token=u,this.mode=c,this.binaryShiftByteCount=p,this.bitCount=h}return f.prototype.getMode=function(){return this.mode},f.prototype.getToken=function(){return this.token},f.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},f.prototype.getBitCount=function(){return this.bitCount},f.prototype.latchAndAppend=function(u,c){var p=this.bitCount,h=this.token;if(u!==this.mode){var m=ya[this.mode][u];h=zi(h,65535&m,m>>16),p+=m>>16}var x=2===u?4:5;return new f(h=zi(h,c,x),u,0,p+x)},f.prototype.shiftAndAppend=function(u,c){var p=this.token,h=2===this.mode?4:5;return p=zi(p,Dd[this.mode][u],h),new f(p=zi(p,c,5),this.mode,0,this.bitCount+h+5)},f.prototype.addBinaryShiftChar=function(u){var c=this.token,p=this.mode,h=this.bitCount;if(4===this.mode||2===this.mode){var m=ya[p][0];c=zi(c,65535&m,m>>16),h+=m>>16,p=0}var w=new f(c,p,this.binaryShiftByteCount+1,h+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===w.binaryShiftByteCount&&(w=w.endBinaryShift(u+1)),w},f.prototype.endBinaryShift=function(u){if(0===this.binaryShiftByteCount)return this;var c=this.token;return new f(c=function(f,u,c){return new ts(f,u,c)}(c,u-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)},f.prototype.isBetterThanOrEqualTo=function(u){var c=this.bitCount+(ya[this.mode][u.mode]>>16);return this.binaryShiftByteCount<u.binaryShiftByteCount?c+=f.calculateBinaryShiftCost(u)-f.calculateBinaryShiftCost(this):this.binaryShiftByteCount>u.binaryShiftByteCount&&u.binaryShiftByteCount>0&&(c+=10),c<=u.bitCount},f.prototype.toBitArray=function(u){for(var c,p,h=[],m=this.endBinaryShift(u.length).token;null!==m;m=m.getPrevious())h.unshift(m);var x=new St;try{for(var w=Ml(h),b=w.next();!b.done;b=w.next())b.value.appendTo(x,u)}catch(L){c={error:L}}finally{try{b&&!b.done&&(p=w.return)&&p.call(w)}finally{if(c)throw c.error}}return x},f.prototype.toString=function(){return Pt.format("%s bits=%d bytes=%d",Ls[this.mode],this.bitCount,this.binaryShiftByteCount)},f.calculateBinaryShiftCost=function(u){return u.binaryShiftByteCount>62?21:u.binaryShiftByteCount>31?20:u.binaryShiftByteCount>0?10:0},f.INITIAL_STATE=new f(uc,0,0,0),f}();var Us=function(f){var u=Pt.getCharCode(" "),c=Pt.getCharCode("."),p=Pt.getCharCode(",");f[0][u]=1;for(var h=Pt.getCharCode("Z"),m=Pt.getCharCode("A"),x=m;x<=h;x++)f[0][x]=x-m+2;f[1][u]=1;var w=Pt.getCharCode("z"),b=Pt.getCharCode("a");for(x=b;x<=w;x++)f[1][x]=x-b+2;f[2][u]=1;var R=Pt.getCharCode("9"),L=Pt.getCharCode("0");for(x=L;x<=R;x++)f[2][x]=x-L+2;f[2][p]=12,f[2][c]=13;for(var V=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],H=0;H<V.length;H++)f[3][Pt.getCharCode(V[H])]=H;var j=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(H=0;H<j.length;H++)Pt.getCharCode(j[H])>0&&(f[4][Pt.getCharCode(j[H])]=H);return f}(lt.createInt32Array(5,256)),Ft=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Qn=function(){function f(u){this.text=u}return f.prototype.encode=function(){for(var u=Pt.getCharCode(" "),c=Pt.getCharCode("\n"),p=jc.singletonList(Fl.INITIAL_STATE),h=0;h<this.text.length;h++){var m=void 0,x=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case Pt.getCharCode("\r"):m=x===c?2:0;break;case Pt.getCharCode("."):m=x===u?3:0;break;case Pt.getCharCode(","):m=x===u?4:0;break;case Pt.getCharCode(":"):m=x===u?5:0;break;default:m=0}m>0?(p=f.updateStateListForPair(p,h,m),h++):p=this.updateStateListForChar(p,h)}return jc.min(p,function(b,R){return b.getBitCount()-R.getBitCount()}).toBitArray(this.text)},f.prototype.updateStateListForChar=function(u,c){var p,h,m=[];try{for(var x=Ft(u),w=x.next();!w.done;w=x.next())this.updateStateForChar(w.value,c,m)}catch(R){p={error:R}}finally{try{w&&!w.done&&(h=x.return)&&h.call(x)}finally{if(p)throw p.error}}return f.simplifyStates(m)},f.prototype.updateStateForChar=function(u,c,p){for(var h=255&this.text[c],m=Us[u.getMode()][h]>0,x=null,w=0;w<=4;w++){var b=Us[w][h];if(b>0){if(null==x&&(x=u.endBinaryShift(c)),!m||w===u.getMode()||2===w){var R=x.latchAndAppend(w,b);p.push(R)}if(!m&&Dd[u.getMode()][w]>=0){var L=x.shiftAndAppend(w,b);p.push(L)}}}if(u.getBinaryShiftByteCount()>0||0===Us[u.getMode()][h]){var V=u.addBinaryShiftChar(c);p.push(V)}},f.updateStateListForPair=function(u,c,p){var h,m,x=[];try{for(var w=Ft(u),b=w.next();!b.done;b=w.next())this.updateStateForPair(b.value,c,p,x)}catch(L){h={error:L}}finally{try{b&&!b.done&&(m=w.return)&&m.call(w)}finally{if(h)throw h.error}}return this.simplifyStates(x)},f.updateStateForPair=function(u,c,p,h){var m=u.endBinaryShift(c);if(h.push(m.latchAndAppend(4,p)),4!==u.getMode()&&h.push(m.shiftAndAppend(4,p)),3===p||4===p){var x=m.latchAndAppend(2,16-p).latchAndAppend(2,1);h.push(x)}if(u.getBinaryShiftByteCount()>0){var w=u.addBinaryShiftChar(c).addBinaryShiftChar(c+1);h.push(w)}},f.simplifyStates=function(u){var c,p,h,m,x=[];try{for(var w=Ft(u),b=w.next();!b.done;b=w.next()){var R=b.value,L=!0,V=function(_e){if(_e.isBetterThanOrEqualTo(R))return L=!1,"break";R.isBetterThanOrEqualTo(_e)&&(x=x.filter(function(ve){return ve!==_e}))};try{for(var H=(h=void 0,Ft(x)),j=H.next();!j.done&&"break"!==V(j.value);j=H.next());}catch(_e){h={error:_e}}finally{try{j&&!j.done&&(m=H.return)&&m.call(H)}finally{if(h)throw h.error}}L&&x.push(R)}}catch(_e){c={error:_e}}finally{try{b&&!b.done&&(p=w.return)&&p.call(w)}finally{if(c)throw c.error}}return x},f}(),Ur=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},Lo=function(){function f(){}return f.encodeBytes=function(u){return f.encode(u,f.DEFAULT_EC_PERCENT,f.DEFAULT_AZTEC_LAYERS)},f.encode=function(u,c,p){var w,b,R,L,V,h=new Qn(u).encode(),m=Pe.truncDivision(h.getSize()*c,100)+11,x=h.getSize()+m;if(p!==f.DEFAULT_AZTEC_LAYERS){if(w=p<0,(b=Math.abs(p))>(w?f.MAX_NB_BITS_COMPACT:f.MAX_NB_BITS))throw new q(Pt.format("Illegal value %s for layers",p));var H=(R=f.totalBitsInLayer(b,w))-R%(L=f.WORD_SIZE[b]);if((V=f.stuffBits(h,L)).getSize()+m>H)throw new q("Data to large for user specified layer");if(w&&V.getSize()>64*L)throw new q("Data to large for user specified layer")}else{L=0,V=null;for(var j=0;;j++){if(j>f.MAX_NB_BITS)throw new q("Data too large for an Aztec code");if(!(x>(R=f.totalBitsInLayer(b=(w=j<=3)?j+1:j,w)))&&((null==V||L!==f.WORD_SIZE[b])&&(V=f.stuffBits(h,L=f.WORD_SIZE[b])),H=R-R%L,!(w&&V.getSize()>64*L)&&V.getSize()+m<=H))break}}var Ne,K=f.generateCheckWords(V,R,L),oe=V.getSize()/L,_e=f.generateModeMessage(w,b,oe),ve=(w?11:14)+4*b,ge=new Int32Array(ve);if(w)for(Ne=ve,j=0;j<ge.length;j++)ge[j]=j;else{Ne=ve+1+2*Pe.truncDivision(Pe.truncDivision(ve,2)-1,15);var Ge=Pe.truncDivision(ve,2),Je=Pe.truncDivision(Ne,2);for(j=0;j<Ge;j++){var st=j+Pe.truncDivision(j,15);ge[Ge-j-1]=Je-st-1,ge[Ge+j]=Je+st+1}}for(var pt=new kt(Ne),Rt=(j=0,0);j<b;j++){for(var Vt=4*(b-j)+(w?9:12),qt=0;qt<Vt;qt++)for(var Jr=2*qt,_n=0;_n<2;_n++)K.get(Rt+Jr+_n)&&pt.set(ge[2*j+_n],ge[2*j+qt]),K.get(Rt+2*Vt+Jr+_n)&&pt.set(ge[2*j+qt],ge[ve-1-2*j-_n]),K.get(Rt+4*Vt+Jr+_n)&&pt.set(ge[ve-1-2*j-_n],ge[ve-1-2*j-qt]),K.get(Rt+6*Vt+Jr+_n)&&pt.set(ge[ve-1-2*j-qt],ge[2*j+_n]);Rt+=8*Vt}if(f.drawModeMessage(pt,w,Ne,_e),w)f.drawBullsEye(pt,Pe.truncDivision(Ne,2),5);else for(f.drawBullsEye(pt,Pe.truncDivision(Ne,2),7),j=0,qt=0;j<Pe.truncDivision(ve,2)-1;j+=15,qt+=16)for(_n=1&Pe.truncDivision(Ne,2);_n<Ne;_n+=2)pt.set(Pe.truncDivision(Ne,2)-qt,_n),pt.set(Pe.truncDivision(Ne,2)+qt,_n),pt.set(_n,Pe.truncDivision(Ne,2)-qt),pt.set(_n,Pe.truncDivision(Ne,2)+qt);var er=new Va;return er.setCompact(w),er.setSize(Ne),er.setLayers(b),er.setCodeWords(oe),er.setMatrix(pt),er},f.drawBullsEye=function(u,c,p){for(var h=0;h<p;h+=2)for(var m=c-h;m<=c+h;m++)u.set(m,c-h),u.set(m,c+h),u.set(c-h,m),u.set(c+h,m);u.set(c-p,c-p),u.set(c-p+1,c-p),u.set(c-p,c-p+1),u.set(c+p,c-p),u.set(c+p,c-p+1),u.set(c+p,c+p-1)},f.generateModeMessage=function(u,c,p){var h=new St;return u?(h.appendBits(c-1,2),h.appendBits(p-1,6),h=f.generateCheckWords(h,28,4)):(h.appendBits(c-1,5),h.appendBits(p-1,11),h=f.generateCheckWords(h,40,4)),h},f.drawModeMessage=function(u,c,p,h){var m=Pe.truncDivision(p,2);if(c)for(var x=0;x<7;x++){var w=m-3+x;h.get(x)&&u.set(w,m-5),h.get(x+7)&&u.set(m+5,w),h.get(20-x)&&u.set(w,m+5),h.get(27-x)&&u.set(m-5,w)}else for(x=0;x<10;x++)w=m-5+x+Pe.truncDivision(x,5),h.get(x)&&u.set(w,m-7),h.get(x+10)&&u.set(m+7,w),h.get(29-x)&&u.set(w,m+7),h.get(39-x)&&u.set(m-7,w)},f.generateCheckWords=function(u,c,p){var h,m,x=u.getSize()/p,w=new Ci(f.getGF(p)),b=Pe.truncDivision(c,p),R=f.bitsToWords(u,p,b);w.encode(R,b-x);var L=c%p,V=new St;V.appendBits(0,L);try{for(var H=Ur(Array.from(R)),j=H.next();!j.done;j=H.next())V.appendBits(j.value,p)}catch(oe){h={error:oe}}finally{try{j&&!j.done&&(m=H.return)&&m.call(H)}finally{if(h)throw h.error}}return V},f.bitsToWords=function(u,c,p){var m,x,h=new Int32Array(p);for(m=0,x=u.getSize()/c;m<x;m++){for(var w=0,b=0;b<c;b++)w|=u.get(m*c+b)?1<<c-b-1:0;h[m]=w}return h},f.getGF=function(u){switch(u){case 4:return ft.AZTEC_PARAM;case 6:return ft.AZTEC_DATA_6;case 8:return ft.AZTEC_DATA_8;case 10:return ft.AZTEC_DATA_10;case 12:return ft.AZTEC_DATA_12;default:throw new q("Unsupported word size "+u)}},f.stuffBits=function(u,c){for(var p=new St,h=u.getSize(),m=(1<<c)-2,x=0;x<h;x+=c){for(var w=0,b=0;b<c;b++)(x+b>=h||u.get(x+b))&&(w|=1<<c-1-b);(w&m)===m?(p.appendBits(w&m,c),x--):0==(w&m)?(p.appendBits(1|w,c),x--):p.appendBits(w,c)}return p},f.totalBitsInLayer=function(u,c){return((c?88:112)+16*u)*u},f.DEFAULT_EC_PERCENT=33,f.DEFAULT_AZTEC_LAYERS=0,f.MAX_NB_BITS=32,f.MAX_NB_BITS_COMPACT=4,f.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),f}(),bi=(function(){function f(){}f.prototype.encode=function(u,c,p,h){return this.encodeWithHints(u,c,p,h,null)},f.prototype.encodeWithHints=function(u,c,p,h,m){var x=Sd.ISO_8859_1,w=Lo.DEFAULT_EC_PERCENT,b=Lo.DEFAULT_AZTEC_LAYERS;return null!=m&&(m.has(hr.CHARACTER_SET)&&(x=sc.forName(m.get(hr.CHARACTER_SET).toString())),m.has(hr.ERROR_CORRECTION)&&(w=Pe.parseInt(m.get(hr.ERROR_CORRECTION).toString())),m.has(hr.AZTEC_LAYERS)&&(b=Pe.parseInt(m.get(hr.AZTEC_LAYERS).toString()))),f.encodeLayers(u,c,p,h,x,w,b)},f.encodeLayers=function(u,c,p,h,m,x,w){if(c!==Tt.AZTEC)throw new q("Can only encode AZTEC, but got "+c);var b=Lo.encode(Pt.getBytes(u,m),x,w);return f.renderResult(b,p,h)},f.renderResult=function(u,c,p){var h=u.getMatrix();if(null==h)throw new $r;for(var m=h.getWidth(),x=h.getHeight(),w=Math.max(c,m),b=Math.max(p,x),R=Math.min(w/m,b/x),L=(w-m*R)/2,V=(b-x*R)/2,H=new kt(w,b),j=0,K=V;j<x;j++,K+=R)for(var oe=0,_e=L;oe<m;oe++,_e+=R)h.get(oe,j)&&H.setRegion(_e,K,R,R);return H}}(),function(){function f(u){this.newPosition=u}return f.prototype.getNewPosition=function(){return this.newPosition},f}()),Gc=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Si=function(f){function u(c,p){var h=f.call(this,c)||this;return h.value=p,h}return Gc(u,f),u.prototype.getValue=function(){return this.value},u.prototype.isFNC1=function(){return this.value===u.FNC1},u.FNC1="$",u}(bi),jt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),cc=function(f){function u(c,p,h){var m=f.call(this,c)||this;if(p<0||p>10||h<0||h>10)throw new de;return m.firstDigit=p,m.secondDigit=h,m}return jt(u,f),u.prototype.getFirstDigit=function(){return this.firstDigit},u.prototype.getSecondDigit=function(){return this.secondDigit},u.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},u.prototype.isFirstDigitFNC1=function(){return this.firstDigit==u.FNC1},u.prototype.isSecondDigitFNC1=function(){return this.secondDigit==u.FNC1},u.prototype.isAnyFNC1=function(){return this.firstDigit===u.FNC1||this.secondDigit===u.FNC1},u.FNC1=10,u}(bi),Hs=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Xr=function(f){function u(c,p,h){var m=f.call(this,c)||this;return h?(m.remaining=!0,m.remainingValue=m.remainingValue):(m.remaining=!1,m.remainingValue=0),m.newString=p,m}return Hs(u,f),u.prototype.getNewString=function(){return this.newString},u.prototype.isRemaining=function(){return this.remaining},u.prototype.getRemainingValue=function(){return this.remainingValue},u}(bi),Wc=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},zc=function(){function f(){}return f.parseFieldsInGeneralPurpose=function(u){var c,p,h,m,x,w,b,R;if(!u)return null;if(u.length<2)throw new Re;var L=u.substring(0,2);try{for(var V=Wc(f.TWO_DIGIT_DATA_LENGTH),H=V.next();!H.done;H=V.next())if((j=H.value)[0]===L)return j[1]===f.VARIABLE_LENGTH?f.processVariableAI(2,j[2],u):f.processFixedAI(2,j[1],u)}catch(st){c={error:st}}finally{try{H&&!H.done&&(p=V.return)&&p.call(V)}finally{if(c)throw c.error}}if(u.length<3)throw new Re;var K=u.substring(0,3);try{for(var oe=Wc(f.THREE_DIGIT_DATA_LENGTH),_e=oe.next();!_e.done;_e=oe.next())if((j=_e.value)[0]===K)return j[1]===f.VARIABLE_LENGTH?f.processVariableAI(3,j[2],u):f.processFixedAI(3,j[1],u)}catch(st){h={error:st}}finally{try{_e&&!_e.done&&(m=oe.return)&&m.call(oe)}finally{if(h)throw h.error}}try{for(var ve=Wc(f.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),ge=ve.next();!ge.done;ge=ve.next())if((j=ge.value)[0]===K)return j[1]===f.VARIABLE_LENGTH?f.processVariableAI(4,j[2],u):f.processFixedAI(4,j[1],u)}catch(st){x={error:st}}finally{try{ge&&!ge.done&&(w=ve.return)&&w.call(ve)}finally{if(x)throw x.error}}if(u.length<4)throw new Re;var Ne=u.substring(0,4);try{for(var Ge=Wc(f.FOUR_DIGIT_DATA_LENGTH),Je=Ge.next();!Je.done;Je=Ge.next()){var j;if((j=Je.value)[0]===Ne)return j[1]===f.VARIABLE_LENGTH?f.processVariableAI(4,j[2],u):f.processFixedAI(4,j[1],u)}}catch(st){b={error:st}}finally{try{Je&&!Je.done&&(R=Ge.return)&&R.call(Ge)}finally{if(b)throw b.error}}throw new Re},f.processFixedAI=function(u,c,p){if(p.length<u)throw new Re;var h=p.substring(0,u);if(p.length<u+c)throw new Re;var m=p.substring(u,u+c),x=p.substring(u+c),w="("+h+")"+m,b=f.parseFieldsInGeneralPurpose(x);return null==b?w:w+b},f.processVariableAI=function(u,c,p){var m,h=p.substring(0,u),x=p.substring(u,m=p.length<u+c?p.length:u+c),w=p.substring(m),b="("+h+")"+x,R=f.parseFieldsInGeneralPurpose(w);return null==R?b:b+R},f.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",f.VARIABLE_LENGTH=[],20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",f.VARIABLE_LENGTH,20],["22",f.VARIABLE_LENGTH,29],["30",f.VARIABLE_LENGTH,8],["37",f.VARIABLE_LENGTH,8],["90",f.VARIABLE_LENGTH,30],["91",f.VARIABLE_LENGTH,30],["92",f.VARIABLE_LENGTH,30],["93",f.VARIABLE_LENGTH,30],["94",f.VARIABLE_LENGTH,30],["95",f.VARIABLE_LENGTH,30],["96",f.VARIABLE_LENGTH,30],["97",f.VARIABLE_LENGTH,3],["98",f.VARIABLE_LENGTH,30],["99",f.VARIABLE_LENGTH,30]],f.THREE_DIGIT_DATA_LENGTH=[["240",f.VARIABLE_LENGTH,30],["241",f.VARIABLE_LENGTH,30],["242",f.VARIABLE_LENGTH,6],["250",f.VARIABLE_LENGTH,30],["251",f.VARIABLE_LENGTH,30],["253",f.VARIABLE_LENGTH,17],["254",f.VARIABLE_LENGTH,20],["400",f.VARIABLE_LENGTH,30],["401",f.VARIABLE_LENGTH,30],["402",17],["403",f.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",f.VARIABLE_LENGTH,20],["421",f.VARIABLE_LENGTH,15],["422",3],["423",f.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],f.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",f.VARIABLE_LENGTH,15],["391",f.VARIABLE_LENGTH,18],["392",f.VARIABLE_LENGTH,15],["393",f.VARIABLE_LENGTH,18],["703",f.VARIABLE_LENGTH,30]],f.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",f.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",f.VARIABLE_LENGTH,20],["8003",f.VARIABLE_LENGTH,30],["8004",f.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",f.VARIABLE_LENGTH,30],["8008",f.VARIABLE_LENGTH,12],["8018",18],["8020",f.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",f.VARIABLE_LENGTH,70],["8200",f.VARIABLE_LENGTH,70]],f}(),ns=function(){function f(u,c){c?this.decodedInformation=null:(this.finished=u,this.decodedInformation=c)}return f.prototype.getDecodedInformation=function(){return this.decodedInformation},f.prototype.isFinished=function(){return this.finished},f}(),Bo=function(){function f(u){this.buffer=new tn,this.information=u}return f.prototype.decodeAllCodes=function(u,c){for(var p=c,h=null;;){var m=this.decodeGeneralPurposeField(p,h),x=zc.parseFieldsInGeneralPurpose(m.getNewString());if(null!=x&&u.append(x),h=m.isRemaining()?""+m.getRemainingValue():null,p==m.getNewPosition())break;p=m.getNewPosition()}return u.toString()},f.prototype.isStillNumeric=function(u){if(u+7>this.information.getSize())return u+4<=this.information.getSize();for(var c=u;c<u+3;++c)if(this.information.get(c))return!0;return this.information.get(u+3)},f.prototype.decodeNumeric=function(u){if(u+7>this.information.getSize()){var c=this.extractNumericValueFromBitArray(u,4);return new cc(this.information.getSize(),0==c?cc.FNC1:c-1,cc.FNC1)}var p=this.extractNumericValueFromBitArray(u,7);return new cc(u+7,(p-8)/11,(p-8)%11)},f.prototype.extractNumericValueFromBitArray=function(u,c){return f.extractNumericValueFromBitArray(this.information,u,c)},f.extractNumericValueFromBitArray=function(u,c,p){for(var h=0,m=0;m<p;++m)u.get(c+m)&&(h|=1<<p-m-1);return h},f.prototype.decodeGeneralPurposeField=function(u,c){this.buffer.setLengthToZero(),null!=c&&this.buffer.append(c),this.current.setPosition(u);var p=this.parseBlocks();return null!=p&&p.isRemaining()?new Xr(this.current.getPosition(),this.buffer.toString(),p.getRemainingValue()):new Xr(this.current.getPosition(),this.buffer.toString())},f.prototype.parseBlocks=function(){var u,c;do{var p=this.current.getPosition();if(u=this.current.isAlpha()?(c=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(c=this.parseIsoIec646Block()).isFinished():(c=this.parseNumericBlock()).isFinished(),p==this.current.getPosition()&&!u)break}while(!u);return c.getDecodedInformation()},f.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var u=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFirstDigitFNC1()){var c=void 0;return c=u.isSecondDigitFNC1()?new Xr(this.current.getPosition(),this.buffer.toString()):new Xr(this.current.getPosition(),this.buffer.toString(),u.getSecondDigit()),new ns(!0,c)}if(this.buffer.append(u.getFirstDigit()),u.isSecondDigitFNC1())return c=new Xr(this.current.getPosition(),this.buffer.toString()),new ns(!0,c);this.buffer.append(u.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ns(!1)},f.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var u=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFNC1()){var c=new Xr(this.current.getPosition(),this.buffer.toString());return new ns(!0,c)}this.buffer.append(u.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ns(!1)},f.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var u=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFNC1()){var c=new Xr(this.current.getPosition(),this.buffer.toString());return new ns(!0,c)}this.buffer.append(u.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ns(!1)},f.prototype.isStillIsoIec646=function(u){if(u+5>this.information.getSize())return!1;var c=this.extractNumericValueFromBitArray(u,5);if(c>=5&&c<16)return!0;if(u+7>this.information.getSize())return!1;var p=this.extractNumericValueFromBitArray(u,7);if(p>=64&&p<116)return!0;if(u+8>this.information.getSize())return!1;var h=this.extractNumericValueFromBitArray(u,8);return h>=232&&h<253},f.prototype.decodeIsoIec646=function(u){var c=this.extractNumericValueFromBitArray(u,5);if(15==c)return new Si(u+5,Si.FNC1);if(c>=5&&c<15)return new Si(u+5,"0"+(c-5));var m,p=this.extractNumericValueFromBitArray(u,7);if(p>=64&&p<90)return new Si(u+7,""+(p+1));if(p>=90&&p<116)return new Si(u+7,""+(p+7));switch(this.extractNumericValueFromBitArray(u,8)){case 232:m="!";break;case 233:m='"';break;case 234:m="%";break;case 235:m="&";break;case 236:m="'";break;case 237:m="(";break;case 238:m=")";break;case 239:m="*";break;case 240:m="+";break;case 241:m=",";break;case 242:m="-";break;case 243:m=".";break;case 244:m="/";break;case 245:m=":";break;case 246:m=";";break;case 247:m="<";break;case 248:m="=";break;case 249:m=">";break;case 250:m="?";break;case 251:m="_";break;case 252:m=" ";break;default:throw new de}return new Si(u+8,m)},f.prototype.isStillAlpha=function(u){if(u+5>this.information.getSize())return!1;var c=this.extractNumericValueFromBitArray(u,5);if(c>=5&&c<16)return!0;if(u+6>this.information.getSize())return!1;var p=this.extractNumericValueFromBitArray(u,6);return p>=16&&p<63},f.prototype.decodeAlphanumeric=function(u){var c=this.extractNumericValueFromBitArray(u,5);if(15==c)return new Si(u+5,Si.FNC1);if(c>=5&&c<15)return new Si(u+5,"0"+(c-5));var h,p=this.extractNumericValueFromBitArray(u,6);if(p>=32&&p<58)return new Si(u+6,""+(p+33));switch(p){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new $r("Decoding invalid alphanumeric value: "+p)}return new Si(u+6,h)},f.prototype.isAlphaTo646ToAlphaLatch=function(u){if(u+1>this.information.getSize())return!1;for(var c=0;c<5&&c+u<this.information.getSize();++c)if(2==c){if(!this.information.get(u+2))return!1}else if(this.information.get(u+c))return!1;return!0},f.prototype.isAlphaOr646ToNumericLatch=function(u){if(u+3>this.information.getSize())return!1;for(var c=u;c<u+3;++c)if(this.information.get(c))return!1;return!0},f.prototype.isNumericToAlphaNumericLatch=function(u){if(u+1>this.information.getSize())return!1;for(var c=0;c<4&&c+u<this.information.getSize();++c)if(this.information.get(u+c))return!1;return!0},f}(),lc=function(){function f(u){this.information=u,this.generalDecoder=new Bo(u)}return f.prototype.getInformation=function(){return this.information},f.prototype.getGeneralDecoder=function(){return this.generalDecoder},f}(),Ua=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Hr=function(f){function u(c){return f.call(this,c)||this}return Ua(u,f),u.prototype.encodeCompressedGtin=function(c,p){c.append("(01)");var h=c.length();c.append("9"),this.encodeCompressedGtinWithoutAI(c,p,h)},u.prototype.encodeCompressedGtinWithoutAI=function(c,p,h){for(var m=0;m<4;++m){var x=this.getGeneralDecoder().extractNumericValueFromBitArray(p+10*m,10);x/100==0&&c.append("0"),x/10==0&&c.append("0"),c.append(x)}u.appendCheckDigit(c,h)},u.appendCheckDigit=function(c,p){for(var h=0,m=0;m<13;m++){var x=c.charAt(m+p).charCodeAt(0)-"0".charCodeAt(0);h+=0==(1&m)?3*x:x}10==(h=10-h%10)&&(h=0),c.append(h)},u.GTIN_SIZE=40,u}(lc),Ha=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),js=function(f){function u(c){return f.call(this,c)||this}return Ha(u,f),u.prototype.parseInformation=function(){var c=new tn;c.append("(01)");var p=c.length(),h=this.getGeneralDecoder().extractNumericValueFromBitArray(u.HEADER_SIZE,4);return c.append(h),this.encodeCompressedGtinWithoutAI(c,u.HEADER_SIZE+4,p),this.getGeneralDecoder().decodeAllCodes(c,u.HEADER_SIZE+44)},u.HEADER_SIZE=4,u}(Hr),xa=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),dc=function(f){function u(c){return f.call(this,c)||this}return xa(u,f),u.prototype.parseInformation=function(){var c=new tn;return this.getGeneralDecoder().decodeAllCodes(c,u.HEADER_SIZE)},u.HEADER_SIZE=5,u}(lc),$c=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),ao=function(f){function u(c){return f.call(this,c)||this}return $c(u,f),u.prototype.encodeCompressedWeight=function(c,p,h){var m=this.getGeneralDecoder().extractNumericValueFromBitArray(p,h);this.addWeightCode(c,m);for(var x=this.checkWeight(m),w=1e5,b=0;b<5;++b)x/w==0&&c.append("0"),w/=10;c.append(x)},u}(Hr),Od=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),qc=function(f){function u(c){return f.call(this,c)||this}return Od(u,f),u.prototype.parseInformation=function(){if(this.getInformation().getSize()!=u.HEADER_SIZE+ao.GTIN_SIZE+u.WEIGHT_SIZE)throw new Re;var c=new tn;return this.encodeCompressedGtin(c,u.HEADER_SIZE),this.encodeCompressedWeight(c,u.HEADER_SIZE+ao.GTIN_SIZE,u.WEIGHT_SIZE),c.toString()},u.HEADER_SIZE=5,u.WEIGHT_SIZE=15,u}(ao),Qr=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),bf=function(f){function u(c){return f.call(this,c)||this}return Qr(u,f),u.prototype.addWeightCode=function(c,p){c.append("(3103)")},u.prototype.checkWeight=function(c){return c},u}(qc),Rd=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Jn=function(f){function u(c){return f.call(this,c)||this}return Rd(u,f),u.prototype.addWeightCode=function(c,p){c.append(p<1e4?"(3202)":"(3203)")},u.prototype.checkWeight=function(c){return c<1e4?c:c-1e4},u}(qc),kl=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),fc=function(f){function u(c){return f.call(this,c)||this}return kl(u,f),u.prototype.parseInformation=function(){if(this.getInformation().getSize()<u.HEADER_SIZE+Hr.GTIN_SIZE)throw new Re;var c=new tn;this.encodeCompressedGtin(c,u.HEADER_SIZE);var p=this.getGeneralDecoder().extractNumericValueFromBitArray(u.HEADER_SIZE+Hr.GTIN_SIZE,u.LAST_DIGIT_SIZE);c.append("(392"),c.append(p),c.append(")");var h=this.getGeneralDecoder().decodeGeneralPurposeField(u.HEADER_SIZE+Hr.GTIN_SIZE+u.LAST_DIGIT_SIZE,null);return c.append(h.getNewString()),c.toString()},u.HEADER_SIZE=8,u.LAST_DIGIT_SIZE=2,u}(Hr),Nd=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Ll=function(f){function u(c){return f.call(this,c)||this}return Nd(u,f),u.prototype.parseInformation=function(){if(this.getInformation().getSize()<u.HEADER_SIZE+Hr.GTIN_SIZE)throw new Re;var c=new tn;this.encodeCompressedGtin(c,u.HEADER_SIZE);var p=this.getGeneralDecoder().extractNumericValueFromBitArray(u.HEADER_SIZE+Hr.GTIN_SIZE,u.LAST_DIGIT_SIZE);c.append("(393"),c.append(p),c.append(")");var h=this.getGeneralDecoder().extractNumericValueFromBitArray(u.HEADER_SIZE+Hr.GTIN_SIZE+u.LAST_DIGIT_SIZE,u.FIRST_THREE_DIGITS_SIZE);h/100==0&&c.append("0"),h/10==0&&c.append("0"),c.append(h);var m=this.getGeneralDecoder().decodeGeneralPurposeField(u.HEADER_SIZE+Hr.GTIN_SIZE+u.LAST_DIGIT_SIZE+u.FIRST_THREE_DIGITS_SIZE,null);return c.append(m.getNewString()),c.toString()},u.HEADER_SIZE=8,u.LAST_DIGIT_SIZE=2,u.FIRST_THREE_DIGITS_SIZE=10,u}(Hr),Sf=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),Gs=function(f){function u(c,p,h){var m=f.call(this,c)||this;return m.dateCode=h,m.firstAIdigits=p,m}return Sf(u,f),u.prototype.parseInformation=function(){if(this.getInformation().getSize()!=u.HEADER_SIZE+u.GTIN_SIZE+u.WEIGHT_SIZE+u.DATE_SIZE)throw new Re;var c=new tn;return this.encodeCompressedGtin(c,u.HEADER_SIZE),this.encodeCompressedWeight(c,u.HEADER_SIZE+u.GTIN_SIZE,u.WEIGHT_SIZE),this.encodeCompressedDate(c,u.HEADER_SIZE+u.GTIN_SIZE+u.WEIGHT_SIZE),c.toString()},u.prototype.encodeCompressedDate=function(c,p){var h=this.getGeneralDecoder().extractNumericValueFromBitArray(p,u.DATE_SIZE);if(38400!=h){c.append("("),c.append(this.dateCode),c.append(")");var m=h%32,x=(h/=32)%12+1,w=h/=12;w/10==0&&c.append("0"),c.append(w),x/10==0&&c.append("0"),c.append(x),m/10==0&&c.append("0"),c.append(m)}},u.prototype.addWeightCode=function(c,p){c.append("("),c.append(this.firstAIdigits),c.append(p/1e5),c.append(")")},u.prototype.checkWeight=function(c){return c%1e5},u.HEADER_SIZE=8,u.WEIGHT_SIZE=20,u.DATE_SIZE=16,u}(ao);var Pd=function(){function f(u,c,p,h){this.leftchar=u,this.rightchar=c,this.finderpattern=p,this.maybeLast=h}return f.prototype.mayBeLast=function(){return this.maybeLast},f.prototype.getLeftChar=function(){return this.leftchar},f.prototype.getRightChar=function(){return this.rightchar},f.prototype.getFinderPattern=function(){return this.finderpattern},f.prototype.mustBeLast=function(){return null==this.rightchar},f.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},f.equals=function(u,c){return u instanceof f&&f.equalsOrNull(u.leftchar,c.leftchar)&&f.equalsOrNull(u.rightchar,c.rightchar)&&f.equalsOrNull(u.finderpattern,c.finderpattern)},f.equalsOrNull=function(u,c){return null===u?null===c:f.equals(u,c)},f.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},f.hashNotNull=function(u){return null===u?0:u.hashCode()},f}(),q0=function(){function f(u,c,p){this.pairs=u,this.rowNumber=c,this.wasReversed=p}return f.prototype.getPairs=function(){return this.pairs},f.prototype.getRowNumber=function(){return this.rowNumber},f.prototype.isReversed=function(){return this.wasReversed},f.prototype.isEquivalent=function(u){return this.checkEqualitity(this,u)},f.prototype.toString=function(){return"{ "+this.pairs+" }"},f.prototype.equals=function(u,c){return u instanceof f&&this.checkEqualitity(u,c)&&u.wasReversed===c.wasReversed},f.prototype.checkEqualitity=function(u,c){var p;if(u&&c)return u.forEach(function(h,m){c.forEach(function(x){h.getLeftChar().getValue()===x.getLeftChar().getValue()&&h.getRightChar().getValue()===x.getRightChar().getValue()&&h.getFinderPatter().getValue()===x.getFinderPatter().getValue()&&(p=!0)})}),p},f}(),Md=function(){function f(){}return f.buildBitArray=function(u){var c=2*u.length-1;null==u[u.length-1].getRightChar()&&(c-=1);for(var h=new St(12*c),m=0,w=u[0].getRightChar().getValue(),b=11;b>=0;--b)0!=(w&1<<b)&&h.set(m),m++;for(b=1;b<u.length;++b){for(var R=u[b],L=R.getLeftChar().getValue(),V=11;V>=0;--V)0!=(L&1<<V)&&h.set(m),m++;if(null!=R.getRightChar()){var H=R.getRightChar().getValue();for(V=11;V>=0;--V)0!=(H&1<<V)&&h.set(m),m++}}return h},f}(),Zc=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__extends:void 0)||function(){var f=function(u,c){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])})(u,c)};return function(u,c){function p(){this.constructor=u}f(u,c),u.prototype=null===c?Object.create(c):(p.prototype=c.prototype,new p)}}(),$i=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__values:void 0)||function(f){var u="function"==typeof Symbol&&Symbol.iterator,c=u&&f[u],p=0;if(c)return c.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(f){function u(){var c=null!==f&&f.apply(this,arguments)||this;return c.pairs=new Array(u.MAX_PAIRS),c.rows=new Array,c.startEnd=[2],c}Zc(u,f),u.prototype.decodeRow=function(c,p,h){this.pairs.length=0,this.startFromEven=!1;try{return u.constructResult(this.decodeRow2pairs(c,p))}catch(m){console.log(m)}return this.pairs.length=0,this.startFromEven=!0,u.constructResult(this.decodeRow2pairs(c,p))},u.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},u.prototype.decodeRow2pairs=function(c,p){for(var h=!1;!h;)try{this.pairs.push(this.retrieveNextPair(p,this.pairs,c))}catch(w){if(!this.pairs.length)throw new w;h=!0}if(this.checkChecksum())return this.pairs;var m;if(m=!!this.rows.length,this.storeRow(c,!1),m){var x=this.checkRowsBoolean(!1);if(null!=x||null!=(x=this.checkRowsBoolean(!0)))return x}throw new Re},u.prototype.checkRowsBoolean=function(c){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,c&&(this.rows=this.rows.reverse());var p=null;try{p=this.checkRows(new Array,0)}catch(h){console.log(h)}return c&&(this.rows=this.rows.reverse()),p},u.prototype.checkRows=function(c,p){for(var h,m,x=p;x<this.rows.length;x++){var w=this.rows[x];this.pairs.length=0;try{for(var b=(h=void 0,$i(c)),R=b.next();!R.done;R=b.next())this.pairs.push(R.value.getPairs())}catch(H){h={error:H}}finally{try{R&&!R.done&&(m=b.return)&&m.call(b)}finally{if(h)throw h.error}}if(this.pairs.push(w.getPairs()),u.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var V=new Array(c);V.push(w);try{return this.checkRows(V,x+1)}catch(H){console.log(H)}}}throw new Re},u.isValidSequence=function(c){var p,h;try{for(var m=$i(u.FINDER_PATTERN_SEQUENCES),x=m.next();!x.done;x=m.next()){var w=x.value;if(!(c.length>w.length)){for(var b=!0,R=0;R<c.length;R++)if(c[R].getFinderPattern().getValue()!=w[R]){b=!1;break}if(b)return!0}}}catch(L){p={error:L}}finally{try{x&&!x.done&&(h=m.return)&&h.call(m)}finally{if(p)throw p.error}}return!1},u.prototype.storeRow=function(c,p){for(var h=0,m=!1,x=!1;h<this.rows.length;){var w=this.rows[h];if(w.getRowNumber()>c){x=w.isEquivalent(this.pairs);break}m=w.isEquivalent(this.pairs),h++}x||m||u.isPartialRow(this.pairs,this.rows)||(this.rows.push(h,new q0(this.pairs,c,p)),this.removePartialRows(this.pairs,this.rows))},u.prototype.removePartialRows=function(c,p){var h,m,x,w,b,R;try{for(var L=$i(p),V=L.next();!V.done;V=L.next()){var H=V.value;if(H.getPairs().length!==c.length)try{for(var K=(x=void 0,$i(H.getPairs())),oe=K.next();!oe.done;oe=K.next()){var _e=oe.value;try{for(var ge=(b=void 0,$i(c)),Ne=ge.next();!Ne.done&&!Pd.equals(_e,Ne.value);Ne=ge.next());}catch(Je){b={error:Je}}finally{try{Ne&&!Ne.done&&(R=ge.return)&&R.call(ge)}finally{if(b)throw b.error}}}}catch(Je){x={error:Je}}finally{try{oe&&!oe.done&&(w=K.return)&&w.call(K)}finally{if(x)throw x.error}}}}catch(Je){h={error:Je}}finally{try{V&&!V.done&&(m=L.return)&&m.call(L)}finally{if(h)throw h.error}}},u.isPartialRow=function(c,p){var h,m,x,w,b,R;try{for(var L=$i(p),V=L.next();!V.done;V=L.next()){var H=V.value,j=!0;try{for(var K=(x=void 0,$i(c)),oe=K.next();!oe.done;oe=K.next()){var _e=oe.value,ve=!1;try{for(var ge=(b=void 0,$i(H.getPairs())),Ne=ge.next();!Ne.done;Ne=ge.next())if(_e.equals(Ne.value)){ve=!0;break}}catch(Je){b={error:Je}}finally{try{Ne&&!Ne.done&&(R=ge.return)&&R.call(ge)}finally{if(b)throw b.error}}if(!ve){j=!1;break}}}catch(Je){x={error:Je}}finally{try{oe&&!oe.done&&(w=K.return)&&w.call(K)}finally{if(x)throw x.error}}if(j)return!0}}catch(Je){h={error:Je}}finally{try{V&&!V.done&&(m=L.return)&&m.call(L)}finally{if(h)throw h.error}}return!1},u.prototype.getRows=function(){return this.rows},u.constructResult=function(c){var m=function(f){try{if(f.get(1))return new js(f);if(!f.get(2))return new dc(f);switch(Bo.extractNumericValueFromBitArray(f,1,4)){case 4:return new bf(f);case 5:return new Jn(f)}switch(Bo.extractNumericValueFromBitArray(f,1,5)){case 12:return new fc(f);case 13:return new Ll(f)}switch(Bo.extractNumericValueFromBitArray(f,1,7)){case 56:return new Gs(f,"310","11");case 57:return new Gs(f,"320","11");case 58:return new Gs(f,"310","13");case 59:return new Gs(f,"320","13");case 60:return new Gs(f,"310","15");case 61:return new Gs(f,"320","15");case 62:return new Gs(f,"310","17");case 63:return new Gs(f,"320","17")}}catch(h){throw console.log(h),new $r("unknown decoder: "+f)}}(Md.buildBitArray(c)).parseInformation(),x=c[0].getFinderPattern().getResultPoints(),w=c[c.length-1].getFinderPattern().getResultPoints();return new kr(m,null,null,[x[0],x[1],w[0],w[1]],Tt.RSS_EXPANDED,null)},u.prototype.checkChecksum=function(){var c=this.pairs.get(0),p=c.getLeftChar(),h=c.getRightChar();if(null==h)return!1;for(var m=h.getChecksumPortion(),x=2,w=1;w<this.pairs.size();++w){var b=this.pairs.get(w);m+=b.getLeftChar().getChecksumPortion(),x++;var R=b.getRightChar();null!=R&&(m+=R.getChecksumPortion(),x++)}return 211*(x-4)+(m%=211)==p.getValue()},u.getNextSecondBar=function(c,p){var h;return c.get(p)?(h=c.getNextUnset(p),h=c.getNextSet(h)):(h=c.getNextSet(p),h=c.getNextUnset(h)),h},u.prototype.retrieveNextPair=function(c,p,h){var m=p.length%2==0;this.startFromEven&&(m=!m);var x,w=!0,b=-1;do{this.findNextPair(c,p,b),null==(x=this.parseFoundFinderPattern(c,h,m))?b=u.getNextSecondBar(c,this.startEnd[0]):w=!1}while(w);var L,R=this.decodeDataCharacter(c,x,m,!0);if(!this.isEmptyPair(p)&&p[p.length-1].mustBeLast())throw new Re;try{L=this.decodeDataCharacter(c,x,m,!1)}catch(V){L=null,console.log(V)}return new Pd(R,L,x,!0)},u.prototype.isEmptyPair=function(c){return 0===c.length},u.prototype.findNextPair=function(c,p,h){var m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;var w,x=c.getSize();w=h>=0?h:this.isEmptyPair(p)?0:p[p.length-1].getFinderPattern().getStartEnd()[1];var R=p.length%2!=0;this.startFromEven&&(R=!R);for(var L=!1;w<x&&(L=!c.get(w));)w++;for(var V=0,H=w,j=w;j<x;j++)if(c.get(j)!=L)m[V]++;else{if(3==V){if(R&&u.reverseCounters(m),u.isFinderPattern(m))return this.startEnd[0]=H,void(this.startEnd[1]=j);R&&u.reverseCounters(m),H+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,V--}else V++;m[V]=1,L=!L}throw new Re},u.reverseCounters=function(c){for(var p=c.length,h=0;h<p/2;++h){var m=c[h];c[h]=c[p-h-1],c[p-h-1]=m}},u.prototype.parseFoundFinderPattern=function(c,p,h){var m,x,w;if(h){for(var b=this.startEnd[0]-1;b>=0&&!c.get(b);)b--;b++,m=this.startEnd[0]-b,x=b,w=this.startEnd[1]}else x=this.startEnd[0],m=(w=c.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var L,R=this.getDecodeFinderCounters();We.arraycopy(R,0,R,1,R.length-1),R[0]=m;try{L=this.parseFinderValue(R,u.FINDER_PATTERNS)}catch(V){return null}return new Ri(L,[x,w],x,w,p)},u.prototype.decodeDataCharacter=function(c,p,h,m){for(var x=this.getDataCharacterCounters(),w=0;w<x.length;w++)x[w]=0;if(m)u.recordPatternInReverse(c,p.getStartEnd()[0],x);else{u.recordPattern(c,p.getStartEnd()[1],x);for(var b=0,R=x.length-1;b<R;b++,R--){var L=x[b];x[b]=x[R],x[R]=L}}var H=ue.sum(new Int32Array(x))/17,j=(p.getStartEnd()[1]-p.getStartEnd()[0])/15;if(Math.abs(H-j)/j>.3)throw new Re;var K=this.getOddCounts(),oe=this.getEvenCounts(),_e=this.getOddRoundingErrors(),ve=this.getEvenRoundingErrors();for(b=0;b<x.length;b++){var ge=1*x[b]/H,Ne=ge+.5;if(Ne<1){if(ge<.3)throw new Re;Ne=1}else if(Ne>8){if(ge>8.7)throw new Re;Ne=8}var Ge=b/2;0==(1&b)?(K[Ge]=Ne,_e[Ge]=ge-Ne):(oe[Ge]=Ne,ve[Ge]=ge-Ne)}this.adjustOddEvenCounts(17);var Je=4*p.getValue()+(h?0:2)+(m?0:1)-1,st=0,pt=0;for(b=K.length-1;b>=0;b--)u.isNotA1left(p,h,m)&&(pt+=K[b]*u.WEIGHTS[Je][2*b]),st+=K[b];var Vt=0;for(b=oe.length-1;b>=0;b--)u.isNotA1left(p,h,m)&&(Vt+=oe[b]*u.WEIGHTS[Je][2*b+1]);var qt=pt+Vt;if(0!=(1&st)||st>13||st<4)throw new Re;var Jr=(13-st)/2,_n=u.SYMBOL_WIDEST[Jr],er=9-_n,hi=lr.getRSSvalue(K,_n,!0),rs=lr.getRSSvalue(oe,er,!1);return new mt(hi*u.EVEN_TOTAL_SUBSET[Jr]+rs+u.GSUM[Jr],qt)},u.isNotA1left=function(c,p,h){return!(0==c.getValue()&&p&&h)},u.prototype.adjustOddEvenCounts=function(c){var p=ue.sum(new Int32Array(this.getOddCounts())),h=ue.sum(new Int32Array(this.getEvenCounts())),m=!1,x=!1;p>13?x=!0:p<4&&(m=!0);var w=!1,b=!1;h>13?b=!0:h<4&&(w=!0);var R=p+h-c,L=1==(1&p),V=0==(1&h);if(1==R)if(L){if(V)throw new Re;x=!0}else{if(!V)throw new Re;b=!0}else if(-1==R)if(L){if(V)throw new Re;m=!0}else{if(!V)throw new Re;w=!0}else{if(0!=R)throw new Re;if(L){if(!V)throw new Re;p<h?(m=!0,b=!0):(x=!0,w=!0)}else if(V)throw new Re}if(m){if(x)throw new Re;u.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&u.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(b)throw new Re;u.increment(this.getEvenCounts(),this.getOddRoundingErrors())}b&&u.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},u.SYMBOL_WIDEST=[7,5,4,3,1],u.EVEN_TOTAL_SUBSET=[4,20,52,104,204],u.GSUM=[0,348,1388,2948,3988],u.FINDER_PATTERNS=[[1,8,4,1],[3,6,4,1],[3,4,6,1],[3,2,8,1],[2,6,5,1],[2,2,9,1]],u.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],u.FINDER_PATTERN_SEQUENCES=[[u.FINDER_PAT_A=0,u.FINDER_PAT_A],[u.FINDER_PAT_A,u.FINDER_PAT_B=1,u.FINDER_PAT_B],[u.FINDER_PAT_A,u.FINDER_PAT_C=2,u.FINDER_PAT_B,u.FINDER_PAT_D=3],[u.FINDER_PAT_A,u.FINDER_PAT_E=4,u.FINDER_PAT_B,u.FINDER_PAT_D,u.FINDER_PAT_C],[u.FINDER_PAT_A,u.FINDER_PAT_E,u.FINDER_PAT_B,u.FINDER_PAT_D,u.FINDER_PAT_D,u.FINDER_PAT_F=5],[u.FINDER_PAT_A,u.FINDER_PAT_E,u.FINDER_PAT_B,u.FINDER_PAT_D,u.FINDER_PAT_E,u.FINDER_PAT_F,u.FINDER_PAT_F],[u.FINDER_PAT_A,u.FINDER_PAT_A,u.FINDER_PAT_B,u.FINDER_PAT_B,u.FINDER_PAT_C,u.FINDER_PAT_C,u.FINDER_PAT_D,u.FINDER_PAT_D],[u.FINDER_PAT_A,u.FINDER_PAT_A,u.FINDER_PAT_B,u.FINDER_PAT_B,u.FINDER_PAT_C,u.FINDER_PAT_C,u.FINDER_PAT_D,u.FINDER_PAT_E,u.FINDER_PAT_E],[u.FINDER_PAT_A,u.FINDER_PAT_A,u.FINDER_PAT_B,u.FINDER_PAT_B,u.FINDER_PAT_C,u.FINDER_PAT_C,u.FINDER_PAT_D,u.FINDER_PAT_E,u.FINDER_PAT_F,u.FINDER_PAT_F],[u.FINDER_PAT_A,u.FINDER_PAT_A,u.FINDER_PAT_B,u.FINDER_PAT_B,u.FINDER_PAT_C,u.FINDER_PAT_D,u.FINDER_PAT_D,u.FINDER_PAT_E,u.FINDER_PAT_E,u.FINDER_PAT_F,u.FINDER_PAT_F]],u.MAX_PAIRS=11}(qr);class Gn extends Vn{constructor(u){super(u.width,u.height),this.canvas=u,this.buffer=Gn.makeBufferFromCanvasImageData(u)}static makeBufferFromCanvasImageData(u){const c=u.getContext("2d");if(!c)throw new Error("Couldn't get canvas context.");const p=c.getImageData(0,0,u.width,u.height);return Gn.toGrayscaleBuffer(p.data,u.width,u.height)}static toGrayscaleBuffer(u,c,p){const h=new Uint8ClampedArray(c*p);for(let m=0,x=0,w=u.length;m<w;m+=4,x++){let b;b=0===u[m+3]?255:306*u[m]+601*u[m+1]+117*u[m+2]+512>>10,h[x]=b}return h}getRow(u,c){if(u<0||u>=this.getHeight())throw new q("Requested row is outside the image: "+u);const p=this.getWidth(),h=u*p;return null===c?c=this.buffer.slice(h,h+p):(c.length<p&&(c=new Uint8ClampedArray(p)),c.set(this.buffer.slice(h,h+p))),c}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(u,c,p,h){return super.crop(u,c,p,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}invert(){return new Fr(this)}getTempCanvasElement(){if(null===this.tempCanvasElement){const u=this.canvas.ownerDocument.createElement("canvas");u.width=this.canvas.width,u.height=this.canvas.height,this.tempCanvasElement=u}return this.tempCanvasElement}rotate(u){const c=this.getTempCanvasElement();if(!c)throw new Error("Could not create a Canvas element.");const p=u*Gn.DEGREE_TO_RADIANS,h=this.canvas.width,m=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(p))*h+Math.abs(Math.sin(p))*m),w=Math.ceil(Math.abs(Math.sin(p))*h+Math.abs(Math.cos(p))*m);c.width=x,c.height=w;const b=c.getContext("2d");if(!b)throw new Error("Could not create a Convas Context element.");return b.translate(x/2,w/2),b.rotate(p),b.drawImage(this.canvas,h/-2,m/-2),this.buffer=Gn.makeBufferFromCanvasImageData(c),this}}function Vo(){return"undefined"!=typeof navigator}function Bl(){return!(!Vo()||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)}Gn.DEGREE_TO_RADIANS=Math.PI/180;var Ir=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__awaiter:void 0)||function(f,u,c,p){return new(c||(c=Promise))(function(m,x){function w(L){try{R(p.next(L))}catch(V){x(V)}}function b(L){try{R(p.throw(L))}catch(V){x(V)}}function R(L){L.done?m(L.value):function(m){return m instanceof c?m:new c(function(x){x(m)})}(L.value).then(w,b)}R((p=p.apply(f,u||[])).next())})};const mo={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3};class Ct{constructor(u,c=new Map,p={}){this.reader=u,this.hints=c,this.options=Object.assign(Object.assign({},mo),p)}set possibleFormats(u){this.hints.set(Et.POSSIBLE_FORMATS,u)}static addVideoSource(u,c){try{u.srcObject=c}catch(p){u.src=URL.createObjectURL(c)}}static mediaStreamSetTorch(u,c){return Ir(this,void 0,void 0,function*(){yield u.applyConstraints({advanced:[{fillLightMode:c?"flash":"off",torch:!!c}]})})}static mediaStreamIsTorchCompatible(u){const c=u.getVideoTracks();for(const p of c)if(Ct.mediaStreamIsTorchCompatibleTrack(p))return!0;return!1}static mediaStreamIsTorchCompatibleTrack(u){try{return"torch"in u.getCapabilities()}catch(c){return console.error(c),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}}static isVideoPlaying(u){return u.currentTime>0&&!u.paused&&u.readyState>2}static getMediaElement(u,c){const p=document.getElementById(u);if(!p)throw new xe(`element with id '${u}' not found`);if(p.nodeName.toLowerCase()!==c.toLowerCase())throw new xe(`element with id '${u}' must be an ${c} element`);return p}static createVideoElement(u){if(u instanceof HTMLVideoElement)return u;if("string"==typeof u)return Ct.getMediaElement(u,"video");if(!u&&"undefined"!=typeof document){const c=document.createElement("video");return c.width=200,c.height=200,c}throw new Error("Couldn't get videoElement from videoSource!")}static prepareImageElement(u){if(u instanceof HTMLImageElement)return u;if("string"==typeof u)return Ct.getMediaElement(u,"img");if(void 0===u){const c=document.createElement("img");return c.width=200,c.height=200,c}throw new Error("Couldn't get imageElement from imageSource!")}static prepareVideoElement(u){const c=Ct.createVideoElement(u);return c.setAttribute("autoplay","true"),c.setAttribute("muted","true"),c.setAttribute("playsinline","true"),c}static isImageLoaded(u){return!(!u.complete||0===u.naturalWidth)}static createBinaryBitmapFromCanvas(u){const c=new Gn(u),p=new Wn(c);return new se(p)}static drawImageOnCanvas(u,c){u.drawImage(c,0,0)}static getMediaElementDimensions(u){if(u instanceof HTMLVideoElement)return{height:u.videoHeight,width:u.videoWidth};if(u instanceof HTMLImageElement)return{height:u.naturalHeight||u.height,width:u.naturalWidth||u.width};throw new Error("Couldn't find the Source's dimentions!")}static createCaptureCanvas(u){if(!u)throw new xe("Cannot create a capture canvas without a media element.");if("undefined"==typeof document)throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');const c=document.createElement("canvas"),{width:p,height:h}=Ct.getMediaElementDimensions(u);return c.style.width=p+"px",c.style.height=h+"px",c.width=p,c.height=h,c}static tryPlayVideo(u){return Ir(this,void 0,void 0,function*(){if(null==u?void 0:u.ended)return console.error("Trying to play video that has ended."),!1;if(Ct.isVideoPlaying(u))return console.warn("Trying to play video that is already playing."),!0;try{return yield u.play(),!0}catch(c){return console.warn("It was not possible to play the video.",c),!1}})}static createCanvasFromMediaElement(u){const c=Ct.createCaptureCanvas(u),p=c.getContext("2d");if(!p)throw new Error("Couldn't find Canvas 2D Context.");return Ct.drawImageOnCanvas(p,u),c}static createBinaryBitmapFromMediaElem(u){const c=Ct.createCanvasFromMediaElement(u);return Ct.createBinaryBitmapFromCanvas(c)}static destroyImageElement(u){u.src="",u.removeAttribute("src"),u=void 0}static listVideoInputDevices(){return Ir(this,void 0,void 0,function*(){if(!Vo())throw new Error("Can't enumerate devices, navigator is not present.");if(!Bl())throw new Error("Can't enumerate devices, method not supported.");const u=yield navigator.mediaDevices.enumerateDevices(),c=[];for(const p of u){const h="video"===p.kind?"videoinput":p.kind;"videoinput"===h&&c.push({deviceId:p.deviceId||p.id,label:p.label||`Video device ${c.length+1}`,kind:h,groupId:p.groupId})}return c})}static findDeviceById(u){return Ir(this,void 0,void 0,function*(){const c=yield Ct.listVideoInputDevices();if(c)return c.find(p=>p.deviceId===u)})}static cleanVideoSource(u){if(u){try{u.srcObject=null}catch(c){u.src=""}u&&u.removeAttribute("src")}}static playVideoOnLoadAsync(u,c){return Ir(this,void 0,void 0,function*(){return!!(yield Ct.tryPlayVideo(u))||new Promise((h,m)=>{const x=setTimeout(()=>{Ct.isVideoPlaying(u)||(m(!1),u.removeEventListener("canplay",w))},c),w=()=>{Ct.tryPlayVideo(u).then(b=>{clearTimeout(x),u.removeEventListener("canplay",w),h(b)})};u.addEventListener("canplay",w)})})}static attachStreamToVideo(u,c,p=5e3){return Ir(this,void 0,void 0,function*(){const h=Ct.prepareVideoElement(c);return Ct.addVideoSource(h,u),yield Ct.playVideoOnLoadAsync(h,p),h})}static _waitImageLoad(u){return new Promise((c,p)=>{const m=setTimeout(()=>{Ct.isImageLoaded(u)||(u.removeEventListener("load",x),p())},1e4),x=()=>{clearTimeout(m),u.removeEventListener("load",x),c()};u.addEventListener("load",x)})}static checkCallbackFnOrThrow(u){if(!u)throw new xe("`callbackFn` is a required parameter, you cannot capture results without it.")}static disposeMediaStream(u){u.getVideoTracks().forEach(c=>c.stop()),u=void 0}decode(u){const c=Ct.createCanvasFromMediaElement(u);return this.decodeFromCanvas(c)}decodeBitmap(u){return this.reader.decode(u,this.hints)}decodeFromCanvas(u){const c=Ct.createBinaryBitmapFromCanvas(u);return this.decodeBitmap(c)}decodeFromImageElement(u){return Ir(this,void 0,void 0,function*(){if(!u)throw new xe("An image element must be provided.");const c=Ct.prepareImageElement(u);return yield this._decodeOnLoadImage(c)})}decodeFromImageUrl(u){return Ir(this,void 0,void 0,function*(){if(!u)throw new xe("An URL must be provided.");const c=Ct.prepareImageElement();c.src=u;try{return yield this.decodeFromImageElement(c)}finally{Ct.destroyImageElement(c)}})}decodeFromConstraints(u,c,p){return Ir(this,void 0,void 0,function*(){Ct.checkCallbackFnOrThrow(p);const h=yield navigator.mediaDevices.getUserMedia(u);try{return yield this.decodeFromStream(h,c,p)}catch(m){throw Ct.disposeMediaStream(h),m}})}decodeFromStream(u,c,p){return Ir(this,void 0,void 0,function*(){Ct.checkCallbackFnOrThrow(p);const h=this.options.tryPlayVideoTimeout,m=yield Ct.attachStreamToVideo(u,c,h),b=this.scan(m,p,()=>{(()=>{for(const H of u.getVideoTracks())H.stop();u=void 0})(),Ct.cleanVideoSource(m)}),R=u.getVideoTracks(),L=Object.assign(Object.assign({},b),{stop(){b.stop()},streamVideoConstraintsApply(H,j){return Ir(this,void 0,void 0,function*(){const K=j?R.filter(j):R;for(const oe of K)yield oe.applyConstraints(H)})},streamVideoConstraintsGet:H=>R.find(H).getConstraints(),streamVideoSettingsGet:H=>R.find(H).getSettings(),streamVideoCapabilitiesGet:H=>R.find(H).getCapabilities()});if(Ct.mediaStreamIsTorchCompatible(u)){const H=null==R?void 0:R.find(oe=>Ct.mediaStreamIsTorchCompatibleTrack(oe)),j=oe=>Ir(this,void 0,void 0,function*(){yield Ct.mediaStreamSetTorch(H,oe)});L.switchTorch=j,L.stop=()=>{b.stop(),j(!1)}}return L})}decodeFromVideoDevice(u,c,p){return Ir(this,void 0,void 0,function*(){let h;Ct.checkCallbackFnOrThrow(p),h=u?{deviceId:{exact:u}}:{facingMode:"environment"};const m={video:h};return yield this.decodeFromConstraints(m,c,p)})}decodeFromVideoElement(u,c){return Ir(this,void 0,void 0,function*(){if(Ct.checkCallbackFnOrThrow(c),!u)throw new xe("A video element must be provided.");const p=Ct.prepareVideoElement(u),h=this.options.tryPlayVideoTimeout;return yield Ct.playVideoOnLoadAsync(p,h),this.scan(p,c)})}decodeFromVideoUrl(u,c){return Ir(this,void 0,void 0,function*(){if(Ct.checkCallbackFnOrThrow(c),!u)throw new xe("An URL must be provided.");const p=Ct.prepareVideoElement();p.src=u;const m=this.options.tryPlayVideoTimeout;return yield Ct.playVideoOnLoadAsync(p,m),this.scan(p,c,()=>{Ct.cleanVideoSource(p)})})}decodeOnceFromConstraints(u,c){return Ir(this,void 0,void 0,function*(){const p=yield navigator.mediaDevices.getUserMedia(u);return yield this.decodeOnceFromStream(p,c)})}decodeOnceFromStream(u,c){return Ir(this,void 0,void 0,function*(){const p=Boolean(c),h=yield Ct.attachStreamToVideo(u,c);try{return yield this.scanOneResult(h)}finally{p||Ct.cleanVideoSource(h)}})}decodeOnceFromVideoDevice(u,c){return Ir(this,void 0,void 0,function*(){let p;p=u?{deviceId:{exact:u}}:{facingMode:"environment"};const h={video:p};return yield this.decodeOnceFromConstraints(h,c)})}decodeOnceFromVideoElement(u){return Ir(this,void 0,void 0,function*(){if(!u)throw new xe("A video element must be provided.");const c=Ct.prepareVideoElement(u),p=this.options.tryPlayVideoTimeout;return yield Ct.playVideoOnLoadAsync(c,p),yield this.scanOneResult(c)})}decodeOnceFromVideoUrl(u){return Ir(this,void 0,void 0,function*(){if(!u)throw new xe("An URL must be provided.");const c=Ct.prepareVideoElement();c.src=u;const p=this.decodeOnceFromVideoElement(c);try{return yield p}finally{Ct.cleanVideoSource(c)}})}scanOneResult(u,c=!0,p=!0,h=!0){return new Promise((m,x)=>{this.scan(u,(w,b,R)=>{if(w)return m(w),void R.stop();if(b){if(b instanceof Re&&c||b instanceof Ee&&p||b instanceof de&&h)return;R.stop(),x(b)}})})}scan(u,c,p){Ct.checkCallbackFnOrThrow(c);let h=Ct.createCaptureCanvas(u),m=h.getContext("2d");if(!m)throw new Error("Couldn't create canvas for visual element scan.");const x=()=>{m=void 0,h=void 0};let b,w=!1;const L={stop:()=>{w=!0,clearTimeout(b),x(),p&&p()}},V=()=>{if(!w)try{Ct.drawImageOnCanvas(m,u);const H=this.decodeFromCanvas(h);c(H,void 0,L),b=window.setTimeout(V,this.options.delayBetweenScanSuccess)}catch(H){c(void 0,H,L);const K=H instanceof de,oe=H instanceof Re;if(H instanceof Ee||K||oe)return void(b=window.setTimeout(V,this.options.delayBetweenScanAttempts));x(),p&&p(H)}};return V(),L}_decodeOnLoadImage(u){return Ir(this,void 0,void 0,function*(){return Ct.isImageLoaded(u)||(yield Ct._waitImageLoad(u)),this.decode(u)})}}const Ws="http://www.w3.org/2000/svg";let hc=(()=>{class f{constructor(c){if("string"==typeof c){const p=document.getElementById(c);if(!p)throw new Error(`Could not find a Container element with '${c}'.`);this.containerElement=p}else this.containerElement=c}write(c,p,h,m){if(0===c.length)throw new q("Found empty contents");if(p<0||h<0)throw new q("Requested dimensions are too small: "+p+"x"+h);const x=m&&void 0!==m.get(hr.MARGIN)?Number.parseInt(m.get(hr.MARGIN).toString(),10):f.QUIET_ZONE_SIZE,w=this.encode(m,c);return this.renderResult(w,p,h,x)}createSVGElement(c,p){const h=document.createElementNS(f.SVG_NS,"svg");return h.setAttributeNS(Ws,"width",p.toString()),h.setAttributeNS(Ws,"height",c.toString()),h}createSvgPathPlaceholderElement(c,p){const h=document.createElementNS(f.SVG_NS,"path");return h.setAttributeNS(Ws,"d",`M0 0h${c}v${p}H0z`),h.setAttributeNS(Ws,"fill","none"),h}createSvgRectElement(c,p,h,m){const x=document.createElementNS(f.SVG_NS,"rect");return x.setAttributeNS(Ws,"x",c.toString()),x.setAttributeNS(Ws,"y",p.toString()),x.setAttributeNS(Ws,"height",h.toString()),x.setAttributeNS(Ws,"width",m.toString()),x.setAttributeNS(Ws,"fill","#000000"),x}encode(c,p){let h=go.L;if(c&&void 0!==c.get(hr.ERROR_CORRECTION)){const x=c.get(hr.ERROR_CORRECTION).toString();h=go.fromString(x)}return _a.encode(p,h,c)}renderResult(c,p,h,m){const x=c.getMatrix();if(null===x)throw new $r;const w=x.getWidth(),b=x.getHeight(),R=w+2*m,L=b+2*m,V=Math.max(p,R),H=Math.max(h,L),j=Math.min(Math.floor(V/R),Math.floor(H/L)),K=Math.floor((V-w*j)/2),oe=Math.floor((H-b*j)/2),_e=this.createSVGElement(V,H),ve=this.createSvgPathPlaceholderElement(p,h);_e.appendChild(ve),this.containerElement.appendChild(_e);for(let ge=0,Ne=oe;ge<b;ge++,Ne+=j)for(let Ge=0,Je=K;Ge<w;Ge++,Je+=j)if(1===x.get(Ge,ge)){const st=this.createSvgRectElement(Je,Ne,j,j);_e.appendChild(st)}return _e}}return f.QUIET_ZONE_SIZE=4,f.SVG_NS="http://www.w3.org/2000/svg",f})();const fi="http://www.w3.org/2000/svg";let Cn=(()=>{class f{write(c,p,h,m){if(0===c.length)throw new q("Found empty contents");if(p<0||h<0)throw new q("Requested dimensions are too small: "+p+"x"+h);let x=go.L,w=f.QUIET_ZONE_SIZE;if(m){if(void 0!==m.get(hr.ERROR_CORRECTION)){const R=m.get(hr.ERROR_CORRECTION).toString();x=go.fromString(R)}void 0!==m.get(hr.MARGIN)&&(w=Number.parseInt(m.get(hr.MARGIN).toString(),10))}const b=_a.encode(c,x,m);return this.renderResult(b,p,h,w)}writeToDom(c,p,h,m,x){if("string"==typeof c){const b=document.querySelector(c);if(!b)throw new Error("Could no find the target HTML element.");c=b}const w=this.write(p,h,m,x);c instanceof HTMLElement&&c.appendChild(w)}renderResult(c,p,h,m){const x=c.getMatrix();if(null===x)throw new $r;const w=x.getWidth(),b=x.getHeight(),R=w+2*m,L=b+2*m,V=Math.max(p,R),H=Math.max(h,L),j=Math.min(Math.floor(V/R),Math.floor(H/L)),K=Math.floor((V-w*j)/2),oe=Math.floor((H-b*j)/2),_e=this.createSVGElement(V,H);for(let ve=0,ge=oe;ve<b;ve++,ge+=j)for(let Ne=0,Ge=K;Ne<w;Ne++,Ge+=j)if(1===x.get(Ne,ve)){const Je=this.createSvgRectElement(Ge,ge,j,j);_e.appendChild(Je)}return _e}createSVGElement(c,p){const h=document.createElementNS(f.SVG_NS,"svg");return h.setAttributeNS(fi,"height",c.toString()),h.setAttributeNS(fi,"width",p.toString()),h}createSvgRectElement(c,p,h,m){const x=document.createElementNS(f.SVG_NS,"rect");return x.setAttributeNS(fi,"x",c.toString()),x.setAttributeNS(fi,"y",p.toString()),x.setAttributeNS(fi,"height",h.toString()),x.setAttributeNS(fi,"width",m.toString()),x.setAttributeNS(fi,"fill","#000000"),x}}return f.QUIET_ZONE_SIZE=4,f.SVG_NS="http://www.w3.org/2000/svg",f})();J.BarcodeFormat=Tt,J.BrowserAztecCodeReader=class extends Ct{constructor(u,c){super(new aa,u,c)}},J.BrowserCodeReader=Ct,J.BrowserCodeSvgWriter=hc,J.BrowserDatamatrixCodeReader=class extends Ct{constructor(u,c){super(new Zu,u,c)}},J.BrowserMultiFormatOneDReader=class extends Ct{constructor(u,c){super(new Os(u),u,c)}},J.BrowserMultiFormatReader=class extends Ct{constructor(u,c){const p=new wu;p.setHints(u),super(p,u,c),this.reader=p}set possibleFormats(u){this.hints.set(Et.POSSIBLE_FORMATS,u),this.reader.setHints(this.hints)}decodeBitmap(u){return this.reader.decodeWithState(u)}setHints(u){this.hints=u,this.reader.setHints(this.hints)}},J.BrowserPDF417Reader=class extends Ct{constructor(u,c){super(new Jo,u,c)}},J.BrowserQRCodeReader=class extends Ct{constructor(u,c){super(new jn,u,c)}},J.BrowserQRCodeSvgWriter=Cn,J.HTMLCanvasElementLuminanceSource=Gn,Object.defineProperty(J,"__esModule",{value:!0})}(tt)},2329:(Dt,tt,J)=>{"use strict";J.d(tt,{Mq:()=>A.getApp,C6:()=>A.getApps});var A=J(5452);(0,A.registerVersion)("firebase","9.1.3","app")},7841:(Dt,tt,J)=>{"use strict";J.d(tt,{Z:()=>A.Z});var A=J(4486);A.Z.registerVersion("firebase","9.1.3","app-compat")},4671:(Dt,tt,J)=>{"use strict";J.r(tt);var A=J(8239),Ie=J(4486),te=J(3854),Ue=J(5452),Te=J(4762),pe=J(5601),$e=J(6034);const We=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pe=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Be=new te.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ve=new pe.Yd("@firebase/auth");function ze(P,...I){Ve.logLevel<=pe.in.ERROR&&Ve.error(`Auth (${Ue.SDK_VERSION}): ${P}`,...I)}function Xe(P,...I){throw Et(P,...I)}function lt(P,...I){return Et(P,...I)}function St(P,I,S){const k=Object.assign(Object.assign({},Pe()),{[I]:S});return new te.LL("auth","Firebase",k).create(I,{appName:P.name})}function nn(P,I,S){if(!(I instanceof S))throw S.name!==I.constructor.name&&Xe(P,"argument-error"),St(P,"argument-error",`Type of ${I.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Et(P,...I){if("string"!=typeof P){const S=I[0],k=[...I.slice(1)];return k[0]&&(k[0].appName=P.name),P._errorFactory.create(S,...k)}return Be.create(P,...I)}function rt(P,I,...S){if(!P)throw Et(I,...S)}function de(P){const I="INTERNAL ASSERTION FAILED: "+P;throw ze(I),new Error(I)}function Le(P,I){P||de(I)}const Me=new Map;function Oe(P){Le(P instanceof Function,"Expected a class definition");let I=Me.get(P);return I?(Le(I instanceof P,"Instance stored in cache mismatched with class"),I):(I=new P,Me.set(P,I),I)}function Nt(){var P;return"undefined"!=typeof self&&(null===(P=self.location)||void 0===P?void 0:P.href)||""}function Pt(){return"http:"===tn()||"https:"===tn()}function tn(){var P;return"undefined"!=typeof self&&(null===(P=self.location)||void 0===P?void 0:P.protocol)||null}class Re{constructor(I,S){this.shortDelay=I,this.longDelay=S,Le(S>I,"Short delay should be less than long delay!"),this.isMobile=(0,te.uI)()||(0,te.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pt()||(0,te.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Zn(P,I){Le(P.emulator,"Emulator should always be set here");const{url:S}=P.emulator;return I?`${S}${I.startsWith("/")?I.slice(1):I}`:S}class si{static initialize(I,S,k){this.fetchImpl=I,S&&(this.headersImpl=S),k&&(this.responseImpl=k)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void de("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void de("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void de("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Li={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Wn=new Re(3e4,6e4);function Vn(P,I){return P.tenantId&&!I.tenantId?Object.assign(Object.assign({},I),{tenantId:P.tenantId}):I}function gn(P,I,S,k){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,A.Z)(function*(P,I,S,k,z={}){return ai(P,z,()=>{let Y={},we={};k&&("GET"===I?we=k:Y={body:JSON.stringify(k)});const Ze=(0,te.xO)(Object.assign({key:P.config.apiKey},we)).slice(1),gt=new(si.headers());return gt.set("Content-Type","application/json"),gt.set("X-Client-Version",P._getSdkClientVersion()),P.languageCode&&gt.set("X-Firebase-Locale",P.languageCode),si.fetch()(vr(P,P.config.apiHost,S,Ze),Object.assign({method:I,headers:gt,referrerPolicy:"no-referrer"},Y))})})).apply(this,arguments)}function ai(P,I,S){return sa.apply(this,arguments)}function sa(){return(sa=(0,A.Z)(function*(P,I,S){P._canInitEmulator=!1;const k=Object.assign(Object.assign({},Li),I);try{const z=new Bi(P),Y=yield Promise.race([S(),z.promise]);z.clearNetworkTimeout();const we=yield Y.json();if("needConfirmation"in we)throw xi(P,"account-exists-with-different-credential",we);if(Y.ok&&!("errorMessage"in we))return we;{const Ze=Y.ok?we.errorMessage:we.error.message,[gt,_t]=Ze.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===gt)throw xi(P,"credential-already-in-use",we);if("EMAIL_EXISTS"===gt)throw xi(P,"email-already-in-use",we);const Xt=k[gt]||gt.toLowerCase().replace(/[_\s]+/g,"-");if(_t)throw St(P,Xt,_t);Xe(P,Xt)}}catch(z){if(z instanceof te.ZR)throw z;Xe(P,"network-request-failed")}})).apply(this,arguments)}function ro(P,I,S,k){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,A.Z)(function*(P,I,S,k,z={}){const Y=yield gn(P,I,S,k,z);return"mfaPendingCredential"in Y&&Xe(P,"multi-factor-auth-required",{serverResponse:Y}),Y})).apply(this,arguments)}function vr(P,I,S,k){const z=`${I}${S}?${k}`;return P.config.emulator?Zn(P.config,z):`${P.config.apiScheme}://${z}`}class Bi{constructor(I){this.auth=I,this.timer=null,this.promise=new Promise((S,k)=>{this.timer=setTimeout(()=>k(lt(this.auth,"timeout")),Wn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xi(P,I,S){const k={appName:P.name};S.email&&(k.email=S.email),S.phoneNumber&&(k.phoneNumber=S.phoneNumber);const z=lt(P,I,k);return z.customData._tokenResponse=S,z}function At(){return(At=(0,A.Z)(function*(P,I){return gn(P,"POST","/v1/accounts:delete",I)})).apply(this,arguments)}function Tt(P,I){return wi.apply(this,arguments)}function wi(){return(wi=(0,A.Z)(function*(P,I){return gn(P,"POST","/v1/accounts:update",I)})).apply(this,arguments)}function Mn(P,I){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,A.Z)(function*(P,I){return gn(P,"POST","/v1/accounts:lookup",I)})).apply(this,arguments)}function Ot(P){if(P)try{const I=new Date(Number(P));if(!isNaN(I.getTime()))return I.toUTCString()}catch(I){}}function ui(){return(ui=(0,A.Z)(function*(P,I=!1){const S=(0,te.m9)(P),k=yield S.getIdToken(I),z=ft(k);rt(z&&z.exp&&z.auth_time&&z.iat,S.auth,"internal-error");const Y="object"==typeof z.firebase?z.firebase:void 0,we=null==Y?void 0:Y.sign_in_provider;return{claims:z,token:k,authTime:Ot(Un(z.auth_time)),issuedAtTime:Ot(Un(z.iat)),expirationTime:Ot(Un(z.exp)),signInProvider:we||null,signInSecondFactor:(null==Y?void 0:Y.sign_in_second_factor)||null}})).apply(this,arguments)}function Un(P){return 1e3*Number(P)}function ft(P){const[I,S,k]=P.split(".");if(void 0===I||void 0===S||void 0===k)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const z=(0,te.tV)(S);return z?JSON.parse(z):(ze("Failed to decode base64 JWT payload"),null)}catch(z){return ze("Caught error parsing JWT payload as JSON",z),null}}function Vi(P,I){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,A.Z)(function*(P,I,S=!1){if(S)return I;try{return yield I}catch(k){throw k instanceof te.ZR&&$r(k)&&P.auth.currentUser===P&&(yield P.auth.signOut()),k}})).apply(this,arguments)}function $r({code:P}){return"auth/user-disabled"===P||"auth/user-token-expired"===P}class Fn{constructor(I){this.user=I,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(I){var S;if(I){const k=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),k}{this.errorBackoff=3e4;const z=(null!==(S=this.user.stsTokenManager.expirationTime)&&void 0!==S?S:0)-Date.now()-3e5;return Math.max(0,z)}}schedule(I=!1){var S=this;if(!this.isRunning)return;const k=this.getInterval(I);this.timerId=setTimeout((0,A.Z)(function*(){yield S.iteration()}),k)}iteration(){var I=this;return(0,A.Z)(function*(){try{yield I.user.getIdToken(!0)}catch(S){return void("auth/network-request-failed"===S.code&&I.schedule(!0))}I.schedule()})()}}class kn{constructor(I,S){this.createdAt=I,this.lastLoginAt=S,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ot(this.lastLoginAt),this.creationTime=Ot(this.createdAt)}_copy(I){this.createdAt=I.createdAt,this.lastLoginAt=I.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ma(P){return ue.apply(this,arguments)}function ue(){return(ue=(0,A.Z)(function*(P){var I;const S=P.auth,k=yield P.getIdToken(),z=yield Vi(P,Mn(S,{idToken:k}));rt(null==z?void 0:z.users.length,S,"internal-error");const Y=z.users[0];P._notifyReloadListener(Y);const we=(null===(I=Y.providerUserInfo)||void 0===I?void 0:I.length)?Fe(Y.providerUserInfo):[],Ze=Qe(P.providerData,we),Xt=!!P.isAnonymous&&!(P.email&&Y.passwordHash||(null==Ze?void 0:Ze.length)),Wt={uid:Y.localId,displayName:Y.displayName||null,photoURL:Y.photoUrl||null,email:Y.email||null,emailVerified:Y.emailVerified||!1,phoneNumber:Y.phoneNumber||null,tenantId:Y.tenantId||null,providerData:Ze,metadata:new kn(Y.createdAt,Y.lastLoginAt),isAnonymous:Xt};Object.assign(P,Wt)})).apply(this,arguments)}function ae(){return(ae=(0,A.Z)(function*(P){const I=(0,te.m9)(P);yield Ma(I),yield I.auth._persistUserIfCurrent(I),I.auth._notifyListenersIfCurrent(I)})).apply(this,arguments)}function Qe(P,I){return[...P.filter(k=>!I.some(z=>z.providerId===k.providerId)),...I]}function Fe(P){return P.map(I=>{var{providerId:S}=I,k=(0,Te._T)(I,["providerId"]);return{providerId:S,uid:k.rawId||"",displayName:k.displayName||null,email:k.email||null,phoneNumber:k.phoneNumber||null,photoURL:k.photoUrl||null}})}function Zt(){return(Zt=(0,A.Z)(function*(P,I){const S=yield ai(P,{},()=>{const k=(0,te.xO)({grant_type:"refresh_token",refresh_token:I}).slice(1),{tokenApiHost:z,apiKey:Y}=P.config,we=vr(P,z,"/v1/token",`key=${Y}`);return si.fetch()(we,{method:"POST",headers:{"X-Client-Version":P._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:k})});return{accessToken:S.access_token,expiresIn:S.expires_in,refreshToken:S.refresh_token}})).apply(this,arguments)}class wn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(I){rt(I.idToken,"internal-error"),rt(void 0!==I.idToken,"internal-error"),rt(void 0!==I.refreshToken,"internal-error");const S="expiresIn"in I&&void 0!==I.expiresIn?Number(I.expiresIn):function(P){const I=ft(P);return rt(I,"internal-error"),rt(void 0!==I.exp,"internal-error"),rt(void 0!==I.iat,"internal-error"),Number(I.exp)-Number(I.iat)}(I.idToken);this.updateTokensAndExpiration(I.idToken,I.refreshToken,S)}getToken(I,S=!1){var k=this;return(0,A.Z)(function*(){return rt(!k.accessToken||k.refreshToken,I,"user-token-expired"),S||!k.accessToken||k.isExpired?k.refreshToken?(yield k.refresh(I,k.refreshToken),k.accessToken):null:k.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(I,S){var k=this;return(0,A.Z)(function*(){const{accessToken:z,refreshToken:Y,expiresIn:we}=yield function(P,I){return Zt.apply(this,arguments)}(I,S);k.updateTokensAndExpiration(z,Y,Number(we))})()}updateTokensAndExpiration(I,S,k){this.refreshToken=S||null,this.accessToken=I||null,this.expirationTime=Date.now()+1e3*k}static fromJSON(I,S){const{refreshToken:k,accessToken:z,expirationTime:Y}=S,we=new wn;return k&&(rt("string"==typeof k,"internal-error",{appName:I}),we.refreshToken=k),z&&(rt("string"==typeof z,"internal-error",{appName:I}),we.accessToken=z),Y&&(rt("number"==typeof Y,"internal-error",{appName:I}),we.expirationTime=Y),we}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(I){this.accessToken=I.accessToken,this.refreshToken=I.refreshToken,this.expirationTime=I.expirationTime}_clone(){return Object.assign(new wn,this.toJSON())}_performRefresh(){return de("not implemented")}}function zn(P,I){rt("string"==typeof P||void 0===P,"internal-error",{appName:I})}class ur{constructor(I){var{uid:S,auth:k,stsTokenManager:z}=I,Y=(0,Te._T)(I,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Fn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=S,this.auth=k,this.stsTokenManager=z,this.accessToken=z.accessToken,this.displayName=Y.displayName||null,this.email=Y.email||null,this.emailVerified=Y.emailVerified||!1,this.phoneNumber=Y.phoneNumber||null,this.photoURL=Y.photoURL||null,this.isAnonymous=Y.isAnonymous||!1,this.tenantId=Y.tenantId||null,this.metadata=new kn(Y.createdAt||void 0,Y.lastLoginAt||void 0)}getIdToken(I){var S=this;return(0,A.Z)(function*(){const k=yield Vi(S,S.stsTokenManager.getToken(S.auth,I));return rt(k,S.auth,"internal-error"),S.accessToken!==k&&(S.accessToken=k,yield S.auth._persistUserIfCurrent(S),S.auth._notifyListenersIfCurrent(S)),k})()}getIdTokenResult(I){return function(P){return ui.apply(this,arguments)}(this,I)}reload(){return function(P){return ae.apply(this,arguments)}(this)}_assign(I){this!==I&&(rt(this.uid===I.uid,this.auth,"internal-error"),this.displayName=I.displayName,this.photoURL=I.photoURL,this.email=I.email,this.emailVerified=I.emailVerified,this.phoneNumber=I.phoneNumber,this.isAnonymous=I.isAnonymous,this.tenantId=I.tenantId,this.providerData=I.providerData.map(S=>Object.assign({},S)),this.metadata._copy(I.metadata),this.stsTokenManager._assign(I.stsTokenManager))}_clone(I){return new ur(Object.assign(Object.assign({},this),{auth:I,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(I){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=I,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(I){this.reloadListener?this.reloadListener(I):this.reloadUserInfo=I}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(I,S=!1){var k=this;return(0,A.Z)(function*(){let z=!1;I.idToken&&I.idToken!==k.stsTokenManager.accessToken&&(k.stsTokenManager.updateFromServerResponse(I),z=!0),S&&(yield Ma(k)),yield k.auth._persistUserIfCurrent(k),z&&k.auth._notifyListenersIfCurrent(k)})()}delete(){var I=this;return(0,A.Z)(function*(){const S=yield I.getIdToken();return yield Vi(I,function(P,I){return At.apply(this,arguments)}(I.auth,{idToken:S})),I.stsTokenManager.clearRefreshToken(),I.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(I=>Object.assign({},I)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(I,S){var k,z,Y,we,Ze,gt,_t,Xt;const Wt=null!==(k=S.displayName)&&void 0!==k?k:void 0,pi=null!==(z=S.email)&&void 0!==z?z:void 0,os=null!==(Y=S.phoneNumber)&&void 0!==Y?Y:void 0,gc=null!==(we=S.photoURL)&&void 0!==we?we:void 0,ug=null!==(Ze=S.tenantId)&&void 0!==Ze?Ze:void 0,Ud=null!==(gt=S._redirectEventId)&&void 0!==gt?gt:void 0,Zs=null!==(_t=S.createdAt)&&void 0!==_t?_t:void 0,cg=null!==(Xt=S.lastLoginAt)&&void 0!==Xt?Xt:void 0,{uid:Iu,emailVerified:Aa,isAnonymous:Gy,providerData:Rm,stsTokenManager:ip}=S;rt(Iu&&ip,I,"internal-error");const uC=wn.fromJSON(this.name,ip);rt("string"==typeof Iu,I,"internal-error"),zn(Wt,I.name),zn(pi,I.name),rt("boolean"==typeof Aa,I,"internal-error"),rt("boolean"==typeof Gy,I,"internal-error"),zn(os,I.name),zn(gc,I.name),zn(ug,I.name),zn(Ud,I.name),zn(Zs,I.name),zn(cg,I.name);const Ks=new ur({uid:Iu,auth:I,email:pi,emailVerified:Aa,displayName:Wt,isAnonymous:Gy,photoURL:gc,phoneNumber:os,tenantId:ug,stsTokenManager:uC,createdAt:Zs,lastLoginAt:cg});return Rm&&Array.isArray(Rm)&&(Ks.providerData=Rm.map(lg=>Object.assign({},lg))),Ud&&(Ks._redirectEventId=Ud),Ks}static _fromIdTokenResponse(I,S,k=!1){return(0,A.Z)(function*(){const z=new wn;z.updateFromServerResponse(S);const Y=new ur({uid:S.localId,auth:I,stsTokenManager:z,isAnonymous:k});return yield Ma(Y),Y})()}}const mn=(()=>{class P{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,A.Z)(function*(){return!0})()}_set(S,k){var z=this;return(0,A.Z)(function*(){z.storage[S]=k})()}_get(S){var k=this;return(0,A.Z)(function*(){const z=k.storage[S];return void 0===z?null:z})()}_remove(S){var k=this;return(0,A.Z)(function*(){delete k.storage[S]})()}_addListener(S,k){}_removeListener(S,k){}}return P.type="NONE",P})();function Rn(P,I,S){return`firebase:${P}:${I}:${S}`}class io{constructor(I,S,k){this.persistence=I,this.auth=S,this.userKey=k;const{config:z,name:Y}=this.auth;this.fullUserKey=Rn(this.userKey,z.apiKey,Y),this.fullPersistenceKey=Rn("persistence",z.apiKey,Y),this.boundEventHandler=S._onStorageEvent.bind(S),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(I){return this.persistence._set(this.fullUserKey,I.toJSON())}getCurrentUser(){var I=this;return(0,A.Z)(function*(){const S=yield I.persistence._get(I.fullUserKey);return S?ur._fromJSON(I.auth,S):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(I){var S=this;return(0,A.Z)(function*(){if(S.persistence===I)return;const k=yield S.getCurrentUser();return yield S.removeCurrentUser(),S.persistence=I,k?S.setCurrentUser(k):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(I,S,k="authUser"){return(0,A.Z)(function*(){if(!S.length)return new io(Oe(mn),I,k);const z=(yield Promise.all(S.map(function(){var _t=(0,A.Z)(function*(Xt){if(yield Xt._isAvailable())return Xt});return function(Xt){return _t.apply(this,arguments)}}()))).filter(_t=>_t);let Y=z[0]||Oe(mn);const we=Rn(k,I.config.apiKey,I.name);let Ze=null;for(const _t of S)try{const Xt=yield _t._get(we);if(Xt){const Wt=ur._fromJSON(I,Xt);_t!==Y&&(Ze=Wt),Y=_t;break}}catch(Xt){}const gt=z.filter(_t=>_t._shouldAllowMigration);return Y._shouldAllowMigration&&gt.length?(Y=gt[0],Ze&&(yield Y._set(we,Ze.toJSON())),yield Promise.all(S.map(function(){var _t=(0,A.Z)(function*(Xt){if(Xt!==Y)try{yield Xt._remove(we)}catch(Wt){}});return function(Xt){return _t.apply(this,arguments)}}())),new io(Y,I,k)):new io(Y,I,k)})()}}function aa(P){const I=P.toLowerCase();if(I.includes("opera/")||I.includes("opr/")||I.includes("opios/"))return"Opera";if(Pc(I))return"IEMobile";if(I.includes("msie")||I.includes("trident/"))return"IE";if(I.includes("edge/"))return"Edge";if(au(I))return"Firefox";if(I.includes("silk/"))return"Silk";if(ni(I))return"Blackberry";if(Hi(I))return"Webos";if(wl(I))return"Safari";if((I.includes("chrome/")||Or(I))&&!I.includes("edge/"))return"Chrome";if(Ko(I))return"Android";{const k=P.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==k?void 0:k.length))return k[1]}return"Other"}function au(P=(0,te.z$)()){return/firefox\//i.test(P)}function wl(P=(0,te.z$)()){const I=P.toLowerCase();return I.includes("safari/")&&!I.includes("chrome/")&&!I.includes("crios/")&&!I.includes("android")}function Or(P=(0,te.z$)()){return/crios\//i.test(P)}function Pc(P=(0,te.z$)()){return/iemobile/i.test(P)}function Ko(P=(0,te.z$)()){return/android/i.test(P)}function ni(P=(0,te.z$)()){return/blackberry/i.test(P)}function Hi(P=(0,te.z$)()){return/webos/i.test(P)}function ci(P=(0,te.z$)()){return/iphone|ipad|ipod/i.test(P)}function mt(P=(0,te.z$)()){return ci(P)||Ko(P)||Hi(P)||ni(P)||/windows phone/i.test(P)||Pc(P)}function Hn(P,I=[]){let S;switch(P){case"Browser":S=aa((0,te.z$)());break;case"Worker":S=`${aa((0,te.z$)())}-${P}`;break;default:S=P}const k=I.length?I.join(","):"FirebaseCore-web";return`${S}/JsCore/${Ue.SDK_VERSION}/${k}`}class Ri{constructor(I,S){this.app=I,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lr(this),this.idTokenSubscription=new lr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=I.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(I,S){var k=this;return S&&(this._popupRedirectResolver=Oe(S)),this._initializationPromise=this.queue((0,A.Z)(function*(){var z;k._deleted||(k.persistenceManager=yield io.create(k,I),!k._deleted&&((null===(z=k._popupRedirectResolver)||void 0===z?void 0:z._shouldInitProactively)&&(yield k._popupRedirectResolver._initialize(k)),yield k.initializeCurrentUser(S),!k._deleted&&(k._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var I=this;return(0,A.Z)(function*(){if(I._deleted)return;const S=yield I.assertedPersistence.getCurrentUser();if(I.currentUser||S){if(I.currentUser&&S&&I.currentUser.uid===S.uid)return I._currentUser._assign(S),void(yield I.currentUser.getIdToken());yield I._updateCurrentUser(S)}})()}initializeCurrentUser(I){var S=this;return(0,A.Z)(function*(){var k;let z=yield S.assertedPersistence.getCurrentUser();if(I&&S.config.authDomain){yield S.getOrInitRedirectPersistenceManager();const Y=null===(k=S.redirectUser)||void 0===k?void 0:k._redirectEventId,we=null==z?void 0:z._redirectEventId,Ze=yield S.tryRedirectSignIn(I);(!Y||Y===we)&&(null==Ze?void 0:Ze.user)&&(z=Ze.user)}return z?z._redirectEventId?(rt(S._popupRedirectResolver,S,"argument-error"),yield S.getOrInitRedirectPersistenceManager(),S.redirectUser&&S.redirectUser._redirectEventId===z._redirectEventId?S.directlySetCurrentUser(z):S.reloadAndSetCurrentUserOrClear(z)):S.reloadAndSetCurrentUserOrClear(z):S.directlySetCurrentUser(null)})()}tryRedirectSignIn(I){var S=this;return(0,A.Z)(function*(){let k=null;try{k=yield S._popupRedirectResolver._completeRedirectFn(S,I,!0)}catch(z){yield S._setRedirectUser(null)}return k})()}reloadAndSetCurrentUserOrClear(I){var S=this;return(0,A.Z)(function*(){try{yield Ma(I)}catch(k){if("auth/network-request-failed"!==k.code)return S.directlySetCurrentUser(null)}return S.directlySetCurrentUser(I)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const P=navigator;return P.languages&&P.languages[0]||P.language||null}()}_delete(){var I=this;return(0,A.Z)(function*(){I._deleted=!0})()}updateCurrentUser(I){var S=this;return(0,A.Z)(function*(){const k=I?(0,te.m9)(I):null;return k&&rt(k.auth.config.apiKey===S.config.apiKey,S,"invalid-user-token"),S._updateCurrentUser(k&&k._clone(S))})()}_updateCurrentUser(I){var S=this;return(0,A.Z)(function*(){if(!S._deleted)return I&&rt(S.tenantId===I.tenantId,S,"tenant-id-mismatch"),S.queue((0,A.Z)(function*(){yield S.directlySetCurrentUser(I),S.notifyAuthListeners()}))})()}signOut(){var I=this;return(0,A.Z)(function*(){return(I.redirectPersistenceManager||I._popupRedirectResolver)&&(yield I._setRedirectUser(null)),I._updateCurrentUser(null)})()}setPersistence(I){var S=this;return this.queue((0,A.Z)(function*(){yield S.assertedPersistence.setPersistence(Oe(I))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(I){this._errorFactory=new te.LL("auth","Firebase",I())}onAuthStateChanged(I,S,k){return this.registerStateListener(this.authStateSubscription,I,S,k)}onIdTokenChanged(I,S,k){return this.registerStateListener(this.idTokenSubscription,I,S,k)}toJSON(){var I;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(I=this._currentUser)||void 0===I?void 0:I.toJSON()}}_setRedirectUser(I,S){var k=this;return(0,A.Z)(function*(){const z=yield k.getOrInitRedirectPersistenceManager(S);return null===I?z.removeCurrentUser():z.setCurrentUser(I)})()}getOrInitRedirectPersistenceManager(I){var S=this;return(0,A.Z)(function*(){if(!S.redirectPersistenceManager){const k=I&&Oe(I)||S._popupRedirectResolver;rt(k,S,"argument-error"),S.redirectPersistenceManager=yield io.create(S,[Oe(k._redirectPersistence)],"redirectUser"),S.redirectUser=yield S.redirectPersistenceManager.getCurrentUser()}return S.redirectPersistenceManager})()}_redirectUserForId(I){var S=this;return(0,A.Z)(function*(){var k,z;return S._isInitialized&&(yield S.queue((0,A.Z)(function*(){}))),(null===(k=S._currentUser)||void 0===k?void 0:k._redirectEventId)===I?S._currentUser:(null===(z=S.redirectUser)||void 0===z?void 0:z._redirectEventId)===I?S.redirectUser:null})()}_persistUserIfCurrent(I){var S=this;return(0,A.Z)(function*(){if(I===S.currentUser)return S.queue((0,A.Z)(function*(){return S.directlySetCurrentUser(I)}))})()}_notifyListenersIfCurrent(I){I===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var I,S;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const k=null!==(S=null===(I=this.currentUser)||void 0===I?void 0:I.uid)&&void 0!==S?S:null;this.lastNotifiedUid!==k&&(this.lastNotifiedUid=k,this.authStateSubscription.next(this.currentUser))}registerStateListener(I,S,k,z){if(this._deleted)return()=>{};const Y="function"==typeof S?S:S.next.bind(S),we=this._isInitialized?Promise.resolve():this._initializationPromise;return rt(we,this,"internal-error"),we.then(()=>Y(this.currentUser)),"function"==typeof S?I.addObserver(S,k,z):I.addObserver(S)}directlySetCurrentUser(I){var S=this;return(0,A.Z)(function*(){S.currentUser&&S.currentUser!==I&&(S._currentUser._stopProactiveRefresh(),I&&S.isProactiveRefreshEnabled&&I._startProactiveRefresh()),S.currentUser=I,I?yield S.assertedPersistence.setCurrentUser(I):yield S.assertedPersistence.removeCurrentUser()})()}queue(I){return this.operations=this.operations.then(I,I),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(I){!I||this.frameworks.includes(I)||(this.frameworks.push(I),this.frameworks.sort(),this.clientVersion=Hn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function cr(P){return(0,te.m9)(P)}class lr{constructor(I){this.auth=I,this.observer=null,this.addObserver=(0,te.ne)(S=>this.observer=S)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function dr(P){const I=P.indexOf(":");return I<0?"":P.substr(0,I+1)}function ca(P){if(!P)return null;const I=Number(P);return isNaN(I)?null:I}class ji{constructor(I,S){this.providerId=I,this.signInMethod=S}toJSON(){return de("not implemented")}_getIdTokenResponse(I){return de("not implemented")}_linkToIdToken(I,S){return de("not implemented")}_getReauthenticationResolver(I){return de("not implemented")}}function la(P,I){return _r.apply(this,arguments)}function _r(){return(_r=(0,A.Z)(function*(P,I){return gn(P,"POST","/v1/accounts:resetPassword",Vn(P,I))})).apply(this,arguments)}function uu(P,I){return li.apply(this,arguments)}function li(){return(li=(0,A.Z)(function*(P,I){return gn(P,"POST","/v1/accounts:update",I)})).apply(this,arguments)}function $u(P,I){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,A.Z)(function*(P,I){return gn(P,"POST","/v1/accounts:update",Vn(P,I))})).apply(this,arguments)}function Nn(){return(Nn=(0,A.Z)(function*(P,I){return ro(P,"POST","/v1/accounts:signInWithPassword",Vn(P,I))})).apply(this,arguments)}function Zr(P,I){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,A.Z)(function*(P,I){return gn(P,"POST","/v1/accounts:sendOobCode",Vn(P,I))})).apply(this,arguments)}function da(P,I){return cu.apply(this,arguments)}function cu(){return(cu=(0,A.Z)(function*(P,I){return Zr(P,I)})).apply(this,arguments)}function lu(P,I){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,A.Z)(function*(P,I){return Zr(P,I)})).apply(this,arguments)}function Ds(P,I){return di.apply(this,arguments)}function di(){return(di=(0,A.Z)(function*(P,I){return Zr(P,I)})).apply(this,arguments)}function vf(P,I){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,A.Z)(function*(P,I){return Zr(P,I)})).apply(this,arguments)}function Os(){return(Os=(0,A.Z)(function*(P,I){return ro(P,"POST","/v1/accounts:signInWithEmailLink",Vn(P,I))})).apply(this,arguments)}function qu(){return(qu=(0,A.Z)(function*(P,I){return ro(P,"POST","/v1/accounts:signInWithEmailLink",Vn(P,I))})).apply(this,arguments)}class Pi extends ji{constructor(I,S,k,z=null){super("password",k),this._email=I,this._password=S,this._tenantId=z}static _fromEmailAndPassword(I,S){return new Pi(I,S,"password")}static _fromEmailAndCode(I,S,k=null){return new Pi(I,S,"emailLink",k)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(I){const S="string"==typeof I?JSON.parse(I):I;if((null==S?void 0:S.email)&&(null==S?void 0:S.password)){if("password"===S.signInMethod)return this._fromEmailAndPassword(S.email,S.password);if("emailLink"===S.signInMethod)return this._fromEmailAndCode(S.email,S.password,S.tenantId)}return null}_getIdTokenResponse(I){var S=this;return(0,A.Z)(function*(){switch(S.signInMethod){case"password":return function(P,I){return Nn.apply(this,arguments)}(I,{returnSecureToken:!0,email:S._email,password:S._password});case"emailLink":return function(P,I){return Os.apply(this,arguments)}(I,{email:S._email,oobCode:S._password});default:Xe(I,"internal-error")}})()}_linkToIdToken(I,S){var k=this;return(0,A.Z)(function*(){switch(k.signInMethod){case"password":return uu(I,{idToken:S,returnSecureToken:!0,email:k._email,password:k._password});case"emailLink":return function(P,I){return qu.apply(this,arguments)}(I,{idToken:S,email:k._email,oobCode:k._password});default:Xe(I,"internal-error")}})()}_getReauthenticationResolver(I){return this._getIdTokenResponse(I)}}function Kt(P,I){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,A.Z)(function*(P,I){return ro(P,"POST","/v1/accounts:signInWithIdp",Vn(P,I))})).apply(this,arguments)}class Yo extends ji{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(I){const S=new Yo(I.providerId,I.signInMethod);return I.idToken||I.accessToken?(I.idToken&&(S.idToken=I.idToken),I.accessToken&&(S.accessToken=I.accessToken),I.nonce&&!I.pendingToken&&(S.nonce=I.nonce),I.pendingToken&&(S.pendingToken=I.pendingToken)):I.oauthToken&&I.oauthTokenSecret?(S.accessToken=I.oauthToken,S.secret=I.oauthTokenSecret):Xe("argument-error"),S}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(I){const S="string"==typeof I?JSON.parse(I):I,{providerId:k,signInMethod:z}=S,Y=(0,Te._T)(S,["providerId","signInMethod"]);if(!k||!z)return null;const we=new Yo(k,z);return we.idToken=Y.idToken||void 0,we.accessToken=Y.accessToken||void 0,we.secret=Y.secret,we.nonce=Y.nonce,we.pendingToken=Y.pendingToken||null,we}_getIdTokenResponse(I){return Kt(I,this.buildRequest())}_linkToIdToken(I,S){const k=this.buildRequest();return k.idToken=S,Kt(I,k)}_getReauthenticationResolver(I){const S=this.buildRequest();return S.autoCreate=!1,Kt(I,S)}buildRequest(){const I={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)I.pendingToken=this.pendingToken;else{const S={};this.idToken&&(S.id_token=this.idToken),this.accessToken&&(S.access_token=this.accessToken),this.secret&&(S.oauth_token_secret=this.secret),S.providerId=this.providerId,this.nonce&&!this.pendingToken&&(S.nonce=this.nonce),I.postBody=(0,te.xO)(S)}return I}}function yf(P,I){return _d.apply(this,arguments)}function _d(){return(_d=(0,A.Z)(function*(P,I){return gn(P,"POST","/v1/accounts:sendVerificationCode",Vn(P,I))})).apply(this,arguments)}function fr(){return(fr=(0,A.Z)(function*(P,I){return ro(P,"POST","/v1/accounts:signInWithPhoneNumber",Vn(P,I))})).apply(this,arguments)}function yd(){return(yd=(0,A.Z)(function*(P,I){const S=yield ro(P,"POST","/v1/accounts:signInWithPhoneNumber",Vn(P,I));if(S.temporaryProof)throw xi(P,"account-exists-with-different-credential",S);return S})).apply(this,arguments)}const Mh={USER_NOT_FOUND:"user-not-found"};function Zu(){return(Zu=(0,A.Z)(function*(P,I){return ro(P,"POST","/v1/accounts:signInWithPhoneNumber",Vn(P,Object.assign(Object.assign({},I),{operation:"REAUTH"})),Mh)})).apply(this,arguments)}class fu extends ji{constructor(I){super("phone","phone"),this.params=I}static _fromVerification(I,S){return new fu({verificationId:I,verificationCode:S})}static _fromTokenResponse(I,S){return new fu({phoneNumber:I,temporaryProof:S})}_getIdTokenResponse(I){return function(P,I){return fr.apply(this,arguments)}(I,this._makeVerificationRequest())}_linkToIdToken(I,S){return function(P,I){return yd.apply(this,arguments)}(I,Object.assign({idToken:S},this._makeVerificationRequest()))}_getReauthenticationResolver(I){return function(P,I){return Zu.apply(this,arguments)}(I,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:I,phoneNumber:S,verificationId:k,verificationCode:z}=this.params;return I&&S?{temporaryProof:I,phoneNumber:S}:{sessionInfo:k,code:z}}toJSON(){const I={providerId:this.providerId};return this.params.phoneNumber&&(I.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(I.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(I.verificationCode=this.params.verificationCode),this.params.verificationId&&(I.verificationId=this.params.verificationId),I}static fromJSON(I){"string"==typeof I&&(I=JSON.parse(I));const{verificationId:S,verificationCode:k,phoneNumber:z,temporaryProof:Y}=I;return k||S||z||Y?new fu({verificationId:S,verificationCode:k,phoneNumber:z,temporaryProof:Y}):null}}class go{constructor(I){var S,k,z,Y,we,Ze;const gt=(0,te.zd)((0,te.pd)(I)),_t=null!==(S=gt.apiKey)&&void 0!==S?S:null,Xt=null!==(k=gt.oobCode)&&void 0!==k?k:null,Wt=function(P){switch(P){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(z=gt.mode)&&void 0!==z?z:null);rt(_t&&Xt&&Wt,"argument-error"),this.apiKey=_t,this.operation=Wt,this.code=Xt,this.continueUrl=null!==(Y=gt.continueUrl)&&void 0!==Y?Y:null,this.languageCode=null!==(we=gt.languageCode)&&void 0!==we?we:null,this.tenantId=null!==(Ze=gt.tenantId)&&void 0!==Ze?Ze:null}static parseLink(I){const S=function(P){const I=(0,te.zd)((0,te.pd)(P)).link,S=I?(0,te.zd)((0,te.pd)(I)).deep_link_id:null,k=(0,te.zd)((0,te.pd)(P)).deep_link_id;return(k?(0,te.zd)((0,te.pd)(k)).link:null)||k||S||I||P}(I);try{return new go(S)}catch(k){return null}}}let Fa=(()=>{class P{constructor(){this.providerId=P.PROVIDER_ID}static credential(S,k){return Pi._fromEmailAndPassword(S,k)}static credentialWithLink(S,k){const z=go.parseLink(k);return rt(z,"argument-error"),Pi._fromEmailAndCode(S,z.code,z.tenantId)}}return P.PROVIDER_ID="password",P.EMAIL_PASSWORD_SIGN_IN_METHOD="password",P.EMAIL_LINK_SIGN_IN_METHOD="emailLink",P})();class Xo{constructor(I){this.providerId=I,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(I){this.defaultLanguageCode=I}setCustomParameters(I){return this.customParameters=I,this}getCustomParameters(){return this.customParameters}}class Se extends Xo{constructor(){super(...arguments),this.scopes=[]}addScope(I){return this.scopes.includes(I)||this.scopes.push(I),this}getScopes(){return[...this.scopes]}}class ee extends Se{static credentialFromJSON(I){const S="string"==typeof I?JSON.parse(I):I;return rt("providerId"in S&&"signInMethod"in S,"argument-error"),Yo._fromParams(S)}credential(I){return this._credential(Object.assign(Object.assign({},I),{nonce:I.rawNonce}))}_credential(I){return rt(I.idToken||I.accessToken,"argument-error"),Yo._fromParams(Object.assign(Object.assign({},I),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(I){return ee.oauthCredentialFromTaggedObject(I)}static credentialFromError(I){return ee.oauthCredentialFromTaggedObject(I.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthIdToken:S,oauthAccessToken:k,oauthTokenSecret:z,pendingToken:Y,nonce:we,providerId:Ze}=I;if(!k&&!z&&!S&&!Y||!Ze)return null;try{return new ee(Ze)._credential({idToken:S,accessToken:k,nonce:we,pendingToken:Y})}catch(gt){return null}}}let Al=(()=>{class P extends Se{constructor(){super("facebook.com")}static credential(S){return Yo._fromParams({providerId:P.PROVIDER_ID,signInMethod:P.FACEBOOK_SIGN_IN_METHOD,accessToken:S})}static credentialFromResult(S){return P.credentialFromTaggedObject(S)}static credentialFromError(S){return P.credentialFromTaggedObject(S.customData||{})}static credentialFromTaggedObject({_tokenResponse:S}){if(!S||!("oauthAccessToken"in S)||!S.oauthAccessToken)return null;try{return P.credential(S.oauthAccessToken)}catch(k){return null}}}return P.FACEBOOK_SIGN_IN_METHOD="facebook.com",P.PROVIDER_ID="facebook.com",P})(),Mi=(()=>{class P extends Se{constructor(){super("google.com"),this.addScope("profile")}static credential(S,k){return Yo._fromParams({providerId:P.PROVIDER_ID,signInMethod:P.GOOGLE_SIGN_IN_METHOD,idToken:S,accessToken:k})}static credentialFromResult(S){return P.credentialFromTaggedObject(S)}static credentialFromError(S){return P.credentialFromTaggedObject(S.customData||{})}static credentialFromTaggedObject({_tokenResponse:S}){if(!S)return null;const{oauthIdToken:k,oauthAccessToken:z}=S;if(!k&&!z)return null;try{return P.credential(k,z)}catch(Y){return null}}}return P.GOOGLE_SIGN_IN_METHOD="google.com",P.PROVIDER_ID="google.com",P})(),Lr=(()=>{class P extends Se{constructor(){super("github.com")}static credential(S){return Yo._fromParams({providerId:P.PROVIDER_ID,signInMethod:P.GITHUB_SIGN_IN_METHOD,accessToken:S})}static credentialFromResult(S){return P.credentialFromTaggedObject(S)}static credentialFromError(S){return P.credentialFromTaggedObject(S.customData||{})}static credentialFromTaggedObject({_tokenResponse:S}){if(!S||!("oauthAccessToken"in S)||!S.oauthAccessToken)return null;try{return P.credential(S.oauthAccessToken)}catch(k){return null}}}return P.GITHUB_SIGN_IN_METHOD="github.com",P.PROVIDER_ID="github.com",P})();class fa extends ji{constructor(I,S){super(I,I),this.pendingToken=S}_getIdTokenResponse(I){return Kt(I,this.buildRequest())}_linkToIdToken(I,S){const k=this.buildRequest();return k.idToken=S,Kt(I,k)}_getReauthenticationResolver(I){const S=this.buildRequest();return S.autoCreate=!1,Kt(I,S)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(I){const S="string"==typeof I?JSON.parse(I):I,{providerId:k,signInMethod:z,pendingToken:Y}=S;return k&&z&&Y&&k===z?new fa(k,Y):null}static _create(I,S){return new fa(I,S)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let No=(()=>{class P extends Se{constructor(){super("twitter.com")}static credential(S,k){return Yo._fromParams({providerId:P.PROVIDER_ID,signInMethod:P.TWITTER_SIGN_IN_METHOD,oauthToken:S,oauthTokenSecret:k})}static credentialFromResult(S){return P.credentialFromTaggedObject(S)}static credentialFromError(S){return P.credentialFromTaggedObject(S.customData||{})}static credentialFromTaggedObject({_tokenResponse:S}){if(!S)return null;const{oauthAccessToken:k,oauthTokenSecret:z}=S;if(!k||!z)return null;try{return P.credential(k,z)}catch(Y){return null}}}return P.TWITTER_SIGN_IN_METHOD="twitter.com",P.PROVIDER_ID="twitter.com",P})();function Gi(P,I){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,A.Z)(function*(P,I){return ro(P,"POST","/v1/accounts:signUp",Vn(P,I))})).apply(this,arguments)}class oo{constructor(I){this.user=I.user,this.providerId=I.providerId,this._tokenResponse=I._tokenResponse,this.operationType=I.operationType}static _fromIdTokenResponse(I,S,k,z=!1){return(0,A.Z)(function*(){const Y=yield ur._fromIdTokenResponse(I,k,z),we=Il(k);return new oo({user:Y,providerId:we,_tokenResponse:k,operationType:S})})()}static _forOperation(I,S,k){return(0,A.Z)(function*(){yield I._updateTokensIfNecessary(k,!0);const z=Il(k);return new oo({user:I,providerId:z,_tokenResponse:k,operationType:S})})()}}function Il(P){return P.providerId?P.providerId:"phoneNumber"in P?"phone":null}function ka(){return(ka=(0,A.Z)(function*(P){var I;const S=cr(P);if(yield S._initializationPromise,null===(I=S.currentUser)||void 0===I?void 0:I.isAnonymous)return new oo({user:S.currentUser,providerId:null,operationType:"signIn"});const k=yield Gi(S,{returnSecureToken:!0}),z=yield oo._fromIdTokenResponse(S,"signIn",k,!0);return yield S._updateCurrentUser(z.user),z})).apply(this,arguments)}class Xu extends te.ZR{constructor(I,S,k,z){var Y;super(S.code,S.message),this.operationType=k,this.user=z,this.name="FirebaseError",Object.setPrototypeOf(this,Xu.prototype),this.appName=I.name,this.code=S.code,this.tenantId=null!==(Y=I.tenantId)&&void 0!==Y?Y:void 0,this.serverResponse=S.customData.serverResponse}static _fromErrorAndOperation(I,S,k,z){return new Xu(I,S,k,z)}}function Qu(P,I,S,k){return("reauthenticate"===I?S._getReauthenticationResolver(P):S._getIdTokenResponse(P)).catch(Y=>{throw"auth/multi-factor-auth-required"===Y.code?Xu._fromErrorAndOperation(P,Y,I,k):Y})}function hu(P){return new Set(P.map(({providerId:I})=>I).filter(I=>!!I))}function Ju(){return(Ju=(0,A.Z)(function*(P,I){const S=(0,te.m9)(P);yield Mo(!0,S,I);const{providerUserInfo:k}=yield Tt(S.auth,{idToken:yield S.getIdToken(),deleteProvider:[I]}),z=hu(k||[]);return S.providerData=S.providerData.filter(Y=>z.has(Y.providerId)),z.has("phone")||(S.phoneNumber=null),yield S.auth._persistUserIfCurrent(S),S})).apply(this,arguments)}function Xn(P,I){return ec.apply(this,arguments)}function ec(){return(ec=(0,A.Z)(function*(P,I,S=!1){const k=yield Vi(P,I._linkToIdToken(P.auth,yield P.getIdToken()),S);return oo._forOperation(P,"link",k)})).apply(this,arguments)}function Mo(P,I,S){return tc.apply(this,arguments)}function tc(){return(tc=(0,A.Z)(function*(P,I,S){yield Ma(I);const z=!1===P?"provider-already-linked":"no-such-provider";rt(hu(I.providerData).has(S)===P,I.auth,z)})).apply(this,arguments)}function jn(P,I){return bl.apply(this,arguments)}function bl(){return(bl=(0,A.Z)(function*(P,I,S=!1){const{auth:k}=P,z="reauthenticate";try{const Y=yield Vi(P,Qu(k,z,I,P),S);rt(Y.idToken,k,"internal-error");const we=ft(Y.idToken);rt(we,k,"internal-error");const{sub:Ze}=we;return rt(P.uid===Ze,k,"user-mismatch"),oo._forOperation(P,z,Y)}catch(Y){throw"auth/user-not-found"===(null==Y?void 0:Y.code)&&Xe(k,"user-mismatch"),Y}})).apply(this,arguments)}function En(P,I){return pa.apply(this,arguments)}function pa(){return(pa=(0,A.Z)(function*(P,I,S=!1){const k="signIn",z=yield Qu(P,k,I),Y=yield oo._fromIdTokenResponse(P,k,z);return S||(yield P._updateCurrentUser(Y.user)),Y})).apply(this,arguments)}function Fi(P,I){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,A.Z)(function*(P,I){return En(cr(P),I)})).apply(this,arguments)}function Fc(P,I){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,A.Z)(function*(P,I){const S=(0,te.m9)(P);return yield Mo(!1,S,I.providerId),Xn(S,I)})).apply(this,arguments)}function Wi(P,I){return nc.apply(this,arguments)}function nc(){return(nc=(0,A.Z)(function*(P,I){return jn((0,te.m9)(P),I)})).apply(this,arguments)}function Sl(P,I){return ga.apply(this,arguments)}function ga(){return(ga=(0,A.Z)(function*(P,I){return ro(P,"POST","/v1/accounts:signInWithCustomToken",Vn(P,I))})).apply(this,arguments)}function ma(){return(ma=(0,A.Z)(function*(P,I){const S=cr(P),k=yield Sl(S,{token:I,returnSecureToken:!0}),z=yield oo._fromIdTokenResponse(S,"signIn",k);return yield S._updateCurrentUser(z.user),z})).apply(this,arguments)}class va{constructor(I,S){this.factorId=I,this.uid=S.mfaEnrollmentId,this.enrollmentTime=new Date(S.enrolledAt).toUTCString(),this.displayName=S.displayName}static _fromServerResponse(I,S){return"phoneInfo"in S?Ht._fromServerResponse(I,S):Xe(I,"internal-error")}}class Ht extends va{constructor(I){super("phone",I),this.phoneNumber=I.phoneInfo}static _fromServerResponse(I,S){return new Ht(S)}}function kc(P,I,S){var k;rt((null===(k=S.url)||void 0===k?void 0:k.length)>0,P,"invalid-continue-uri"),rt(void 0===S.dynamicLinkDomain||S.dynamicLinkDomain.length>0,P,"invalid-dynamic-link-domain"),I.continueUrl=S.url,I.dynamicLinkDomain=S.dynamicLinkDomain,I.canHandleCodeInApp=S.handleCodeInApp,S.iOS&&(rt(S.iOS.bundleId.length>0,P,"missing-ios-bundle-id"),I.iOSBundleId=S.iOS.bundleId),S.android&&(rt(S.android.packageName.length>0,P,"missing-android-pkg-name"),I.androidInstallApp=S.android.installApp,I.androidMinimumVersionCode=S.android.minimumVersion,I.androidPackageName=S.android.packageName)}function rc(){return(rc=(0,A.Z)(function*(P,I,S){const k=(0,te.m9)(P),z={requestType:"PASSWORD_RESET",email:I};S&&kc(k,z,S),yield lu(k,z)})).apply(this,arguments)}function Ps(){return(Ps=(0,A.Z)(function*(P,I,S){yield la((0,te.m9)(P),{oobCode:I,newPassword:S})})).apply(this,arguments)}function Fo(){return(Fo=(0,A.Z)(function*(P,I){yield $u((0,te.m9)(P),{oobCode:I})})).apply(this,arguments)}function ot(P,I){return ln.apply(this,arguments)}function ln(){return(ln=(0,A.Z)(function*(P,I){const S=(0,te.m9)(P),k=yield la(S,{oobCode:I}),z=k.requestType;switch(rt(z,S,"internal-error"),z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":rt(k.newEmail,S,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":rt(k.mfaInfo,S,"internal-error");default:rt(k.email,S,"internal-error")}let Y=null;return k.mfaInfo&&(Y=va._fromServerResponse(cr(S),k.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===k.requestType?k.newEmail:k.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===k.requestType?k.email:k.newEmail)||null,multiFactorInfo:Y},operation:z}})).apply(this,arguments)}function Kn(){return(Kn=(0,A.Z)(function*(P,I){const{data:S}=yield ot((0,te.m9)(P),I);return S.email})).apply(this,arguments)}function Qo(){return(Qo=(0,A.Z)(function*(P,I,S){const k=cr(P),z=yield Gi(k,{returnSecureToken:!0,email:I,password:S}),Y=yield oo._fromIdTokenResponse(k,"signIn",z);return yield k._updateCurrentUser(Y.user),Y})).apply(this,arguments)}function pu(){return(pu=(0,A.Z)(function*(P,I,S){const k=(0,te.m9)(P),z={requestType:"EMAIL_SIGNIN",email:I};rt(S.handleCodeInApp,k,"argument-error"),S&&kc(k,z,S),yield Ds(k,z)})).apply(this,arguments)}function gu(){return(gu=(0,A.Z)(function*(P,I,S){const k=(0,te.m9)(P),z=Fa.credentialWithLink(I,S||Nt());return rt(z._tenantId===(k.tenantId||null),k,"tenant-id-mismatch"),Fi(k,z)})).apply(this,arguments)}function mu(P,I){return Br.apply(this,arguments)}function Br(){return(Br=(0,A.Z)(function*(P,I){return gn(P,"POST","/v1/accounts:createAuthUri",Vn(P,I))})).apply(this,arguments)}function vu(){return(vu=(0,A.Z)(function*(P,I){const k={identifier:I,continueUri:Pt()?Nt():"http://localhost"},{signinMethods:z}=yield mu((0,te.m9)(P),k);return z||[]})).apply(this,arguments)}function Ar(){return(Ar=(0,A.Z)(function*(P,I){const S=(0,te.m9)(P),z={requestType:"VERIFY_EMAIL",idToken:yield P.getIdToken()};I&&kc(S.auth,z,I);const{email:Y}=yield da(S.auth,z);Y!==P.email&&(yield P.reload())})).apply(this,arguments)}function _u(){return(_u=(0,A.Z)(function*(P,I,S){const k=(0,te.m9)(P),Y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield P.getIdToken(),newEmail:I};S&&kc(k.auth,Y,S);const{email:we}=yield vf(k.auth,Y);we!==P.email&&(yield P.reload())})).apply(this,arguments)}function La(P,I){return ic.apply(this,arguments)}function ic(){return(ic=(0,A.Z)(function*(P,I){return gn(P,"POST","/v1/accounts:update",I)})).apply(this,arguments)}function Jo(){return(Jo=(0,A.Z)(function*(P,{displayName:I,photoURL:S}){if(void 0===I&&void 0===S)return;const k=(0,te.m9)(P),Y={idToken:yield k.getIdToken(),displayName:I,photoUrl:S,returnSecureToken:!0},we=yield Vi(k,La(k.auth,Y));k.displayName=we.displayName||null,k.photoURL=we.photoUrl||null;const Ze=k.providerData.find(({providerId:gt})=>"password"===gt);Ze&&(Ze.displayName=k.displayName,Ze.photoURL=k.photoURL),yield k._updateTokensIfNecessary(we)})).apply(this,arguments)}function xu(P,I,S){return wu.apply(this,arguments)}function wu(){return(wu=(0,A.Z)(function*(P,I,S){const{auth:k}=P,Y={idToken:yield P.getIdToken(),returnSecureToken:!0};I&&(Y.email=I),S&&(Y.password=S);const we=yield Vi(P,uu(k,Y));yield P._updateTokensIfNecessary(we,!0)})).apply(this,arguments)}class Eu{constructor(I,S,k={}){this.isNewUser=I,this.providerId=S,this.profile=k}}class Ad extends Eu{constructor(I,S,k,z){super(I,S,k),this.username=z}}class Cf extends Eu{constructor(I,S){super(I,"facebook.com",S)}}class Id extends Ad{constructor(I,S){super(I,"github.com",S,"string"==typeof(null==S?void 0:S.login)?null==S?void 0:S.login:null)}}class Cu extends Eu{constructor(I,S){super(I,"google.com",S)}}class Bc extends Ad{constructor(I,S,k){super(I,"twitter.com",S,k)}}function hr(P){const{user:I,_tokenResponse:S}=P;return I.isAnonymous&&!S?{providerId:null,isNewUser:!1,profile:null}:function(P){var I,S;if(!P)return null;const{providerId:k}=P,z=P.rawUserInfo?JSON.parse(P.rawUserInfo):{},Y=P.isNewUser||"identitytoolkit#SignupNewUserResponse"===P.kind;if(!k&&(null==P?void 0:P.idToken)){const we=null===(S=null===(I=ft(P.idToken))||void 0===I?void 0:I.firebase)||void 0===S?void 0:S.sign_in_provider;if(we)return new Eu(Y,"anonymous"!==we&&"custom"!==we?we:null)}if(!k)return null;switch(k){case"facebook.com":return new Cf(Y,z);case"github.com":return new Id(Y,z);case"google.com":return new Cu(Y,z);case"twitter.com":return new Bc(Y,z,P.screenName||null);case"custom":case"anonymous":return new Eu(Y,null);default:return new Eu(Y,k,z)}}(S)}class Fs{constructor(I,S){this.type=I,this.credential=S}static _fromIdtoken(I){return new Fs("enroll",I)}static _fromMfaPendingCredential(I){return new Fs("signin",I)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(I){var S,k;if(null==I?void 0:I.multiFactorSession){if(null===(S=I.multiFactorSession)||void 0===S?void 0:S.pendingCredential)return Fs._fromMfaPendingCredential(I.multiFactorSession.pendingCredential);if(null===(k=I.multiFactorSession)||void 0===k?void 0:k.idToken)return Fs._fromIdtoken(I.multiFactorSession.idToken)}return null}}class Ba{constructor(I,S,k){this.session=I,this.hints=S,this.signInResolver=k}static _fromError(I,S){const k=cr(I),z=(S.serverResponse.mfaInfo||[]).map(we=>va._fromServerResponse(k,we));rt(S.serverResponse.mfaPendingCredential,k,"internal-error");const Y=Fs._fromMfaPendingCredential(S.serverResponse.mfaPendingCredential);return new Ba(Y,z,function(){var we=(0,A.Z)(function*(Ze){const gt=yield Ze._process(k,Y);delete S.serverResponse.mfaInfo,delete S.serverResponse.mfaPendingCredential;const _t=Object.assign(Object.assign({},S.serverResponse),{idToken:gt.idToken,refreshToken:gt.refreshToken});switch(S.operationType){case"signIn":const Xt=yield oo._fromIdTokenResponse(k,S.operationType,_t);return yield k._updateCurrentUser(Xt.user),Xt;case"reauthenticate":return rt(S.user,k,"internal-error"),oo._forOperation(S.user,S.operationType,_t);default:Xe(k,"internal-error")}});return function(Ze){return we.apply(this,arguments)}}())}resolveSignIn(I){var S=this;return(0,A.Z)(function*(){return S.signInResolver(I)})()}}function Uc(P,I){return gn(P,"POST","/v2/accounts/mfaEnrollment:start",Vn(P,I))}class Rl{constructor(I){this.user=I,this.enrolledFactors=[],I._onReload(S=>{S.mfaInfo&&(this.enrolledFactors=S.mfaInfo.map(k=>va._fromServerResponse(I.auth,k)))})}static _fromUser(I){return new Rl(I)}getSession(){var I=this;return(0,A.Z)(function*(){return Fs._fromIdtoken(yield I.user.getIdToken())})()}enroll(I,S){var k=this;return(0,A.Z)(function*(){const z=I,Y=yield k.getSession(),we=yield Vi(k.user,z._process(k.user.auth,Y,S));return yield k.user._updateTokensIfNecessary(we),k.user.reload()})()}unenroll(I){var S=this;return(0,A.Z)(function*(){const k="string"==typeof I?I:I.uid,z=yield S.user.getIdToken(),Y=yield Vi(S.user,function(P,I){return gn(P,"POST","/v2/accounts/mfaEnrollment:withdraw",Vn(P,I))}(S.user.auth,{idToken:z,mfaEnrollmentId:k}));S.enrolledFactors=S.enrolledFactors.filter(({uid:we})=>we!==k),yield S.user._updateTokensIfNecessary(Y);try{yield S.user.reload()}catch(we){if("auth/user-token-expired"!==we.code)throw we}})()}}const ks=new WeakMap,sc="__sak";class Sd{constructor(I,S){this.storage=I,this.type=S}_isAvailable(){try{return this.storage?(this.storage.setItem(sc,"1"),this.storage.removeItem(sc),Promise.resolve(!0)):Promise.resolve(!1)}catch(I){return Promise.resolve(!1)}}_set(I,S){return this.storage.setItem(I,JSON.stringify(S)),Promise.resolve()}_get(I){const S=this.storage.getItem(I);return Promise.resolve(S?JSON.parse(S):null)}_remove(I){return this.storage.removeItem(I),Promise.resolve()}}const ac=(()=>{class P extends Sd{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(S,k)=>this.onStorageEvent(S,k),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const P=(0,te.z$)();return wl(P)||ci(P)}()&&function(){try{return!(!window||window===window.top)}catch(P){return!1}}(),this.fallbackToPolling=mt(),this._shouldAllowMigration=!0}forAllChangedKeys(S){for(const k of Object.keys(this.listeners)){const z=this.storage.getItem(k),Y=this.localCache[k];z!==Y&&S(k,Y,z)}}onStorageEvent(S,k=!1){if(!S.key)return void this.forAllChangedKeys((Ze,gt,_t)=>{this.notifyListeners(Ze,_t)});const z=S.key;if(k?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ze=this.storage.getItem(z);if(S.newValue!==Ze)null!==S.newValue?this.storage.setItem(z,S.newValue):this.storage.removeItem(z);else if(this.localCache[z]===S.newValue&&!k)return}const Y=()=>{const Ze=this.storage.getItem(z);!k&&this.localCache[z]===Ze||this.notifyListeners(z,Ze)},we=this.storage.getItem(z);(0,te.w1)()&&10===document.documentMode&&we!==S.newValue&&S.newValue!==S.oldValue?setTimeout(Y,10):Y()}notifyListeners(S,k){this.localCache[S]=k;const z=this.listeners[S];if(z)for(const Y of Array.from(z))Y(k&&JSON.parse(k))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((S,k,z)=>{this.onStorageEvent(new StorageEvent("storage",{key:S,oldValue:k,newValue:z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(S,k){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[S]||(this.listeners[S]=new Set,this.localCache[S]=this.storage.getItem(S)),this.listeners[S].add(k)}_removeListener(S,k){this.listeners[S]&&(this.listeners[S].delete(k),0===this.listeners[S].size&&delete this.listeners[S]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(S,k){var z=()=>super._set,Y=this;return(0,A.Z)(function*(){yield z().call(Y,S,k),Y.localCache[S]=JSON.stringify(k)})()}_get(S){var k=()=>super._get,z=this;return(0,A.Z)(function*(){const Y=yield k().call(z,S);return z.localCache[S]=JSON.stringify(Y),Y})()}_remove(S){var k=()=>super._remove,z=this;return(0,A.Z)(function*(){yield k().call(z,S),delete z.localCache[S]})()}}return P.type="LOCAL",P})(),ts=(()=>{class P extends Sd{constructor(){super(window.sessionStorage,"SESSION")}_addListener(S,k){}_removeListener(S,k){}}return P.type="SESSION",P})();let zi=(()=>{class P{constructor(S){this.eventTarget=S,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(S){const k=this.receivers.find(Y=>Y.isListeningto(S));if(k)return k;const z=new P(S);return this.receivers.push(z),z}isListeningto(S){return this.eventTarget===S}handleEvent(S){var k=this;return(0,A.Z)(function*(){const z=S,{eventId:Y,eventType:we,data:Ze}=z.data,gt=k.handlersMap[we];if(!(null==gt?void 0:gt.size))return;z.ports[0].postMessage({status:"ack",eventId:Y,eventType:we});const _t=Array.from(gt).map(function(){var Wt=(0,A.Z)(function*(pi){return pi(z.origin,Ze)});return function(pi){return Wt.apply(this,arguments)}}()),Xt=yield function(P){return Promise.all(P.map(function(){var I=(0,A.Z)(function*(S){try{return{fulfilled:!0,value:yield S}}catch(k){return{fulfilled:!1,reason:k}}});return function(S){return I.apply(this,arguments)}}()))}(_t);z.ports[0].postMessage({status:"done",eventId:Y,eventType:we,response:Xt})})()}_subscribe(S,k){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[S]||(this.handlersMap[S]=new Set),this.handlersMap[S].add(k)}_unsubscribe(S,k){this.handlersMap[S]&&k&&this.handlersMap[S].delete(k),(!k||0===this.handlersMap[S].size)&&delete this.handlersMap[S],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return P.receivers=[],P})();function Ls(P="",I=10){let S="";for(let k=0;k<I;k++)S+=Math.floor(10*Math.random());return P+S}class Bs{constructor(I){this.target=I,this.handlers=new Set}removeMessageHandler(I){I.messageChannel&&(I.messageChannel.port1.removeEventListener("message",I.onMessage),I.messageChannel.port1.close()),this.handlers.delete(I)}_send(I,S,k=50){var z=this;return(0,A.Z)(function*(){const Y="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Y)throw new Error("connection_unavailable");let we,Ze;return new Promise((gt,_t)=>{const Xt=Ls("",20);Y.port1.start();const Wt=setTimeout(()=>{_t(new Error("unsupported_event"))},k);Ze={messageChannel:Y,onMessage(pi){const os=pi;if(os.data.eventId===Xt)switch(os.data.status){case"ack":clearTimeout(Wt),we=setTimeout(()=>{_t(new Error("timeout"))},3e3);break;case"done":clearTimeout(we),gt(os.data.response);break;default:clearTimeout(Wt),clearTimeout(we),_t(new Error("invalid_response"))}}},z.handlers.add(Ze),Y.port1.addEventListener("message",Ze.onMessage),z.target.postMessage({eventType:I,eventId:Xt,data:S},[Y.port2])}).finally(()=>{Ze&&z.removeMessageHandler(Ze)})})()}}function rr(){return window}function Nl(){return void 0!==rr().WorkerGlobalScope&&"function"==typeof rr().importScripts}function uc(){return(uc=(0,A.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(P){return null}})).apply(this,arguments)}const Pl="firebaseLocalStorageDb",Ml="firebaseLocalStorage",Fl="fbase_key";class Vs{constructor(I){this.request=I}toPromise(){return new Promise((I,S)=>{this.request.addEventListener("success",()=>{I(this.request.result)}),this.request.addEventListener("error",()=>{S(this.request.error)})})}}function Us(P,I){return P.transaction([Ml],I?"readwrite":"readonly").objectStore(Ml)}function Qn(){const P=indexedDB.open(Pl,1);return new Promise((I,S)=>{P.addEventListener("error",()=>{S(P.error)}),P.addEventListener("upgradeneeded",()=>{const k=P.result;try{k.createObjectStore(Ml,{keyPath:Fl})}catch(z){S(z)}}),P.addEventListener("success",(0,A.Z)(function*(){const k=P.result;k.objectStoreNames.contains(Ml)?I(k):(k.close(),yield function(){const P=indexedDB.deleteDatabase(Pl);return new Vs(P).toPromise()}(),I(yield Qn()))}))})}function Ur(P,I,S){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,A.Z)(function*(P,I,S){const k=Us(P,!0).put({[Fl]:I,value:S});return new Vs(k).toPromise()})).apply(this,arguments)}function bi(){return(bi=(0,A.Z)(function*(P,I){const S=Us(P,!1).get(I),k=yield new Vs(S).toPromise();return void 0===k?null:k.value})).apply(this,arguments)}function Gc(P,I){const S=Us(P,!0).delete(I);return new Vs(S).toPromise()}const Hs=(()=>{class P{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var S=this;return(0,A.Z)(function*(){return S.db||(S.db=yield Qn()),S.db})()}_withRetries(S){var k=this;return(0,A.Z)(function*(){let z=0;for(;;)try{const Y=yield k._openDb();return yield S(Y)}catch(Y){if(z++>3)throw Y;k.db&&(k.db.close(),k.db=void 0)}})()}initializeServiceWorkerMessaging(){var S=this;return(0,A.Z)(function*(){return Nl()?S.initializeReceiver():S.initializeSender()})()}initializeReceiver(){var S=this;return(0,A.Z)(function*(){S.receiver=zi._getInstance(Nl()?self:null),S.receiver._subscribe("keyChanged",function(){var k=(0,A.Z)(function*(z,Y){return{keyProcessed:(yield S._poll()).includes(Y.key)}});return function(z,Y){return k.apply(this,arguments)}}()),S.receiver._subscribe("ping",function(){var k=(0,A.Z)(function*(z,Y){return["keyChanged"]});return function(z,Y){return k.apply(this,arguments)}}())})()}initializeSender(){var S=this;return(0,A.Z)(function*(){var k,z;if(S.activeServiceWorker=yield function(){return uc.apply(this,arguments)}(),!S.activeServiceWorker)return;S.sender=new Bs(S.activeServiceWorker);const Y=yield S.sender._send("ping",{},800);!Y||(null===(k=Y[0])||void 0===k?void 0:k.fulfilled)&&(null===(z=Y[0])||void 0===z?void 0:z.value.includes("keyChanged"))&&(S.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(S){var k=this;return(0,A.Z)(function*(){if(k.sender&&k.activeServiceWorker&&function(){var P;return(null===(P=null==navigator?void 0:navigator.serviceWorker)||void 0===P?void 0:P.controller)||null}()===k.activeServiceWorker)try{yield k.sender._send("keyChanged",{key:S},k.serviceWorkerReceiverAvailable?800:50)}catch(z){}})()}_isAvailable(){return(0,A.Z)(function*(){try{if(!indexedDB)return!1;const S=yield Qn();return yield Ur(S,sc,"1"),yield Gc(S,sc),!0}catch(S){}return!1})()}_withPendingWrite(S){var k=this;return(0,A.Z)(function*(){k.pendingWrites++;try{yield S()}finally{k.pendingWrites--}})()}_set(S,k){var z=this;return(0,A.Z)(function*(){return z._withPendingWrite((0,A.Z)(function*(){return yield z._withRetries(Y=>Ur(Y,S,k)),z.localCache[S]=k,z.notifyServiceWorker(S)}))})()}_get(S){var k=this;return(0,A.Z)(function*(){const z=yield k._withRetries(Y=>function(P,I){return bi.apply(this,arguments)}(Y,S));return k.localCache[S]=z,z})()}_remove(S){var k=this;return(0,A.Z)(function*(){return k._withPendingWrite((0,A.Z)(function*(){return yield k._withRetries(z=>Gc(z,S)),delete k.localCache[S],k.notifyServiceWorker(S)}))})()}_poll(){var S=this;return(0,A.Z)(function*(){const k=yield S._withRetries(we=>{const Ze=Us(we,!1).getAll();return new Vs(Ze).toPromise()});if(!k)return[];if(0!==S.pendingWrites)return[];const z=[],Y=new Set;for(const{fbase_key:we,value:Ze}of k)Y.add(we),JSON.stringify(S.localCache[we])!==JSON.stringify(Ze)&&(S.notifyListeners(we,Ze),z.push(we));for(const we of Object.keys(S.localCache))S.localCache[we]&&!Y.has(we)&&(S.notifyListeners(we,null),z.push(we));return z})()}notifyListeners(S,k){this.localCache[S]=k;const z=this.listeners[S];if(z)for(const Y of Array.from(z))Y(k)}startPolling(){var S=this;this.stopPolling(),this.pollTimer=setInterval((0,A.Z)(function*(){return S._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(S,k){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[S]||(this.listeners[S]=new Set,this._get(S)),this.listeners[S].add(k)}_removeListener(S,k){this.listeners[S]&&(this.listeners[S].delete(k),0===this.listeners[S].size&&delete this.listeners[S]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return P.type="LOCAL",P})();function Xr(P,I){return gn(P,"POST","/v2/accounts/mfaSignIn:start",Vn(P,I))}function ns(){return(ns=(0,A.Z)(function*(P){return(yield gn(P,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function lc(P){return new Promise((I,S)=>{const k=document.createElement("script");k.setAttribute("src",P),k.onload=I,k.onerror=z=>{const Y=lt("internal-error");Y.customData=z,S(Y)},k.type="text/javascript",k.charset="UTF-8",function(){var P,I;return null!==(I=null===(P=document.getElementsByTagName("head"))||void 0===P?void 0:P[0])&&void 0!==I?I:document}().appendChild(k)})}function Ua(P){return`__${P}${Math.floor(1e6*Math.random())}`}const js=1e12;class xa{constructor(I){this.auth=I,this.counter=js,this._widgets=new Map}render(I,S){const k=this.counter;return this._widgets.set(k,new dc(I,this.auth.name,S||{})),this.counter++,k}reset(I){var S;const k=I||js;null===(S=this._widgets.get(k))||void 0===S||S.delete(),this._widgets.delete(k)}getResponse(I){var S;return(null===(S=this._widgets.get(I||js))||void 0===S?void 0:S.getResponse())||""}execute(I){var S=this;return(0,A.Z)(function*(){var k;return null===(k=S._widgets.get(I||js))||void 0===k||k.execute(),""})()}}class dc{constructor(I,S,k){this.params=k,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const z="string"==typeof I?document.getElementById(I):I;rt(z,"argument-error",{appName:S}),this.container=z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(P){const I=[],S="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let k=0;k<50;k++)I.push(S.charAt(Math.floor(Math.random()*S.length)));return I.join("")}();const{callback:I,"expired-callback":S}=this.params;if(I)try{I(this.responseToken)}catch(k){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,S)try{S()}catch(k){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ao=Ua("rcb"),Od=new Re(3e4,6e4);class Qr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!rr().grecaptcha}load(I,S=""){return rt((P=S).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(P),I,"argument-error"),this.shouldResolveImmediately(S)?Promise.resolve(rr().grecaptcha):new Promise((k,z)=>{const Y=rr().setTimeout(()=>{z(lt(I,"network-request-failed"))},Od.get());rr()[ao]=()=>{rr().clearTimeout(Y),delete rr()[ao];const Ze=rr().grecaptcha;if(!Ze)return void z(lt(I,"internal-error"));const gt=Ze.render;Ze.render=(_t,Xt)=>{const Wt=gt(_t,Xt);return this.counter++,Wt},this.hostLanguage=S,k(Ze)},lc(`https://www.google.com/recaptcha/api.js??${(0,te.xO)({onload:ao,render:"explicit",hl:S})}`).catch(()=>{clearTimeout(Y),z(lt(I,"internal-error"))})});var P}clearedOneInstance(){this.counter--}shouldResolveImmediately(I){return!!rr().grecaptcha&&(I===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Rd{load(I){return(0,A.Z)(function*(){return new xa(I)})()}clearedOneInstance(){}}const Jn="recaptcha",kl={theme:"light",type:"image"};class fc{constructor(I,S=Object.assign({},kl),k){this.parameters=S,this.type=Jn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cr(k),this.isInvisible="invisible"===this.parameters.size,rt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const z="string"==typeof I?document.getElementById(I):I;rt(z,this.auth,"argument-error"),this.container=z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Rd:new Qr,this.validateStartingState()}verify(){var I=this;return(0,A.Z)(function*(){I.assertNotDestroyed();const S=yield I.render(),k=I.getAssertedRecaptcha();return k.getResponse(S)||new Promise(Y=>{const we=Ze=>{!Ze||(I.tokenChangeListeners.delete(we),Y(Ze))};I.tokenChangeListeners.add(we),I.isInvisible&&k.execute(S)})})()}render(){try{this.assertNotDestroyed()}catch(I){return Promise.reject(I)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(I=>{throw this.renderPromise=null,I})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(I=>{this.container.removeChild(I)})}validateStartingState(){rt(!this.parameters.sitekey,this.auth,"argument-error"),rt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),rt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(I){return S=>{if(this.tokenChangeListeners.forEach(k=>k(S)),"function"==typeof I)I(S);else if("string"==typeof I){const k=rr()[I];"function"==typeof k&&k(S)}}}assertNotDestroyed(){rt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var I=this;return(0,A.Z)(function*(){if(yield I.init(),!I.widgetId){let S=I.container;if(!I.isInvisible){const k=document.createElement("div");S.appendChild(k),S=k}I.widgetId=I.getAssertedRecaptcha().render(S,I.parameters)}return I.widgetId})()}init(){var I=this;return(0,A.Z)(function*(){rt(Pt()&&!Nl(),I.auth,"internal-error"),yield function(){let P=null;return new Promise(I=>{"complete"!==document.readyState?(P=()=>I(),window.addEventListener("load",P)):I()}).catch(I=>{throw P&&window.removeEventListener("load",P),I})}(),I.recaptcha=yield I._recaptchaLoader.load(I.auth,I.auth.languageCode||void 0);const S=yield function(P){return ns.apply(this,arguments)}(I.auth);rt(S,I.auth,"internal-error"),I.parameters.sitekey=S})()}getAssertedRecaptcha(){return rt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ll{constructor(I,S){this.verificationId=I,this.onConfirmation=S}confirm(I){const S=fu._fromVerification(this.verificationId,I);return this.onConfirmation(S)}}function Gs(){return(Gs=(0,A.Z)(function*(P,I,S){const k=cr(P),z=yield Zc(k,I,(0,te.m9)(S));return new Ll(z,Y=>Fi(k,Y))})).apply(this,arguments)}function Pd(){return(Pd=(0,A.Z)(function*(P,I,S){const k=(0,te.m9)(P);yield Mo(!1,k,"phone");const z=yield Zc(k.auth,I,(0,te.m9)(S));return new Ll(z,Y=>Fc(k,Y))})).apply(this,arguments)}function Md(){return(Md=(0,A.Z)(function*(P,I,S){const k=(0,te.m9)(P),z=yield Zc(k.auth,I,(0,te.m9)(S));return new Ll(z,Y=>Wi(k,Y))})).apply(this,arguments)}function Zc(P,I,S){return $i.apply(this,arguments)}function $i(){return($i=(0,A.Z)(function*(P,I,S){var k;const z=yield S.verify();try{let Y;if(rt("string"==typeof z,P,"argument-error"),rt(S.type===Jn,P,"argument-error"),Y="string"==typeof I?{phoneNumber:I}:I,"session"in Y){const we=Y.session;if("phoneNumber"in Y)return rt("enroll"===we.type,P,"internal-error"),(yield Uc(P,{idToken:we.credential,phoneEnrollmentInfo:{phoneNumber:Y.phoneNumber,recaptchaToken:z}})).phoneSessionInfo.sessionInfo;{rt("signin"===we.type,P,"internal-error");const Ze=(null===(k=Y.multiFactorHint)||void 0===k?void 0:k.uid)||Y.multiFactorUid;return rt(Ze,P,"missing-multi-factor-info"),(yield Xr(P,{mfaPendingCredential:we.credential,mfaEnrollmentId:Ze,phoneSignInInfo:{recaptchaToken:z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:we}=yield yf(P,{phoneNumber:Y.phoneNumber,recaptchaToken:z});return we}}finally{S._reset()}})).apply(this,arguments)}function Gn(){return(Gn=(0,A.Z)(function*(P,I){yield Xn((0,te.m9)(P),I)})).apply(this,arguments)}let Vo=(()=>{class P{constructor(S){this.providerId=P.PROVIDER_ID,this.auth=cr(S)}verifyPhoneNumber(S,k){return Zc(this.auth,S,(0,te.m9)(k))}static credential(S,k){return fu._fromVerification(S,k)}static credentialFromResult(S){return P.credentialFromTaggedObject(S)}static credentialFromError(S){return P.credentialFromTaggedObject(S.customData||{})}static credentialFromTaggedObject({_tokenResponse:S}){if(!S)return null;const{phoneNumber:k,temporaryProof:z}=S;return k&&z?fu._fromTokenResponse(k,z):null}}return P.PROVIDER_ID="phone",P.PHONE_SIGN_IN_METHOD="phone",P})();function uo(P,I){return I?Oe(I):(rt(P._popupRedirectResolver,P,"argument-error"),P._popupRedirectResolver)}class Bl extends ji{constructor(I){super("custom","custom"),this.params=I}_getIdTokenResponse(I){return Kt(I,this._buildIdpRequest())}_linkToIdToken(I,S){return Kt(I,this._buildIdpRequest(S))}_getReauthenticationResolver(I){return Kt(I,this._buildIdpRequest())}_buildIdpRequest(I){const S={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return I&&(S.idToken=I),S}}function Ir(P){return En(P.auth,new Bl(P),P.bypassAuthState)}function mo(P){const{auth:I,user:S}=P;return rt(S,I,"internal-error"),jn(S,new Bl(P),P.bypassAuthState)}function Ct(P){return wa.apply(this,arguments)}function wa(){return(wa=(0,A.Z)(function*(P){const{auth:I,user:S}=P;return rt(S,I,"internal-error"),Xn(S,new Bl(P),P.bypassAuthState)})).apply(this,arguments)}class co{constructor(I,S,k,z,Y=!1){this.auth=I,this.resolver=k,this.user=z,this.bypassAuthState=Y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(S)?S:[S]}execute(){var I=this;return new Promise(function(){var S=(0,A.Z)(function*(k,z){I.pendingPromise={resolve:k,reject:z};try{I.eventManager=yield I.resolver._initialize(I.auth),yield I.onExecution(),I.eventManager.registerConsumer(I)}catch(Y){I.reject(Y)}});return function(k,z){return S.apply(this,arguments)}}())}onAuthEvent(I){var S=this;return(0,A.Z)(function*(){const{urlResponse:k,sessionId:z,postBody:Y,tenantId:we,error:Ze,type:gt}=I;if(Ze)return void S.reject(Ze);const _t={auth:S.auth,requestUri:k,sessionId:z,tenantId:we||void 0,postBody:Y||void 0,user:S.user,bypassAuthState:S.bypassAuthState};try{S.resolve(yield S.getIdpTask(gt)(_t))}catch(Xt){S.reject(Xt)}})()}onError(I){this.reject(I)}getIdpTask(I){switch(I){case"signInViaPopup":case"signInViaRedirect":return Ir;case"linkViaPopup":case"linkViaRedirect":return Ct;case"reauthViaPopup":case"reauthViaRedirect":return mo;default:Xe(this.auth,"internal-error")}}resolve(I){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(I),this.unregisterAndCleanUp()}reject(I){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(I),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ea=new Re(2e3,1e4);function Vl(){return(Vl=(0,A.Z)(function*(P,I,S){const k=cr(P);nn(P,I,Xo);const z=uo(k,S);return new Cn(k,"signInViaPopup",I,z).executeNotNull()})).apply(this,arguments)}function Ws(){return(Ws=(0,A.Z)(function*(P,I,S){const k=(0,te.m9)(P);nn(k.auth,I,Xo);const z=uo(k.auth,S);return new Cn(k.auth,"reauthViaPopup",I,z,k).executeNotNull()})).apply(this,arguments)}function fi(){return(fi=(0,A.Z)(function*(P,I,S){const k=(0,te.m9)(P);nn(k.auth,I,Xo);const z=uo(k.auth,S);return new Cn(k.auth,"linkViaPopup",I,z,k).executeNotNull()})).apply(this,arguments)}let Cn=(()=>{class P extends co{constructor(S,k,z,Y,we){super(S,k,Y,we),this.provider=z,this.authWindow=null,this.pollId=null,P.currentPopupAction&&P.currentPopupAction.cancel(),P.currentPopupAction=this}executeNotNull(){var S=this;return(0,A.Z)(function*(){const k=yield S.execute();return rt(k,S.auth,"internal-error"),k})()}onExecution(){var S=this;return(0,A.Z)(function*(){Le(1===S.filter.length,"Popup operations only handle one event");const k=Ls();S.authWindow=yield S.resolver._openPopup(S.auth,S.provider,S.filter[0],k),S.authWindow.associatedEvent=k,S.resolver._originValidation(S.auth).catch(z=>{S.reject(z)}),S.resolver._isIframeWebStorageSupported(S.auth,z=>{z||S.reject(lt(S.auth,"web-storage-unsupported"))}),S.pollUserCancellation()})()}get eventId(){var S;return(null===(S=this.authWindow)||void 0===S?void 0:S.associatedEvent)||null}cancel(){this.reject(lt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,P.currentPopupAction=null}pollUserCancellation(){const S=()=>{var k,z;this.pollId=(null===(z=null===(k=this.authWindow)||void 0===k?void 0:k.window)||void 0===z?void 0:z.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(lt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(S,Ea.get())};S()}}return P.currentPopupAction=null,P})();const u=new Map;class c extends co{constructor(I,S,k=!1){super(I,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],S,void 0,k),this.eventId=null}execute(){var I=()=>super.execute,S=this;return(0,A.Z)(function*(){let k=u.get(S.auth._key());if(!k){try{const Y=(yield function(P,I){return h.apply(this,arguments)}(S.resolver,S.auth))?yield I().call(S):null;k=()=>Promise.resolve(Y)}catch(z){k=()=>Promise.reject(z)}u.set(S.auth._key(),k)}return k()})()}onAuthEvent(I){var S=()=>super.onAuthEvent,k=this;return(0,A.Z)(function*(){if("signInViaRedirect"===I.type)return S().call(k,I);if("unknown"!==I.type){if(I.eventId){const z=yield k.auth._redirectUserForId(I.eventId);if(z)return k.user=z,S().call(k,I);k.resolve(null)}}else k.resolve(null)})()}onExecution(){return(0,A.Z)(function*(){})()}cleanUp(){}}function h(){return(h=(0,A.Z)(function*(P,I){const S=R(I),k="true"===(yield b(P)._get(S));return yield b(P)._remove(S),k})).apply(this,arguments)}function m(P,I){return x.apply(this,arguments)}function x(){return(x=(0,A.Z)(function*(P,I){return b(P)._set(R(I),"true")})).apply(this,arguments)}function b(P){return Oe(P._redirectPersistence)}function R(P){return Rn("pendingRedirect",P.config.apiKey,P.name)}function H(){return(H=(0,A.Z)(function*(P,I,S){const k=cr(P);nn(P,I,Xo);const z=uo(k,S);return yield m(z,k),z._openRedirect(k,I,"signInViaRedirect")})).apply(this,arguments)}function oe(){return(oe=(0,A.Z)(function*(P,I,S){const k=(0,te.m9)(P);nn(k.auth,I,Xo);const z=uo(k.auth,S);yield m(z,k.auth);const Y=yield pt(k);return z._openRedirect(k.auth,I,"reauthViaRedirect",Y)})).apply(this,arguments)}function ge(){return(ge=(0,A.Z)(function*(P,I,S){const k=(0,te.m9)(P);nn(k.auth,I,Xo);const z=uo(k.auth,S);yield Mo(!1,k,I.providerId),yield m(z,k.auth);const Y=yield pt(k);return z._openRedirect(k.auth,I,"linkViaRedirect",Y)})).apply(this,arguments)}function Ge(){return(Ge=(0,A.Z)(function*(P,I){return yield cr(P)._initializationPromise,Je(P,I,!1)})).apply(this,arguments)}function Je(P,I){return st.apply(this,arguments)}function st(){return(st=(0,A.Z)(function*(P,I,S=!1){const k=cr(P),z=uo(k,I),we=yield new c(k,z,S).execute();return we&&!S&&(delete we.user._redirectEventId,yield k._persistUserIfCurrent(we.user),yield k._setRedirectUser(null,I)),we})).apply(this,arguments)}function pt(P){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,A.Z)(function*(P){const I=Ls(`${P.uid}:::`);return P._redirectEventId=I,yield P.auth._setRedirectUser(P),yield P.auth._persistUserIfCurrent(P),I})).apply(this,arguments)}class qt{constructor(I){this.auth=I,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(I){this.consumers.add(I),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,I)&&(this.sendToConsumer(this.queuedRedirectEvent,I),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(I){this.consumers.delete(I)}onEvent(I){if(this.hasEventBeenHandled(I))return!1;let S=!1;return this.consumers.forEach(k=>{this.isEventForConsumer(I,k)&&(S=!0,this.sendToConsumer(I,k),this.saveEventToCache(I))}),this.hasHandledPotentialRedirect||!function(P){switch(P.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _n(P);default:return!1}}(I)||(this.hasHandledPotentialRedirect=!0,S||(this.queuedRedirectEvent=I,S=!0)),S}sendToConsumer(I,S){var k;if(I.error&&!_n(I)){const z=(null===(k=I.error.code)||void 0===k?void 0:k.split("auth/")[1])||"internal-error";S.onError(lt(this.auth,z))}else S.onAuthEvent(I)}isEventForConsumer(I,S){const k=null===S.eventId||!!I.eventId&&I.eventId===S.eventId;return S.filter.includes(I.type)&&k}hasEventBeenHandled(I){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jr(I))}saveEventToCache(I){this.cachedEventUids.add(Jr(I)),this.lastProcessedEventTime=Date.now()}}function Jr(P){return[P.type,P.eventId,P.sessionId,P.tenantId].filter(I=>I).join("-")}function _n({type:P,error:I}){return"unknown"===P&&"auth/no-auth-event"===(null==I?void 0:I.code)}function hi(P){return rs.apply(this,arguments)}function rs(){return(rs=(0,A.Z)(function*(P,I={}){return gn(P,"GET","/v1/projects",I)})).apply(this,arguments)}const Kc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pr=/^https?/;function Ca(){return(Ca=(0,A.Z)(function*(P){if(P.config.emulator)return;const{authorizedDomains:I}=yield hi(P);for(const S of I)try{if(Ul(S))return}catch(k){}Xe(P,"unauthorized-domain")})).apply(this,arguments)}function Ul(P){const I=Nt(),{protocol:S,hostname:k}=new URL(I);if(P.startsWith("chrome-extension://")){const we=new URL(P);return""===we.hostname&&""===k?"chrome-extension:"===S&&P.replace("chrome-extension://","")===I.replace("chrome-extension://",""):"chrome-extension:"===S&&we.hostname===k}if(!pr.test(S))return!1;if(Kc.test(P))return k===P;const z=P.replace(/\./g,"\\.");return new RegExp("^(.+\\."+z+"|"+z+")$","i").test(k)}const Yc=new Re(3e4,6e4);function Ay(){const P=rr().___jsl;if(null==P?void 0:P.H)for(const I of Object.keys(P.H))if(P.H[I].r=P.H[I].r||[],P.H[I].L=P.H[I].L||[],P.H[I].r=[...P.H[I].L],P.CP)for(let S=0;S<P.CP.length;S++)P.CP[S]=null}let Xc=null;function Z0(P){return Xc=Xc||function(P){return new Promise((I,S)=>{var k,z,Y;function we(){Ay(),gapi.load("gapi.iframes",{callback:()=>{I(gapi.iframes.getContext())},ontimeout:()=>{Ay(),S(lt(P,"network-request-failed"))},timeout:Yc.get()})}if(null===(z=null===(k=rr().gapi)||void 0===k?void 0:k.iframes)||void 0===z?void 0:z.Iframe)I(gapi.iframes.getContext());else{if(!(null===(Y=rr().gapi)||void 0===Y?void 0:Y.load)){const Ze=Ua("iframefcb");return rr()[Ze]=()=>{gapi.load?we():S(lt(P,"network-request-failed"))},lc(`https://apis.google.com/js/api.js?onload=${Ze}`)}we()}}).catch(I=>{throw Xc=null,I})}(P),Xc}const Iy=new Re(5e3,15e3),Df={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Hh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rC(P){const I=P.config;rt(I.authDomain,P,"auth-domain-config-required");const S=I.emulator?Zn(I,"emulator/auth/iframe"):`https://${P.config.authDomain}/__/auth/iframe`,k={apiKey:I.apiKey,appName:P.name,v:Ue.SDK_VERSION},z=Hh.get(P.config.apiHost);z&&(k.eid=z);const Y=P._getFrameworks();return Y.length&&(k.fw=Y.join(",")),`${S}?${(0,te.xO)(k).slice(1)}`}function K0(){return(K0=(0,A.Z)(function*(P){const I=yield Z0(P),S=rr().gapi;return rt(S,P,"internal-error"),I.open({where:document.body,url:rC(P),messageHandlersFilter:S.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Df,dontclear:!0},k=>new Promise(function(){var z=(0,A.Z)(function*(Y,we){yield k.restyle({setHideOnLeave:!1});const Ze=lt(P,"network-request-failed"),gt=rr().setTimeout(()=>{we(Ze)},Iy.get());function _t(){rr().clearTimeout(gt),Y(k)}k.ping(_t).then(_t,()=>{we(Ze)})});return function(Y,we){return z.apply(this,arguments)}}()))})).apply(this,arguments)}const iC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zs{constructor(I){this.window=I,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(I){}}}function gm(P,I,S,k,z,Y){rt(P.config.authDomain,P,"auth-domain-config-required"),rt(P.config.apiKey,P,"invalid-api-key");const we={apiKey:P.config.apiKey,appName:P.name,authType:S,redirectUrl:k,v:Ue.SDK_VERSION,eventId:z};if(I instanceof Xo){I.setDefaultLanguage(P.languageCode),we.providerId=I.providerId||"",(0,te.xb)(I.getCustomParameters())||(we.customParameters=JSON.stringify(I.getCustomParameters()));for(const[gt,_t]of Object.entries(Y||{}))we[gt]=_t}if(I instanceof Se){const gt=I.getScopes().filter(_t=>""!==_t);gt.length>0&&(we.scopes=gt.join(","))}P.tenantId&&(we.tid=P.tenantId);const Ze=we;for(const gt of Object.keys(Ze))void 0===Ze[gt]&&delete Ze[gt];return`${function({config:P}){return P.emulator?Zn(P,"emulator/auth/handler"):`https://${P.authDomain}/__/auth/handler`}(P)}?${(0,te.xO)(Ze).slice(1)}`}const is="webStorageSupport";class pc extends class{constructor(I){this.factorId=I}_process(I,S,k){switch(S.type){case"enroll":return this._finalizeEnroll(I,S.credential,k);case"signin":return this._finalizeSignIn(I,S.credential);default:return de("unexpected MultiFactorSessionType")}}}{constructor(I){super("phone"),this.credential=I}static _fromCredential(I){return new pc(I)}_finalizeEnroll(I,S,k){return function(P,I){return gn(P,"POST","/v2/accounts/mfaEnrollment:finalize",Vn(P,I))}(I,{idToken:S,displayName:k,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(I,S){return function(P,I){return gn(P,"POST","/v2/accounts/mfaSignIn:finalize",Vn(P,I))}(I,{mfaPendingCredential:S,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let vm=(()=>{class P{constructor(){}static assertion(S){return pc._fromCredential(S)}}return P.FACTOR_ID="phone",P})();var P,_m="@firebase/auth";class Dy{constructor(I){this.auth=I,this.internalListeners=new Map}getUid(){var I;return this.assertAuthConfigured(),(null===(I=this.auth.currentUser)||void 0===I?void 0:I.uid)||null}getToken(I){var S=this;return(0,A.Z)(function*(){return S.assertAuthConfigured(),yield S.auth._initializationPromise,S.auth.currentUser?{accessToken:yield S.auth.currentUser.getIdToken(I)}:null})()}addAuthTokenListener(I){if(this.assertAuthConfigured(),this.internalListeners.has(I))return;const S=this.auth.onIdTokenChanged(k=>{var z;I((null===(z=k)||void 0===z?void 0:z.stsTokenManager.accessToken)||null)});this.internalListeners.set(I,S),this.updateProactiveRefresh()}removeAuthTokenListener(I){this.assertAuthConfigured();const S=this.internalListeners.get(I);!S||(this.internalListeners.delete(I),S(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Qc(){return window}function X0(){return(X0=(0,A.Z)(function*(P,I,S){var k;const{BuildInfo:z}=Qc();Le(I.sessionId,"AuthEvent did not contain a session ID");const Y=yield Em(I.sessionId),we={};return ci()?we.ibi=z.packageName:Ko()?we.apn=z.packageName:Xe(P,"operation-not-supported-in-this-environment"),z.displayName&&(we.appDisplayName=z.displayName),we.sessionId=Y,gm(P,S,I.type,void 0,null!==(k=I.eventId)&&void 0!==k?k:void 0,we)})).apply(this,arguments)}function Q0(){return(Q0=(0,A.Z)(function*(P){const{BuildInfo:I}=Qc(),S={};ci()?S.iosBundleId=I.packageName:Ko()?S.androidPackageName=I.packageName:Xe(P,"operation-not-supported-in-this-environment"),yield hi(P,S)})).apply(this,arguments)}function Gh(){return(Gh=(0,A.Z)(function*(P,I,S){const{cordova:k}=Qc();let z=()=>{};try{yield new Promise((Y,we)=>{let Ze=null;function gt(){var Wt;Y();const pi=null===(Wt=k.plugins.browsertab)||void 0===Wt?void 0:Wt.close;"function"==typeof pi&&pi(),"function"==typeof(null==S?void 0:S.close)&&S.close()}function _t(){Ze||(Ze=window.setTimeout(()=>{we(lt(P,"redirect-cancelled-by-user"))},2e3))}function Xt(){"visible"===(null==document?void 0:document.visibilityState)&&_t()}I.addPassiveListener(gt),document.addEventListener("resume",_t,!1),Ko()&&document.addEventListener("visibilitychange",Xt,!1),z=()=>{I.removePassiveListener(gt),document.removeEventListener("resume",_t,!1),document.removeEventListener("visibilitychange",Xt,!1),Ze&&window.clearTimeout(Ze)}})}finally{z()}})).apply(this,arguments)}function Em(P){return Cm.apply(this,arguments)}function Cm(){return(Cm=(0,A.Z)(function*(P){const I=Ry(P),S=yield crypto.subtle.digest("SHA-256",I);return Array.from(new Uint8Array(S)).map(z=>z.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ry(P){if(Le(/[0-9a-zA-Z]+/.test(P),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(P);const I=new ArrayBuffer(P.length),S=new Uint8Array(I);for(let k=0;k<P.length;k++)S[k]=P.charCodeAt(k);return S}P="Browser",(0,Ue._registerComponent)(new $e.wA("auth",(I,{options:S})=>{const k=I.getProvider("app").getImmediate(),{apiKey:z,authDomain:Y}=k.options;return(we=>{rt(z&&!z.includes(":"),"invalid-api-key",{appName:we.name}),rt(!(null==Y?void 0:Y.includes(":")),"argument-error",{appName:we.name});const Ze={apiKey:z,authDomain:Y,clientPlatform:P,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hn(P)},gt=new Ri(we,Ze);return function(P,I){const S=(null==I?void 0:I.persistence)||[],k=(Array.isArray(S)?S:[S]).map(Oe);(null==I?void 0:I.errorMap)&&P._updateErrorMap(I.errorMap),P._initializeWithPersistence(k,null==I?void 0:I.popupRedirectResolver)}(gt,S),gt})(k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((I,S,k)=>{I.getProvider("auth-internal").initialize()})),(0,Ue._registerComponent)(new $e.wA("auth-internal",I=>{const S=cr(I.getProvider("auth").getImmediate());return new Dy(S)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ue.registerVersion)(_m,"0.18.3",void 0),(0,Ue.registerVersion)(_m,"0.18.3","esm2017");class Am extends qt{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(I=>{this.resolveInialized=I})}addPassiveListener(I){this.passiveListeners.add(I)}removePassiveListener(I){this.passiveListeners.delete(I)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(I){return this.resolveInialized(),this.passiveListeners.forEach(S=>S(I)),super.onEvent(I)}initialized(){var I=this;return(0,A.Z)(function*(){yield I.initPromise})()}}function zh(P){return kd.apply(this,arguments)}function kd(){return(kd=(0,A.Z)(function*(P){const I=yield Im()._get($h(P));return I&&(yield Im()._remove($h(P))),I})).apply(this,arguments)}function eg(){const P=[],I="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let S=0;S<20;S++){const k=Math.floor(Math.random()*I.length);P.push(I.charAt(k))}return P.join("")}function Im(){return Oe(ac)}function $h(P){return Rn("authEvent",P.config.apiKey,P.name)}function Jc(P){if(!(null==P?void 0:P.includes("?")))return{};const[I,...S]=P.split("?");return(0,te.zd)(S.join("?"))}function bm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:lt("no-auth-event")}}function el(){var P;return(null===(P=null==self?void 0:self.location)||void 0===P?void 0:P.protocol)||null}function Qh(P=(0,te.z$)()){return!("file:"!==el()&&"ionic:"!==el()||!P.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jh(){try{const P=self.localStorage,I=Ls();if(P)return P.setItem(I,"1"),P.removeItem(I),!function(P=(0,te.z$)()){return(0,te.w1)()&&11===(null==document?void 0:document.documentMode)||function(P=(0,te.z$)()){return/Edge\/\d+/.test(P)}(P)}()||(0,te.hl)()}catch(P){return ep()&&(0,te.hl)()}return!1}function ep(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ng(){return("http:"===el()||"https:"===el()||(0,te.ru)()||Qh())&&!((0,te.b$)()||(0,te.UG)())&&Jh()&&!ep()}function Tm(){return Qh()&&"undefined"!=typeof document}function rg(){return(rg=(0,A.Z)(function*(){return!!Tm()&&new Promise(P=>{const I=setTimeout(()=>{P(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(I),P(!0)})})})).apply(this,arguments)}const qs={LOCAL:"local",NONE:"none",SESSION:"session"},Ld=rt,Dm="persistence";function Zi(P){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,A.Z)(function*(P){yield P._initializationPromise;const I=ig(),S=Rn(Dm,P.config.apiKey,P.name);(null==I?void 0:I.sessionStorage)&&I.sessionStorage.setItem(S,P._getPersistence())})).apply(this,arguments)}function ig(){return"undefined"!=typeof window?window:null}const Uo=rt;class za{constructor(){this.browserResolver=Oe(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ts,this._completeRedirectFn=Je}_openPopup(I,S,k,z){var Y=this;return(0,A.Z)(function*(){var we;Le(null===(we=Y.eventManagers[I._key()])||void 0===we?void 0:we.manager,"_initialize() not called before _openPopup()");const Ze=gm(I,S,k,Nt(),z);return function(P,I,S,k=500,z=600){const Y=Math.max((window.screen.availHeight-z)/2,0).toString(),we=Math.max((window.screen.availWidth-k)/2,0).toString();let Ze="";const gt=Object.assign(Object.assign({},iC),{width:k.toString(),height:z.toString(),top:Y,left:we}),_t=(0,te.z$)().toLowerCase();S&&(Ze=Or(_t)?"_blank":S),au(_t)&&(I=I||"http://localhost",gt.scrollbars="yes");const Xt=Object.entries(gt).reduce((pi,[os,gc])=>`${pi}${os}=${gc},`,"");if(function(P=(0,te.z$)()){var I;return ci(P)&&!!(null===(I=window.navigator)||void 0===I?void 0:I.standalone)}(_t)&&"_self"!==Ze)return function(P,I){const S=document.createElement("a");S.href=P,S.target=I;const k=document.createEvent("MouseEvent");k.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),S.dispatchEvent(k)}(I||"",Ze),new zs(null);const Wt=window.open(I||"",Ze,Xt);rt(Wt,P,"popup-blocked");try{Wt.focus()}catch(pi){}return new zs(Wt)}(I,Ze,Ls())})()}_openRedirect(I,S,k,z){var Y=this;return(0,A.Z)(function*(){return yield Y._originValidation(I),P=gm(I,S,k,Nt(),z),rr().location.href=P,new Promise(()=>{});var P})()}_initialize(I){const S=I._key();if(this.eventManagers[S]){const{manager:z,promise:Y}=this.eventManagers[S];return z?Promise.resolve(z):(Le(Y,"If manager is not set, promise should be"),Y)}const k=this.initAndGetManager(I);return this.eventManagers[S]={promise:k},k}initAndGetManager(I){var S=this;return(0,A.Z)(function*(){const k=yield function(P){return K0.apply(this,arguments)}(I),z=new qt(I);return k.register("authEvent",Y=>(rt(null==Y?void 0:Y.authEvent,I,"invalid-auth-event"),{status:z.onEvent(Y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),S.eventManagers[I._key()]={manager:z},S.iframes[I._key()]=k,z})()}_isIframeWebStorageSupported(I,S){this.iframes[I._key()].send(is,{type:is},z=>{var Y;const we=null===(Y=null==z?void 0:z[0])||void 0===Y?void 0:Y[is];void 0!==we&&S(!!we),Xe(I,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(I){const S=I._key();return this.originValidationPromises[S]||(this.originValidationPromises[S]=function(P){return Ca.apply(this,arguments)}(I)),this.originValidationPromises[S]}get _shouldInitProactively(){return mt()||wl()||ci()}}),this.cordovaResolver=Oe(class{constructor(){this._redirectPersistence=ts,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Je}_initialize(I){var S=this;return(0,A.Z)(function*(){const k=I._key();let z=S.eventManagers.get(k);return z||(z=new Am(I),S.eventManagers.set(k,z),S.attachCallbackListeners(I,z)),z})()}_openPopup(I){Xe(I,"operation-not-supported-in-this-environment")}_openRedirect(I,S,k,z){var Y=this;return(0,A.Z)(function*(){!function(P){var I,S,k,z,Y,we,Ze,gt,_t,Xt;const Wt=Qc();rt("function"==typeof(null===(I=null==Wt?void 0:Wt.universalLinks)||void 0===I?void 0:I.subscribe),P,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),rt(void 0!==(null===(S=null==Wt?void 0:Wt.BuildInfo)||void 0===S?void 0:S.packageName),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),rt("function"==typeof(null===(Y=null===(z=null===(k=null==Wt?void 0:Wt.cordova)||void 0===k?void 0:k.plugins)||void 0===z?void 0:z.browsertab)||void 0===Y?void 0:Y.openUrl),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),rt("function"==typeof(null===(gt=null===(Ze=null===(we=null==Wt?void 0:Wt.cordova)||void 0===we?void 0:we.plugins)||void 0===Ze?void 0:Ze.browsertab)||void 0===gt?void 0:gt.isAvailable),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),rt("function"==typeof(null===(Xt=null===(_t=null==Wt?void 0:Wt.cordova)||void 0===_t?void 0:_t.InAppBrowser)||void 0===Xt?void 0:Xt.open),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(I);const we=yield Y._initialize(I);yield we.initialized(),we.resetRedirect(),u.clear(),yield Y._originValidation(I);const Ze=function(P,I,S=null){return{type:I,eventId:S,urlResponse:null,sessionId:eg(),postBody:null,tenantId:P.tenantId,error:lt(P,"no-auth-event")}}(I,k,z);yield function(P,I){return Im()._set($h(P),I)}(I,Ze);const gt=yield function(P,I,S){return X0.apply(this,arguments)}(I,Ze,S),_t=yield function(P){const{cordova:I}=Qc();return new Promise(S=>{I.plugins.browsertab.isAvailable(k=>{let z=null;k?I.plugins.browsertab.openUrl(P):z=I.InAppBrowser.open(P,function(P=(0,te.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(P)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(P)}()?"_blank":"_system","location=yes"),S(z)})})}(gt);return function(P,I,S){return Gh.apply(this,arguments)}(I,we,_t)})()}_isIframeWebStorageSupported(I,S){throw new Error("Method not implemented.")}_originValidation(I){const S=I._key();return this.originValidationPromises[S]||(this.originValidationPromises[S]=function(P){return Q0.apply(this,arguments)}(I)),this.originValidationPromises[S]}attachCallbackListeners(I,S){const{universalLinks:k,handleOpenURL:z,BuildInfo:Y}=Qc(),we=setTimeout((0,A.Z)(function*(){yield zh(I),S.onEvent(bm())}),500),Ze=function(){var Xt=(0,A.Z)(function*(Wt){clearTimeout(we);const pi=yield zh(I);let os=null;pi&&(null==Wt?void 0:Wt.url)&&(os=function(P,I){var S,k;const z=function(P){const I=Jc(P),S=I.link?decodeURIComponent(I.link):void 0,k=Jc(S).link,z=I.deep_link_id?decodeURIComponent(I.deep_link_id):void 0;return Jc(z).link||z||k||S||P}(I);if(z.includes("/__/auth/callback")){const Y=Jc(z),we=Y.firebaseError?function(P){try{return JSON.parse(P)}catch(I){return null}}(decodeURIComponent(Y.firebaseError)):null,Ze=null===(k=null===(S=null==we?void 0:we.code)||void 0===S?void 0:S.split("auth/"))||void 0===k?void 0:k[1],gt=Ze?lt(Ze):null;return gt?{type:P.type,eventId:P.eventId,tenantId:P.tenantId,error:gt,urlResponse:null,sessionId:null,postBody:null}:{type:P.type,eventId:P.eventId,tenantId:P.tenantId,sessionId:P.sessionId,urlResponse:z,postBody:null}}return null}(pi,Wt.url)),S.onEvent(os||bm())});return function(pi){return Xt.apply(this,arguments)}}();void 0!==k&&"function"==typeof k.subscribe&&k.subscribe(null,Ze);const gt=z,_t=`${Y.packageName.toLowerCase()}://`;Qc().handleOpenURL=function(){var Xt=(0,A.Z)(function*(Wt){if(Wt.toLowerCase().startsWith(_t)&&Ze({url:Wt}),"function"==typeof gt)try{gt(Wt)}catch(pi){console.error(pi)}});return function(Wt){return Xt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ts,this._completeRedirectFn=Je}_initialize(I){var S=this;return(0,A.Z)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._initialize(I)})()}_openPopup(I,S,k,z){var Y=this;return(0,A.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openPopup(I,S,k,z)})()}_openRedirect(I,S,k,z){var Y=this;return(0,A.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openRedirect(I,S,k,z)})()}_isIframeWebStorageSupported(I,S){this.assertedUnderlyingResolver._isIframeWebStorageSupported(I,S)}_originValidation(I){return this.assertedUnderlyingResolver._originValidation(I)}get _shouldInitProactively(){return Tm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Uo(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var I=this;return(0,A.Z)(function*(){if(I.underlyingResolver)return;const S=yield function(){return rg.apply(this,arguments)}();I.underlyingResolver=S?I.cordovaResolver:I.browserResolver})()}}function Vd(P){return P.unwrap()}function Uy(P){return Om(P)}function Om(P){const{_tokenResponse:I}=P instanceof te.ZR?P.customData:P;if(!I)return null;if(!(P instanceof te.ZR)&&"temporaryProof"in I&&"phoneNumber"in I)return Vo.credentialFromResult(P);const S=I.providerId;if(!S||"password"===S)return null;let k;switch(S){case"google.com":k=Mi;break;case"facebook.com":k=Al;break;case"github.com":k=Lr;break;case"twitter.com":k=No;break;default:const{oauthIdToken:z,oauthAccessToken:Y,oauthTokenSecret:we,pendingToken:Ze,nonce:gt}=I;return Y||we||z||Ze?Ze?S.startsWith("saml.")?fa._create(S,Ze):Yo._fromParams({providerId:S,signInMethod:S,pendingToken:Ze,idToken:z,accessToken:Y}):new ee(S).credential({idToken:z,accessToken:Y,rawNonce:gt}):null}return P instanceof te.ZR?k.credentialFromError(P):k.credentialFromResult(P)}function _o(P,I){return I.catch(S=>{throw S instanceof te.ZR&&function(P,I){var S;const k=null===(S=I.customData)||void 0===S?void 0:S._tokenResponse;if("auth/multi-factor-auth-required"===I.code)I.resolver=new aC(P,function(P,I){var S;const k=(0,te.m9)(P),z=I;return rt(I.operationType,k,"argument-error"),rt(null===(S=z.serverResponse)||void 0===S?void 0:S.mfaPendingCredential,k,"argument-error"),Ba._fromError(k,z)}(P,I));else if(k){const z=Om(I),Y=I;z&&(Y.credential=z,Y.tenantId=k.tenantId||void 0,Y.email=k.email||void 0,Y.phoneNumber=k.phoneNumber||void 0)}}(P,S),S}).then(S=>{const z=S.user;return{operationType:S.operationType,credential:Uy(S),additionalUserInfo:hr(S),user:$a.getOrCreate(z)}})}function Mf(P,I){return jl.apply(this,arguments)}function jl(){return(jl=(0,A.Z)(function*(P,I){const S=yield I;return{verificationId:S.verificationId,confirm:k=>_o(P,S.confirm(k))}})).apply(this,arguments)}class aC{constructor(I,S){this.resolver=S,this.auth=function(P){return P.wrapped()}(I)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(I){return _o(Vd(this.auth),this.resolver.resolveSignIn(I))}}class $a{constructor(I){this._delegate=I,this.multiFactor=function(P){const I=(0,te.m9)(P);return ks.has(I)||ks.set(I,Rl._fromUser(I)),ks.get(I)}(I)}static getOrCreate(I){return $a.USER_MAP.has(I)||$a.USER_MAP.set(I,new $a(I)),$a.USER_MAP.get(I)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(I){return this._delegate.getIdTokenResult(I)}getIdToken(I){return this._delegate.getIdToken(I)}linkAndRetrieveDataWithCredential(I){return this.linkWithCredential(I)}linkWithCredential(I){var S=this;return(0,A.Z)(function*(){return _o(S.auth,Fc(S._delegate,I))})()}linkWithPhoneNumber(I,S){var k=this;return(0,A.Z)(function*(){return Mf(k.auth,function(P,I,S){return Pd.apply(this,arguments)}(k._delegate,I,S))})()}linkWithPopup(I){var S=this;return(0,A.Z)(function*(){return _o(S.auth,function(P,I,S){return fi.apply(this,arguments)}(S._delegate,I,za))})()}linkWithRedirect(I){var S=this;return(0,A.Z)(function*(){return yield Zi(cr(S.auth)),function(P,I,S){return function(P,I,S){return ge.apply(this,arguments)}(P,I,S)}(S._delegate,I,za)})()}reauthenticateAndRetrieveDataWithCredential(I){return this.reauthenticateWithCredential(I)}reauthenticateWithCredential(I){var S=this;return(0,A.Z)(function*(){return _o(S.auth,Wi(S._delegate,I))})()}reauthenticateWithPhoneNumber(I,S){return Mf(this.auth,function(P,I,S){return Md.apply(this,arguments)}(this._delegate,I,S))}reauthenticateWithPopup(I){return _o(this.auth,function(P,I,S){return Ws.apply(this,arguments)}(this._delegate,I,za))}reauthenticateWithRedirect(I){var S=this;return(0,A.Z)(function*(){return yield Zi(cr(S.auth)),function(P,I,S){return function(P,I,S){return oe.apply(this,arguments)}(P,I,S)}(S._delegate,I,za)})()}sendEmailVerification(I){return function(P,I){return Ar.apply(this,arguments)}(this._delegate,I)}unlink(I){var S=this;return(0,A.Z)(function*(){return yield function(P,I){return Ju.apply(this,arguments)}(S._delegate,I),S})()}updateEmail(I){return function(P,I){return xu((0,te.m9)(P),I,null)}(this._delegate,I)}updatePassword(I){return function(P,I){return xu((0,te.m9)(P),null,I)}(this._delegate,I)}updatePhoneNumber(I){return function(P,I){return Gn.apply(this,arguments)}(this._delegate,I)}updateProfile(I){return function(P,I){return Jo.apply(this,arguments)}(this._delegate,I)}verifyBeforeUpdateEmail(I,S){return function(P,I,S){return _u.apply(this,arguments)}(this._delegate,I,S)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$a.USER_MAP=new WeakMap;const tp=rt;let sg=(()=>{class P{constructor(S,k){if(this.app=S,k.isInitialized())return this._delegate=k.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:z}=S.options;tp(z,"invalid-api-key",{appName:S.name});let Y=[mn];if("undefined"!=typeof window){Y=function(P,I){const S=ig();if(!(null==S?void 0:S.sessionStorage))return[];const k=Rn(Dm,P,I);switch(S.sessionStorage.getItem(k)){case qs.NONE:return[mn];case qs.LOCAL:return[Hs,ts];case qs.SESSION:return[ts];default:return[]}}(z,S.name);for(const Ze of[Hs,ac,ts])Y.includes(Ze)||Y.push(Ze)}tp(z,"invalid-api-key",{appName:S.name});const we="undefined"!=typeof window?za:void 0;this._delegate=k.initialize({options:{persistence:Y,popupRedirectResolver:we}}),this._delegate._updateErrorMap(We),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$a.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(S){this._delegate.languageCode=S}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(S){this._delegate.tenantId=S}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(S,k){!function(P,I,S){const k=cr(P);rt(k._canInitEmulator,k,"emulator-config-failed"),rt(/^https?:\/\//.test(I),k,"invalid-emulator-scheme");const z=!!(null==S?void 0:S.disableWarnings),Y=dr(I),{host:we,port:Ze}=function(P){const I=dr(P),S=/(\/\/)?([^?#/]+)/.exec(P.substr(I.length));if(!S)return{host:"",port:null};const k=S[2].split("@").pop()||"",z=/^(\[[^\]]+\])(:|$)/.exec(k);if(z){const Y=z[1];return{host:Y,port:ca(k.substr(Y.length+1))}}{const[Y,we]=k.split(":");return{host:Y,port:ca(we)}}}(I);k.config.emulator={url:`${Y}//${we}${null===Ze?"":`:${Ze}`}/`},k.settings.appVerificationDisabledForTesting=!0,k.emulatorConfig=Object.freeze({host:we,port:Ze,protocol:Y.replace(":",""),options:Object.freeze({disableWarnings:z})}),z||function(){function P(){const I=document.createElement("p"),S=I.style;I.innerText="Running in emulator mode. Do not use with production credentials.",S.position="fixed",S.width="100%",S.backgroundColor="#ffffff",S.border=".1em solid #000000",S.color="#b50000",S.bottom="0px",S.left="0px",S.margin="0px",S.zIndex="10000",S.textAlign="center",I.classList.add("firebase-emulator-warning"),document.body.appendChild(I)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",P):P())}()}(this._delegate,S,k)}applyActionCode(S){return function(P,I){return Fo.apply(this,arguments)}(this._delegate,S)}checkActionCode(S){return ot(this._delegate,S)}confirmPasswordReset(S,k){return function(P,I,S){return Ps.apply(this,arguments)}(this._delegate,S,k)}createUserWithEmailAndPassword(S,k){var z=this;return(0,A.Z)(function*(){return _o(z._delegate,function(P,I,S){return Qo.apply(this,arguments)}(z._delegate,S,k))})()}fetchProvidersForEmail(S){return this.fetchSignInMethodsForEmail(S)}fetchSignInMethodsForEmail(S){return function(P,I){return vu.apply(this,arguments)}(this._delegate,S)}isSignInWithEmailLink(S){return function(P,I){const S=go.parseLink(I);return"EMAIL_SIGNIN"===(null==S?void 0:S.operation)}(0,S)}getRedirectResult(){var S=this;return(0,A.Z)(function*(){tp(ng(),S._delegate,"operation-not-supported-in-this-environment");const k=yield function(P,I){return Ge.apply(this,arguments)}(S._delegate,za);return k?_o(S._delegate,Promise.resolve(k)):{credential:null,user:null}})()}addFrameworkForLogging(S){!function(P,I){cr(P)._logFramework(I)}(this._delegate,S)}onAuthStateChanged(S,k,z){const{next:Y,error:we,complete:Ze}=ag(S,k,z);return this._delegate.onAuthStateChanged(Y,we,Ze)}onIdTokenChanged(S,k,z){const{next:Y,error:we,complete:Ze}=ag(S,k,z);return this._delegate.onIdTokenChanged(Y,we,Ze)}sendSignInLinkToEmail(S,k){return function(P,I,S){return pu.apply(this,arguments)}(this._delegate,S,k)}sendPasswordResetEmail(S,k){return function(P,I,S){return rc.apply(this,arguments)}(this._delegate,S,k||void 0)}setPersistence(S){var k=this;return(0,A.Z)(function*(){let z;switch(function(P,I){Ld(Object.values(qs).includes(I),P,"invalid-persistence-type"),(0,te.b$)()?Ld(I!==qs.SESSION,P,"unsupported-persistence-type"):(0,te.UG)()?Ld(I===qs.NONE,P,"unsupported-persistence-type"):ep()?Ld(I===qs.NONE||I===qs.LOCAL&&(0,te.hl)(),P,"unsupported-persistence-type"):Ld(I===qs.NONE||Jh(),P,"unsupported-persistence-type")}(k._delegate,S),S){case qs.SESSION:z=ts;break;case qs.LOCAL:z=(yield Oe(Hs)._isAvailable())?Hs:ac;break;case qs.NONE:z=mn;break;default:return Xe("argument-error",{appName:k._delegate.name})}return k._delegate.setPersistence(z)})()}signInAndRetrieveDataWithCredential(S){return this.signInWithCredential(S)}signInAnonymously(){return _o(this._delegate,function(P){return ka.apply(this,arguments)}(this._delegate))}signInWithCredential(S){return _o(this._delegate,Fi(this._delegate,S))}signInWithCustomToken(S){return _o(this._delegate,function(P,I){return ma.apply(this,arguments)}(this._delegate,S))}signInWithEmailAndPassword(S,k){return _o(this._delegate,function(P,I,S){return Fi((0,te.m9)(P),Fa.credential(I,S))}(this._delegate,S,k))}signInWithEmailLink(S,k){return _o(this._delegate,function(P,I,S){return gu.apply(this,arguments)}(this._delegate,S,k))}signInWithPhoneNumber(S,k){return Mf(this._delegate,function(P,I,S){return Gs.apply(this,arguments)}(this._delegate,S,k))}signInWithPopup(S){var k=this;return(0,A.Z)(function*(){return tp(ng(),k._delegate,"operation-not-supported-in-this-environment"),_o(k._delegate,function(P,I,S){return Vl.apply(this,arguments)}(k._delegate,S,za))})()}signInWithRedirect(S){var k=this;return(0,A.Z)(function*(){return tp(ng(),k._delegate,"operation-not-supported-in-this-environment"),yield Zi(k._delegate),function(P,I,S){return function(P,I,S){return H.apply(this,arguments)}(P,I,S)}(k._delegate,S,za)})()}updateCurrentUser(S){return this._delegate.updateCurrentUser(S)}verifyPasswordResetCode(S){return function(P,I){return Kn.apply(this,arguments)}(this._delegate,S)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return P.Persistence=qs,P})();function ag(P,I,S){let k=P;"function"!=typeof P&&({next:k,error:I,complete:S}=P);const z=k;return{next:we=>z(we&&$a.getOrCreate(we)),error:I,complete:S}}class np{constructor(){this.providerId="phone",this._delegate=new Vo(Vd(Ie.Z.auth()))}static credential(I,S){return Vo.credential(I,S)}verifyPhoneNumber(I,S){return this._delegate.verifyPhoneNumber(I,S)}unwrap(){return this._delegate}}np.PHONE_SIGN_IN_METHOD=Vo.PHONE_SIGN_IN_METHOD,np.PROVIDER_ID=Vo.PROVIDER_ID;const Hy=rt;class zT{constructor(I,S,k=Ie.Z.app()){var z;Hy(null===(z=k.options)||void 0===z?void 0:z.apiKey,"invalid-api-key",{appName:k.name}),this._delegate=new fc(I,S,k.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(P){P.INTERNAL.registerComponent(new $e.wA("auth-compat",I=>{const S=I.getProvider("app-compat").getImmediate(),k=I.getProvider("auth");return new sg(S,k)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Fa,FacebookAuthProvider:Al,GithubAuthProvider:Lr,GoogleAuthProvider:Mi,OAuthProvider:ee,PhoneAuthProvider:np,PhoneMultiFactorGenerator:vm,RecaptchaVerifier:zT,TwitterAuthProvider:No,Auth:sg,AuthCredential:ji,Error:te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),P.registerVersion("@firebase/auth-compat","0.1.6")}(Ie.Z)},6676:function(Dt,tt){!function(J){"use strict";function A(Be){return Array.prototype.slice.call(Be)}function Ie(Be){return new Promise(function(Ce,Ve){Be.onsuccess=function(){Ce(Be.result)},Be.onerror=function(){Ve(Be.error)}})}function te(Be,Ce,Ve){var ze,Xe=new Promise(function(lt,St){Ie(ze=Be[Ce].apply(Be,Ve)).then(lt,St)});return Xe.request=ze,Xe}function Ue(Be,Ce,Ve){var ze=te(Be,Ce,Ve);return ze.then(function(Xe){if(Xe)return new q(Xe,ze.request)})}function Te(Be,Ce,Ve){Ve.forEach(function(ze){Object.defineProperty(Be.prototype,ze,{get:function(){return this[Ce][ze]},set:function(Xe){this[Ce][ze]=Xe}})})}function pe(Be,Ce,Ve,ze){ze.forEach(function(Xe){Xe in Ve.prototype&&(Be.prototype[Xe]=function(){return te(this[Ce],Xe,arguments)})})}function $e(Be,Ce,Ve,ze){ze.forEach(function(Xe){Xe in Ve.prototype&&(Be.prototype[Xe]=function(){return this[Ce][Xe].apply(this[Ce],arguments)})})}function xe(Be,Ce,Ve,ze){ze.forEach(function(Xe){Xe in Ve.prototype&&(Be.prototype[Xe]=function(){return Ue(this[Ce],Xe,arguments)})})}function me(Be){this._index=Be}function q(Be,Ce){this._cursor=Be,this._request=Ce}function se(Be){this._store=Be}function re(Be){this._tx=Be,this.complete=new Promise(function(Ce,Ve){Be.oncomplete=function(){Ce()},Be.onerror=function(){Ve(Be.error)},Be.onabort=function(){Ve(Be.error)}})}function Ee(Be,Ce,Ve){this._db=Be,this.oldVersion=Ce,this.transaction=new re(Ve)}function Ye(Be){this._db=Be}Te(me,"_index",["name","keyPath","multiEntry","unique"]),pe(me,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),xe(me,"_index",IDBIndex,["openCursor","openKeyCursor"]),Te(q,"_cursor",["direction","key","primaryKey","value"]),pe(q,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Be){Be in IDBCursor.prototype&&(q.prototype[Be]=function(){var Ce=this,Ve=arguments;return Promise.resolve().then(function(){return Ce._cursor[Be].apply(Ce._cursor,Ve),Ie(Ce._request).then(function(ze){if(ze)return new q(ze,Ce._request)})})})}),se.prototype.createIndex=function(){return new me(this._store.createIndex.apply(this._store,arguments))},se.prototype.index=function(){return new me(this._store.index.apply(this._store,arguments))},Te(se,"_store",["name","keyPath","indexNames","autoIncrement"]),pe(se,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),xe(se,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),$e(se,"_store",IDBObjectStore,["deleteIndex"]),re.prototype.objectStore=function(){return new se(this._tx.objectStore.apply(this._tx,arguments))},Te(re,"_tx",["objectStoreNames","mode"]),$e(re,"_tx",IDBTransaction,["abort"]),Ee.prototype.createObjectStore=function(){return new se(this._db.createObjectStore.apply(this._db,arguments))},Te(Ee,"_db",["name","version","objectStoreNames"]),$e(Ee,"_db",IDBDatabase,["deleteObjectStore","close"]),Ye.prototype.transaction=function(){return new re(this._db.transaction.apply(this._db,arguments))},Te(Ye,"_db",["name","version","objectStoreNames"]),$e(Ye,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Be){[se,me].forEach(function(Ce){Be in Ce.prototype&&(Ce.prototype[Be.replace("open","iterate")]=function(){var Ve=A(arguments),ze=Ve[Ve.length-1],Xe=this._store||this._index,lt=Xe[Be].apply(Xe,Ve.slice(0,-1));lt.onsuccess=function(){ze(lt.result)}})})}),[me,se].forEach(function(Be){Be.prototype.getAll||(Be.prototype.getAll=function(Ce,Ve){var ze=this,Xe=[];return new Promise(function(lt){ze.iterateCursor(Ce,function(St){St?(Xe.push(St.value),void 0===Ve||Xe.length!=Ve?St.continue():lt(Xe)):lt(Xe)})})})}),J.openDb=function(Be,Ce,Ve){var ze=te(indexedDB,"open",[Be,Ce]),Xe=ze.request;return Xe&&(Xe.onupgradeneeded=function(lt){Ve&&Ve(new Ee(Xe.result,lt.oldVersion,Xe.transaction))}),ze.then(function(lt){return new Ye(lt)})},J.deleteDb=function(Be){return te(indexedDB,"deleteDatabase",[Be])},Object.defineProperty(J,"__esModule",{value:!0})}(tt)},7574:(Dt,tt,J)=>{"use strict";J.d(tt,{y:()=>se});var A=J(7393),te=J(9181),Ue=J(6490),pe=J(6554),$e=J(4487);var q=J(2494);let se=(()=>{class Ee{constructor(We){this._isScalar=!1,We&&(this._subscribe=We)}lift(We){const Pe=new Ee;return Pe.source=this,Pe.operator=We,Pe}subscribe(We,Pe,Be){const{operator:Ce}=this,Ve=function(Ee,Ye,We){if(Ee){if(Ee instanceof A.L)return Ee;if(Ee[te.b])return Ee[te.b]()}return Ee||Ye||We?new A.L(Ee,Ye,We):new A.L(Ue.c)}(We,Pe,Be);if(Ve.add(Ce?Ce.call(Ve,this.source):this.source||q.v.useDeprecatedSynchronousErrorHandling&&!Ve.syncErrorThrowable?this._subscribe(Ve):this._trySubscribe(Ve)),q.v.useDeprecatedSynchronousErrorHandling&&Ve.syncErrorThrowable&&(Ve.syncErrorThrowable=!1,Ve.syncErrorThrown))throw Ve.syncErrorValue;return Ve}_trySubscribe(We){try{return this._subscribe(We)}catch(Pe){q.v.useDeprecatedSynchronousErrorHandling&&(We.syncErrorThrown=!0,We.syncErrorValue=Pe),function(Ee){for(;Ee;){const{closed:Ye,destination:We,isStopped:Pe}=Ee;if(Ye||Pe)return!1;Ee=We&&We instanceof A.L?We:null}return!0}(We)?We.error(Pe):console.warn(Pe)}}forEach(We,Pe){return new(Pe=re(Pe))((Be,Ce)=>{let Ve;Ve=this.subscribe(ze=>{try{We(ze)}catch(Xe){Ce(Xe),Ve&&Ve.unsubscribe()}},Ce,Be)})}_subscribe(We){const{source:Pe}=this;return Pe&&Pe.subscribe(We)}[pe.L](){return this}pipe(...We){return 0===We.length?this:function(Ee){return 0===Ee.length?$e.y:1===Ee.length?Ee[0]:function(We){return Ee.reduce((Pe,Be)=>Be(Pe),We)}}(We)(this)}toPromise(We){return new(We=re(We))((Pe,Be)=>{let Ce;this.subscribe(Ve=>Ce=Ve,Ve=>Be(Ve),()=>Pe(Ce))})}}return Ee.create=Ye=>new Ee(Ye),Ee})();function re(Ee){if(Ee||(Ee=q.v.Promise||Promise),!Ee)throw new Error("no Promise impl found");return Ee}},6490:(Dt,tt,J)=>{"use strict";J.d(tt,{c:()=>te});var A=J(2494),Ie=J(4449);const te={closed:!0,next(Ue){},error(Ue){if(A.v.useDeprecatedSynchronousErrorHandling)throw Ue;(0,Ie.z)(Ue)},complete(){}}},9765:(Dt,tt,J)=>{"use strict";J.d(tt,{Yc:()=>$e,xQ:()=>xe});var A=J(7574),Ie=J(7393),te=J(5319),Ue=J(7971),Te=J(8858),pe=J(9181);class $e extends Ie.L{constructor(se){super(se),this.destination=se}}let xe=(()=>{class q extends A.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[pe.b](){return new $e(this)}lift(re){const Ee=new me(this,this);return Ee.operator=re,Ee}next(re){if(this.closed)throw new Ue.N;if(!this.isStopped){const{observers:Ee}=this,Ye=Ee.length,We=Ee.slice();for(let Pe=0;Pe<Ye;Pe++)We[Pe].next(re)}}error(re){if(this.closed)throw new Ue.N;this.hasError=!0,this.thrownError=re,this.isStopped=!0;const{observers:Ee}=this,Ye=Ee.length,We=Ee.slice();for(let Pe=0;Pe<Ye;Pe++)We[Pe].error(re);this.observers.length=0}complete(){if(this.closed)throw new Ue.N;this.isStopped=!0;const{observers:re}=this,Ee=re.length,Ye=re.slice();for(let We=0;We<Ee;We++)Ye[We].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(re){if(this.closed)throw new Ue.N;return super._trySubscribe(re)}_subscribe(re){if(this.closed)throw new Ue.N;return this.hasError?(re.error(this.thrownError),te.w.EMPTY):this.isStopped?(re.complete(),te.w.EMPTY):(this.observers.push(re),new Te.W(this,re))}asObservable(){const re=new A.y;return re.source=this,re}}return q.create=(se,re)=>new me(se,re),q})();class me extends xe{constructor(se,re){super(),this.destination=se,this.source=re}next(se){const{destination:re}=this;re&&re.next&&re.next(se)}error(se){const{destination:re}=this;re&&re.error&&this.destination.error(se)}complete(){const{destination:se}=this;se&&se.complete&&this.destination.complete()}_subscribe(se){const{source:re}=this;return re?this.source.subscribe(se):te.w.EMPTY}}},8858:(Dt,tt,J)=>{"use strict";J.d(tt,{W:()=>Ie});var A=J(5319);class Ie extends A.w{constructor(Ue,Te){super(),this.subject=Ue,this.subscriber=Te,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Ue=this.subject,Te=Ue.observers;if(this.subject=null,!Te||0===Te.length||Ue.isStopped||Ue.closed)return;const pe=Te.indexOf(this.subscriber);-1!==pe&&Te.splice(pe,1)}}},7393:(Dt,tt,J)=>{"use strict";J.d(tt,{L:()=>$e});var A=J(9105),Ie=J(6490),te=J(5319),Ue=J(9181),Te=J(2494),pe=J(4449);class $e extends te.w{constructor(q,se,re){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Ie.c;break;case 1:if(!q){this.destination=Ie.c;break}if("object"==typeof q){q instanceof $e?(this.syncErrorThrowable=q.syncErrorThrowable,this.destination=q,q.add(this)):(this.syncErrorThrowable=!0,this.destination=new xe(this,q));break}default:this.syncErrorThrowable=!0,this.destination=new xe(this,q,se,re)}}[Ue.b](){return this}static create(q,se,re){const Ee=new $e(q,se,re);return Ee.syncErrorThrowable=!1,Ee}next(q){this.isStopped||this._next(q)}error(q){this.isStopped||(this.isStopped=!0,this._error(q))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(q){this.destination.next(q)}_error(q){this.destination.error(q),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:q}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=q,this}}class xe extends $e{constructor(q,se,re,Ee){super(),this._parentSubscriber=q;let Ye,We=this;(0,A.m)(se)?Ye=se:se&&(Ye=se.next,re=se.error,Ee=se.complete,se!==Ie.c&&(We=Object.create(se),(0,A.m)(We.unsubscribe)&&this.add(We.unsubscribe.bind(We)),We.unsubscribe=this.unsubscribe.bind(this))),this._context=We,this._next=Ye,this._error=re,this._complete=Ee}next(q){if(!this.isStopped&&this._next){const{_parentSubscriber:se}=this;Te.v.useDeprecatedSynchronousErrorHandling&&se.syncErrorThrowable?this.__tryOrSetError(se,this._next,q)&&this.unsubscribe():this.__tryOrUnsub(this._next,q)}}error(q){if(!this.isStopped){const{_parentSubscriber:se}=this,{useDeprecatedSynchronousErrorHandling:re}=Te.v;if(this._error)re&&se.syncErrorThrowable?(this.__tryOrSetError(se,this._error,q),this.unsubscribe()):(this.__tryOrUnsub(this._error,q),this.unsubscribe());else if(se.syncErrorThrowable)re?(se.syncErrorValue=q,se.syncErrorThrown=!0):(0,pe.z)(q),this.unsubscribe();else{if(this.unsubscribe(),re)throw q;(0,pe.z)(q)}}}complete(){if(!this.isStopped){const{_parentSubscriber:q}=this;if(this._complete){const se=()=>this._complete.call(this._context);Te.v.useDeprecatedSynchronousErrorHandling&&q.syncErrorThrowable?(this.__tryOrSetError(q,se),this.unsubscribe()):(this.__tryOrUnsub(se),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(q,se){try{q.call(this._context,se)}catch(re){if(this.unsubscribe(),Te.v.useDeprecatedSynchronousErrorHandling)throw re;(0,pe.z)(re)}}__tryOrSetError(q,se,re){if(!Te.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{se.call(this._context,re)}catch(Ee){return Te.v.useDeprecatedSynchronousErrorHandling?(q.syncErrorValue=Ee,q.syncErrorThrown=!0,!0):((0,pe.z)(Ee),!0)}return!1}_unsubscribe(){const{_parentSubscriber:q}=this;this._context=null,this._parentSubscriber=null,q.unsubscribe()}}},5319:(Dt,tt,J)=>{"use strict";J.d(tt,{w:()=>pe});var A=J(9796),Ie=J(1555),te=J(9105);const Te=(()=>{function xe(me){return Error.call(this),this.message=me?`${me.length} errors occurred during unsubscription:\n${me.map((q,se)=>`${se+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=me,this}return xe.prototype=Object.create(Error.prototype),xe})();class pe{constructor(me){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,me&&(this._ctorUnsubscribe=!0,this._unsubscribe=me)}unsubscribe(){let me;if(this.closed)return;let{_parentOrParents:q,_ctorUnsubscribe:se,_unsubscribe:re,_subscriptions:Ee}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,q instanceof pe)q.remove(this);else if(null!==q)for(let Ye=0;Ye<q.length;++Ye)q[Ye].remove(this);if((0,te.m)(re)){se&&(this._unsubscribe=void 0);try{re.call(this)}catch(Ye){me=Ye instanceof Te?$e(Ye.errors):[Ye]}}if((0,A.k)(Ee)){let Ye=-1,We=Ee.length;for(;++Ye<We;){const Pe=Ee[Ye];if((0,Ie.K)(Pe))try{Pe.unsubscribe()}catch(Be){me=me||[],Be instanceof Te?me=me.concat($e(Be.errors)):me.push(Be)}}}if(me)throw new Te(me)}add(me){let q=me;if(!me)return pe.EMPTY;switch(typeof me){case"function":q=new pe(me);case"object":if(q===this||q.closed||"function"!=typeof q.unsubscribe)return q;if(this.closed)return q.unsubscribe(),q;if(!(q instanceof pe)){const Ee=q;q=new pe,q._subscriptions=[Ee]}break;default:throw new Error("unrecognized teardown "+me+" added to Subscription.")}let{_parentOrParents:se}=q;if(null===se)q._parentOrParents=this;else if(se instanceof pe){if(se===this)return q;q._parentOrParents=[se,this]}else{if(-1!==se.indexOf(this))return q;se.push(this)}const re=this._subscriptions;return null===re?this._subscriptions=[q]:re.push(q),q}remove(me){const q=this._subscriptions;if(q){const se=q.indexOf(me);-1!==se&&q.splice(se,1)}}}var xe;function $e(xe){return xe.reduce((me,q)=>me.concat(q instanceof Te?q.errors:q),[])}pe.EMPTY=((xe=new pe).closed=!0,xe)},2494:(Dt,tt,J)=>{"use strict";J.d(tt,{v:()=>Ie});let A=!1;const Ie={Promise:void 0,set useDeprecatedSynchronousErrorHandling(te){if(te){const Ue=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Ue.stack)}else A&&console.log("RxJS: Back to a better error behavior. Thank you. <3");A=te},get useDeprecatedSynchronousErrorHandling(){return A}}},5345:(Dt,tt,J)=>{"use strict";J.d(tt,{IY:()=>Ue,Ds:()=>pe,ft:()=>xe});var A=J(7393),Ie=J(7574),te=J(7444);class Ue extends A.L{constructor(q){super(),this.parent=q}_next(q){this.parent.notifyNext(q)}_error(q){this.parent.notifyError(q),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class pe extends A.L{notifyNext(q){this.destination.next(q)}notifyError(q){this.destination.error(q)}notifyComplete(){this.destination.complete()}}function xe(me,q){if(q.closed)return;if(me instanceof Ie.y)return me.subscribe(q);let se;try{se=(0,te.s)(me)(q)}catch(re){q.error(re)}return se}},2441:(Dt,tt,J)=>{"use strict";J.d(tt,{c:()=>Te,N:()=>pe});var A=J(9765),Ie=J(7574),te=J(5319),Ue=J(1307);class Te extends Ie.y{constructor(se,re){super(),this.source=se,this.subjectFactory=re,this._refCount=0,this._isComplete=!1}_subscribe(se){return this.getSubject().subscribe(se)}getSubject(){const se=this._subject;return(!se||se.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let se=this._connection;return se||(this._isComplete=!1,se=this._connection=new te.w,se.add(this.source.subscribe(new $e(this.getSubject(),this))),se.closed&&(this._connection=null,se=te.w.EMPTY)),se}refCount(){return(0,Ue.x)()(this)}}const pe=(()=>{const q=Te.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:q._subscribe},_isComplete:{value:q._isComplete,writable:!0},getSubject:{value:q.getSubject},connect:{value:q.connect},refCount:{value:q.refCount}}})();class $e extends A.Yc{constructor(se,re){super(se),this.connectable=re}_error(se){this._unsubscribe(),super._error(se)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const se=this.connectable;if(se){this.connectable=null;const re=se._connection;se._refCount=0,se._subject=null,se._connection=null,re&&re.unsubscribe()}}}},9193:(Dt,tt,J)=>{"use strict";J.d(tt,{E:()=>Ie,c:()=>te});var A=J(7574);const Ie=new A.y(Te=>Te.complete());function te(Te){return Te?function(Te){return new A.y(pe=>Te.schedule(()=>pe.complete()))}(Te):Ie}},4402:(Dt,tt,J)=>{"use strict";J.d(tt,{D:()=>We});var A=J(7574),Ie=J(7444),te=J(5319),Ue=J(6554),$e=J(4087),xe=J(377),se=J(4072),re=J(9489);function We(Pe,Be){return Be?function(Pe,Be){if(null!=Pe){if(function(Pe){return Pe&&"function"==typeof Pe[Ue.L]}(Pe))return function(Pe,Be){return new A.y(Ce=>{const Ve=new te.w;return Ve.add(Be.schedule(()=>{const ze=Pe[Ue.L]();Ve.add(ze.subscribe({next(Xe){Ve.add(Be.schedule(()=>Ce.next(Xe)))},error(Xe){Ve.add(Be.schedule(()=>Ce.error(Xe)))},complete(){Ve.add(Be.schedule(()=>Ce.complete()))}}))})),Ve})}(Pe,Be);if((0,se.t)(Pe))return function(Pe,Be){return new A.y(Ce=>{const Ve=new te.w;return Ve.add(Be.schedule(()=>Pe.then(ze=>{Ve.add(Be.schedule(()=>{Ce.next(ze),Ve.add(Be.schedule(()=>Ce.complete()))}))},ze=>{Ve.add(Be.schedule(()=>Ce.error(ze)))}))),Ve})}(Pe,Be);if((0,re.z)(Pe))return(0,$e.r)(Pe,Be);if(function(Pe){return Pe&&"function"==typeof Pe[xe.hZ]}(Pe)||"string"==typeof Pe)return function(Pe,Be){if(!Pe)throw new Error("Iterable cannot be null");return new A.y(Ce=>{const Ve=new te.w;let ze;return Ve.add(()=>{ze&&"function"==typeof ze.return&&ze.return()}),Ve.add(Be.schedule(()=>{ze=Pe[xe.hZ](),Ve.add(Be.schedule(function(){if(Ce.closed)return;let Xe,lt;try{const St=ze.next();Xe=St.value,lt=St.done}catch(St){return void Ce.error(St)}lt?Ce.complete():(Ce.next(Xe),this.schedule())}))})),Ve})}(Pe,Be)}throw new TypeError((null!==Pe&&typeof Pe||Pe)+" is not observable")}(Pe,Be):Pe instanceof A.y?Pe:new A.y((0,Ie.s)(Pe))}},6693:(Dt,tt,J)=>{"use strict";J.d(tt,{n:()=>Ue});var A=J(7574),Ie=J(5015),te=J(4087);function Ue(Te,pe){return pe?(0,te.r)(Te,pe):new A.y((0,Ie.V)(Te))}},6682:(Dt,tt,J)=>{"use strict";J.d(tt,{T:()=>Te});var A=J(7574),Ie=J(4869),te=J(3282),Ue=J(6693);function Te(...pe){let $e=Number.POSITIVE_INFINITY,xe=null,me=pe[pe.length-1];return(0,Ie.K)(me)?(xe=pe.pop(),pe.length>1&&"number"==typeof pe[pe.length-1]&&($e=pe.pop())):"number"==typeof me&&($e=pe.pop()),null===xe&&1===pe.length&&pe[0]instanceof A.y?pe[0]:(0,te.J)($e)((0,Ue.n)(pe,xe))}},5917:(Dt,tt,J)=>{"use strict";J.d(tt,{of:()=>Ue});var A=J(4869),Ie=J(6693),te=J(4087);function Ue(...Te){let pe=Te[Te.length-1];return(0,A.K)(pe)?(Te.pop(),(0,te.r)(Te,pe)):(0,Ie.n)(Te)}},205:(Dt,tt,J)=>{"use strict";J.d(tt,{_:()=>Ie});var A=J(7574);function Ie(Ue,Te){return new A.y(Te?pe=>Te.schedule(te,0,{error:Ue,subscriber:pe}):pe=>pe.error(Ue))}function te({error:Ue,subscriber:Te}){Te.error(Ue)}},8002:(Dt,tt,J)=>{"use strict";J.d(tt,{U:()=>Ie});var A=J(7393);function Ie(Te,pe){return function(xe){if("function"!=typeof Te)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return xe.lift(new te(Te,pe))}}class te{constructor(pe,$e){this.project=pe,this.thisArg=$e}call(pe,$e){return $e.subscribe(new Ue(pe,this.project,this.thisArg))}}class Ue extends A.L{constructor(pe,$e,xe){super(pe),this.project=$e,this.count=0,this.thisArg=xe||this}_next(pe){let $e;try{$e=this.project.call(this.thisArg,pe,this.count++)}catch(xe){return void this.destination.error(xe)}this.destination.next($e)}}},3282:(Dt,tt,J)=>{"use strict";J.d(tt,{J:()=>te});var A=J(9773),Ie=J(4487);function te(Ue=Number.POSITIVE_INFINITY){return(0,A.zg)(Ie.y,Ue)}},9773:(Dt,tt,J)=>{"use strict";J.d(tt,{zg:()=>Ue});var A=J(8002),Ie=J(4402),te=J(5345);function Ue(xe,me,q=Number.POSITIVE_INFINITY){return"function"==typeof me?se=>se.pipe(Ue((re,Ee)=>(0,Ie.D)(xe(re,Ee)).pipe((0,A.U)((Ye,We)=>me(re,Ye,Ee,We))),q)):("number"==typeof me&&(q=me),se=>se.lift(new Te(xe,q)))}class Te{constructor(me,q=Number.POSITIVE_INFINITY){this.project=me,this.concurrent=q}call(me,q){return q.subscribe(new pe(me,this.project,this.concurrent))}}class pe extends te.Ds{constructor(me,q,se=Number.POSITIVE_INFINITY){super(me),this.project=q,this.concurrent=se,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(me){this.active<this.concurrent?this._tryNext(me):this.buffer.push(me)}_tryNext(me){let q;const se=this.index++;try{q=this.project(me,se)}catch(re){return void this.destination.error(re)}this.active++,this._innerSub(q)}_innerSub(me){const q=new te.IY(this),se=this.destination;se.add(q);const re=(0,te.ft)(me,q);re!==q&&se.add(re)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(me){this.destination.next(me)}notifyComplete(){const me=this.buffer;this.active--,me.length>0?this._next(me.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},6136:(Dt,tt,J)=>{"use strict";J.d(tt,{ht:()=>me,QV:()=>$e});var A=J(7393),Ie=J(9193),te=J(5917),Ue=J(205);class pe{constructor(re,Ee,Ye){this.kind=re,this.value=Ee,this.error=Ye,this.hasValue="N"===re}observe(re){switch(this.kind){case"N":return re.next&&re.next(this.value);case"E":return re.error&&re.error(this.error);case"C":return re.complete&&re.complete()}}do(re,Ee,Ye){switch(this.kind){case"N":return re&&re(this.value);case"E":return Ee&&Ee(this.error);case"C":return Ye&&Ye()}}accept(re,Ee,Ye){return re&&"function"==typeof re.next?this.observe(re):this.do(re,Ee,Ye)}toObservable(){switch(this.kind){case"N":return(0,te.of)(this.value);case"E":return(0,Ue._)(this.error);case"C":return(0,Ie.c)()}throw new Error("unexpected notification kind value")}static createNext(re){return void 0!==re?new pe("N",re):pe.undefinedValueNotification}static createError(re){return new pe("E",void 0,re)}static createComplete(){return pe.completeNotification}}function $e(se,re=0){return function(Ye){return Ye.lift(new xe(se,re))}}pe.completeNotification=new pe("C"),pe.undefinedValueNotification=new pe("N",void 0);class xe{constructor(re,Ee=0){this.scheduler=re,this.delay=Ee}call(re,Ee){return Ee.subscribe(new me(re,this.scheduler,this.delay))}}class me extends A.L{constructor(re,Ee,Ye=0){super(re),this.scheduler=Ee,this.delay=Ye}static dispatch(re){const{notification:Ee,destination:Ye}=re;Ee.observe(Ye),this.unsubscribe()}scheduleMessage(re){this.destination.add(this.scheduler.schedule(me.dispatch,this.delay,new q(re,this.destination)))}_next(re){this.scheduleMessage(pe.createNext(re))}_error(re){this.scheduleMessage(pe.createError(re)),this.unsubscribe()}_complete(){this.scheduleMessage(pe.createComplete()),this.unsubscribe()}}class q{constructor(re,Ee){this.notification=re,this.destination=Ee}}},1307:(Dt,tt,J)=>{"use strict";J.d(tt,{x:()=>Ie});var A=J(7393);function Ie(){return function(pe){return pe.lift(new te(pe))}}class te{constructor(pe){this.connectable=pe}call(pe,$e){const{connectable:xe}=this;xe._refCount++;const me=new Ue(pe,xe),q=$e.subscribe(me);return me.closed||(me.connection=xe.connect()),q}}class Ue extends A.L{constructor(pe,$e){super(pe),this.connectable=$e}_unsubscribe(){const{connectable:pe}=this;if(!pe)return void(this.connection=null);this.connectable=null;const $e=pe._refCount;if($e<=0)return void(this.connection=null);if(pe._refCount=$e-1,$e>1)return void(this.connection=null);const{connection:xe}=this,me=pe._connection;this.connection=null,me&&(!xe||me===xe)&&me.unsubscribe()}}},8819:(Dt,tt,J)=>{"use strict";J.d(tt,{B:()=>$e});var A=J(2441);var Ue=J(1307),Te=J(9765);function pe(){return new Te.xQ}function $e(){return xe=>(0,Ue.x)()(function(xe,me){return function(se){let re;re="function"==typeof xe?xe:function(){return xe};const Ee=Object.create(se,A.N);return Ee.source=se,Ee.subjectFactory=re,Ee}}(pe)(xe))}},3101:(Dt,tt,J)=>{"use strict";J.d(tt,{R:()=>Be});var A=J(7574);let Ie=1;const te=Promise.resolve(),Ue={};function Te(Ve){return Ve in Ue&&(delete Ue[Ve],!0)}const pe={setImmediate(Ve){const ze=Ie++;return Ue[ze]=!0,te.then(()=>Te(ze)&&Ve()),ze},clearImmediate(Ve){Te(Ve)}};var xe=J(6465),q=J(6102);const Ee=new class extends q.v{flush(ze){this.active=!0,this.scheduled=void 0;const{actions:Xe}=this;let lt,St=-1,nn=Xe.length;ze=ze||Xe.shift();do{if(lt=ze.execute(ze.state,ze.delay))break}while(++St<nn&&(ze=Xe.shift()));if(this.active=!1,lt){for(;++St<nn&&(ze=Xe.shift());)ze.unsubscribe();throw lt}}}(class extends xe.o{constructor(ze,Xe){super(ze,Xe),this.scheduler=ze,this.work=Xe}requestAsyncId(ze,Xe,lt=0){return null!==lt&&lt>0?super.requestAsyncId(ze,Xe,lt):(ze.actions.push(this),ze.scheduled||(ze.scheduled=pe.setImmediate(ze.flush.bind(ze,null))))}recycleAsyncId(ze,Xe,lt=0){if(null!==lt&&lt>0||null===lt&&this.delay>0)return super.recycleAsyncId(ze,Xe,lt);0===ze.actions.length&&(pe.clearImmediate(Xe),ze.scheduled=void 0)}});var Ye=J(9796);class Pe extends A.y{constructor(ze,Xe=0,lt=Ee){var Ve;super(),this.source=ze,this.delayTime=Xe,this.scheduler=lt,(!(!(0,Ye.k)(Ve=Xe)&&Ve-parseFloat(Ve)+1>=0)||Xe<0)&&(this.delayTime=0),(!lt||"function"!=typeof lt.schedule)&&(this.scheduler=Ee)}static create(ze,Xe=0,lt=Ee){return new Pe(ze,Xe,lt)}static dispatch(ze){const{source:Xe,subscriber:lt}=ze;return this.add(Xe.subscribe(lt))}_subscribe(ze){return this.scheduler.schedule(Pe.dispatch,this.delayTime,{source:this.source,subscriber:ze})}}function Be(Ve,ze=0){return function(lt){return lt.lift(new Ce(Ve,ze))}}class Ce{constructor(ze,Xe){this.scheduler=ze,this.delay=Xe}call(ze,Xe){return new Pe(Xe,this.delay,this.scheduler).subscribe(ze)}}},3342:(Dt,tt,J)=>{"use strict";J.d(tt,{b:()=>Ue});var A=J(7393);function Ie(){}var te=J(9105);function Ue($e,xe,me){return function(se){return se.lift(new Te($e,xe,me))}}class Te{constructor(xe,me,q){this.nextOrObserver=xe,this.error=me,this.complete=q}call(xe,me){return me.subscribe(new pe(xe,this.nextOrObserver,this.error,this.complete))}}class pe extends A.L{constructor(xe,me,q,se){super(xe),this._tapNext=Ie,this._tapError=Ie,this._tapComplete=Ie,this._tapError=q||Ie,this._tapComplete=se||Ie,(0,te.m)(me)?(this._context=this,this._tapNext=me):me&&(this._context=me,this._tapNext=me.next||Ie,this._tapError=me.error||Ie,this._tapComplete=me.complete||Ie)}_next(xe){try{this._tapNext.call(this._context,xe)}catch(me){return void this.destination.error(me)}this.destination.next(xe)}_error(xe){try{this._tapError.call(this._context,xe)}catch(me){return void this.destination.error(me)}this.destination.error(xe)}_complete(){try{this._tapComplete.call(this._context)}catch(xe){return void this.destination.error(xe)}return this.destination.complete()}}},4087:(Dt,tt,J)=>{"use strict";J.d(tt,{r:()=>te});var A=J(7574),Ie=J(5319);function te(Ue,Te){return new A.y(pe=>{const $e=new Ie.w;let xe=0;return $e.add(Te.schedule(function(){xe!==Ue.length?(pe.next(Ue[xe++]),pe.closed||$e.add(this.schedule())):pe.complete()})),$e})}},6465:(Dt,tt,J)=>{"use strict";J.d(tt,{o:()=>te});var A=J(5319);class Ie extends A.w{constructor(Te,pe){super()}schedule(Te,pe=0){return this}}class te extends Ie{constructor(Te,pe){super(Te,pe),this.scheduler=Te,this.work=pe,this.pending=!1}schedule(Te,pe=0){if(this.closed)return this;this.state=Te;const $e=this.id,xe=this.scheduler;return null!=$e&&(this.id=this.recycleAsyncId(xe,$e,pe)),this.pending=!0,this.delay=pe,this.id=this.id||this.requestAsyncId(xe,this.id,pe),this}requestAsyncId(Te,pe,$e=0){return setInterval(Te.flush.bind(Te,this),$e)}recycleAsyncId(Te,pe,$e=0){if(null!==$e&&this.delay===$e&&!1===this.pending)return pe;clearInterval(pe)}execute(Te,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const $e=this._execute(Te,pe);if($e)return $e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Te,pe){let xe,$e=!1;try{this.work(Te)}catch(me){$e=!0,xe=!!me&&me||new Error(me)}if($e)return this.unsubscribe(),xe}_unsubscribe(){const Te=this.id,pe=this.scheduler,$e=pe.actions,xe=$e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==xe&&$e.splice(xe,1),null!=Te&&(this.id=this.recycleAsyncId(pe,Te,null)),this.delay=null}}},6102:(Dt,tt,J)=>{"use strict";J.d(tt,{v:()=>Ie});let A=(()=>{class te{constructor(Te,pe=te.now){this.SchedulerAction=Te,this.now=pe}schedule(Te,pe=0,$e){return new this.SchedulerAction(this,Te).schedule($e,pe)}}return te.now=()=>Date.now(),te})();class Ie extends A{constructor(Ue,Te=A.now){super(Ue,()=>Ie.delegate&&Ie.delegate!==this?Ie.delegate.now():Te()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Ue,Te=0,pe){return Ie.delegate&&Ie.delegate!==this?Ie.delegate.schedule(Ue,Te,pe):super.schedule(Ue,Te,pe)}flush(Ue){const{actions:Te}=this;if(this.active)return void Te.push(Ue);let pe;this.active=!0;do{if(pe=Ue.execute(Ue.state,Ue.delay))break}while(Ue=Te.shift());if(this.active=!1,pe){for(;Ue=Te.shift();)Ue.unsubscribe();throw pe}}}},3637:(Dt,tt,J)=>{"use strict";J.d(tt,{z:()=>te});var A=J(6465);const te=new(J(6102).v)(A.o)},7771:(Dt,tt,J)=>{"use strict";J.d(tt,{c:()=>pe,N:()=>Te});var A=J(6465),te=J(6102);const Te=new class extends te.v{}(class extends A.o{constructor(xe,me){super(xe,me),this.scheduler=xe,this.work=me}schedule(xe,me=0){return me>0?super.schedule(xe,me):(this.delay=me,this.state=xe,this.scheduler.flush(this),this)}execute(xe,me){return me>0||this.closed?super.execute(xe,me):this._execute(xe,me)}requestAsyncId(xe,me,q=0){return null!==q&&q>0||null===q&&this.delay>0?super.requestAsyncId(xe,me,q):xe.flush(this)}}),pe=Te},377:(Dt,tt,J)=>{"use strict";J.d(tt,{hZ:()=>Ie});const Ie="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Dt,tt,J)=>{"use strict";J.d(tt,{L:()=>A});const A="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Dt,tt,J)=>{"use strict";J.d(tt,{b:()=>A});const A="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Dt,tt,J)=>{"use strict";J.d(tt,{N:()=>Ie});const Ie=(()=>{function te(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return te.prototype=Object.create(Error.prototype),te})()},4449:(Dt,tt,J)=>{"use strict";function A(Ie){setTimeout(()=>{throw Ie},0)}J.d(tt,{z:()=>A})},4487:(Dt,tt,J)=>{"use strict";function A(Ie){return Ie}J.d(tt,{y:()=>A})},9796:(Dt,tt,J)=>{"use strict";J.d(tt,{k:()=>A});const A=Array.isArray||(Ie=>Ie&&"number"==typeof Ie.length)},9489:(Dt,tt,J)=>{"use strict";J.d(tt,{z:()=>A});const A=Ie=>Ie&&"number"==typeof Ie.length&&"function"!=typeof Ie},9105:(Dt,tt,J)=>{"use strict";function A(Ie){return"function"==typeof Ie}J.d(tt,{m:()=>A})},1555:(Dt,tt,J)=>{"use strict";function A(Ie){return null!==Ie&&"object"==typeof Ie}J.d(tt,{K:()=>A})},4072:(Dt,tt,J)=>{"use strict";function A(Ie){return!!Ie&&"function"!=typeof Ie.subscribe&&"function"==typeof Ie.then}J.d(tt,{t:()=>A})},4869:(Dt,tt,J)=>{"use strict";function A(Ie){return Ie&&"function"==typeof Ie.schedule}J.d(tt,{K:()=>A})},7444:(Dt,tt,J)=>{"use strict";J.d(tt,{s:()=>se});var A=J(5015),Ie=J(4449),Ue=J(377),pe=J(6554),xe=J(9489),me=J(4072),q=J(1555);const se=re=>{if(re&&"function"==typeof re[pe.L])return(re=>Ee=>{const Ye=re[pe.L]();if("function"!=typeof Ye.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ye.subscribe(Ee)})(re);if((0,xe.z)(re))return(0,A.V)(re);if((0,me.t)(re))return(re=>Ee=>(re.then(Ye=>{Ee.closed||(Ee.next(Ye),Ee.complete())},Ye=>Ee.error(Ye)).then(null,Ie.z),Ee))(re);if(re&&"function"==typeof re[Ue.hZ])return(re=>Ee=>{const Ye=re[Ue.hZ]();for(;;){let We;try{We=Ye.next()}catch(Pe){return Ee.error(Pe),Ee}if(We.done){Ee.complete();break}if(Ee.next(We.value),Ee.closed)break}return"function"==typeof Ye.return&&Ee.add(()=>{Ye.return&&Ye.return()}),Ee})(re);{const Ye=`You provided ${(0,q.K)(re)?"an invalid object":`'${re}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ye)}}},5015:(Dt,tt,J)=>{"use strict";J.d(tt,{V:()=>A});const A=Ie=>te=>{for(let Ue=0,Te=Ie.length;Ue<Te&&!te.closed;Ue++)te.next(Ie[Ue]);te.complete()}},8253:(Dt,tt,J)=>{"use strict";var A=J(7716);let Ie=null;function te(){return Ie}const $e=new A.OlP("DocumentToken");let xe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,A.Yz7)({factory:me,token:n,providedIn:"platform"}),n})();function me(){return(0,A.LFG)(se)}const q=new A.OlP("Location Initialized");let se=(()=>{class n extends xe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return te().getBaseHref(this._doc)}onPopState(t){const r=te().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=te().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){re()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){re()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(A.LFG($e))},n.\u0275prov=(0,A.Yz7)({factory:Ee,token:n,providedIn:"platform"}),n})();function re(){return!!window.history.pushState}function Ee(){return new se((0,A.LFG)($e))}function Ye(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function We(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Pe(n){return n&&"?"!==n[0]?"?"+n:n}let Be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,A.Yz7)({factory:Ce,token:n,providedIn:"root"}),n})();function Ce(n){const e=(0,A.LFG)($e).location;return new ze((0,A.LFG)(xe),e&&e.origin||"")}const Ve=new A.OlP("appBaseHref");let ze=(()=>{class n extends Be{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ye(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Pe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const l=this.prepareExternalUrl(i+Pe(o));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){const l=this.prepareExternalUrl(i+Pe(o));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(xe),A.LFG(Ve,8))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})(),Xe=(()=>{class n extends Be{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ye(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let l=this.prepareExternalUrl(i+Pe(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){let l=this.prepareExternalUrl(i+Pe(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(xe),A.LFG(Ve,8))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})(),lt=(()=>{class n{constructor(t,r){this._subject=new A.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=We(Et(i)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Pe(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Et(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(Be),A.LFG(xe))},n.normalizeQueryParams=Pe,n.joinWithSlash=Ye,n.stripTrailingSlash=We,n.\u0275prov=(0,A.Yz7)({factory:St,token:n,providedIn:"root"}),n})();function St(){return new lt((0,A.LFG)(Be),(0,A.LFG)(xe))}function Et(n){return n.replace(/\/index.html$/,"")}var Le=(()=>((Le=Le||{})[Le.Zero=0]="Zero",Le[Le.One=1]="One",Le[Le.Two=2]="Two",Le[Le.Few=3]="Few",Le[Le.Many=4]="Many",Le[Le.Other=5]="Other",Le))();const vr=A.kL8;class ji{}let _r=(()=>{class n extends ji{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(vr(r||this.locale)(t)){case Le.Zero:return"zero";case Le.One:return"one";case Le.Two:return"two";case Le.Few:return"few";case Le.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(A.soG))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();function li(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}class Do{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Nn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,o,l)=>{if(null==i.previousIndex){const g=this._viewContainer.createEmbeddedView(this._template,new Do(null,this._ngForOf,-1,-1),null===l?void 0:l),_=new Zr(i,g);r.push(_)}else if(null==l)this._viewContainer.remove(null===o?void 0:o);else if(null!==o){const g=this._viewContainer.get(o);this._viewContainer.move(g,l);const _=new Zr(i,g);r.push(_)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,o=this._viewContainer.length;i<o;i++){const l=this._viewContainer.get(i);l.context.index=i,l.context.count=o,l.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(A.s_b),A.Y36(A.Rgc),A.Y36(A.ZZ4))},n.\u0275dir=A.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Zr{constructor(e,t){this.record=e,this.view=t}}let da=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new cu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(A.s_b),A.Y36(A.Rgc))},n.\u0275dir=A.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class cu{constructor(){this.$implicit=null,this.ngIf=null}}function lu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,A.AaK)(e)}'.`)}let Yu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=A.oAB({type:n}),n.\u0275inj=A.cJS({providers:[{provide:ji,useClass:_r}]}),n})();function Ln(n){return"server"===n}let ka=(()=>{class n{}return n.\u0275prov=(0,A.Yz7)({token:n,providedIn:"root",factory:()=>new Xu((0,A.LFG)($e),window)}),n})();class Xu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const l=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Qu(this.window.history)||Qu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Qu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ju{}class ec extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new ec,Ie||(Ie=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Mo=Mo||document.querySelector("base"),Mo?Mo.getAttribute("href"):null);return null==t?null:function(n){jn=jn||document.createElement("a"),jn.setAttribute("href",n);const e=jn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Mo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return li(document.cookie,e)}}let jn,Mo=null;const En=new A.OlP("TRANSITION_ID"),Fi=[{provide:A.ip1,useFactory:function(n,e,t){return()=>{t.get(A.CZH).donePromise.then(()=>{const r=te(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[En,$e,A.zs3],multi:!0}];class Rr{static init(){(0,A.VLi)(new Rr)}addToWindow(e){A.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},A.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),A.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),A.dqk.frameworkStabilizers||(A.dqk.frameworkStabilizers=[]),A.dqk.frameworkStabilizers.push(r=>{const i=A.dqk.getAllAngularTestabilities();let o=i.length,l=!1;const g=function(_){l=l||_,o--,0==o&&r(l)};i.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?te().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Fc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();const Fo=new A.OlP("EventManagerPlugins");let ot=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const l=i[o];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(Fo),A.LFG(A.R0b))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();class ln{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=te().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Tl=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})(),Kn=(()=>{class n extends Tl{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const l=this._doc.createElement("style");l.textContent=o,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Dl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Dl))}}return n.\u0275fac=function(t){return new(t||n)(A.LFG($e))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();function Dl(n){te().remove(n)}const Qo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},so=/%COMP%/g;function Br(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Br(n,i,t):(i=i.replace(so,n),t.push(i))}return t}function dn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ko=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ar(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case A.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ic(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case A.ifc.ShadowDom:return new Ol(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Br(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(ot),A.LFG(Kn),A.LFG(A.AFp))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();class Ar{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Qo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Qo[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Qo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(A.JOm.DashCase|A.JOm.Important)?e.style.setProperty(t,r,i&A.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&A.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,dn(r)):this.eventManager.addEventListener(e,t,dn(r))}}class ic extends Ar{constructor(e,t,r,i){super(e),this.component=r;const o=Br(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr="_ngcontent-%COMP%".replace(so,i+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(so,i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ol extends Ar{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Br(i.id,i.styles,[]);for(let l=0;l<o.length;l++){const g=document.createElement("style");g.textContent=o[l],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Jo=(()=>{class n extends ln{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(A.LFG($e))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();const Cu=["alt","control","meta","shift"],hr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ci={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},G0={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Yn=(()=>{class n extends ln{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),l=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>te().onAndCancel(t,o.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let l="";if(Cu.forEach(_=>{const C=r.indexOf(_);C>-1&&(r.splice(C,1),l+=_+".")}),l+=o,0!=r.length||0===o.length)return null;const g={};return g.domEventName=i,g.fullKey=l,g}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ci.hasOwnProperty(e)&&(e=Ci[e]))}return hr[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Cu.forEach(o=>{o!=i&&G0[o](t)&&(r+=o+".")}),r+=i,r}static eventCallback(t,r,i){return o=>{n.getEventFullKey(o)===t&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(A.LFG($e))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();const Va=(0,A.eFA)(A._c5,"browser",[{provide:A.Lbi,useValue:"browser"},{provide:A.g9A,useValue:function(){ec.makeCurrent(),Rr.init()},multi:!0},{provide:$e,useFactory:function(){return(0,A.RDi)(document),document},deps:[]}]),jc=[[],{provide:A.zSh,useValue:"root"},{provide:A.qLn,useFactory:function(){return new A.qLn},deps:[]},{provide:Fo,useClass:Jo,multi:!0,deps:[$e,A.R0b,A.Lbi]},{provide:Fo,useClass:Yn,multi:!0,deps:[$e]},[],{provide:ko,useClass:ko,deps:[ot,Kn,A.AFp]},{provide:A.FYo,useExisting:ko},{provide:Tl,useExisting:Kn},{provide:Kn,useClass:Kn,deps:[$e]},{provide:A.dDg,useClass:A.dDg,deps:[A.R0b]},{provide:ot,useClass:ot,deps:[Fo,A.R0b]},{provide:Ju,useClass:Fc,deps:[]},[]];let If=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:A.AFp,useValue:t.appId},{provide:En,useExisting:A.AFp},Fi]}}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(n,12))},n.\u0275mod=A.oAB({type:n}),n.\u0275inj=A.cJS({providers:jc,imports:[Yu,A.hGG]}),n})();"undefined"!=typeof window&&window;var Ft=J(5917),Qn=J(7574),Ur=J(9773);function Lo(n,e){return(0,Ur.zg)(n,e,1)}var Ii=J(7393);function bi(n,e){return function(r){return r.lift(new Gc(n,e))}}class Gc{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Si(e,this.predicate,this.thisArg))}}class Si extends Ii.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}var jt=J(8002);class cc{}class Hs{}class Xr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(l):this.headers.set(o,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Xr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Xr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Xr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let l=this.headers.get(t);if(!l)return;l=l.filter(g=>-1===o.indexOf(g)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Wc{encodeKey(e){return lc(e)}encodeValue(e){return lc(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const ns=/%(\d[a-f0-9])/gi,Bo={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function lc(n){return encodeURIComponent(n).replace(ns,(e,t)=>{var r;return null!==(r=Bo[t])&&void 0!==r?r:e})}function Ua(n){return`${n}`}class Hr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Wc,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[l,g]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],_=t.get(l)||[];_.push(g),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Hr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Ua(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Ua(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class js{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function dc(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function $c(n){return"undefined"!=typeof Blob&&n instanceof Blob}function ao(n){return"undefined"!=typeof FormData&&n instanceof FormData}class qc{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Xr),this.context||(this.context=new js),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+l}}else this.params=new Hr,this.urlWithParams=t}serializeBody(){return null===this.body?null:dc(this.body)||$c(this.body)||ao(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Hr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ao(this.body)?null:$c(this.body)?this.body.type||null:dc(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Hr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,o=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,g=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let C=e.headers||this.headers,D=e.params||this.params;const O=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(C=Object.keys(e.setHeaders).reduce((M,B)=>M.set(B,e.setHeaders[B]),C)),e.setParams&&(D=Object.keys(e.setParams).reduce((M,B)=>M.set(B,e.setParams[B]),D)),new qc(r,i,l,{params:D,headers:C,context:O,reportProgress:_,responseType:o,withCredentials:g})}}var Qr=(()=>((Qr=Qr||{})[Qr.Sent=0]="Sent",Qr[Qr.UploadProgress=1]="UploadProgress",Qr[Qr.ResponseHeader=2]="ResponseHeader",Qr[Qr.DownloadProgress=3]="DownloadProgress",Qr[Qr.Response=4]="Response",Qr[Qr.User=5]="User",Qr))();class bf{constructor(e,t=200,r="OK"){this.headers=e.headers||new Xr,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Rd extends bf{constructor(e={}){super(e),this.type=Qr.ResponseHeader}clone(e={}){return new Rd({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Jn extends bf{constructor(e={}){super(e),this.type=Qr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Jn({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class kl extends bf{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function fc(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Nd=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof qc)o=t;else{let _,C;_=i.headers instanceof Xr?i.headers:new Xr(i.headers),i.params&&(C=i.params instanceof Hr?i.params:new Hr({fromObject:i.params})),o=new qc(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:C,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=(0,Ft.of)(o).pipe(Lo(_=>this.handler.handle(_)));if(t instanceof qc||"events"===i.observe)return l;const g=l.pipe(bi(_=>_ instanceof Jn));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return g.pipe((0,jt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return g.pipe((0,jt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return g.pipe((0,jt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));case"json":default:return g.pipe((0,jt.U)(_=>_.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Hr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,fc(i,r))}post(t,r,i={}){return this.request("POST",t,fc(i,r))}put(t,r,i={}){return this.request("PUT",t,fc(i,r))}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(cc))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();class Ll{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Sf=new A.OlP("HTTP_INTERCEPTORS");let Gs=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();const Gn=/^\)\]\}',?\n/;let uo=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Qn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((B,G)=>i.setRequestHeader(B,G.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const B=t.detectContentTypeHeader();null!==B&&i.setRequestHeader("Content-Type",B)}if(t.responseType){const B=t.responseType.toLowerCase();i.responseType="json"!==B?B:"text"}const o=t.serializeBody();let l=null;const g=()=>{if(null!==l)return l;const B=1223===i.status?204:i.status,G=i.statusText||"OK",$=new Xr(i.getAllResponseHeaders()),ie=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new Rd({headers:$,status:B,statusText:G,url:ie}),l},_=()=>{let{headers:B,status:G,statusText:$,url:ie}=g(),ce=null;204!==G&&(ce=void 0===i.response?i.responseText:i.response),0===G&&(G=ce?200:0);let fe=G>=200&&G<300;if("json"===t.responseType&&"string"==typeof ce){const Ae=ce;ce=ce.replace(Gn,"");try{ce=""!==ce?JSON.parse(ce):null}catch(De){ce=Ae,fe&&(fe=!1,ce={error:De,text:ce})}}fe?(r.next(new Jn({body:ce,headers:B,status:G,statusText:$,url:ie||void 0})),r.complete()):r.error(new kl({error:ce,headers:B,status:G,statusText:$,url:ie||void 0}))},C=B=>{const{url:G}=g(),$=new kl({error:B,status:i.status||0,statusText:i.statusText||"Unknown Error",url:G||void 0});r.error($)};let D=!1;const O=B=>{D||(r.next(g()),D=!0);let G={type:Qr.DownloadProgress,loaded:B.loaded};B.lengthComputable&&(G.total=B.total),"text"===t.responseType&&!!i.responseText&&(G.partialText=i.responseText),r.next(G)},M=B=>{let G={type:Qr.UploadProgress,loaded:B.loaded};B.lengthComputable&&(G.total=B.total),r.next(G)};return i.addEventListener("load",_),i.addEventListener("error",C),i.addEventListener("timeout",C),i.addEventListener("abort",C),t.reportProgress&&(i.addEventListener("progress",O),null!==o&&i.upload&&i.upload.addEventListener("progress",M)),i.send(o),r.next({type:Qr.Sent}),()=>{i.removeEventListener("error",C),i.removeEventListener("abort",C),i.removeEventListener("load",_),i.removeEventListener("timeout",C),t.reportProgress&&(i.removeEventListener("progress",O),null!==o&&i.upload&&i.upload.removeEventListener("progress",M)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(Ju))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();const Bl=new A.OlP("XSRF_COOKIE_NAME"),Ir=new A.OlP("XSRF_HEADER_NAME");class mo{}let Ct=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=li(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(A.LFG($e),A.LFG(A.Lbi),A.LFG(Bl))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})(),wa=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const o=this.tokenService.getToken();return null!==o&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,o)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(mo),A.LFG(Ir))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})(),co=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Sf,[]);this.chain=r.reduceRight((i,o)=>new Ll(i,o),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(Hs),A.LFG(A.zs3))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})(),Vl=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:wa,useClass:Gs}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Bl,useValue:t.cookieName}:[],t.headerName?{provide:Ir,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=A.oAB({type:n}),n.\u0275inj=A.cJS({providers:[wa,{provide:Sf,useExisting:wa,multi:!0},{provide:mo,useClass:Ct},{provide:Bl,useValue:"XSRF-TOKEN"},{provide:Ir,useValue:"X-XSRF-TOKEN"}]}),n})(),ja=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=A.oAB({type:n}),n.\u0275inj=A.cJS({providers:[Nd,{provide:cc,useClass:co},uo,{provide:Hs,useExisting:uo}],imports:[[Vl.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var fi=J(9765),Cn=J(4402),f=J(6682),u=J(6136),c=J(5345);function p(n,e){return"function"==typeof e?t=>t.pipe(p((r,i)=>(0,Cn.D)(n(r,i)).pipe((0,jt.U)((o,l)=>e(r,o,i,l))))):t=>t.lift(new h(n))}class h{constructor(e){this.project=e}call(e,t){return t.subscribe(new m(e,this.project))}}class m extends c.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new c.IY(this),i=this.destination;i.add(r),this.innerSubscription=(0,c.ft)(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}var x=J(7771),w=J(5319),b=J(7971),R=J(8858);class L extends fi.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new V(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;let l;if(this.closed)throw new b.N;if(this.isStopped||this.hasError?l=w.w.EMPTY:(this.observers.push(e),l=new R.W(this,e)),i&&e.add(e=new u.ht(e,i)),t)for(let g=0;g<o&&!e.closed;g++)e.next(r[g]);else for(let g=0;g<o&&!e.closed;g++)e.next(r[g].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),l}_getNow(){return(this.scheduler||x.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,i=this._events,o=i.length;let l=0;for(;l<o&&!(e-i[l].time<r);)l++;return o>t&&(l=Math.max(l,o-t)),l>0&&i.splice(0,l),i}}class V{constructor(e,t){this.time=e,this.value=t}}function H(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},i=>i.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let i,l,o=0,g=!1,_=!1;return function(D){let O;o++,!i||g?(g=!1,i=new L(n,e,r),O=i.subscribe(this),l=D.subscribe({next(M){i.next(M)},error(M){g=!0,i.error(M)},complete(){_=!0,l=void 0,i.complete()}}),_&&(l=void 0)):O=i.subscribe(this),this.add(()=>{o--,O.unsubscribe(),O=void 0,l&&!_&&t&&0===o&&(l.unsubscribe(),l=void 0,i=void 0)})}}(r))}const oe=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})(),ve=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();var ge=J(9193);function Ne(n){return e=>0===n?(0,ge.c)():e.lift(new Ge(n))}class Ge{constructor(e){if(this.total=e,this.total<0)throw new ve}call(e,t){return t.subscribe(new Je(e,this.total))}}class Je extends Ii.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function st(n=null){return e=>e.lift(new pt(n))}class pt{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Rt(e,this.defaultValue))}}class Rt extends Ii.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Vt(n=_n){return e=>e.lift(new qt(n))}class qt{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Jr(e,this.errorFactory))}}class Jr extends Ii.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function _n(){return new oe}var er=J(4487);function hi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?bi((i,o)=>n(i,o,r)):er.y,Ne(1),t?st(e):Vt(()=>new oe))}function rs(n,e){return e?p(()=>n,e):p(()=>n)}var Kc=J(3101),pr=J(6643),jr=J(8939);J(2329);var Ke=J(8239),Ga=J(5452),zs=J(6034),Q=J(3854),vo=J(5601);const pm=new Map,Ty={activated:!1,tokenObservers:[]},gm={initialized:!1,enabled:!1};function qi(n){return pm.get(n)||Ty}function is(n,e){pm.set(n,e)}function Of(){return gm}class _m{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ke.Z)(function*(){t.stop();try{t.pending=new Q.BH,yield(n=t.getNextRun(e),new Promise(e=>{setTimeout(e,n)})),t.pending.resolve(),yield t.pending.promise,t.pending=new Q.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}var n})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const $s=new Q.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function Fd(n){if(!qi(n).activated)throw $s.create("use-before-activation",{appName:n.name})}function xm(n,e){return Y0.apply(this,arguments)}function Y0(){return(Y0=(0,Ke.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const o={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,o)}catch(O){throw $s.create("fetch-network-error",{originalErrorMessage:O.message})}if(200!==l.status)throw $s.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(O){throw $s.create("fetch-parse-error",{originalErrorMessage:O.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw $s.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const C=1e3*Number(_[1]),D=Date.now();return{token:g.attestationToken,expireTimeMillis:D+C,issuedAtTimeMillis:D}})).apply(this,arguments)}function Oy(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Rf="firebase-app-check-store";let Wh=null;function Em(){return Wh||(Wh=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e($s.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Rf,{keyPath:"compositeKey"})}}}catch(t){e($s.create("storage-open",{originalErrorMessage:t.message}))}}),Wh)}function Hl(){return(Hl=(0,Ke.Z)(function*(n,e){const r=(yield Em()).transaction(Rf,"readwrite"),o=r.objectStore(Rf).put({compositeKey:n,value:e});return new Promise((l,g)=>{o.onsuccess=_=>{l()},r.onerror=_=>{var C;g($s.create("storage-set",{originalErrorMessage:null===(C=_.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const eg=new vo.Yd("@firebase/app-check");function qh(n,e){return(0,Q.hl)()?function(n,e){return function(n,e){return Hl.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{eg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ny(){return Of().enabled}function Py(){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,Ke.Z)(function*(){const n=Of();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const My={error:"UNKNOWN_ERROR"};function Fy(n){return Q.US.encodeString(JSON.stringify(n),!1)}function Kh(n){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,Ke.Z)(function*(n,e=!1){const t=n.app;Fd(t);const r=qi(t);let o,l,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&br(g)&&(i=g,is(t,Object.assign(Object.assign({},r),{token:i})),Sm(t,{token:i.token}))}if(!e&&i&&br(i))return{token:i.token};if(Ny()){const g=yield xm(Oy(t,yield Py()),n.platformLoggerProvider);return yield qh(t,g),is(t,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{i=yield r.provider.getToken()}catch(g){eg.error(g),o=g}return i?(l={token:i.token},is(t,Object.assign(Object.assign({},r),{token:i})),yield qh(t,i)):l=ky(o),Sm(t,l),l})).apply(this,arguments)}function Xh(n,e){const t=qi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),is(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Sm(n,e){const t=qi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function br(n){return n.expireTimeMillis-Date.now()>0}function ky(n){return{token:Fy(My),error:n}}class Ly{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=qi(this.app);for(const t of e)Xh(this.app,t.next);return Promise.resolve()}}const og="app-check-internal";(0,Ga._registerComponent)(new zs.wA("app-check",n=>function(n,e){return new Ly(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(og).initialize()})),(0,Ga._registerComponent)(new zs.wA(og,n=>function(n){return{getToken:e=>Kh(n,e),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,o=qi(i),l={next:t,error:r,type:e},g=Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,l]});if(!g.tokenRefresher){const _=function(n){const{app:e}=n;return new _m((0,Ke.Z)(function*(){let r;if(r=qi(e).token?yield Kh(n,!0):yield Kh(n),r.error)throw r.error}),()=>!0,()=>{const t=qi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n);g.tokenRefresher=_}if(!g.tokenRefresher.isRunning()&&o.isTokenAutoRefreshEnabled&&g.tokenRefresher.start(),o.token&&br(o.token)){const _=o.token;Promise.resolve().then(()=>t({token:_.token})).catch(()=>{})}else null==o.token&&o.cachedTokenPromise.then(_=>{_&&br(_)&&t({token:_.token})}).catch(()=>{});is(i,g)}(n,"INTERNAL",e),removeTokenListener:e=>Xh(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ga.registerVersion)("@firebase/app-check","0.4.2");class jl{constructor(){return(0,pr.vb)("app-check")}}"undefined"!=typeof window&&window;var Y=J(7841);const Ze=new A.OlP("angularfire2.auth.use-emulator"),gt=new A.OlP("angularfire2.auth.settings"),_t=new A.OlP("angularfire2.auth.tenant-id"),Xt=new A.OlP("angularfire2.auth.langugage-code"),Wt=new A.OlP("angularfire2.auth.use-device-language"),pi=new A.OlP("angularfire.auth.persistence"),os=(n,e,t,r,i,o,l,g)=>(0,jr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,o&&_.useDeviceLanguage(),l)for(const[C,D]of Object.entries(l))_.settings[C]=D;return g&&_.setPersistence(g),_},[t,r,i,o,l,g]);let gc=(()=>{class n{constructor(t,r,i,o,l,g,_,C,D,O,M,B){const G=new fi.xQ,$=(0,Ft.of)(void 0).pipe((0,u.QV)(l.outsideAngular),p(()=>o.runOutsideAngular(()=>Promise.resolve().then(J.bind(J,4671)))),(0,jt.U)(()=>(0,jr.on)(t,o,r)),(0,jt.U)(ie=>os(ie,o,g,C,D,O,_,M)),H({bufferSize:1,refCount:!1}));if(Ln(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ft.of)(null);else{$.pipe(hi()).subscribe();const ce=$.pipe(p(De=>De.getRedirectResult().then(nt=>nt,()=>null)),pr.iC,H({bufferSize:1,refCount:!1})),fe=$.pipe(p(De=>new Qn.y(nt=>({unsubscribe:o.runOutsideAngular(()=>De.onAuthStateChanged(ht=>nt.next(ht),ht=>nt.error(ht),()=>nt.complete()))})))),Ae=$.pipe(p(De=>new Qn.y(nt=>({unsubscribe:o.runOutsideAngular(()=>De.onIdTokenChanged(ht=>nt.next(ht),ht=>nt.error(ht),()=>nt.complete()))}))));this.authState=ce.pipe(rs(fe),(0,Kc.R)(l.outsideAngular),(0,u.QV)(l.insideAngular)),this.user=ce.pipe(rs(Ae),(0,Kc.R)(l.outsideAngular),(0,u.QV)(l.insideAngular)),this.idToken=this.user.pipe(p(De=>De?(0,Cn.D)(De.getIdToken()):(0,Ft.of)(null))),this.idTokenResult=this.user.pipe(p(De=>De?(0,Cn.D)(De.getIdTokenResult()):(0,Ft.of)(null))),this.credential=(0,f.T)(ce,G,this.authState.pipe(bi(De=>!De))).pipe((0,jt.U)(De=>(null==De?void 0:De.user)?De:null),(0,Kc.R)(l.outsideAngular),(0,u.QV)(l.insideAngular))}return(0,jr.pX)(this,$,o,{spy:{apply:(ie,ce,fe)=>{(ie.startsWith("signIn")||ie.startsWith("createUser"))&&fe.then(Ae=>G.next(Ae))}}})}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(jr.Dh),A.LFG(jr.xv,8),A.LFG(A.Lbi),A.LFG(A.R0b),A.LFG(pr.HU),A.LFG(Ze,8),A.LFG(gt,8),A.LFG(_t,8),A.LFG(Xt,8),A.LFG(Wt,8),A.LFG(pi,8),A.LFG(jl,8))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ug=(()=>{class n{constructor(){Y.Z.registerVersion("angularfire",pr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=A.oAB({type:n}),n.\u0275inj=A.cJS({providers:[gc]}),n})(),Ud=(()=>{class n{constructor(t){this.angularFireAuth=t,this.userAuthEmail=""}createNewUser(t,r){return new Promise((i,o)=>{this.angularFireAuth.createUserWithEmailAndPassword(t,r).then(()=>{this.userAuthEmail=t,i(!0)},l=>{o(l)})})}signInUser(t,r){return new Promise((i,o)=>{this.angularFireAuth.signInWithEmailAndPassword(t,r).then(()=>{this.userAuthEmail=t,i(!0)},l=>{o(l)})})}signOutUser(){this.angularFireAuth.signOut(),this.userAuthEmail=""}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(gc))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Zs extends fi.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b.N;return this._value}next(e){super.next(this._value=e)}}var cg=J(4869),Iu=J(9796);class Aa extends Ii.L{notifyNext(e,t,r,i,o){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Gy extends Ii.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Rm=J(7444);function ip(n,e,t,r,i=new Gy(n,t,r)){if(!i.closed)return e instanceof Qn.y?e.subscribe(i):(0,Rm.s)(e)(i)}var uC=J(6693);const Ks={};class Wy{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new $T(e,this.resultSelector))}}class $T extends Aa{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Ks),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(ip(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const i=this.values,l=this.toRespond?i[r]===Ks?--this.toRespond:this.toRespond:0;i[r]=t,0===l&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}var dg=J(3282);function Nm(...n){return(0,dg.J)(1)((0,Ft.of)(...n))}function zy(n){return new Qn.y(e=>{let t;try{t=n()}catch(i){return void e.error(i)}return(t?(0,Cn.D)(t):(0,ge.c)()).subscribe(e)})}var $y=J(2441);function op(...n){const e=n[n.length-1];return(0,cg.K)(e)?(n.pop(),t=>Nm(n,t,e)):t=>Nm(n,t)}function Hd(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(i){return i.lift(new B8(n,e,t))}}class B8{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new sp(e,this.accumulator,this.seed,this.hasSeed))}}class sp extends Ii.L{constructor(e,t,r,i){super(e),this.accumulator=t,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function tl(n){return function(t){const r=new cC(n),i=t.lift(r);return r.caught=i}}class cC{constructor(e){this.selector=e}call(e,t){return t.subscribe(new qT(e,this.selector,this.caught))}}class qT extends c.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(o){return void super.error(o)}this._unsubscribeAndRecycle();const r=new c.IY(this);this.add(r);const i=(0,c.ft)(t,r);i!==r&&this.add(i)}}}function hg(n){return function(t){return 0===n?(0,ge.c)():t.lift(new ZT(n))}}class ZT{constructor(e){if(this.total=e,this.total<0)throw new ve}call(e,t){return t.subscribe(new KT(e,this.total))}}class KT extends Ii.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,i=this.count++;t.length<r?t.push(e):t[i%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let o=0;o<r;o++){const l=t++%r;e.next(i[l])}}e.complete()}}var qa=J(3342),XT=J(1307);class lC{constructor(e){this.callback=e}call(e,t){return t.subscribe(new qy(e,this.callback))}}class qy extends Ii.L{constructor(e,t){super(e),this.add(new w.w(t))}}class nl{constructor(e,t){this.id=e,this.url=t}}class pg extends nl{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gg extends nl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dC extends nl{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fC extends nl{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hC extends nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ff extends nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pC extends nl{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gC extends nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JT extends nl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mg{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mC{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vC{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _C{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yC{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zy{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ky{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const An="primary";class Pm{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function kf(n){return new Pm(n)}const Mm="ngNavigationCancelingError";function Fm(n){const e=Error("NavigationCancelingError: "+n);return e[Mm]=!0,e}function vg(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const l=r[o],g=n[o];if(l.startsWith(":"))i[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function mc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!xC(n[i],e[i]))return!1;return!0}function xC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function wC(n){return Array.prototype.concat.apply([],n)}function Xy(n){return n.length>0?n[n.length-1]:null}function yo(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Gl(n){return(0,A.CqO)(n)?n:(0,A.QGY)(n)?(0,Cn.D)(Promise.resolve(n)):(0,Ft.of)(n)}const tD={exact:function bu(n,e,t){if(!Bf(n.segments,e.segments)||!km(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!bu(n.children[r],e.children[r],t))return!1;return!0},subset:Jy},Qy={exact:function(n,e){return mc(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xC(n[t],e[t]))},ignored:()=>!0};function AC(n,e,t){return tD[t.paths](n.root,e.root,t.matrixParams)&&Qy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Jy(n,e,t){return IC(n,e,e.segments,t)}function IC(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Bf(i,t)||e.hasChildren()||!km(i,t,r))}if(n.segments.length===t.length){if(!Bf(n.segments,t)||!km(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Jy(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Bf(n.segments,i)&&km(n.segments,i,r)&&n.children[An])&&IC(n.children[An],e,o,r)}}function km(n,e,t){return e.every((r,i)=>Qy[t](n[i].parameters,r.parameters))}class Lf{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kf(this.queryParams)),this._queryParamMap}toString(){return bC.serialize(this)}}class Bn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,yo(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vf(this)}}class ap{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=kf(this.parameters)),this._parameterMap}toString(){return Bm(this)}}function Bf(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class an{}class ex{parse(e){const t=new sD(e);return new Lf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${Ys(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Lm(t)}=${Lm(i)}`).join("&"):`${Lm(t)}=${Lm(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const bC=new ex;function Vf(n){return n.segments.map(e=>Bm(e)).join("/")}function Ys(n,e){if(!n.hasChildren())return Vf(n);if(e){const t=n.children[An]?Ys(n.children[An],!1):"",r=[];return yo(n.children,(i,o)=>{o!==An&&r.push(`${o}:${Ys(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return yo(n.children,(r,i)=>{i===An&&(t=t.concat(e(r,i)))}),yo(n.children,(r,i)=>{i!==An&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===An?[Ys(n.children[An],!1)]:[`${i}:${Ys(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[An]?`${Vf(n)}/${t[0]}`:`${Vf(n)}/(${t.join("//")})`}}function tx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lm(n){return tx(n).replace(/%3B/gi,";")}function vc(n){return tx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function up(n){return decodeURIComponent(n)}function rx(n){return up(n.replace(/\+/g,"%20"))}function Bm(n){return`${vc(n.path)}${function(n){return Object.keys(n).map(e=>`;${vc(e)}=${vc(n[e])}`).join("")}(n.parameters)}`}const U8=/^[^\/()?;=#]+/;function Su(n){const e=n.match(U8);return e?e[0]:""}const Vm=/^[^=?&#]+/,ix=/^[^?&#]+/;class sD{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bn([],{}):new Bn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[An]=new Bn(e,t)),r}parseSegment(){const e=Su(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ap(up(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Su(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Su(this.remaining);i&&(r=i,this.capture(r))}e[up(t)]=up(r)}parseQueryParam(e){const t=function(n){const e=n.match(Vm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function(n){const e=n.match(ix);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=rx(t),o=rx(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Su(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=An);const l=this.parseChildren();t[o]=1===Object.keys(l).length?l[An]:new Bn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ox{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=TC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=TC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=sx(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return sx(e,this._root).map(t=>t.value)}}function TC(n,e){if(n===e.value)return e;for(const t of e.children){const r=TC(n,t);if(r)return r}return null}function sx(n,e){if(n===e.value)return[e];for(const t of e.children){const r=sx(n,t);if(r.length)return r.unshift(e),r}return[]}class jd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function cp(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ax extends ox{constructor(e,t){super(e),this.snapshot=t,OC(this,e)}toString(){return this.snapshot.toString()}}function DC(n,e){const t=function(n,e){const l=new cx([],{},{},"",{},An,e,null,n.root,-1,{});return new uD("",new jd(l,[]))}(n,e),r=new Zs([new ap("",{})]),i=new Zs({}),o=new Zs({}),l=new Zs({}),g=new Zs(""),_=new lp(r,i,l,g,o,An,e,t.root);return _.snapshot=t.root,new ax(new jd(_,[]),t)}class lp{constructor(e,t,r,i,o,l,g,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=g,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,jt.U)(e=>kf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,jt.U)(e=>kf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function aD(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class cx{constructor(e,t,r,i,o,l,g,_,C,D,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=g,this.routeConfig=_,this._urlSegment=C,this._lastPathIndex=D,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=kf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class uD extends ox{constructor(e,t){super(t),this.url=e,OC(this,t)}toString(){return cD(this._root)}}function OC(n,e){e.value._routerState=n,e.children.forEach(t=>OC(n,t))}function cD(n){const e=n.children.length>0?` { ${n.children.map(cD).join(", ")} } `:"";return`${n.value}${e}`}function RC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,mc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),mc(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!mc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),mc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function NC(n,e){return mc(n.params,e.params)&&function(n,e){return Bf(n,e)&&n.every((t,r)=>mc(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||NC(n.parent,e.parent))}function lx(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return lx(n,r,i);return lx(n,r)})}(n,e,t);return new jd(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const l=o.route;return Wl(e,l),l}}const r=function(n){return new lp(new Zs(n.url),new Zs(n.params),new Zs(n.queryParams),new Zs(n.fragment),new Zs(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>lx(n,o));return new jd(r,i)}}function Wl(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)Wl(n.children[t],e.children[t])}function dp(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fp(n){return"object"==typeof n&&null!=n&&n.outlets}function _g(n,e,t,r,i){let o={};return r&&yo(r,(l,g)=>{o[g]=Array.isArray(l)?l.map(_=>`${_}`):`${l}`}),new Lf(t.root===n?e:MC(t.root,n,e),o,i)}function MC(n,e,t){const r={};return yo(n.children,(i,o)=>{r[o]=i===e?t:MC(i,e,t)}),new Bn(n.segments,r)}class zl{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&dp(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(fp);if(i&&i!==Xy(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fx{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function px(n,e,t){if(n||(n=new Bn([],{})),0===n.segments.length&&n.hasChildren())return Hm(n,e,t);const r=function(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const l=n.segments[i],g=t[r];if(fp(g))break;const _=`${g}`,C=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&C&&"object"==typeof C&&void 0===C.outlets){if(!Hf(_,C,l))return o;r+=2}else{if(!Hf(_,{},l))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Bn(n.segments.slice(0,r.pathIndex),{});return o.children[An]=new Bn(n.segments.slice(r.pathIndex),n.children),Hm(o,0,i)}return r.match&&0===i.length?new Bn(n.segments,{}):r.match&&!n.hasChildren()?Uf(n,e,t):r.match?Hm(n,0,i):Uf(n,e,t)}function Hm(n,e,t){if(0===t.length)return new Bn(n.segments,{});{const r=function(n){return fp(n[0])?n[0].outlets:{[An]:n}}(t),i={};return yo(r,(o,l)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[l]=px(n.children[l],e,o))}),yo(n.children,(o,l)=>{void 0===r[l]&&(i[l]=o)}),new Bn(n.segments,i)}}function Uf(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(fp(o)){const _=hp(o.outlets);return new Bn(r,_)}if(0===i&&dp(t[0])){r.push(new ap(n.segments[e].path,jm(t[0]))),i++;continue}const l=fp(o)?o.outlets[An]:`${o}`,g=i<t.length-1?t[i+1]:null;l&&g&&dp(g)?(r.push(new ap(l,jm(g))),i+=2):(r.push(new ap(l,{})),i++)}return new Bn(r,{})}function hp(n){const e={};return yo(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Uf(new Bn([],{}),0,t))}),e}function jm(n){const e={};return yo(n,(t,r)=>e[r]=`${t}`),e}function Hf(n,e,t){return n==t.path&&mc(e,t.parameters)}class pp{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),RC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=cp(t);e.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,i[l],r),delete i[l]}),yo(i,(o,l)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),o=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:i,route:e,contexts:o})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=cp(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=cp(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Zy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new _C(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(RC(i),i===o)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const g=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),kC(g.route)}else{const g=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=g?g.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=_,l.outlet&&l.outlet.activateWith(i,_),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}function kC(n){RC(n.value),n.children.forEach(kC)}class Gm{constructor(e,t){this.routes=e,this.module=t}}function rl(n){return"function"==typeof n}function Gd(n){return n instanceof Lf}const gp=Symbol("INITIAL_VALUE");function mp(){return p(n=>function(...n){let e,t;return(0,cg.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Iu.k)(n[0])&&(n=n[0]),(0,uC.n)(n,t).lift(new Wy(e))}(n.map(e=>e.pipe(Ne(1),op(gp)))).pipe(Hd((e,t)=>{let r=!1;return t.reduce((i,o,l)=>i!==gp?i:(o===gp&&(r=!0),r||!1!==o&&l!==t.length-1&&!Gd(o)?i:o),e)},gp),bi(e=>e!==gp),(0,jt.U)(e=>Gd(e)?e:!0===e),Ne(1)))}let VC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=A.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&A._UZ(0,"router-outlet")},directives:function(){return[_c]},encapsulation:2}),n})();function mx(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];pD(r,gD(e,r))}}function pD(n,e){n.children&&mx(n.children,e)}function gD(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Xs(n){const e=n.children&&n.children.map(Xs),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==An&&(t.component=VC),t}function Tu(n){return n.outlet||An}function UC(n,e){const t=n.filter(r=>Tu(r)===e);return t.push(...n.filter(r=>Tu(r)!==e)),t}const mD={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function vx(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},mD):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const o=(e.matcher||vg)(t,n,e);if(!o)return Object.assign({},mD);const l={};yo(o.posParams,(_,C)=>{l[C]=_.path});const g=o.consumed.length>0?Object.assign(Object.assign({},l),o.consumed[o.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:o.consumed,lastChild:o.consumed.length,parameters:g,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function xg(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>zm(n,e,r)&&Tu(r)!==An)}(n,t,r)){const l=new Bn(e,function(n,e,t,r){const i={};i[An]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Tu(o)!==An){const l=new Bn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Tu(o)]=l}return i}(n,e,r,new Bn(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>zm(n,e,r))}(n,t,r)){const l=new Bn(n.segments,function(n,e,t,r,i,o){const l={};for(const g of r)if(zm(n,t,g)&&!i[Tu(g)]){const _=new Bn([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===o?n.segments.length:e.length,l[Tu(g)]=_}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const o=new Bn(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function zm(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function jC(n,e,t,r){return!!(Tu(n)===r||r!==An&&zm(e,t,n))&&("**"===n.path||vx(e,n,t).matched)}function GC(n,e,t){return 0===e.length&&!n.children[t]}class vp{constructor(e){this.segmentGroup=e||null}}class WC{constructor(e){this.urlTree=e}}function wg(n){return new Qn.y(e=>e.error(new vp(n)))}function zC(n){return new Qn.y(e=>e.error(new WC(n)))}function _D(n){return new Qn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class yD{constructor(e,t,r,i,o){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(A.h0i)}apply(){const e=xg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Bn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,An).pipe((0,jt.U)(o=>this.createUrlTree(Eg(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(tl(o=>{if(o instanceof WC)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof vp?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,An).pipe((0,jt.U)(i=>this.createUrlTree(Eg(i),e.queryParams,e.fragment))).pipe(tl(i=>{throw i instanceof vp?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Bn([],{[An]:e}):e;return new Lf(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,jt.U)(o=>new Bn([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,Cn.D)(i).pipe(Lo(o=>{const l=r.children[o],g=UC(t,o);return this.expandSegmentGroup(e,g,l,o).pipe((0,jt.U)(_=>({segment:_,outlet:o})))}),Hd((o,l)=>(o[l.outlet]=l.segment,o),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?bi((i,o)=>n(i,o,r)):er.y,hg(1),t?st(e):Vt(()=>new oe))}())}expandSegment(e,t,r,i,o,l){return(0,Cn.D)(r).pipe(Lo(g=>this.expandSegmentAgainstRoute(e,t,r,g,i,o,l).pipe(tl(C=>{if(C instanceof vp)return(0,Ft.of)(null);throw C}))),hi(g=>!!g),tl((g,_)=>{if(g instanceof oe||"EmptyError"===g.name){if(GC(t,i,o))return(0,Ft.of)(new Bn([],{}));throw new vp(t)}throw g}))}expandSegmentAgainstRoute(e,t,r,i,o,l,g){return jC(i,t,o,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,l):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l):wg(t):wg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?zC(o):this.lineralizeSegments(r,o).pipe((0,Ur.zg)(l=>{const g=new Bn(l,{});return this.expandSegment(e,g,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){const{matched:g,consumedSegments:_,lastChild:C,positionalParamSegments:D}=vx(t,i,o);if(!g)return wg(t);const O=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?zC(O):this.lineralizeSegments(i,O).pipe((0,Ur.zg)(M=>this.expandSegment(e,t,r,M.concat(o.slice(C)),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,Ft.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,jt.U)(M=>(r._loadedConfig=M,new Bn(i,{})))):(0,Ft.of)(new Bn(i,{}));const{matched:l,consumedSegments:g,lastChild:_}=vx(t,r,i);if(!l)return wg(t);const C=i.slice(_);return this.getChildConfig(e,r,i).pipe((0,Ur.zg)(O=>{const M=O.module,B=O.routes,{segmentGroup:G,slicedSegments:$}=xg(t,g,C,B),ie=new Bn(G.segments,G.children);if(0===$.length&&ie.hasChildren())return this.expandChildren(M,B,ie).pipe((0,jt.U)(De=>new Bn(g,De)));if(0===B.length&&0===$.length)return(0,Ft.of)(new Bn(g,{}));const ce=Tu(r)===o;return this.expandSegment(M,ie,B,$,ce?An:o,!0).pipe((0,jt.U)(Ae=>new Bn(g.concat(Ae.segments),Ae.children)))}))}getChildConfig(e,t,r){return t.children?(0,Ft.of)(new Gm(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Ft.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Ur.zg)(i=>{return i?this.configLoader.load(e.injector,t).pipe((0,jt.U)(o=>(t._loadedConfig=o,o))):(n=t,new Qn.y(e=>e.error(Fm(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,Ft.of)(new Gm([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return(0,Ft.of)(!0);const o=i.map(l=>{const g=e.get(l);let _;if((n=g)&&rl(n.canLoad))_=g.canLoad(t,r);else{if(!rl(g))throw new Error("Invalid CanLoad guard");_=g(t,r)}var n;return Gl(_)});return(0,Ft.of)(o).pipe(mp(),(0,qa.b)(l=>{if(!Gd(l))return;const g=Fm(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw g.url=l,g}),(0,jt.U)(l=>!0===l))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,Ft.of)(r);if(i.numberOfChildren>1||!i.children[An])return _D(e.redirectTo);i=i.children[An]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Lf(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return yo(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const g=i.substring(1);r[o]=t[g]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let l={};return yo(t.children,(g,_)=>{l[_]=this.createSegmentGroup(e,g,r,i)}),new Bn(o,l)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Eg(n){const e={};for(const r of Object.keys(n.children)){const o=Eg(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function(n){if(1===n.numberOfChildren&&n.children[An]){const e=n.children[An];return new Bn(n.segments.concat(e.segments),e.children)}return n}(new Bn(n.segments,e))}class ZC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yx{constructor(e,t){this.component=e,this.route=t}}function KC(n,e,t){const r=n._root;return jf(r,e?e._root:null,t,[r.value])}function $m(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function jf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=cp(e);return n.children.forEach(l=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const _=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Bf(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Bf(n.url,e.url)||!mc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!NC(n,e)||!mc(n.queryParams,e.queryParams);case"paramsChange":default:return!NC(n,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new ZC(r)):(o.data=l.data,o._resolvedData=l._resolvedData),jf(n,e,o.component?g?g.children:null:t,r,i),_&&g&&g.outlet&&g.outlet.isActivated&&i.canDeactivateChecks.push(new yx(g.outlet.component,l))}else l&&Wd(e,g,i),i.canActivateChecks.push(new ZC(r)),jf(n,null,o.component?g?g.children:null:t,r,i)})(l,o[l.value.outlet],t,r.concat([l.value]),i),delete o[l.value.outlet]}),yo(o,(l,g)=>Wd(l,t.getContext(g),i)),i}function Wd(n,e,t){const r=cp(n),i=n.value;yo(r,(o,l)=>{Wd(o,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new yx(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class q8{}function XC(n){return new Qn.y(e=>e.error(n))}class JC{constructor(e,t,r,i,o,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=l}recognize(){const e=xg(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,An);if(null===t)return null;const r=new cx([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},An,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new jd(r,t),o=new uD(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(e){const t=e.value,r=aD(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const o of Object.keys(t.children)){const l=t.children[o],g=UC(e,o),_=this.processSegmentGroup(g,l,o);if(null===_)return null;r.push(..._)}const i=ol(r);return i.sort((e,t)=>e.value.outlet===An?-1:t.value.outlet===An?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,r,i){for(const o of e){const l=this.processSegmentAgainstRoute(o,t,r,i);if(null!==l)return l}return GC(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!jC(e,t,r,i))return null;let o,l=[],g=[];if("**"===e.path){const B=r.length>0?Xy(r).parameters:{};o=new cx(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,TD(e),Tu(e),e.component,e,rA(t),iA(t)+r.length,Gf(e))}else{const B=vx(t,e,r);if(!B.matched)return null;l=B.consumedSegments,g=r.slice(B.lastChild),o=new cx(l,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,TD(e),Tu(e),e.component,e,rA(t),iA(t)+l.length,Gf(e))}const _=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:C,slicedSegments:D}=xg(t,l,g,_.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);var n;if(0===D.length&&C.hasChildren()){const B=this.processChildren(_,C);return null===B?null:[new jd(o,B)]}if(0===_.length&&0===D.length)return[new jd(o,[])];const O=Tu(e)===i,M=this.processSegment(_,C,D,O?An:i);return null===M?null:[new jd(o,M)]}}function nA(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ol(n){const e=[],t=new Set;for(const r of n){if(!nA(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=ol(r.children);e.push(new jd(r.value,i))}return e.filter(r=>!t.has(r))}function rA(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function iA(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function TD(n){return n.data||{}}function Gf(n){return n.resolve||{}}function qm(n){return p(e=>{const t=n(e);return t?(0,Cn.D)(t).pipe((0,jt.U)(()=>e)):(0,Ft.of)(e)})}class RD extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ig=new A.OlP("ROUTES");class aA{constructor(e,t,r,i){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,jt.U)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=o.create(e);return new Gm(wC(l.injector.get(Ig,void 0,A.XFs.Self|A.XFs.Optional)).map(Xs),l)}),tl(o=>{throw t._loader$=void 0,o}));return t._loader$=new $y.c(i,()=>new fi.xQ).pipe((0,XT.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Cn.D)(this.loader.load(e)):Gl(e()).pipe((0,Ur.zg)(t=>t instanceof A.YKP?(0,Ft.of)(t):(0,Cn.D)(this.compiler.compileModuleAsync(t))))}}class ND{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wf,this.attachRef=null}}class Wf{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new ND,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class uA{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function PD(n){throw n}function MD(n,e,t){return e.parse("/")}function zf(n,e){return(0,Ft.of)(null)}const FD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ki=(()=>{class n{constructor(t,r,i,o,l,g,_,C){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=C,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new fi.xQ,this.errorHandler=PD,this.malformedUriErrorHandler=MD,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:zf,afterPreactivation:zf},this.urlHandlingStrategy=new uA,this.routeReuseStrategy=new RD,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(A.h0i),this.console=l.get(A.c2e);const M=l.get(A.R0b);this.isNgZoneEnabled=M instanceof A.R0b&&A.R0b.isInAngularZone(),this.resetConfig(C),this.currentUrlTree=new Lf(new Bn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new aA(g,_,B=>this.triggerEvent(new mg(B)),B=>this.triggerEvent(new mC(B))),this.routerState=DC(this.currentUrlTree,this.rootComponentType),this.transitions=new Zs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(bi(i=>0!==i.id),(0,jt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),p(i=>{let o=!1,l=!1;return(0,Ft.of)(i).pipe((0,qa.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),p(g=>{const _=this.browserUrlTree.toString(),C=!this.navigated||g.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return bx(g.source)&&(this.browserUrlTree=g.extractedUrl),(0,Ft.of)(g).pipe(p(O=>{const M=this.transitions.getValue();return r.next(new pg(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),M!==this.transitions.getValue()?ge.E:Promise.resolve(O)}),function(n,e,t,r){return p(i=>function(n,e,t,r,i){return new yD(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,jt.U)(o=>Object.assign(Object.assign({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,qa.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function(n,e,t,r,i){return(0,Ur.zg)(o=>function(n,e,t,r,i="emptyOnly",o="legacy"){try{const l=new JC(n,e,t,r,i,o).recognize();return null===l?XC(new q8):(0,Ft.of)(l)}catch(l){return XC(l)}}(n,e,o.urlAfterRedirects,t(o.urlAfterRedirects),r,i).pipe((0,jt.U)(l=>Object.assign(Object.assign({},o),{targetSnapshot:l}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,qa.b)(O=>{"eager"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(O.urlAfterRedirects,O),this.browserUrlTree=O.urlAfterRedirects);const M=new hC(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next(M)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:B,source:G,restoredState:$,extras:ie}=g,ce=new pg(M,this.serializeUrl(B),G,$);r.next(ce);const fe=DC(B,this.rootComponentType).snapshot;return(0,Ft.of)(Object.assign(Object.assign({},g),{targetSnapshot:fe,urlAfterRedirects:B,extras:Object.assign(Object.assign({},ie),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,this.browserUrlTree=g.urlAfterRedirects,g.resolve(null),ge.E}),qm(g=>{const{targetSnapshot:_,id:C,extractedUrl:D,rawUrl:O,extras:{skipLocationChange:M,replaceUrl:B}}=g;return this.hooks.beforePreactivation(_,{navigationId:C,appliedUrlTree:D,rawUrlTree:O,skipLocationChange:!!M,replaceUrl:!!B})}),(0,qa.b)(g=>{const _=new Ff(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}),(0,jt.U)(g=>Object.assign(Object.assign({},g),{guards:KC(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Ur.zg)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:l}}=t;return 0===l.length&&0===o.length?(0,Ft.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Cn.D)(n).pipe((0,Ur.zg)(i=>function(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,Ft.of)(!0);const l=o.map(g=>{const _=$m(g,e,i);let C;if(function(n){return n&&rl(n.canDeactivate)}(_))C=Gl(_.canDeactivate(n,e,t,r));else{if(!rl(_))throw new Error("Invalid CanDeactivate guard");C=Gl(_(n,e,t,r))}return C.pipe(hi())});return(0,Ft.of)(l).pipe(mp())}(i.component,i.route,t,e,r)),hi(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Ur.zg)(g=>g&&function(n){return"boolean"==typeof n}(g)?function(n,e,t,r){return(0,Cn.D)(e).pipe(Lo(i=>Nm(function(n,e){return null!==n&&e&&e(new vC(n)),(0,Ft.of)(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new yC(n)),(0,Ft.of)(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(l=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>zy(()=>{const g=l.guards.map(_=>{const C=$m(_,l.node,t);let D;if(function(n){return n&&rl(n.canActivateChild)}(C))D=Gl(C.canActivateChild(r,n));else{if(!rl(C))throw new Error("Invalid CanActivateChild guard");D=Gl(C(r,n))}return D.pipe(hi())});return(0,Ft.of)(g).pipe(mp())}));return(0,Ft.of)(o).pipe(mp())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Ft.of)(!0);const i=r.map(o=>zy(()=>{const l=$m(o,e,t);let g;if(function(n){return n&&rl(n.canActivate)}(l))g=Gl(l.canActivate(e,n));else{if(!rl(l))throw new Error("Invalid CanActivate guard");g=Gl(l(e,n))}return g.pipe(hi())}));return(0,Ft.of)(i).pipe(mp())}(n,i.route,t))),hi(i=>!0!==i,!0))}(r,o,n,e):(0,Ft.of)(g)),(0,jt.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,qa.b)(g=>{if(Gd(g.guardsResult)){const C=Fm(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw C.url=g.guardsResult,C}const _=new pC(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(_)}),bi(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),qm(g=>{if(g.guards.canActivateChecks.length)return(0,Ft.of)(g).pipe((0,qa.b)(_=>{const C=new gC(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(C)}),p(_=>{let C=!1;return(0,Ft.of)(_).pipe(function(n,e){return(0,Ur.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Ft.of)(t);let o=0;return(0,Cn.D)(i).pipe(Lo(l=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return(0,Ft.of)({});const o={};return(0,Cn.D)(i).pipe((0,Ur.zg)(l=>function(n,e,t,r){const i=$m(n,e,r);return Gl(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,qa.b)(g=>{o[l]=g}))),hg(1),(0,Ur.zg)(()=>Object.keys(o).length===i.length?(0,Ft.of)(o):ge.E))}(n._resolve,n,e,r).pipe((0,jt.U)(o=>(n._resolvedData=o,n.data=Object.assign(Object.assign({},n.data),aD(n,t).resolve),null)))}(l.route,r,n,e)),(0,qa.b)(()=>o++),hg(1),(0,Ur.zg)(l=>o===i.length?(0,Ft.of)(t):ge.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,qa.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,qa.b)(_=>{const C=new JT(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(C)}))}),qm(g=>{const{targetSnapshot:_,id:C,extractedUrl:D,rawUrl:O,extras:{skipLocationChange:M,replaceUrl:B}}=g;return this.hooks.afterPreactivation(_,{navigationId:C,appliedUrlTree:D,rawUrlTree:O,skipLocationChange:!!M,replaceUrl:!!B})}),(0,jt.U)(g=>{const _=function(n,e,t){const r=lx(n,e._root,t?t._root:void 0);return new ax(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:_})}),(0,qa.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,jt.U)(r=>(new pp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,qa.b)({next(){o=!0},complete(){o=!0}}),function(n){return e=>e.lift(new lC(n))}(()=>{var g;if(!o&&!l){const _=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,_)):this.cancelNavigationTransition(i,_)}(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===i.id&&(this.currentNavigation=null)}),tl(g=>{if(l=!0,function(n){return n&&n[Mm]}(g)){const _=Gd(g.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const C=new dC(i.id,this.serializeUrl(i.extractedUrl),g.message);r.next(C),_?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),O={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||bx(i.source)};this.scheduleNavigation(D,"imperative",null,O,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new fC(i.id,this.serializeUrl(i.extractedUrl),g);r.next(_);try{i.resolve(this.errorHandler(g))}catch(C){i.reject(C)}}return ge.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:o,urlTree:l}=r,g={replaceUrl:!0};if(o){const _=Object.assign({},o);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(g.state=_)}this.scheduleNavigation(l,i,o,g)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const i=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!i||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){mx(t),this.config=t.map(Xs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:l,queryParamsHandling:g,preserveFragment:_}=r,C=i||this.routerState.root,D=_?this.currentUrlTree.fragment:l;let O=null;switch(g){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=o||null}return null!==O&&(O=this.removeEmptyProps(O)),function(n,e,t,r,i){if(0===t.length)return _g(e.root,e.root,e,r,i);const o=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new zl(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const g={};return yo(o.outlets,(_,C)=>{g[C]="string"==typeof _?_.split("/"):_}),[...i,{outlets:g}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===l?(o.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&i.push(g))}),i):[...i,o]},[]);return new zl(t,e,r)}(t);if(o.toRoot())return _g(e.root,new Bn([],{}),e,r,i);const l=function(n,e,t){if(n.isAbsolute)return new fx(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const o=t.snapshot._urlSegment;return new fx(o,o===e.root,0)}const r=dp(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new fx(r,!1,i-o)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(o,e,n),g=l.processChildren?Hm(l.segmentGroup,l.index,o.commands):px(l.segmentGroup,l.index,o.commands);return _g(l.segmentGroup,g,e,r,i)}(C,this.currentUrlTree,t,O,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Gd(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},FD):!1===r?Object.assign({},kD):r,Gd(t))return AC(this.currentUrlTree,t,i);const o=this.parseUrl(t);return AC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new gg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,l){var g,_;if(this.disposed)return Promise.resolve(!1);const C=this.getTransition(),D=bx(r)&&C&&!bx(C.source),B=(this.lastSuccessfulId===C.id||this.currentNavigation?C.rawUrl:C.urlAfterRedirects).toString()===t.toString();if(D&&B)return Promise.resolve(!0);let G,$,ie;l?(G=l.resolve,$=l.reject,ie=l.promise):ie=new Promise((Ae,De)=>{G=Ae,$=De});const ce=++this.navigationId;let fe;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),fe=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):fe=0,this.setTransition({id:ce,targetPageId:fe,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:G,reject:$,promise:ie,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ie.catch(Ae=>Promise.reject(Ae))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new dC(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(A.DyG),A.LFG(an),A.LFG(Wf),A.LFG(lt),A.LFG(A.zs3),A.LFG(A.v3s),A.LFG(A.Sil),A.LFG(void 0))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();function bx(n){return"imperative"!==n}let Sx=(()=>{class n{constructor(t,r,i,o,l){this.router=t,this.route=r,this.commands=[],this.onChanges=new fi.xQ,null==i&&o.setAttribute(l.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:yr(this.skipLocationChange),replaceUrl:yr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:yr(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(Ki),A.Y36(lp),A.$8M("tabindex"),A.Y36(A.Qsj),A.Y36(A.SBq))},n.\u0275dir=A.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&A.NdJ("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[A.TTD]}),n})(),bg=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=[],this.onChanges=new fi.xQ,this.subscription=t.events.subscribe(o=>{o instanceof gg&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,o,l){if(0!==t||r||i||o||l||"string"==typeof this.target&&"_self"!=this.target)return!0;const g={skipLocationChange:yr(this.skipLocationChange),replaceUrl:yr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,g),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:yr(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(Ki),A.Y36(lp),A.Y36(Be))},n.\u0275dir=A.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&A.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&(A.Ikx("href",r.href,A.LSH),A.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[A.TTD]}),n})();function yr(n){return""===n||!!n}let Zm=(()=>{class n{constructor(t,r,i,o,l,g){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=l,this.linkWithHref=g,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(_=>{_ instanceof gg&&this.update()})}ngAfterContentInit(){(0,Ft.of)(this.links.changes,this.linksWithHrefs.changes,(0,Ft.of)(null)).pipe((0,dg.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,Cn.D)(r).pipe((0,dg.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}))})}isLinkActive(t){const r=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(Ki),A.Y36(A.SBq),A.Y36(A.Qsj),A.Y36(A.sBO),A.Y36(Sx,8),A.Y36(bg,8))},n.\u0275dir=A.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(A.Suo(i,Sx,5),A.Suo(i,bg,5)),2&t){let o;A.iGM(o=A.CRH())&&(r.links=o),A.iGM(o=A.CRH())&&(r.linksWithHrefs=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[A.TTD]}),n})(),_c=(()=>{class n{constructor(t,r,i,o,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new A.vpe,this.deactivateEvents=new A.vpe,this.name=o||An,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,_=new Tx(t,g,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(Wf),A.Y36(A.s_b),A.Y36(A._Vd),A.$8M("name"),A.Y36(A.sBO))},n.\u0275dir=A.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class Tx{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===lp?this.route:e===Wf?this.childContexts:this.parent.get(e,t)}}class Km{}class cA{preload(e,t){return(0,Ft.of)(null)}}let lA=(()=>{class n{constructor(t,r,i,o,l){this.router=t,this.injector=o,this.preloadingStrategy=l,this.loader=new aA(r,i,C=>t.triggerEvent(new mg(C)),C=>t.triggerEvent(new mC(C)))}setUpPreloading(){this.subscription=this.router.events.pipe(bi(t=>t instanceof gg),Lo(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(A.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const l=o._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(t,o)):o.children&&i.push(this.processRoutes(t,o.children));return(0,Cn.D)(i).pipe((0,dg.J)(),(0,jt.U)(o=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,Ft.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Ur.zg)(o=>(r._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(Ki),A.LFG(A.v3s),A.LFG(A.Sil),A.LFG(A.zs3),A.LFG(Km))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})(),Ym=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof pg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ky&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ky(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(Ki),A.LFG(ka),A.LFG(void 0))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();const zd=new A.OlP("ROUTER_CONFIGURATION"),Dx=new A.OlP("ROUTER_FORROOT_GUARD"),UD=[lt,{provide:an,useClass:ex},{provide:Ki,useFactory:function(n,e,t,r,i,o,l,g={},_,C){const D=new Ki(null,n,e,t,r,i,o,wC(l));return _&&(D.urlHandlingStrategy=_),C&&(D.routeReuseStrategy=C),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(g,D),g.enableTracing&&D.events.subscribe(O=>{var M,B;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${O.constructor.name}`),console.log(O.toString()),console.log(O),null===(B=console.groupEnd)||void 0===B||B.call(console)}),D},deps:[an,Wf,lt,A.zs3,A.v3s,A.Sil,Ig,zd,[class{},new A.FiY],[class{},new A.FiY]]},Wf,{provide:lp,useFactory:function(n){return n.routerState.root},deps:[Ki]},{provide:A.v3s,useClass:A.EAV},lA,cA,class{preload(e,t){return t().pipe(tl(()=>(0,Ft.of)(null)))}},{provide:zd,useValue:{enableTracing:!1}}];function Sg(){return new A.PXZ("Router",Ki)}let Xm=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[UD,Ox(t),{provide:Dx,useFactory:hA,deps:[[Ki,new A.FiY,new A.tp0]]},{provide:zd,useValue:r||{}},{provide:Be,useFactory:fA,deps:[xe,[new A.tBr(Ve),new A.FiY],zd]},{provide:Ym,useFactory:dA,deps:[Ki,ka,zd]},{provide:Km,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:cA},{provide:A.PXZ,multi:!0,useFactory:Sg},[Rx,{provide:A.ip1,multi:!0,useFactory:pA,deps:[Rx]},{provide:Nx,useFactory:Y8,deps:[Rx]},{provide:A.tb,multi:!0,useExisting:Nx}]]}}static forChild(t){return{ngModule:n,providers:[Ox(t)]}}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(Dx,8),A.LFG(Ki,8))},n.\u0275mod=A.oAB({type:n}),n.\u0275inj=A.cJS({}),n})();function dA(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ym(n,e,t)}function fA(n,e,t={}){return t.useHash?new Xe(n,e):new ze(n,e)}function hA(n){return"guarded"}function Ox(n){return[{provide:A.deG,multi:!0,useValue:n},{provide:Ig,multi:!0,useValue:n}]}let Rx=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new fi.xQ}appInitializer(){return this.injector.get(q,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(g=>r=g),o=this.injector.get(Ki),l=this.injector.get(zd);return"disabled"===l.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?(0,Ft.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(zd),i=this.injector.get(lA),o=this.injector.get(Ym),l=this.injector.get(Ki),g=this.injector.get(A.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),o.init(),l.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(A.zs3))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();function pA(n){return n.appInitializer.bind(n)}function Y8(n){return n.bootstrapListener.bind(n)}const Nx=new A.OlP("Router Initializer");function Q8(n,e){1&n&&(A.TgZ(0,"li",3),A.TgZ(1,"a",9),A._uU(2,"Cr\xe9er un compte"),A.qZA(),A.qZA())}function J8(n,e){1&n&&(A.TgZ(0,"li",3),A.TgZ(1,"a",10),A._uU(2,"Connexion"),A.qZA(),A.qZA())}function Px(n,e){if(1&n&&(A.TgZ(0,"li"),A._uU(1),A.qZA()),2&n){const t=A.oxw();A.xp6(1),A.hij(" ",t.getUserAuthEmail()," ")}}function zD(n,e){if(1&n){const t=A.EpF();A.TgZ(0,"a",11),A.NdJ("click",function(){return A.CHM(t),A.oxw().onSignOut()}),A._uU(1,"D\xe9connexion"),A.qZA()}}let gA=(()=>{class n{constructor(t,r){this.authService=t,this.angularFireAuth=r,this.isAuth=!1}ngOnInit(){this.angularFireAuth.onAuthStateChanged(t=>{this.isAuth=!!t})}onSignOut(){this.authService.signOutUser()}getUserAuthEmail(){return this.authService.userAuthEmail}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(Ud),A.Y36(gc))},n.\u0275cmp=A.Xpm({type:n,selectors:[["app-header"]],decls:12,vars:4,consts:[[1,"navbar","navbar-default"],[1,"container-fluid"],[1,"nav","navbar-nav"],["routerLinkActive","active"],["routerLink","books"],[1,"nav","navbar-nav","navbar-right"],["routerLinkActive","active",4,"ngIf"],[4,"ngIf"],["style","cursor:pointer",3,"click",4,"ngIf"],["routerLink","auth/signup"],["routerLink","auth/signin"],[2,"cursor","pointer",3,"click"]],template:function(t,r){1&t&&(A.TgZ(0,"nav",0),A.TgZ(1,"div",1),A.TgZ(2,"ul",2),A.TgZ(3,"li",3),A.TgZ(4,"a",4),A._uU(5,"Livres"),A.qZA(),A.qZA(),A.qZA(),A.TgZ(6,"ul",5),A.YNc(7,Q8,3,0,"li",6),A.YNc(8,J8,3,0,"li",6),A.YNc(9,Px,2,1,"li",7),A.TgZ(10,"li"),A.YNc(11,zD,2,0,"a",8),A.qZA(),A.qZA(),A.qZA(),A.qZA()),2&t&&(A.xp6(7),A.Q6J("ngIf",!r.isAuth),A.xp6(1),A.Q6J("ngIf",!r.isAuth),A.xp6(1),A.Q6J("ngIf",r.isAuth),A.xp6(2),A.Q6J("ngIf",r.isAuth))},directives:[Zm,bg,da],encapsulation:2}),n})(),mA=(()=>{class n{constructor(){this.title="(version Alpha) Gestion de collection de livre"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=A.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(A._UZ(0,"app-header"),A.TgZ(1,"div",0),A._UZ(2,"router-outlet"),A.qZA())},directives:[gA,_c],styles:['@charset "UTF-8";[_nghost-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:14px;color:#333;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:8px 0}p[_ngcontent-%COMP%]{margin:0}.spacer[_ngcontent-%COMP%]{flex:1}.toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:60px;display:flex;align-items:center;background-color:#1976d2;color:#fff;font-weight:600}.toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]{height:40px;margin:0 8px}.toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]{height:40px;margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover{opacity:.8}.content[_ngcontent-%COMP%]{display:flex;margin:82px auto 32px;padding:0 16px;max-width:960px;flex-direction:column;align-items:center}svg.material-icons[_ngcontent-%COMP%]{height:24px;width:auto}svg.material-icons[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}.card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#888}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:16px}.card[_ngcontent-%COMP%]{all:unset;border-radius:4px;border:1px solid #eee;background-color:#fafafa;height:40px;width:200px;margin:0 8px 16px;padding:16px;display:flex;flex-direction:row;justify-content:center;align-items:center;transition:all .2s ease-in-out;line-height:24px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child){margin-right:0}.card.card-small[_ngcontent-%COMP%]{height:16px;width:168px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card){cursor:pointer}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover{transform:translateY(-3px);box-shadow:0 4px 17px #00000059}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#696767}.card.highlight-card[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;font-weight:600;border:none;width:auto;min-width:30%;position:relative}.card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:60px}svg#rocket[_ngcontent-%COMP%]{width:80px;position:absolute;left:-10px;top:-24px}svg#rocket-smoke[_ngcontent-%COMP%]{height:calc(100vh - 95px);position:absolute;top:10px;right:180px;z-index:-10}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#125699}.terminal[_ngcontent-%COMP%]{position:relative;width:80%;max-width:600px;border-radius:6px;padding-top:45px;margin-top:8px;overflow:hidden;background-color:#0f0f10}.terminal[_ngcontent-%COMP%]:before{content:"\\2022\\2022\\2022";position:absolute;top:0;left:0;height:4px;background:#3a3a3a;color:#c2c3c4;width:100%;font-size:2rem;line-height:0;padding:14px 0;text-indent:4px}.terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;color:#fff;padding:0 1rem 1rem;margin:0}.circle-link[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:40px;margin:8px;background-color:#fff;border:1px solid #eeeeee;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:1s ease-out}.circle-link[_ngcontent-%COMP%]:hover{transform:translateY(-.25rem);box-shadow:0 3px 15px #0003}footer[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:center;line-height:20px}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center}.github-star-badge[_ngcontent-%COMP%]{color:#24292e;display:flex;align-items:center;font-size:12px;padding:3px 10px;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-image:linear-gradient(-180deg,#fafbfc,#eff3f6 90%);margin-left:4px;font-weight:600}.github-star-badge[_ngcontent-%COMP%]:hover{background-image:linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);border-color:#1b1f2359;background-position:-.5em}.github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{height:16px;width:16px;margin-right:4px}svg#clouds[_ngcontent-%COMP%]{position:fixed;bottom:-160px;left:-230px;z-index:-10;width:1920px}@media screen and (max-width: 767px){.card-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]:not(.highlight-card){height:16px;margin:8px 0}.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:72px}svg#rocket-smoke[_ngcontent-%COMP%]{right:120px;transform:rotate(-5deg)}}@media screen and (max-width: 575px){svg#rocket-smoke[_ngcontent-%COMP%]{display:none;visibility:hidden}}']}),n})();var eM=J(1555);function Mx(n,e){return new Qn.y(t=>{const r=n.length;if(0===r)return void t.complete();const i=new Array(r);let o=0,l=0;for(let g=0;g<r;g++){const _=(0,Cn.D)(n[g]);let C=!1;t.add(_.subscribe({next:D=>{C||(C=!0,l++),i[g]=D},error:D=>t.error(D),complete:()=>{o++,(o===r||!C)&&(l===r&&t.next(e?e.reduce((D,O,M)=>(D[O]=i[M],D),{}):i),t.complete())}}))}})}let $D=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(A.Qsj),A.Y36(A.SBq))},n.\u0275dir=A.lG2({type:n}),n})(),yp=(()=>{class n extends $D{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=A.n5z(n)))(r||n)}}(),n.\u0275dir=A.lG2({type:n,features:[A.qOj]}),n})();const xc=new A.OlP("NgValueAccessor"),qD={provide:xc,useExisting:(0,A.Gpc)(()=>$d),multi:!0},_A=new A.OlP("CompositionEventMode");let $d=(()=>{class n extends $D{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=te()?te().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(A.Qsj),A.Y36(A.SBq),A.Y36(_A,8))},n.\u0275dir=A.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&A.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[A._Bn([qD]),A.qOj]}),n})();function qd(n){return null==n||0===n.length}function Qm(n){return null!=n&&"number"==typeof n.length}const ss=new A.OlP("NgValidators"),Zd=new A.OlP("NgAsyncValidators"),ZD=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class wc{static min(e){return n=e,e=>{if(qd(e.value)||qd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null};var n}static max(e){return n=e,e=>{if(qd(e.value)||qd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null};var n}static required(e){return qd(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return qd((n=e).value)||ZD.test(n.value)?null:{email:!0};var n}static minLength(e){return n=e,e=>qd(e.value)||!Qm(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null;var n}static maxLength(e){return n=e,e=>Qm(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null;var n}static pattern(e){return function(n){if(!n)return Kd;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(qd(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Za(e)}static composeAsync(e){return Zf(e)}}function Kd(n){return null}function Jm(n){return null!=n}function Ec(n){const e=(0,A.QGY)(n)?(0,Cn.D)(n):n;return(0,A.CqO)(e),e}function wp(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ho(n,e){return e.map(t=>t(n))}function Dg(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function Za(n){if(!n)return null;const e=n.filter(Jm);return 0==e.length?null:function(t){return wp(Ho(t,e))}}function Og(n){return null!=n?Za(Dg(n)):null}function Zf(n){if(!n)return null;const e=n.filter(Jm);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Iu.k)(e))return Mx(e,null);if((0,eM.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Mx(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Mx(n=1===n.length&&(0,Iu.k)(n[0])?n[0]:n,null).pipe((0,jt.U)(t=>e(...t)))}return Mx(n,null)}(Ho(t,e).map(Ec)).pipe((0,jt.U)(wp))}}function Yd(n){return null!=n?Zf(Dg(n)):null}function Kf(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Yf(n){return n._rawValidators}function Xf(n){return n._rawAsyncValidators}function Xd(n){return n?Array.isArray(n)?n:[n]:[]}function $l(n,e){return Array.isArray(n)?n.includes(e):n===e}function Qf(n,e){const t=Xd(e);return Xd(n).forEach(i=>{$l(t,i)||t.push(i)}),t}function Jf(n,e){return Xd(e).filter(t=>!$l(n,t))}let Lx=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Og(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Yd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=A.lG2({type:n}),n})(),as=(()=>{class n extends Lx{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=A.n5z(n)))(r||n)}}(),n.\u0275dir=A.lG2({type:n,features:[A.qOj]}),n})();class ql extends Lx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Bx{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let Rg=(()=>{class n extends Bx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(ql,2))},n.\u0275dir=A.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&A.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[A.qOj]}),n})(),Ng=(()=>{class n extends Bx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(as,10))},n.\u0275dir=A.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&A.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[A.qOj]}),n})();function Pg(n,e){IA(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&t3(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&t3(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ux(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Hx(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function rv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function IA(n,e){const t=Yf(n);null!==e.validator?n.setValidators(Kf(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Xf(n);null!==e.asyncValidator?n.setAsyncValidators(Kf(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();rv(e._rawValidators,i),rv(e._rawAsyncValidators,i)}function Hx(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Yf(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(l=>l!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=Xf(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(l=>l!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return rv(e._rawValidators,r),rv(e._rawAsyncValidators,r),t}function t3(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Mg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Fg="VALID",Zl="INVALID",Ep="PENDING",Cp="DISABLED";function iv(n){return($x(n)?n.validators:n)||null}function kg(n){return Array.isArray(n)?Og(n):n||null}function Wx(n,e){return($x(e)?e.asyncValidators:n)||null}function zx(n){return Array.isArray(n)?Yd(n):n||null}function $x(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class qx{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=kg(this._rawValidators),this._composedAsyncValidatorFn=zx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Fg}get invalid(){return this.status===Zl}get pending(){return this.status==Ep}get disabled(){return this.status===Cp}get enabled(){return this.status!==Cp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=kg(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=zx(e)}addValidators(e){this.setValidators(Qf(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Qf(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Jf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Jf(e,this._rawAsyncValidators))}hasValidator(e){return $l(this._rawValidators,e)}hasAsyncValidator(e){return $l(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ep,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Cp,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Fg,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fg||this.status===Ep)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cp:Fg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ep,this._hasOwnPendingAsyncValidator=!0;const t=Ec(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof Lg?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof Zx&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new A.vpe,this.statusChanges=new A.vpe}_calculateStatus(){return this._allControlsDisabled()?Cp:this.errors?Zl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ep)?Ep:this._anyControlsHaveStatus(Zl)?Zl:Fg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$x(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ap extends qx{constructor(e=null,t,r){super(iv(t),Wx(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Mg(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Mg(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Lg extends qx{constructor(e,t,r){super(iv(t),Wx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Ap?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class Zx extends qx{constructor(e,t,r){super(iv(t),Wx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Ap?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let bp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=A.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Yx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=A.oAB({type:n}),n.\u0275inj=A.cJS({}),n})();const Vg=new A.OlP("NgModelWithFormControlWarning"),l3={provide:as,useExisting:(0,A.Gpc)(()=>eh)};let eh=(()=>{class n extends as{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new A.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Hx(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Pg(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ux(t.control||null,t,!1),Mg(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Ux(r||null,t),i instanceof Ap&&(Pg(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function(n,e){IA(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return Hx(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){IA(this.form,this),this._oldForm&&Hx(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(ss,10),A.Y36(Zd,10))},n.\u0275dir=A.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&A.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[A._Bn([l3]),A.qOj,A.TTD]}),n})();const d3={provide:ql,useExisting:(0,A.Gpc)(()=>th)};let th=(()=>{class n extends ql{constructor(t,r,i,o,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new A.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===$d?t=o:function(n){return Object.getPrototypeOf(n.constructor)===yp}(o)?r=o:i=o}),i||r||t||null}(0,o)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(as,13),A.Y36(ss,10),A.Y36(Zd,10),A.Y36(xc,10),A.Y36(Vg,8))},n.\u0275dir=A.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[A._Bn([d3]),A.qOj,A.TTD]}),n._ngModelWarningSentOnce=!1,n})(),eI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=A.oAB({type:n}),n.\u0275inj=A.cJS({imports:[[Yx]]}),n})(),tI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=A.oAB({type:n}),n.\u0275inj=A.cJS({imports:[eI]}),n})(),Cc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Vg,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=A.oAB({type:n}),n.\u0275inj=A.cJS({imports:[eI]}),n})(),Ka=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let g,o=null,l=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(o=null!=r.validators?r.validators:null,l=null!=r.asyncValidators?r.asyncValidators:null,g=null!=r.updateOn?r.updateOn:void 0):(o=null!=r.validator?r.validator:null,l=null!=r.asyncValidator?r.asyncValidator:null)),new Lg(i,{asyncValidators:l,updateOn:g,validators:o})}control(t,r,i){return new Ap(t,r,i)}array(t,r,i){const o=t.map(l=>this._createControl(l));return new Zx(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Ap||t instanceof Lg||t instanceof Zx?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,A.Yz7)({factory:function(){return new n},token:n,providedIn:Cc}),n})();var cw=J(3637),y3=J(8819);function nI(n,e){return t=>t.lift(new x3(n,e))}class x3{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new w3(e,this.compare,this.keySelector))}}class w3 extends Ii.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:i}=this;t=i?i(e):e}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}class Hg{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new E3(e,this.observables,this.project))}}class E3 extends Aa{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const i=t.length;this.values=new Array(i);for(let o=0;o<i;o++)this.toRespond.push(o);for(let o=0;o<i;o++)this.add(ip(this,t[o],void 0,o))}notifyNext(e,t,r){this.values[r]=t;const i=this.toRespond;if(i.length>0){const o=i.indexOf(r);-1!==o&&i.splice(o,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class C3{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new iI(e,this.predicate))}}class iI extends Ii.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}J(4671);var jg=J(4486);const oI="@firebase/database";let cv="";function lv(n){cv=n}class dv{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,Q.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,Q.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class sI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,Q.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const fw=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new dv(e)}}catch(e){}return new sI},Qd=fw("localStorage"),fv=fw("sessionStorage"),rh=new vo.Yd("@firebase/database"),hw=function(){let n=1;return function(){return n++}}(),pw=function(n){const e=(0,Q.dS)(n),t=new Q.gQ;t.update(e);const r=t.digest();return Q.US.encodeByteArray(r)},Sp=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Sp.apply(null,r):e+="object"==typeof r?(0,Q.Pz)(r):r,e+=" "}return e};let ih=null,aI=!0;const uI=function(n,e){(0,Q.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(rh.logLevel=vo.in.VERBOSE,ih=rh.log.bind(rh),e&&fv.set("logging_enabled",!0)):"function"==typeof n?ih=n:(ih=null,fv.remove("logging_enabled"))},xo=function(...n){if(!0===aI&&(aI=!1,null===ih&&!0===fv.get("logging_enabled")&&uI(!0)),ih){const e=Sp.apply(null,n);ih(e)}},Gg=function(n){return function(...e){xo(n,...e)}},gw=function(...n){const e="FIREBASE INTERNAL ERROR: "+Sp(...n);rh.error(e)},sl=function(...n){const e=`FIREBASE FATAL ERROR: ${Sp(...n)}`;throw rh.error(e),new Error(e)},Qs=function(...n){const e="FIREBASE WARNING: "+Sp(...n);rh.warn(e)},hv=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Yl="[MIN_NAME]",al="[MAX_NAME]",oh=function(n,e){if(n===e)return 0;if(n===Yl||e===al)return-1;if(e===Yl||n===al)return 1;{const t=zg(n),r=zg(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},S3=function(n,e){return n===e?0:n<e?-1:1},Wg=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,Q.Pz)(e))},mw=function(n){if("object"!=typeof n||null===n)return(0,Q.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,Q.Pz)(e[r]),t+=":",t+=mw(n[e[r]]);return t+="}",t},cI=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function lo(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const vw=function(n){(0,Q.hu)(!hv(n),"Invalid JSON number");const r=1023;let i,o,l,g,_;0===n?(o=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(g=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=g+r,l=Math.round(n*Math.pow(2,52-g)-Math.pow(2,52))):(o=0,l=Math.round(n/Math.pow(2,-1074))));const C=[];for(_=52;_;_-=1)C.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)C.push(o%2?1:0),o=Math.floor(o/2);C.push(i?1:0),C.reverse();const D=C.join("");let O="";for(_=0;_<64;_+=8){let M=parseInt(D.substr(_,8),2).toString(16);1===M.length&&(M="0"+M),O+=M}return O.toLowerCase()},hI=new RegExp("^-?(0*)\\d{1,10}$"),_w=-2147483648,pv=2147483647,zg=function(n){if(hI.test(n)){const e=Number(n);if(e>=_w&&e<=pv)return e}return null},Jd=function(n){try{n()}catch(e){setTimeout(()=>{throw Qs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Ic=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class T3{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Qs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class D3{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(xo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qs(e)}}let ul=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const R3=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gI="websocket",$g="long_polling";class Cw{constructor(e,t,r,i,o=!1,l="",g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Qd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qg(n,e,t){let r;if((0,Q.hu)("string"==typeof e,"typeof type must == string"),(0,Q.hu)("object"==typeof t,"typeof params must == object"),e===gI)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==$g)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return lo(t,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}class Ti{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,Q.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,Q.p$)(this.counters_)}}const mI={},vv={};function Zg(n){const e=n.toString();return mI[e]||(mI[e]=new Ti),mI[e]}class vI{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Jd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Dp{constructor(e,t,r,i,o,l,g){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=g,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gg(e),this.stats_=Zg(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),qg(t,$g,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new vI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,Q.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Sw((...o)=>{const[l,g,_,C,D]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=g,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);g?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(g,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[l,g]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,g)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&R3.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Dp.forceAllow_=!0}static forceDisallow(){Dp.forceDisallow_=!0}static isAvailable(){return!((0,Q.Yr)()||!Dp.forceAllow_&&(Dp.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,Q.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,Q.h$)(t),i=cI(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,Q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,Q.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Sw{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Q.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=hw(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Sw.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(g){xo("frame writing exception"),g.stack&&xo(g.stack),xo(g)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||xo("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,Q.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{xo("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Op=null;"undefined"!=typeof MozWebSocket?Op=MozWebSocket:"undefined"!=typeof WebSocket&&(Op=WebSocket);let Rp=(()=>{class n{constructor(t,r,i,o,l,g,_){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gg(this.connId),this.stats_=Zg(r),this.connURL=n.connectionURL_(r,g,_,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o){const l={v:"5"};return!(0,Q.Yr)()&&"undefined"!=typeof location&&location.hostname&&R3.test(location.hostname)&&(l.r="f"),r&&(l.s=r),i&&(l.ls=i),o&&(l.ac=o),qg(t,gI,l)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qd.set("previous_websocket_failure",!0);try{if((0,Q.Yr)()){const o={headers:{"User-Agent":`Firebase/5/${cv}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(o.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(o.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,g=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;g&&(o.proxy={origin:g}),this.mySock=new Op(this.connURL,[],o)}else this.mySock=new Op(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Op&&!n.forceDisallow_}static previouslyFailed(){return Qd.isInMemoryStorage||!0===Qd.get("previous_websocket_failure")}markConnectionHealthy(){Qd.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,Q.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,Q.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,Q.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=cI(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class Tw{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Dp,Rp]}initTransports_(e){const t=Rp&&Rp.isAvailable();let r=t&&!Rp.previouslyFailed();if(e.webSocketOnly&&(t||Qs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Rp];else{const i=this.transports_=[];for(const o of Tw.ALL_TRANSPORTS)o&&o.isAvailable()&&i.push(o)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class TI{constructor(e,t,r,i,o,l,g,_,C,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=g,this.onDisconnect_=_,this.onKill_=C,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gg("c:"+this.id+":"),this.transportManager_=new Tw(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ic(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Wg("t",e),r=Wg("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Wg("t",e),r=Wg("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Wg("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?gw("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gw("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Qs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ic(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ic(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class DI{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class OI{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,Q.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,Q.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class xv extends OI{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new xv}getInitialEvent(e){return(0,Q.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class gr{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Pn(){return new gr("")}function bn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Xl(n){return n.pieces_.length-n.pieceNum_}function Nr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new gr(n.pieces_,e)}function wv(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Pp(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function NI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new gr(e,0)}function Gr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof gr)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new gr(t,0)}function Sn(n){return n.pieceNum_>=n.pieces_.length}function us(n,e){const t=bn(n),r=bn(e);if(null===t)return e;if(t===r)return us(Nr(n),Nr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function PI(n,e){const t=Pp(n,0),r=Pp(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=oh(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function Nw(n,e){if(Xl(n)!==Xl(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ou(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Xl(n)>Xl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class z3{constructor(e,t){this.errorPrefix_=t,this.parts_=Pp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Q.ug)(this.parts_[r]);Mw(this)}}function Mw(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+sh(n))}function sh(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Fw extends OI{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Fw}getInitialEvent(e){return(0,Q.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Xg=1e3;let Ev,ah=(()=>{class n extends DI{constructor(t,r,i,o,l,g,_,C){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=g,this.appCheckTokenProvider_=_,this.authOverride_=C,this.id=n.nextPersistentConnectionId_++,this.log_=Gg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xg,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C&&!(0,Q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Fw.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&xv.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,l={r:o,a:t,b:r};this.log_((0,Q.Pz)(l)),(0,Q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new Q.BH,i={p:t._path.toString(),q:t._queryObject},o={action:"g",request:i,onComplete:g=>{const _=g.d;"ok"===g.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const g=this.outstandingGets_[l];void 0===g||o!==g||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,o){this.initConnection_();const l=t._queryIdentifier,g=t._path.toString();this.log_("Listen called for "+g+" "+l),this.listens.has(g)||this.listens.set(g,new Map),(0,Q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Q.hu)(!this.listens.get(g).has(l),"listen() called twice for same path/queryId.");const _={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(g).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const C=_.d,D=_.s;n.warnOnListenWarnings_(C,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",_),"ok"!==D&&this.removeListen_(i,o),t.onComplete&&t.onComplete(D,C))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,Q.r3)(t,"w")){const i=(0,Q.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Qs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,Q.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,Q.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const l=o.s,g=o.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,g))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,Q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const l={p:t};o&&(l.q=i,l.t=o),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,g=>{o&&setTimeout(()=>{o(g.s,g.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,l){this.initConnection_();const g={p:r,d:i};void 0!==l&&(g.h=l),this.outstandingPuts_.push({action:t,request:g,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,Q.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):gw("Unrecognized action received from server: "+(0,Q.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,Q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xg,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Xg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xg),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ke.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,g=t.lastSessionId;let _=!1,C=null;const D=function(){C?C.close():(_=!0,o())};t.realtime_={close:D,sendRequest:function(B){(0,Q.hu)(C,"sendRequest call when we're not connected not allowed."),C.sendRequest(B)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,G]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);_?xo("getToken() completed but was canceled"):(xo("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=G&&G.token,C=new TI(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,$=>{Qs($+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},g))}catch(B){t.log_("Failed to get token: "+B),_||(t.repoInfo_.nodeAdmin&&Qs(B),D())}}})()}interrupt(t){xo("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){xo("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,Q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Xg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>mw(l)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new gr(t).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){xo("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){xo("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,Q.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+cv.replace(/\./g,"-")]=1,(0,Q.uI)()?t["framework.cordova"]=1:(0,Q.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=xv.getInstance().currentlyOnline();return(0,Q.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Dn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Dn(e,t)}}class Qg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Dn(Yl,e),i=new Dn(Yl,t);return 0!==this.compare(r,i)}minPost(){return Dn.MIN}}class kI extends Qg{static get __EMPTY_NODE(){return Ev}static set __EMPTY_NODE(e){Ev=e}compare(e,t){return oh(e.name,t.name)}isDefinedOn(e){throw(0,Q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Dn.MIN}maxPost(){return new Dn(al,Ev)}makePost(e,t){return(0,Q.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Dn(e,Ev)}toString(){return".key"}}const cl=new kI;class Mp{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Jg,Ya=(()=>{class n{constructor(t,r,i,o,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=o?o:cs.EMPTY_NODE,this.right=null!=l?l:cs.EMPTY_NODE}copy(t,r,i,o,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=o?o:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const l=i(t,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===l?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return cs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return cs.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class cs{constructor(e,t=cs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new cs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ya.BLACK,null,null))}remove(e){return new cs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ya.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Mp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Mp(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Mp(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Mp(this.root_,null,this.comparator_,!0,e)}}function X3(n,e){return oh(n.name,e.name)}function Lw(n,e){return oh(n,e)}cs.EMPTY_NODE=new class{copy(e,t,r,i,o){return this}insert(e,t,r){return new Ya(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Bw=function(n){return"number"==typeof n?"number:"+vw(n):"string:"+n},BI=function(n){if(n.isLeafNode()){const e=n.val();(0,Q.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,Q.r3)(e,".sv"),"Priority must be a string or number.")}else(0,Q.hu)(n===Jg||n.isEmpty(),"priority of unexpected type.");(0,Q.hu)(n===Jg||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Vw,Uw,J3,uh=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,Q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),BI(this.priorityNode_)}static set __childrenNodeConstructor(t){Vw=t}static get __childrenNodeConstructor(){return Vw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Sn(t)?this:".priority"===bn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=bn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,Q.hu)(".priority"!==i||1===Xl(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Nr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Bw(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?vw(this.value_):this.value_,this.lazyHash_=pw(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,Q.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,Q.hu)(o>=0,"Unknown leaf type: "+r),(0,Q.hu)(l>=0,"Unknown leaf type: "+i),o===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Sr=new class extends Qg{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?oh(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Dn.MIN}maxPost(){return new Dn(al,new uh("[PRIORITY-POST]",J3))}makePost(e,t){const r=Uw(e);return new Dn(t,new uh("[PRIORITY-POST]",r))}toString(){return".priority"}},Cv=Math.log(2);class tO{constructor(e){this.count=parseInt(Math.log(e+1)/Cv,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ql=function(n,e,t,r){n.sort(e);const i=function(_,C){const D=C-_;let O,M;if(0===D)return null;if(1===D)return O=n[_],M=t?t(O):O,new Ya(M,O.node,Ya.BLACK,null,null);{const B=parseInt(D/2,10)+_,G=i(_,B),$=i(B+1,C);return O=n[B],M=t?t(O):O,new Ya(M,O.node,Ya.BLACK,G,$)}},g=function(_){let C=null,D=null,O=n.length;const M=function(G,$){const ie=O-G,ce=O;O-=G;const fe=i(ie+1,ce),Ae=n[ie],De=t?t(Ae):Ae;B(new Ya(De,Ae.node,$,null,fe))},B=function(G){C?(C.left=G,C=G):(D=G,C=G)};for(let G=0;G<_.count;++G){const $=_.nextBitIsOne(),ie=Math.pow(2,_.count-(G+1));$?M(ie,Ya.BLACK):(M(ie,Ya.BLACK),M(ie,Ya.RED))}return D}(new tO(n.length));return new cs(r||e,g)};let Hw;const e1={};class Jl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,Q.hu)(e1&&Sr,"ChildrenNode.ts has not been loaded"),Hw=Hw||new Jl({".priority":e1},{".priority":Sr}),Hw}get(e){const t=(0,Q.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof cs?t:null}hasIndex(e){return(0,Q.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,Q.hu)(e!==cl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(Dn.Wrap);let g,l=o.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=o.getNext();g=i?Ql(r,e.getCompare()):e1;const _=e.toString(),C=Object.assign({},this.indexSet_);C[_]=e;const D=Object.assign({},this.indexes_);return D[_]=g,new Jl(D,C)}addToIndexes(e,t){const r=(0,Q.UI)(this.indexes_,(i,o)=>{const l=(0,Q.DV)(this.indexSet_,o);if((0,Q.hu)(l,"Missing index implementation for "+o),i===e1){if(l.isDefinedOn(e.node)){const g=[],_=t.getIterator(Dn.Wrap);let C=_.getNext();for(;C;)C.name!==e.name&&g.push(C),C=_.getNext();return g.push(e),Ql(g,l.getCompare())}return e1}{const g=t.get(e.name);let _=i;return g&&(_=_.remove(new Dn(e.name,g))),_.insert(e,e.node)}});return new Jl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,Q.UI)(this.indexes_,i=>{if(i===e1)return i;{const o=t.get(e.name);return o?i.remove(new Dn(e.name,o)):i}});return new Jl(r,this.indexSet_)}}let Ia,yn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&BI(this.priorityNode_),this.children_.isEmpty()&&(0,Q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ia||(Ia=new n(new cs(Lw),null,Jl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ia}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Ia:r}}getChild(t){const r=bn(t);return null===r?this:this.getImmediateChild(r).getChild(Nr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,Q.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Dn(t,r);let o,l;r.isEmpty()?(o=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const g=o.isEmpty()?Ia:this.priorityNode_;return new n(o,g,l)}}updateChild(t,r){const i=bn(t);if(null===i)return r;{(0,Q.hu)(".priority"!==bn(t)||1===Xl(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Nr(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,l=!0;if(this.forEachChild(Sr,(g,_)=>{r[g]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(g)?o=Math.max(o,Number(g)):l=!1}),!t&&l&&o<2*i){const g=[];for(const _ in r)g[_]=r[_];return g}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Bw(this.getPriority().val())+":"),this.forEachChild(Sr,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":pw(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new Dn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Dn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Dn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Dn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Dn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)>0;)o.getNext(),l=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ef?-1:0}withIndex(t){if(t===cl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===cl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Sr),o=r.getIterator(Sr);let l=i.getNext(),g=o.getNext();for(;l&&g;){if(l.name!==g.name||!l.node.equals(g.node))return!1;l=i.getNext(),g=o.getNext()}return null===l&&null===g}return!1}return!1}}resolveIndex_(t){return t===cl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ef=new class extends yn{constructor(){super(new cs(Lw),yn.EMPTY_NODE,Jl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return yn.EMPTY_NODE}isEmpty(){return!1}};function gi(n,e=null){if(null===n)return yn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,Q.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new uh(n,gi(e));if(n instanceof Array){let t=yn.EMPTY_NODE;return lo(n,(r,i)=>{if((0,Q.r3)(n,r)&&"."!==r.substring(0,1)){const o=gi(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(gi(e))}{const t=[];let r=!1;if(lo(n,(l,g)=>{if("."!==l.substring(0,1)){const _=gi(g);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Dn(l,_)))}}),0===t.length)return yn.EMPTY_NODE;const o=Ql(t,X3,l=>l.name,Lw);if(r){const l=Ql(t,Sr.getCompare());return new yn(o,gi(e),new Jl({".priority":l},{".priority":Sr}))}return new yn(o,gi(e),Jl.Default)}}Object.defineProperties(Dn,{MIN:{value:new Dn(Yl,yn.EMPTY_NODE)},MAX:{value:new Dn(al,ef)}}),kI.__EMPTY_NODE=yn.EMPTY_NODE,uh.__childrenNodeConstructor=yn,Jg=ef,J3=ef,function(n){Uw=n}(gi);class VI extends Qg{constructor(e){super(),this.indexPath_=e,(0,Q.hu)(!Sn(e)&&".priority"!==bn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?oh(e.name,t.name):o}makePost(e,t){const r=gi(e),i=yn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Dn(t,i)}maxPost(){const e=yn.EMPTY_NODE.updateChild(this.indexPath_,ef);return new Dn(al,e)}toString(){return Pp(this.indexPath_,0).join("/")}}const jw=new class extends Qg{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?oh(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Dn.MIN}maxPost(){return Dn.MAX}makePost(e,t){const r=gi(e);return new Dn(t,r)}toString(){return".value"}},kp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",UI=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=kp.charAt(t%64),t=Math.floor(t/64);(0,Q.hu)(0===t,"Cannot push at time == 0");let l=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=kp.charAt(e[i]);return(0,Q.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),HI=function(n){if(n===""+pv)return"-";const e=zg(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return al;const o=kp.charAt(kp.indexOf(t[r])+1);return t[r]=o,t.slice(0,r+1).join("")},iO=function(n){if(n===""+_w)return Yl;const e=zg(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+pv:(delete t[t.length-1],t.join("")):(t[t.length-1]=kp.charAt(kp.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function jI(n){return{type:"value",snapshotNode:n}}function Lp(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function n1(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Bp(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Iv{constructor(e){this.index_=e}updateChild(e,t,r,i,o,l){(0,Q.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const g=e.getImmediateChild(t);return g.getChild(i).equals(r.getChild(i))&&g.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(n1(t,g)):(0,Q.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):g.isEmpty()?l.trackChildChange(Lp(t,r)):l.trackChildChange(Bp(t,r,g))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Sr,(i,o)=>{t.hasChild(i)||r.trackChildChange(n1(i,o))}),t.isLeafNode()||t.forEachChild(Sr,(i,o)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(o)||r.trackChildChange(Bp(i,o,l))}else r.trackChildChange(Lp(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?yn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class r1{constructor(e){this.indexedFilter_=new Iv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=r1.getStartPost_(e),this.endPost_=r1.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,o,l){return this.matches(new Dn(t,r))||(r=yn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=yn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(yn.EMPTY_NODE);const o=this;return t.forEachChild(Sr,(l,g)=>{o.matches(new Dn(l,g))||(i=i.updateImmediateChild(l,yn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class oO{constructor(e){this.rangedFilter_=new r1(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,o,l){return this.rangedFilter_.matches(new Dn(t,r))||(r=yn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,l):this.fullLimitUpdateChild_(e,t,r,o,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=yn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=yn.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const g=o.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),g)<=0:this.index_.compare(g,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(g.name,g.node),l++}}else{let o,l,g,_;if(i=t.withIndex(this.index_),i=i.updatePriority(yn.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const O=this.index_.getCompare();g=(M,B)=>O(B,M)}else _=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),g=this.index_.getCompare();let C=0,D=!1;for(;_.hasNext();){const O=_.getNext();!D&&g(o,O)<=0&&(D=!0),D&&C<this.limit_&&g(O,l)<=0?C++:i=i.updateImmediateChild(O.name,yn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let l;if(this.reverse_){const O=this.index_.getCompare();l=(M,B)=>O(B,M)}else l=this.index_.getCompare();const g=e;(0,Q.hu)(g.numChildren()===this.limit_,"");const _=new Dn(t,r),C=this.reverse_?g.getFirstChild(this.index_):g.getLastChild(this.index_),D=this.rangedFilter_.matches(_);if(g.hasChild(t)){const O=g.getImmediateChild(t);let M=i.getChildAfterChild(this.index_,C,this.reverse_);for(;null!=M&&(M.name===t||g.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const B=null==M?1:l(M,_);if(D&&!r.isEmpty()&&B>=0)return null!=o&&o.trackChildChange(Bp(t,r,O)),g.updateImmediateChild(t,r);{null!=o&&o.trackChildChange(n1(t,O));const $=g.updateImmediateChild(t,yn.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=o&&o.trackChildChange(Lp(M.name,M.node)),$.updateImmediateChild(M.name,M.node)):$}}return r.isEmpty()?e:D&&l(C,_)>=0?(null!=o&&(o.trackChildChange(n1(C.name,C.node)),o.trackChildChange(Lp(t,r))),g.updateImmediateChild(t,r).updateImmediateChild(C.name,yn.EMPTY_NODE)):e}}class i1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Sr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:al}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Sr}copy(){const e=new i1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Vp(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function ch(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Tv(n,e){const t=n.copy();return t.index_=e,t}function uO(n){const e={};if(n.isDefault())return e;let t;return n.index_===Sr?t="$priority":n.index_===jw?t="$value":n.index_===cl?t="$key":((0,Q.hu)(n.index_ instanceof VI,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,Q.Pz)(t),n.startSet_&&(e.startAt=(0,Q.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,Q.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,Q.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,Q.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function zI(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Sr&&(e.i=n.index_.toString()),e}class Dv extends DI{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Gg("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,Q.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=Dv.getListenId_(e,r),g={};this.listens_[l]=g;const _=uO(e._queryParams);this.restRequest_(o+".json",_,(C,D)=>{let O=D;if(404===C&&(O=null,C=null),null===C&&this.onDataUpdate_(o,O,!1,r),(0,Q.DV)(this.listens_,l)===g){let M;M=C?401===C?"permission_denied":"rest_error:"+C:"ok",i(M,null)}})}unlisten(e,t){const r=Dv.getListenId_(e,t);delete this.listens_[r]}get(e){const t=uO(e._queryParams),r=e._path.toString(),i=new Q.BH;return this.restRequest_(r+".json",t,(o,l)=>{let g=l;404===o&&(g=null,o=null),null===o?(this.onDataUpdate_(r,g,!1,null),i.resolve(g)):i.reject(new Error(g))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,Q.xO)(t);this.log_("Sending REST request for "+l);const g=new XMLHttpRequest;g.onreadystatechange=()=>{if(r&&4===g.readyState){this.log_("REST Response for "+l+" received. status:",g.status,"response:",g.responseText);let _=null;if(g.status>=200&&g.status<300){try{_=(0,Q.cI)(g.responseText)}catch(C){Qs("Failed to parse JSON response for "+l+": "+g.responseText)}r(null,_)}else 401!==g.status&&404!==g.status&&Qs("Got unsuccessful REST response for "+l+" Status: "+g.status),r(g.status);r=null}},g.open("GET",l,!0),g.send()})}}class cO{constructor(){this.rootNode_=yn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Ov(){return{value:null,children:new Map}}function Up(n,e,t){if(Sn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=bn(e);n.children.has(r)||n.children.set(r,Ov()),Up(n.children.get(r),e=Nr(e),t)}}function Ww(n,e){if(Sn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Sr,(r,i)=>{Up(n,new gr(r),i)}),Ww(n,e)}}if(n.children.size>0){const t=bn(e);return e=Nr(e),n.children.has(t)&&Ww(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function zw(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{zw(i,new gr(e.toString()+"/"+r),t)})}class dO{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&lo(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class pO{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new dO(e);const r=1e4+2e4*Math.random();Ic(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;lo(e,(i,o)=>{o>0&&(0,Q.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Ic(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ru=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ru||(Ru={})),Ru))();function ed(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class s1{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ru.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Sn(this.path)){if(null!=this.affectedTree.value)return(0,Q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new gr(e));return new s1(Pn(),t,this.revert)}}return(0,Q.hu)(bn(this.path)===e,"operationForChild called for unrelated child."),new s1(Nr(this.path),this.affectedTree,this.revert)}}class a1{constructor(e,t){this.source=e,this.path=t,this.type=Ru.LISTEN_COMPLETE}operationForChild(e){return Sn(this.path)?new a1(this.source,Pn()):new a1(this.source,Nr(this.path))}}class jp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ru.OVERWRITE}operationForChild(e){return Sn(this.path)?new jp(this.source,Pn(),this.snap.getImmediateChild(e)):new jp(this.source,Nr(this.path),this.snap)}}class Gp{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ru.MERGE}operationForChild(e){if(Sn(this.path)){const t=this.children.subtree(new gr(e));return t.isEmpty()?null:t.value?new jp(this.source,Pn(),t.value):new Gp(this.source,Pn(),t)}return(0,Q.hu)(bn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gp(this.source,Nr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class bc{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Sn(e))return this.isFullyInitialized()&&!this.filtered_;const t=bn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class gO{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Wp(n,e,t,r,i,o){const l=r.filter(g=>g.type===t);l.sort((g,_)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,Q.g5)("Should only compare child_ events.");const r=new Dn(e.childName,e.snapshotNode),i=new Dn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,g,_)),l.forEach(g=>{const _=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,g,o);i.forEach(C=>{C.respondsTo(g.type)&&e.push(C.createEvent(_,n.query_))})})}function u1(n,e){return{eventCache:n,serverCache:e}}function zp(n,e,t,r){return u1(new bc(e,t,r),n.serverCache)}function qI(n,e,t,r){return u1(n.eventCache,new bc(e,t,r))}function Rv(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function tf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Zw;class xr{constructor(e,t=(()=>(Zw||(Zw=new cs(S3)),Zw))()){this.value=e,this.children=t}static fromObject(e){let t=new xr(null);return lo(e,(r,i)=>{t=t.set(new gr(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Pn(),value:this.value};if(Sn(e))return null;{const r=bn(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Nr(e),t);return null!=o?{path:Gr(new gr(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Sn(e))return this;{const t=bn(e),r=this.children.get(t);return null!==r?r.subtree(Nr(e)):new xr(null)}}set(e,t){if(Sn(e))return new xr(t,this.children);{const r=bn(e),o=(this.children.get(r)||new xr(null)).set(Nr(e),t),l=this.children.insert(r,o);return new xr(this.value,l)}}remove(e){if(Sn(e))return this.children.isEmpty()?new xr(null):new xr(null,this.children);{const t=bn(e),r=this.children.get(t);if(r){const i=r.remove(Nr(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new xr(null):new xr(this.value,o)}return this}}get(e){if(Sn(e))return this.value;{const t=bn(e),r=this.children.get(t);return r?r.get(Nr(e)):null}}setTree(e,t){if(Sn(e))return t;{const r=bn(e),o=(this.children.get(r)||new xr(null)).setTree(Nr(e),t);let l;return l=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new xr(this.value,l)}}fold(e){return this.fold_(Pn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Gr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Pn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Sn(e))return null;{const o=bn(e),l=this.children.get(o);return l?l.findOnPath_(Nr(e),Gr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Pn(),t)}foreachOnPath_(e,t,r){if(Sn(e))return this;{this.value&&r(t,this.value);const i=bn(e),o=this.children.get(i);return o?o.foreachOnPath_(Nr(e),Gr(t,i),r):new xr(null)}}foreach(e){this.foreach_(Pn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Gr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ba{constructor(e){this.writeTree_=e}static empty(){return new ba(new xr(null))}}function Nv(n,e,t){if(Sn(e))return new ba(new xr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const l=us(i,e);return o=o.updateChild(l,t),new ba(n.writeTree_.set(i,o))}{const i=new xr(t),o=n.writeTree_.setTree(e,i);return new ba(o)}}}function lh(n,e,t){let r=n;return lo(t,(i,o)=>{r=Nv(r,Gr(e,i),o)}),r}function ir(n,e){if(Sn(e))return ba.empty();{const t=n.writeTree_.setTree(e,new xr(null));return new ba(t)}}function ll(n,e){return null!=Nu(n,e)}function Nu(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(us(t.path,e)):null}function $p(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Sr,(r,i)=>{e.push(new Dn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Dn(r,i.value))}),e}function dh(n,e){if(Sn(e))return n;{const t=Nu(n,e);return new ba(null!=t?new xr(t):n.writeTree_.subtree(e))}}function un(n){return n.writeTree_.isEmpty()}function jo(n,e){return Pv(Pn(),n.writeTree_,e)}function Pv(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,Q.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=Pv(Gr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Gr(n,".priority"),r)),t}}function dl(n,e){return Xw(e,n)}function vO(n,e){if(n.snap)return Ou(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ou(Gr(n.path,t),e))return!0;return!1}function Pu(n){return n.visible}function ri(n,e,t){let r=ba.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const l=o.path;let g;if(o.snap)Ou(t,l)?(g=us(t,l),r=Nv(r,g,o.snap)):Ou(l,t)&&(g=us(l,t),r=Nv(r,Pn(),o.snap.getChild(g)));else{if(!o.children)throw(0,Q.g5)("WriteRecord should have .snap or .children");if(Ou(t,l))g=us(t,l),r=lh(r,g,o.children);else if(Ou(l,t))if(g=us(l,t),Sn(g))r=lh(r,Pn(),o.children);else{const _=(0,Q.DV)(o.children,bn(g));if(_){const C=_.getChild(Nr(g));r=Nv(r,Pn(),C)}}}}}return r}function Mu(n,e,t,r,i){if(r||i){const o=dh(n.visibleWrites,e);return!i&&un(o)?t:i||null!=t||ll(o,Pn())?jo(ri(n.allWrites,function(C){return(C.visible||i)&&(!r||!~r.indexOf(C.writeId))&&(Ou(C.path,e)||Ou(e,C.path))},e),t||yn.EMPTY_NODE):null}{const o=Nu(n.visibleWrites,e);if(null!=o)return o;{const l=dh(n.visibleWrites,e);return un(l)?t:null!=t||ll(l,Pn())?jo(l,t||yn.EMPTY_NODE):null}}}function Mv(n,e,t,r){return Mu(n.writeTree,n.treePath,e,t,r)}function td(n,e){return function(n,e,t){let r=yn.EMPTY_NODE;const i=Nu(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Sr,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=dh(n.visibleWrites,e);return t.forEachChild(Sr,(l,g)=>{const _=jo(dh(o,new gr(l)),g);r=r.updateImmediateChild(l,_)}),$p(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return $p(dh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function JI(n,e,t,r){return function(n,e,t,r,i){(0,Q.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Gr(e,t);if(ll(n.visibleWrites,o))return null;{const l=dh(n.visibleWrites,o);return un(l)?i.getChild(t):jo(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function l1(n,e){return function(n,e){return Nu(n.visibleWrites,e)}(n.writeTree,Gr(n.treePath,e))}function fh(n,e,t){return function(n,e,t,r){const i=Gr(e,t),o=Nu(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?jo(dh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Fv(n,e){return Xw(Gr(n.treePath,e),n.writeTree)}function Xw(n,e){return{treePath:n,writeTree:e}}class Zp{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,Q.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,Q.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,Bp(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,n1(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,Lp(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,Q.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Bp(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const d1=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class kv{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new bc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fh(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:tf(this.viewCache_),o=function(n,e,t,r,i,o){return function(n,e,t,r,i,o,l){let g;const _=dh(n.visibleWrites,e),C=Nu(_,Pn());if(null!=C)g=C;else{if(null==t)return[];g=jo(_,t)}if(g=g.withIndex(l),g.isEmpty()||g.isLeafNode())return[];{const D=[],O=l.getCompare(),M=o?g.getReverseIteratorFrom(r,l):g.getIteratorFrom(r,l);let B=M.getNext();for(;B&&D.length<i;)0!==O(B,r)&&D.push(B),B=M.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function Bv(n,e,t,r,i,o){const l=e.eventCache;if(null!=l1(r,t))return e;{let g,_;if(Sn(t))if((0,Q.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const C=tf(e),O=td(r,C instanceof yn?C:yn.EMPTY_NODE);g=n.filter.updateFullNode(e.eventCache.getNode(),O,o)}else{const C=Mv(r,tf(e));g=n.filter.updateFullNode(e.eventCache.getNode(),C,o)}else{const C=bn(t);if(".priority"===C){(0,Q.hu)(1===Xl(t),"Can't have a priority with additional path components");const D=l.getNode();_=e.serverCache.getNode();const O=JI(r,t,D,_);g=null!=O?n.filter.updatePriority(D,O):l.getNode()}else{const D=Nr(t);let O;if(l.isCompleteForChild(C)){_=e.serverCache.getNode();const M=JI(r,t,l.getNode(),_);O=null!=M?l.getNode().getImmediateChild(C).updateChild(D,M):l.getNode().getImmediateChild(C)}else O=fh(r,C,e.serverCache);g=null!=O?n.filter.updateChild(l.getNode(),C,O,D,i,o):l.getNode()}}return zp(e,g,l.isFullyInitialized()||Sn(t),n.filter.filtersNodes())}}function Kp(n,e,t,r,i,o,l,g){const _=e.serverCache;let C;const D=l?n.filter:n.filter.getIndexedFilter();if(Sn(t))C=D.updateFullNode(_.getNode(),r,null);else if(D.filtersNodes()&&!_.isFiltered()){const B=_.getNode().updateChild(t,r);C=D.updateFullNode(_.getNode(),B,null)}else{const B=bn(t);if(!_.isCompleteForPath(t)&&Xl(t)>1)return e;const G=Nr(t),ie=_.getNode().getImmediateChild(B).updateChild(G,r);C=".priority"===B?D.updatePriority(_.getNode(),ie):D.updateChild(_.getNode(),B,ie,G,d1,null)}const O=qI(e,C,_.isFullyInitialized()||Sn(t),D.filtersNodes());return Bv(n,O,t,i,new kv(i,O,o),g)}function nb(n,e,t,r,i,o,l){const g=e.eventCache;let _,C;const D=new kv(i,e,o);if(Sn(t))C=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=zp(e,C,!0,n.filter.filtersNodes());else{const O=bn(t);if(".priority"===O)C=n.filter.updatePriority(e.eventCache.getNode(),r),_=zp(e,C,g.isFullyInitialized(),g.isFiltered());else{const M=Nr(t),B=g.getNode().getImmediateChild(O);let G;if(Sn(M))G=r;else{const $=D.getCompleteChild(O);G=null!=$?".priority"===wv(M)&&$.getChild(NI(M)).isEmpty()?$:$.updateChild(M,r):yn.EMPTY_NODE}_=B.equals(G)?e:zp(e,n.filter.updateChild(g.getNode(),O,G,M,D,l),g.isFullyInitialized(),n.filter.filtersNodes())}}return _}function EO(n,e){return n.eventCache.isCompleteForChild(e)}function CO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function hh(n,e,t,r,i,o,l,g){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let C,_=e;C=Sn(t)?r:new xr(null).setTree(t,r);const D=e.serverCache.getNode();return C.children.inorderTraversal((O,M)=>{if(D.hasChild(O)){const G=CO(0,e.serverCache.getNode().getImmediateChild(O),M);_=Kp(n,_,new gr(O),G,i,o,l,g)}}),C.children.inorderTraversal((O,M)=>{const B=!e.serverCache.isCompleteForChild(O)&&void 0===M.value;if(!D.hasChild(O)&&!B){const $=CO(0,e.serverCache.getNode().getImmediateChild(O),M);_=Kp(n,_,new gr(O),$,i,o,l,g)}}),_}class gM{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Iv(r.getIndex()),o=function(n){return n.loadsAllData()?new Iv(n.getIndex()):n.hasLimit()?new oO(n):new r1(n)}(r);this.processor_=function(n){return{filter:n}}(o);const l=t.serverCache,g=t.eventCache,_=i.updateFullNode(yn.EMPTY_NODE,l.getNode(),null),C=o.updateFullNode(yn.EMPTY_NODE,g.getNode(),null),D=new bc(_,l.isFullyInitialized(),i.filtersNodes()),O=new bc(C,g.isFullyInitialized(),o.filtersNodes());this.viewCache_=u1(O,D),this.eventGenerator_=new gO(this.query_)}get query(){return this.query_}}function ls(n,e){const t=tf(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Sn(e)&&!t.getImmediateChild(bn(e)).isEmpty())?t.getChild(e):null}function rb(n){return 0===n.eventRegistrations_.length}function Vv(n,e,t){const r=[];if(t){(0,Q.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function ib(n,e,t,r){e.type===Ru.MERGE&&null!==e.source.queryId&&((0,Q.hu)(tf(n.viewCache_),"We should always have a full cache before handling merges"),(0,Q.hu)(Rv(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function(n,e,t,r,i){const o=new Zp;let l,g;if(t.type===Ru.OVERWRITE){const C=t;C.source.fromUser?l=nb(n,e,C.path,C.snap,r,i,o):((0,Q.hu)(C.source.fromServer,"Unknown source."),g=C.source.tagged||e.serverCache.isFiltered()&&!Sn(C.path),l=Kp(n,e,C.path,C.snap,r,i,g,o))}else if(t.type===Ru.MERGE){const C=t;C.source.fromUser?l=function(n,e,t,r,i,o,l){let g=e;return r.foreach((_,C)=>{const D=Gr(t,_);EO(e,bn(D))&&(g=nb(n,g,D,C,i,o,l))}),r.foreach((_,C)=>{const D=Gr(t,_);EO(e,bn(D))||(g=nb(n,g,D,C,i,o,l))}),g}(n,e,C.path,C.children,r,i,o):((0,Q.hu)(C.source.fromServer,"Unknown source."),g=C.source.tagged||e.serverCache.isFiltered(),l=hh(n,e,C.path,C.children,r,i,g,o))}else if(t.type===Ru.ACK_USER_WRITE){const C=t;l=C.revert?function(n,e,t,r,i,o){let l;if(null!=l1(r,t))return e;{const g=new kv(r,e,i),_=e.eventCache.getNode();let C;if(Sn(t)||".priority"===bn(t)){let D;if(e.serverCache.isFullyInitialized())D=Mv(r,tf(e));else{const O=e.serverCache.getNode();(0,Q.hu)(O instanceof yn,"serverChildren would be complete if leaf node"),D=td(r,O)}D=D,C=n.filter.updateFullNode(_,D,o)}else{const D=bn(t);let O=fh(r,D,e.serverCache);null==O&&e.serverCache.isCompleteForChild(D)&&(O=_.getImmediateChild(D)),C=null!=O?n.filter.updateChild(_,D,O,Nr(t),g,o):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(_,D,yn.EMPTY_NODE,Nr(t),g,o):_,C.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Mv(r,tf(e)),l.isLeafNode()&&(C=n.filter.updateFullNode(C,l,o)))}return l=e.serverCache.isFullyInitialized()||null!=l1(r,Pn()),zp(e,C,l,n.filter.filtersNodes())}}(n,e,C.path,r,i,o):function(n,e,t,r,i,o,l){if(null!=l1(i,t))return e;const g=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Sn(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return Kp(n,e,t,_.getNode().getChild(t),i,o,g,l);if(Sn(t)){let C=new xr(null);return _.getNode().forEachChild(cl,(D,O)=>{C=C.set(new gr(D),O)}),hh(n,e,t,C,i,o,g,l)}return e}{let C=new xr(null);return r.foreach((D,O)=>{const M=Gr(t,D);_.isCompleteForPath(M)&&(C=C.set(D,_.getNode().getChild(M)))}),hh(n,e,t,C,i,o,g,l)}}(n,e,C.path,C.affectedTree,r,i,o)}else{if(t.type!==Ru.LISTEN_COMPLETE)throw(0,Q.g5)("Unknown operation type: "+t.type);l=function(n,e,t,r,i){const o=e.serverCache;return Bv(n,qI(e,o.getNode(),o.isFullyInitialized()||Sn(t),o.isFiltered()),t,r,d1,i)}(n,e,t.path,r,o)}const _=o.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Rv(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(jI(Rv(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function(n,e){(0,Q.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,Q.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,Q.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,ob(n,o.changes,o.viewCache.eventCache.getNode(),null)}function ob(n,e,t,r){return function(n,e,t,r){const i=[],o=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Wp(n,i,"child_removed",e,r,t),Wp(n,i,"child_added",e,r,t),Wp(n,i,"child_moved",o,r,t),Wp(n,i,"child_changed",e,r,t),Wp(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Uv,jv;class sb{constructor(){this.views=new Map}}function Jw(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,Q.hu)(null!=o,"SyncTree gave us an op for an invalid query."),ib(o,e,t,r)}{let o=[];for(const l of n.views.values())o=o.concat(ib(l,e,t,r));return o}}function eE(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let g=Mv(t,i?r:null),_=!1;g?_=!0:r instanceof yn?(g=td(t,r),_=!1):(g=yn.EMPTY_NODE,_=!1);const C=u1(new bc(g,_,!1),new bc(r,i,!1));return new gM(e,C)}return l}function PO(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function nf(n,e){let t=null;for(const r of n.views.values())t=t||ls(r,e);return t}function ab(n,e){return e._queryParams.loadsAllData()?Hv(n):n.views.get(e._queryIdentifier)}function ub(n,e){return null!=ab(n,e)}function rf(n){return null!=Hv(n)}function Hv(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let FO=1;class nE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xr(null),this.pendingWriteTree_={visibleWrites:ba.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ph(n,e,t,r,i){return function(n,e,t,r,i){(0,Q.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Nv(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?p1(n,new jp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function nd(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(g=>g.writeId===e);(0,Q.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const g=n.allWrites[l];g.visible&&(l>=t&&vO(g,r.path)?i=!1:Ou(r.path,g.path)&&(o=!0)),l--}return!!i&&(o?(function(n){n.visibleWrites=ri(n.allWrites,Pu,Pn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=ir(n.visibleWrites,r.path):lo(r.children,_=>{n.visibleWrites=ir(n.visibleWrites,Gr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let o=new xr(null);return null!=r.snap?o=o.set(Pn(),!0):lo(r.children,l=>{o=o.set(new gr(l),!0)}),p1(n,new s1(r.path,o,t))}return[]}function h1(n,e,t){return p1(n,new jp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function rE(n,e,t,r){const i=e._path,o=n.syncPointTree_.get(i);let l=[];if(o&&("default"===e._queryIdentifier||ub(o,e))){const g=function(n,e,t,r){const i=e._queryIdentifier,o=[];let l=[];const g=rf(n);if("default"===i)for(const[_,C]of n.views.entries())l=l.concat(Vv(C,t,r)),rb(C)&&(n.views.delete(_),C.query._queryParams.loadsAllData()||o.push(C.query));else{const _=n.views.get(i);_&&(l=l.concat(Vv(_,t,r)),rb(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||o.push(_.query)))}return g&&!rf(n)&&o.push(new((0,Q.hu)(Uv,"Reference.ts has not been loaded"),Uv)(e._repo,e._path)),{removed:o,events:l}}(o,e,t,r);(function(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=g.removed;l=g.events;const C=-1!==_.findIndex(O=>O._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(O,M)=>rf(M));if(C&&!D){const O=n.syncPointTree_.subtree(i);if(!O.isEmpty()){const M=function(n){return n.fold((e,t,r)=>{if(t&&rf(t))return[Hv(t)];{let i=[];return t&&(i=PO(t)),lo(r,(o,l)=>{i=i.concat(l)}),i}})}(O);for(let B=0;B<M.length;++B){const G=M[B],$=G.query,ie=fb(n,G);n.listenProvider_.startListening(g1($),Wv(n,$),ie.hashFn,ie.onComplete)}}}if(!D&&_.length>0&&!r)if(C){const O=null;n.listenProvider_.stopListening(g1(e),O)}else _.forEach(O=>{const M=n.queryToTagMap.get(zv(O));n.listenProvider_.stopListening(g1(O),M)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=zv(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,_)}return l}function lb(n,e,t){const r=e._path;let i=null,o=!1;n.syncPointTree_.foreachOnPath(r,(O,M)=>{const B=us(O,r);i=i||nf(M,B),o=o||rf(M)});let g,l=n.syncPointTree_.get(r);l?(o=o||rf(l),i=i||nf(l,Pn())):(l=new sb,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?g=!0:(g=!1,i=yn.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((M,B)=>{const G=nf(B,Pn());G&&(i=i.updateImmediateChild(M,G))}));const _=ub(l,e);if(!_&&!e._queryParams.loadsAllData()){const O=zv(e);(0,Q.hu)(!n.queryToTagMap.has(O),"View does not exist, but we have a tag");const M=FO++;n.queryToTagMap.set(O,M),n.tagToQueryMap.set(M,O)}let D=function(n,e,t,r,i,o){const l=eE(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function(n,e){n.eventRegistrations_.push(e)}(l,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Sr,(o,l)=>{r.push(Lp(o,l))}),t.isFullyInitialized()&&r.push(jI(t.getNode())),ob(n,r,t.getNode(),e)}(l,t)}(l,e,t,dl(n.pendingWriteTree_,r),i,g);if(!_&&!o){const O=ab(l,e);D=D.concat(function(n,e,t){const r=e._path,i=Wv(n,e),o=fb(n,t),l=n.listenProvider_.startListening(g1(e),i,o.hashFn,o.onComplete),g=n.syncPointTree_.subtree(r);if(i)(0,Q.hu)(!rf(g.value),"If we're adding a query, it shouldn't be shadowed");else{const _=g.fold((C,D,O)=>{if(!Sn(C)&&D&&rf(D))return[Hv(D).query];{let M=[];return D&&(M=M.concat(PO(D).map(B=>B.query))),lo(O,(B,G)=>{M=M.concat(G)}),M}});for(let C=0;C<_.length;++C){const D=_[C];n.listenProvider_.stopListening(g1(D),Wv(n,D))}}return l}(n,e,O))}return D}function iE(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,g)=>{const C=nf(g,us(l,e));if(C)return C});return Mu(i,e,o,t,!0)}function p1(n,e){return Gv(e,n.syncPointTree_,null,dl(n.pendingWriteTree_,Pn()))}function Gv(n,e,t,r){if(Sn(n.path))return db(n,e,t,r);{const i=e.get(Pn());null==t&&null!=i&&(t=nf(i,Pn()));let o=[];const l=bn(n.path),g=n.operationForChild(l),_=e.children.get(l);if(_&&g){const C=t?t.getImmediateChild(l):null,D=Fv(r,l);o=o.concat(Gv(g,_,C,D))}return i&&(o=o.concat(Jw(i,n,r,t))),o}}function db(n,e,t,r){const i=e.get(Pn());null==t&&null!=i&&(t=nf(i,Pn()));let o=[];return e.children.inorderTraversal((l,g)=>{const _=t?t.getImmediateChild(l):null,C=Fv(r,l),D=n.operationForChild(l);D&&(o=o.concat(db(D,g,_,C)))}),i&&(o=o.concat(Jw(i,n,r,t))),o}function fb(n,e){const t=e.query,r=Wv(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||yn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,e,t){const r=oE(n,t);if(r){const i=sE(r),o=i.path,l=i.queryId,g=us(o,e);return $v(n,o,new a1(ed(l),g))}return[]}(n,t._path,r):function(n,e){return p1(n,new a1({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return rE(n,t,null,o)}}}}function Wv(n,e){const t=zv(e);return n.queryToTagMap.get(t)}function zv(n){return n._path.toString()+"$"+n._queryIdentifier}function oE(n,e){return n.tagToQueryMap.get(e)}function sE(n){const e=n.indexOf("$");return(0,Q.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new gr(n.substr(0,e))}}function $v(n,e,t){const r=n.syncPointTree_.get(e);return(0,Q.hu)(r,"Missing sync point for query tag that we're tracking"),Jw(r,t,dl(n.pendingWriteTree_,e),null)}function g1(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,Q.hu)(jv,"Reference.ts has not been loaded"),jv)(n._repo,n._path):n}class Xa{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Xa(t)}node(){return this.node_}}class m1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Gr(this.path_,e);return new m1(this.syncTree_,t)}node(){return iE(this.syncTree_,this.path_)}}const uE=function(n,e,t){return n&&"object"==typeof n?((0,Q.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?pb(n[".sv"],e,t):"object"==typeof n[".sv"]?gb(n[".sv"],e):void(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},pb=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,Q.hu)(!1,"Unexpected server value: "+n)}},gb=function(n,e,t){n.hasOwnProperty("increment")||(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,Q.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,Q.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},mb=function(n,e,t,r){return lE(e,new m1(t,n),r)},cE=function(n,e,t){return lE(n,new Xa(e),t)};function lE(n,e,t){const r=n.getPriority().val(),i=uE(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,g=uE(l.getValue(),e,t);return g!==l.getValue()||i!==l.getPriority().val()?new uh(g,gi(i)):n}{const l=n;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new uh(i))),l.forEachChild(Sr,(g,_)=>{const C=lE(_,e.getImmediateChild(g),t);C!==_&&(o=o.updateImmediateChild(g,C))}),o}}class qv{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Zv(n,e){let t=e instanceof gr?e:new gr(e),r=n,i=bn(t);for(;null!==i;){const o=(0,Q.DV)(r.node.children,i)||{children:{},childCount:0};r=new qv(i,r,o),t=Nr(t),i=bn(t)}return r}function Xp(n){return n.node.value}function dE(n,e){n.node.value=e,Yv(n)}function vb(n){return n.node.childCount>0}function fE(n,e){lo(n.node.children,(t,r)=>{e(new qv(t,n,r))})}function hE(n,e,t,r){t&&!r&&e(n),fE(n,i=>{hE(i,e,!0,r)}),t&&r&&e(n)}function Kv(n){return new gr(null===n.parent?n.name:Kv(n.parent)+"/"+n.name)}function Yv(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===Xp(n)&&!vb(n)}(t),i=(0,Q.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Yv(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Yv(n))}(n.parent,n.name,n)}const pE=/[\[\].#$\/\u0000-\u001F\u007F]/,GO=/[\[\].#$\u0000-\u001F\u007F]/,gE=10485760,Xv=function(n){return"string"==typeof n&&0!==n.length&&!pE.test(n)},_b=function(n){return"string"==typeof n&&0!==n.length&&!GO.test(n)},v1=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!hv(n)||n&&"object"==typeof n&&(0,Q.r3)(n,".sv")},fl=function(n,e,t,r){r&&void 0===e||_1((0,Q.gK)(n,"value"),e,t)},_1=function(n,e,t){const r=t instanceof gr?new z3(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+sh(r));if("function"==typeof e)throw new Error(n+"contains a function "+sh(r)+" with contents = "+e.toString());if(hv(e))throw new Error(n+"contains "+e.toString()+" "+sh(r));if("string"==typeof e&&e.length>gE/3&&(0,Q.ug)(e)>gE)throw new Error(n+"contains a string greater than "+gE+" utf8 bytes "+sh(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(lo(e,(l,g)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(o=!0,!Xv(l)))throw new Error(n+" contains an invalid key ("+l+") "+sh(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,Q.ug)(e),Mw(n)})(r,l),_1(n,g,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,Q.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+sh(r)+" in addition to actual children.")}},yb=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,Q.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];lo(e,(l,g)=>{const _=new gr(l);if(_1(i,g,Gr(t,_)),".priority"===wv(_)&&!v1(g))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=Pp(r);for(let l=0;l<o.length;l++)if((".priority"!==o[l]||l!==o.length-1)&&!Xv(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(PI);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ou(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},gh=function(n,e,t){if(!t||void 0!==e){if(hv(e))throw new Error((0,Q.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!v1(e))throw new Error((0,Q.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Jp=function(n,e,t,r){if(!(r&&void 0===t||Xv(t)))throw new Error((0,Q.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},e0=function(n,e,t,r){if(!(r&&void 0===t||_b(t)))throw new Error((0,Q.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Qa=function(n,e){if(".info"===bn(e))throw new Error(n+" failed = Can't modify data under /.info/")},mE=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Xv(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_b(n)}(t))throw new Error((0,Q.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class $O{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Qv(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!Nw(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function vE(n,e,t){Qv(n,t),wb(n,r=>Nw(r,e))}function Fu(n,e,t){Qv(n,t),wb(n,r=>Ou(r,e)||Ou(e,r))}function wb(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(qO(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function qO(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();ih&&xo("event: "+t.toString()),Jd(r)}}}const Eb="repo_interrupt";class x1{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $O,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ov(),this.transactionQueueTree_=new qv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Jv(n){const t=n.infoData_.getNode(new gr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Sa(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Jv(n)})}function Cb(n,e,t,r,i){n.dataUpdateCount++;const o=new gr(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,Q.UI)(t,C=>gi(C));l=function(n,e,t,r){const i=oE(n,r);if(i){const o=sE(i),l=o.path,g=o.queryId,_=us(l,e),C=xr.fromObject(t);return $v(n,l,new Gp(ed(g),_,C))}return[]}(n.serverSyncTree_,o,_,i)}else{const _=gi(t);l=function(n,e,t,r){const i=oE(n,r);if(null!=i){const o=sE(i),l=o.path,g=o.queryId,_=us(l,e);return $v(n,l,new jp(ed(g),_,t))}return[]}(n.serverSyncTree_,o,_,i)}else if(r){const _=(0,Q.UI)(t,C=>gi(C));l=function(n,e,t){const r=xr.fromObject(t);return p1(n,new Gp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,_)}else{const _=gi(t);l=h1(n.serverSyncTree_,o,_)}let g=o;l.length>0&&(g=t0(n,o)),Fu(n.eventQueue_,g,l)}function w1(n,e){_E(n,"connected",e),!1===e&&function(n){mh(n,"onDisconnectEvents");const e=Sa(n),t=Ov();zw(n.onDisconnect_,Pn(),(i,o)=>{const l=mb(i,o,n.serverSyncTree_,e);Up(t,i,l)});let r=[];zw(t,Pn(),(i,o)=>{r=r.concat(h1(n.serverSyncTree_,i,o));const l=AE(n,i);t0(n,l)}),n.onDisconnect_=Ov(),Fu(n.eventQueue_,Pn(),r)}(n)}function _E(n,e,t){const r=new gr("/.info/"+e),i=gi(t);n.infoData_.updateSnapshot(r,i);const o=h1(n.infoSyncTree_,r,i);Fu(n.eventQueue_,r,o)}function yE(n){return n.nextWriteId_++}function E1(n,e,t,r,i){mh(n,"set",{path:e.toString(),value:t,priority:r});const o=Sa(n),l=gi(t,r),g=iE(n.serverSyncTree_,e),_=cE(l,g,o),C=yE(n),D=ph(n.serverSyncTree_,e,_,C,!0);Qv(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(M,B)=>{const G="ok"===M;G||Qs("set at "+e+" failed: "+M);const $=nd(n.serverSyncTree_,C,!G);Fu(n.eventQueue_,e,$),rd(0,i,M,B)});const O=AE(n,e);t0(n,O),Fu(n.eventQueue_,O,[])}function EE(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Ww(n.onDisconnect_,e),rd(0,t,r,i)})}function Ib(n,e,t,r){const i=gi(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,l)=>{"ok"===o&&Up(n.onDisconnect_,e,i),rd(0,r,o,l)})}function e_(n,e,t){let r;r=".info"===bn(e._path)?rE(n.infoSyncTree_,e,t):rE(n.serverSyncTree_,e,t),vE(n.eventQueue_,e._path,r)}function t_(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Eb)}function mh(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),xo(t,...e)}function rd(n,e,t,r){e&&Jd(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const l=new Error(o);l.code=i,e(l)}})}function CE(n,e,t){return iE(n.serverSyncTree_,e,t)||yn.EMPTY_NODE}function C1(n,e=n.transactionQueueTree_){if(e||id(n,e),Xp(e)){const t=JO(n,e);(0,Q.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function(n,e,t){const r=t.map(C=>C.currentWriteId),i=CE(n,e,r);let o=i;const l=i.hash();for(let C=0;C<t.length;C++){const D=t[C];(0,Q.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const O=us(e,D.path);o=o.updateChild(O,D.currentOutputSnapshotRaw)}const g=o.val(!0),_=e;n.server_.put(_.toString(),g,C=>{mh(n,"transaction put response",{path:_.toString(),status:C});let D=[];if("ok"===C){const O=[];for(let M=0;M<t.length;M++)t[M].status=2,D=D.concat(nd(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&O.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();id(n,Zv(n.transactionQueueTree_,e)),C1(n,n.transactionQueueTree_),Fu(n.eventQueue_,e,D);for(let M=0;M<O.length;M++)Jd(O[M])}else{if("datastale"===C)for(let O=0;O<t.length;O++)t[O].status=3===t[O].status?4:0;else{Qs("transaction at "+_.toString()+" failed: "+C);for(let O=0;O<t.length;O++)t[O].status=4,t[O].abortReason=C}t0(n,e)}},l)}(n,Kv(e),t)}else vb(e)&&fE(e,t=>{C1(n,t)})}function t0(n,e){const t=Ob(n,e),r=Kv(t);return function(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(g=>0===g.status).map(g=>g.currentWriteId);for(let g=0;g<e.length;g++){const _=e[g],C=us(t,_.path);let O,D=!1;if((0,Q.hu)(null!==C,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)D=!0,O=_.abortReason,i=i.concat(nd(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)D=!0,O="maxretry",i=i.concat(nd(n.serverSyncTree_,_.currentWriteId,!0));else{const M=CE(n,_.path,l);_.currentInputSnapshot=M;const B=e[g].update(M.val());if(void 0!==B){_1("transaction failed: Data returned ",B,_.path);let G=gi(B);"object"==typeof B&&null!=B&&(0,Q.r3)(B,".priority")||(G=G.updatePriority(M.getPriority()));const ie=_.currentWriteId,ce=Sa(n),fe=cE(G,M,ce);_.currentOutputSnapshotRaw=G,_.currentOutputSnapshotResolved=fe,_.currentWriteId=yE(n),l.splice(l.indexOf(ie),1),i=i.concat(ph(n.serverSyncTree_,_.path,fe,_.currentWriteId,_.applyLocally)),i=i.concat(nd(n.serverSyncTree_,ie,!0))}else D=!0,O="nodata",i=i.concat(nd(n.serverSyncTree_,_.currentWriteId,!0))}Fu(n.eventQueue_,t,i),i=[],D&&(e[g].status=2,setTimeout(e[g].unwatcher,Math.floor(0)),e[g].onComplete&&r.push("nodata"===O?()=>e[g].onComplete(null,!1,e[g].currentInputSnapshot):()=>e[g].onComplete(new Error(O),!1,null)))}id(n,n.transactionQueueTree_);for(let g=0;g<r.length;g++)Jd(r[g]);C1(n,n.transactionQueueTree_)}(n,JO(n,t),r),r}function Ob(n,e){let t,r=n.transactionQueueTree_;for(t=bn(e);null!==t&&void 0===Xp(r);)r=Zv(r,t),t=bn(e=Nr(e));return r}function JO(n,e){const t=[];return fs(n,e,t),t.sort((r,i)=>r.order-i.order),t}function fs(n,e,t){const r=Xp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);fE(e,i=>{fs(n,i,t)})}function id(n,e){const t=Xp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,dE(e,t.length>0?t:void 0)}fE(e,r=>{id(n,r)})}function AE(n,e){const t=Kv(Ob(n,e)),r=Zv(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{IE(n,i)}),IE(n,r),hE(r,i=>{IE(n,i)}),t}function IE(n,e){const t=Xp(e);if(t){const r=[];let i=[],o=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,Q.hu)(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):((0,Q.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(nd(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===o?dE(e,void 0):t.length=o+1,Fu(n.eventQueue_,Kv(e),i);for(let l=0;l<r.length;l++)Jd(r[l])}}const bE=function(n,e){const t=SE(n),r=t.namespace;return"firebase.com"===t.domain&&sl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&sl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Cw(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new gr(t.pathString)}},SE=function(n){let e="",t="",r="",i="",o="",l=!0,g="https",_=443;if("string"==typeof n){let C=n.indexOf("//");C>=0&&(g=n.substring(0,C-1),n=n.substring(C+2));let D=n.indexOf("/");-1===D&&(D=n.length);let O=n.indexOf("?");-1===O&&(O=n.length),e=n.substring(0,Math.min(D,O)),D<O&&(i=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(n.substring(D,O)));const M=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Qs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,O)));C=e.indexOf(":"),C>=0?(l="https"===g||"wss"===g,_=parseInt(e.substring(C+1),10)):C=e.length;const B=e.slice(0,C);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),o=r}"ns"in M&&(o=M.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:g,pathString:i,namespace:o}};class Rb{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Q.Pz)(this.snapshot.exportVal())}}class TE{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Nb{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,Q.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Pb{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Q.BH;return EE(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Qa("OnDisconnect.remove",this._path);const e=new Q.BH;return Ib(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Qa("OnDisconnect.set",this._path),fl("OnDisconnect.set",e,this._path,!1);const t=new Q.BH;return Ib(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Qa("OnDisconnect.setWithPriority",this._path),fl("OnDisconnect.setWithPriority",e,this._path,!1),gh("OnDisconnect.setWithPriority",t,!1);const r=new Q.BH;return function(n,e,t,r,i){const o=gi(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,g)=>{"ok"===l&&Up(n.onDisconnect_,e,o),rd(0,i,l,g)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Qa("OnDisconnect.update",this._path),yb("OnDisconnect.update",e,this._path,!1);const t=new Q.BH;return function(n,e,t,r){if((0,Q.xb)(t))return xo("onDisconnect().update() called with empty data.  Don't do anything."),void rd(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&lo(t,(l,g)=>{const _=gi(g);Up(n.onDisconnect_,Gr(e,l),_)}),rd(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class hs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Sn(this._path)?null:wv(this._path)}get ref(){return new Ta(this._repo,this._path)}get _queryIdentifier(){const e=zI(this._queryParams),t=mw(e);return"{}"===t?"default":t}get _queryObject(){return zI(this._queryParams)}isEqual(e){if(!((e=(0,Q.m9)(e))instanceof hs))return!1;const t=this._repo===e._repo,r=Nw(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function I1(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function od(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===cl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Yl)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==al)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Sr){if(null!=e&&!v1(e)||null!=t&&!v1(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Q.hu)(n.getIndex()instanceof VI||n.getIndex()===jw,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function vh(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ta extends hs{constructor(e,t){super(e,t,new i1,!1)}get parent(){const e=NI(this._path);return null===e?null:new Ta(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class n0{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new gr(e),r=of(this.ref,e);return new n0(this._node.getChild(t),r,Sr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new n0(i,of(this.ref,r),Sr)))}hasChild(e){const t=new gr(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function DE(n,e){return(n=(0,Q.m9)(n))._checkNotDeleted("ref"),void 0!==e?of(n._root,e):n._root}function Mb(n,e){(n=(0,Q.m9)(n))._checkNotDeleted("refFromURL");const t=bE(e,n._repo.repoInfo_.nodeAdmin);mE("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&sl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),DE(n,t.path.toString())}function of(n,e){return null===bn((n=(0,Q.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),e0("child","path",t,!1)):e0("child","path",e,!1),new Ta(n._repo,Gr(n._path,e));var t}function b1(n,e){n=(0,Q.m9)(n),Qa("set",n._path),fl("set",e,n._path,!1);const t=new Q.BH;return E1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function nR(n,e){yb("update",e,n._path,!1);const t=new Q.BH;return function(n,e,t,r){mh(n,"update",{path:e.toString(),value:t});let i=!0;const o=Sa(n),l={};if(lo(t,(g,_)=>{i=!1,l[g]=mb(Gr(e,g),gi(_),n.serverSyncTree_,o)}),i)xo("update() called with empty data.  Don't do anything."),rd(0,r,"ok",void 0);else{const g=yE(n),_=function(n,e,t,r){!function(n,e,t,r){(0,Q.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=lh(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=xr.fromObject(t);return p1(n,new Gp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,g);Qv(n.eventQueue_,_),n.server_.merge(e.toString(),t,(C,D)=>{const O="ok"===C;O||Qs("update at "+e+" failed: "+C);const M=nd(n.serverSyncTree_,g,!O),B=M.length>0?t0(n,e):e;Fu(n.eventQueue_,B,M),rd(0,r,C,D)}),lo(t,C=>{const D=AE(n,Gr(e,C));t0(n,D)}),Fu(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function kb(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(C,D)=>{const O=us(C,t);r=r||nf(D,O)});let i=n.syncPointTree_.get(t);i?r=r||nf(i,Pn()):(i=new sb,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,l=o?new bc(r,!0,!1):null;return function(n){return Rv(n.viewCache_)}(eE(i,e,dl(n.pendingWriteTree_,e._path),o?l.getNode():yn.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=gi(r).withIndex(e._queryParams.getIndex()),o=h1(n.serverSyncTree_,e._path,i);return vE(n.eventQueue_,e._path,o),Promise.resolve(i)},r=>(mh(n,"get for query "+(0,Q.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,Q.m9)(n))._repo,n).then(e=>new n0(e,new Ta(n._repo,n._path),n._queryParams.getIndex()))}class S1{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Rb("value",this,new n0(e.snapshotNode,new Ta(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new TE(this,e,t):null}matches(e){return e instanceof S1&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class T1{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new TE(this,e,t):null}createEvent(e,t){(0,Q.hu)(null!=e.childName,"Child events should have a childName.");const r=of(new Ta(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Rb(e.type,this,new n0(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof T1&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function D1(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const _=t,C=(D,O)=>{e_(n._repo,n,g),_(D,O)};C.userCallback=t.userCallback,C.context=t.context,t=C}const l=new Nb(t,o||void 0),g="value"===e?new S1(l):new T1(e,l);return function(n,e,t){let r;r=".info"===bn(e._path)?lb(n.infoSyncTree_,e,t):lb(n.serverSyncTree_,e,t),vE(n.eventQueue_,e._path,r)}(n._repo,n,g),()=>e_(n._repo,n,g)}function n_(n,e,t,r){return D1(n,"value",e,t,r)}function NE(n,e,t,r){return D1(n,"child_added",e,t,r)}function Lb(n,e,t,r){return D1(n,"child_changed",e,t,r)}function Bb(n,e,t,r){return D1(n,"child_moved",e,t,r)}function PE(n,e,t,r){return D1(n,"child_removed",e,t,r)}function Vb(n,e,t){let r=null;const i=t?new Nb(t):null;"value"===e?r=new S1(i):e&&(r=new T1(e,i)),e_(n._repo,n,r)}class ku{}class ME extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){fl("endAt",this._value,e._path,!0);const t=ch(e._queryParams,this._value,this._key);if(vh(t),od(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hs(e._repo,e._path,t,e._orderByCalled)}}class Hb extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){fl("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,i;return n.index_===cl?("string"==typeof e&&(e=iO(e)),i=ch(n,e,t)):(r=null==t?Yl:iO(t),i=ch(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(vh(t),od(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hs(e._repo,e._path,t,e._orderByCalled)}}class jb extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){fl("startAt",this._value,e._path,!0);const t=Vp(e._queryParams,this._value,this._key);if(vh(t),od(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new hs(e._repo,e._path,t,e._orderByCalled)}}class Gb extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){fl("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===cl)"string"==typeof e&&(e=HI(e)),r=Vp(n,e,t);else{let i;i=null==t?al:HI(t),r=Vp(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(vh(t),od(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new hs(e._repo,e._path,t,e._orderByCalled)}}class wM extends ku{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new hs(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class CM extends ku{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new hs(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class IM extends ku{constructor(e){super(),this._path=e}_apply(e){I1(e,"orderByChild");const t=new gr(this._path);if(Sn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new VI(t),i=Tv(e._queryParams,r);return od(i),new hs(e._repo,e._path,i,!0)}}class SM extends ku{_apply(e){I1(e,"orderByKey");const t=Tv(e._queryParams,cl);return od(t),new hs(e._repo,e._path,t,!0)}}class DM extends ku{_apply(e){I1(e,"orderByPriority");const t=Tv(e._queryParams,Sr);return od(t),new hs(e._repo,e._path,t,!0)}}class RM extends ku{_apply(e){I1(e,"orderByValue");const t=Tv(e._queryParams,jw);return od(t),new hs(e._repo,e._path,t,!0)}}class PM extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(fl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ME(this._value,this._key)._apply(new jb(this._value,this._key)._apply(e))}}function hl(n,...e){let t=(0,Q.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,Q.hu)(!Uv,"__referenceConstructor has already been defined"),Uv=n})(Ta),function(n){(0,Q.hu)(!jv,"__referenceConstructor has already been defined"),jv=n}(Ta);const FE={};function sR(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||sl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xo("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,C,l=bE(o,i),g=l.repoInfo;"undefined"!=typeof process&&(C=process.env.FIREBASE_DATABASE_EMULATOR_HOST),C?(_=!0,o=`http://${C}?ns=${g.namespace}`,l=bE(o,i),g=l.repoInfo):_=!l.repoInfo.secure;const D=i&&_?new ul(ul.OWNER):new D3(n.name,n.options,e);mE("Invalid Firebase Database URL",l),Sn(l.path)||sl("Database URL must point to the root of a Firebase Database (not including a child path).");const O=function(n,e,t,r){let i=FE[e.name];i||(i={},FE[e.name]=i);let o=i[n.toURLString()];return o&&sl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new x1(n,false,t,r),i[n.toURLString()]=o,o}(g,n,D,new T3(n.name,t));return new uR(O,n)}class uR{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=Zg(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Dv(n.repoInfo_,(r,i,o,l)=>{Cb(n,r,i,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>w1(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Q.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new ah(n.repoInfo_,e,(r,i,o,l)=>{Cb(n,r,i,o,l)},r=>{w1(n,r)},r=>{!function(n,e){lo(e,(t,r)=>{_E(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return vv[t]||(vv[t]=e()),vv[t]}(n.repoInfo_,()=>new pO(n.stats_,n.server_)),n.infoData_=new cO,n.infoSyncTree_=new nE({startListening:(r,i,o,l)=>{let g=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(g=h1(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),g},stopListening:()=>{}}),_E(n,"connected",!1),n.serverSyncTree_=new nE({startListening:(r,i,o,l)=>(n.server_.listen(r,o,i,(g,_)=>{const C=l(g,_);Fu(n.eventQueue_,r._path,C)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ta(this._repo,Pn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=FE[e];(!t||t[n.key]!==n)&&sl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),t_(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&sl("Cannot call "+e+" on a deleted database.")}}function jM(n,e){uI(n,e)}class r0{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ah.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},ah.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},lv(Ga.SDK_VERSION),(0,Ga._registerComponent)(new zs.wA("database",(e,{instanceIdentifier:t})=>sR(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ga.registerVersion)(oI,"0.12.2",void 0),(0,Ga.registerVersion)(oI,"0.12.2","esm2017");const qb=new vo.Yd("@firebase/database-compat"),BE=function(n){qb.warn("FIREBASE WARNING: "+n)};class r_{constructor(e){this._delegate=e}cancel(e){(0,Q.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Q.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,Q.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Q.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,Q.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Q.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,Q.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Q.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,Q.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,BE("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Q.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Kb{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,Q.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class _h{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,Q.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Q.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Q.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Q.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,Q.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),e0("DataSnapshot.child","path",e,!1),new _h(this._database,this._delegate.child(e))}hasChild(e){return(0,Q.Dv)("DataSnapshot.hasChild",1,1,arguments.length),e0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,Q.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,Q.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Q.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new _h(this._database,t)))}hasChildren(){return(0,Q.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Q.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Q.Dv)("DataSnapshot.ref",0,0,arguments.length),new Lu(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ps{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,Q.Dv)("Query.on",2,4,arguments.length),(0,Q.Wj)("Query.on","callback",t,!1);const l=ps.getCancelAndContextArgs_("Query.on",r,i),g=(C,D)=>{t.call(l.context,new _h(this.database,C),D)};g.userCallback=t,g.context=l.context;const _=null===(o=l.cancel)||void 0===o?void 0:o.bind(l.context);switch(e){case"value":return n_(this._delegate,g,_),t;case"child_added":return NE(this._delegate,g,_),t;case"child_removed":return PE(this._delegate,g,_),t;case"child_changed":return Lb(this._delegate,g,_),t;case"child_moved":return Bb(this._delegate,g,_),t;default:throw new Error((0,Q.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,Q.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Q.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,Q.Wj)("Query.off","callback",t,!0),(0,Q.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Vb(this._delegate,e,i)}else Vb(this._delegate,e)}get(){return kb(this._delegate).then(e=>new _h(this.database,e))}once(e,t,r,i){(0,Q.Dv)("Query.once",1,4,arguments.length),(0,Q.Wj)("Query.once","callback",t,!0);const o=ps.getCancelAndContextArgs_("Query.once",r,i),l=new Q.BH,g=(C,D)=>{const O=new _h(this.database,C);t&&t.call(o.context,O,D),l.resolve(O)};g.userCallback=t,g.context=o.context;const _=C=>{o.cancel&&o.cancel.call(o.context,C),l.reject(C)};switch(e){case"value":n_(this._delegate,g,_,{onlyOnce:!0});break;case"child_added":NE(this._delegate,g,_,{onlyOnce:!0});break;case"child_removed":PE(this._delegate,g,_,{onlyOnce:!0});break;case"child_changed":Lb(this._delegate,g,_,{onlyOnce:!0});break;case"child_moved":Bb(this._delegate,g,_,{onlyOnce:!0});break;default:throw new Error((0,Q.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,Q.Dv)("Query.limitToFirst",1,1,arguments.length),new ps(this.database,hl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new wM(n)}(e)))}limitToLast(e){return(0,Q.Dv)("Query.limitToLast",1,1,arguments.length),new ps(this.database,hl(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new CM(n)}(e)))}orderByChild(e){return(0,Q.Dv)("Query.orderByChild",1,1,arguments.length),new ps(this.database,hl(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return e0("orderByChild","path",n,!1),new IM(n)}(e)))}orderByKey(){return(0,Q.Dv)("Query.orderByKey",0,0,arguments.length),new ps(this.database,hl(this._delegate,new SM))}orderByPriority(){return(0,Q.Dv)("Query.orderByPriority",0,0,arguments.length),new ps(this.database,hl(this._delegate,new DM))}orderByValue(){return(0,Q.Dv)("Query.orderByValue",0,0,arguments.length),new ps(this.database,hl(this._delegate,new RM))}startAt(e=null,t){return(0,Q.Dv)("Query.startAt",0,2,arguments.length),new ps(this.database,hl(this._delegate,function(n=null,e){return Jp("startAt","key",e,!0),new jb(n,e)}(e,t)))}startAfter(e=null,t){return(0,Q.Dv)("Query.startAfter",0,2,arguments.length),new ps(this.database,hl(this._delegate,function(n,e){return Jp("startAfter","key",e,!0),new Gb(n,e)}(e,t)))}endAt(e=null,t){return(0,Q.Dv)("Query.endAt",0,2,arguments.length),new ps(this.database,hl(this._delegate,function(n,e){return Jp("endAt","key",e,!0),new ME(n,e)}(e,t)))}endBefore(e=null,t){return(0,Q.Dv)("Query.endBefore",0,2,arguments.length),new ps(this.database,hl(this._delegate,function(n,e){return Jp("endBefore","key",e,!0),new Hb(n,e)}(e,t)))}equalTo(e,t){return(0,Q.Dv)("Query.equalTo",1,2,arguments.length),new ps(this.database,hl(this._delegate,function(n,e){return Jp("equalTo","key",e,!0),new PM(n,e)}(e,t)))}toString(){return(0,Q.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Q.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,Q.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ps))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,Q.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,Q.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,Q.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Lu(this.database,new Ta(this._delegate._repo,this._delegate._path))}}class Lu extends ps{constructor(e,t){super(e,new hs(t._repo,t._path,new i1,!1)),this.database=e,this._delegate=t}getKey(){return(0,Q.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,Q.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Lu(this.database,of(this._delegate,e))}getParent(){(0,Q.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Lu(this.database,e):null}getRoot(){return(0,Q.Dv)("Reference.root",0,0,arguments.length),new Lu(this.database,this._delegate.root)}set(e,t){(0,Q.Dv)("Reference.set",1,2,arguments.length),(0,Q.Wj)("Reference.set","onComplete",t,!0);const r=b1(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,Q.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,BE("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qa("Reference.update",this._delegate._path),(0,Q.Wj)("Reference.update","onComplete",t,!0);const r=nR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,Q.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Q.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,e,t){if(Qa("setWithPriority",n._path),fl("setWithPriority",e,n._path,!1),gh("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new Q.BH;return E1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,Q.Dv)("Reference.remove",0,1,arguments.length),(0,Q.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return Qa("remove",n._path),b1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,Q.Dv)("Reference.transaction",1,3,arguments.length),(0,Q.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,Q.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,Q.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,e,t){var r;if(n=(0,Q.m9)(n),Qa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,o=new Q.BH,g=n_(n,()=>{});return function(n,e,t,r,i,o){mh(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:hw(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},g=CE(n,e,void 0);l.currentInputSnapshot=g;const _=l.update(g.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{_1("transaction failed: Data returned ",_,l.path),l.status=0;const C=Zv(n.transactionQueueTree_,e),D=Xp(C)||[];let O;D.push(l),dE(C,D),"object"==typeof _&&null!==_&&(0,Q.r3)(_,".priority")?(O=(0,Q.DV)(_,".priority"),(0,Q.hu)(v1(O),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):O=(iE(n.serverSyncTree_,e)||yn.EMPTY_NODE).getPriority().val();const M=Sa(n),B=gi(_,O),G=cE(B,g,M);l.currentOutputSnapshotRaw=B,l.currentOutputSnapshotResolved=G,l.currentWriteId=yE(n);const $=ph(n.serverSyncTree_,e,G,l.currentWriteId,l.applyLocally);Fu(n.eventQueue_,e,$),C1(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,C,D)=>{let O=null;_?o.reject(_):(O=new n0(D,new Ta(n._repo,n._path),Sr),o.resolve(new r0(C,O)))},g,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new Kb(o.committed,new _h(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,Q.Dv)("Reference.setPriority",1,2,arguments.length),(0,Q.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,Q.m9)(n),Qa("setPriority",n._path),gh("setPriority",e,!1);const t=new Q.BH;return E1(n._repo,Gr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,Q.Dv)("Reference.push",0,2,arguments.length),(0,Q.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,Q.m9)(n),Qa("push",n._path),fl("push",e,n._path,!0);const t=Jv(n._repo),r=UI(t),i=of(n,r),o=of(n,r);let l;return l=null!=e?b1(o,e).then(()=>o):Promise.resolve(o),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Lu(this.database,l));t&&i.then(()=>t(null),l=>t(l));const o=new Lu(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Qa("Reference.onDisconnect",this._delegate._path),new r_(new Pb(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class O1{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,Q.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&sl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&sl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ul(ul.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,Q.Sg)(r.mockUserToken,n.app.options.projectId);o=new ul(l)}!function(n,e,t,r){n.repoInfo_=new Cw(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,Q.Dv)("database.ref",0,1,arguments.length),e instanceof Lu){const t=Mb(this._delegate,e.toString());return new Lu(this,t)}{const t=DE(this._delegate,e);return new Lu(this,t)}}refFromURL(e){(0,Q.Dv)("database.refFromURL",1,1,arguments.length);const r=Mb(this._delegate,e);return new Lu(this,r)}goOffline(){return(0,Q.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,Q.m9)(n))._checkNotDeleted("goOffline"),t_(n._repo)}(this._delegate)}goOnline(){return(0,Q.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,Q.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(Eb)}(n._repo)}(this._delegate)}}O1.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var i_=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){lv(t);const l=new zs.zt("auth-internal",new zs.H0("database-standalone"));return l.setComponent(new zs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new O1(sR(n,l,void 0,e,o),n),namespace:i}}});const dR=O1.ServerValue;function Yb(n){return null==n}function fR(n){return"function"==typeof n.set}function hR(n,e){return fR(e)?e:n.ref(e)}function Xb(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(fR(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function o_(n,e,t="on",r=cw.z){return new Qn.y(i=>{let o=null;return o=n[t](e,(l,g)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:g})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,jt.U)(i=>{const{snapshot:o,prevKey:l}=i;let g=null;return o.exists()&&(g=o.key),{type:e,payload:o,prevKey:l,key:g}}),(0,y3.B)())}function Jb(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function XM(n,e){const{payload:t,prevKey:r,key:i}=e,o=Jb(n,i),l=function(n,e){if(Yb(e))return 0;{const t=Jb(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let g=null;e.payload.forEach(_=>{const C={payload:_,type:"value",prevKey:g,key:_.key};return g=_.key,n=[...n,C],!1})}return n;case"child_added":if(o>-1){const g=n[o-1];(g&&g.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(g=>g.payload.key!==t.key);case"child_changed":return n.map(g=>g.payload.key===i?e:g);case"child_moved":if(o>-1){const g=n.splice(o,1)[0];return(n=n.slice()).splice(l,0,g),n}return n;default:return n}}function eS(n){return(Yb(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function o0(n,e,t){return function(n,e,t){return o_(n,"value","once",t).pipe(p(r=>{const i=[(0,Ft.of)(r)];return e.forEach(o=>i.push(o_(n,o,"on",t))),(0,f.T)(...i).pipe(Hd(XM,[]))}),nI())}(n,e=eS(e),t)}function tS(n,e,t){const r=(e=eS(e)).map(i=>o_(n,i,"on",t));return(0,f.T)(...r)}function nS(n,e){return function(r,i){return Xb(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Ja(n){return function(t){return t?Xb(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function s_(n,e){return function(){return o_(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new zs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new O1(i,r)},"PUBLIC").setServiceProps({Reference:Lu,Query:ps,Database:O1,DataSnapshot:_h,enableLogging:jM,INTERNAL:i_,ServerValue:dR}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.2")}(jg.Z);const _R=new A.OlP("angularfire2.realtimeDatabaseURL"),HE=new A.OlP("angularfire2.database.use-emulator");let rS=(()=>{class n{constructor(t,r,i,o,l,g,_,C,D,O,M,B,G,$,ie){this.schedulers=g;const ce=_,fe=(0,jr.on)(t,l,r);C&&os(fe,l,D,M,B,G,O,$),this.database=(0,jr.cc)(`${fe.name}.database.${i}`,"AngularFireDatabase",fe.name,()=>{const Ae=l.runOutsideAngular(()=>fe.database(i||void 0));return ce&&Ae.useEmulator(...ce),Ae},[ce])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>hR(this.database,t));let o=i;return r&&(o=r(i)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:nS(r,"update"),set:nS(r,"set"),push:i=>r.push(i),remove:Ja(r),snapshotChanges:i=>o0(n,i,t).pipe(pr.iC),stateChanges:i=>tS(n,i,t).pipe(pr.iC),auditTrail:i=>function(n,e,t){return function(n,e,t){return function(n,e){return o_(n,"value","on",e).pipe((0,jt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new Hg(n,t))}}(e),(0,jt.U)(([i,o])=>{const l=i.lastKeyToLoad,g=o.map(_=>_.key);return{actions:o,lastKeyToLoad:l,loadedKeys:g}}),function(n){return e=>e.lift(new C3(n))}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,jt.U)(i=>i.actions))}(n,tS(n,e).pipe(Hd((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(pr.iC),valueChanges:(i,o)=>o0(n,i,t).pipe((0,jt.U)(g=>g.map(_=>o&&o.idField?Object.assign(Object.assign({},_.payload.val()),{[o.idField]:_.key}):_.payload.val())),pr.iC)}}(o,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>s_(n,e.schedulers.outsideAngular)().pipe(pr.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>s_(n,e.schedulers.outsideAngular)().pipe(pr.iC,(0,jt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>hR(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(jr.Dh),A.LFG(jr.xv,8),A.LFG(_R,8),A.LFG(A.Lbi),A.LFG(A.R0b),A.LFG(pr.HU),A.LFG(HE,8),A.LFG(gc,8),A.LFG(Ze,8),A.LFG(gt,8),A.LFG(_t,8),A.LFG(Xt,8),A.LFG(Wt,8),A.LFG(pi,8),A.LFG(jl,8))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),a_=(()=>{class n{constructor(t,r){this.angularFireDatabase=t,this.http=r,this.books=[],this.booksSubject=new fi.xQ,this.getBooks()}emitBooks(){this.booksSubject.next(this.books)}saveBooks(){this.angularFireDatabase.database.ref("/books").set(this.books)}getBooks(){this.angularFireDatabase.database.ref("/books").on("value",t=>{this.books=t.val()?t.val():[],this.emitBooks()})}getSingleBook(t){return new Promise((r,i)=>{this.angularFireDatabase.database.ref("books/"+t).once("value").then(o=>{r(o.val())},o=>{i(o)})})}createNewBook(t){this.books.push(t),this.saveBooks(),this.emitBooks()}removeBook(t){const r=this.books.findIndex(i=>i===t);this.books.splice(r,1),this.saveBooks(),this.emitBooks()}saveBooksToServer(){this.http.post("https://gestion-livre-23045-default-rtdb.europe-west1.firebasedatabase.app/livres.json",this.books).subscribe(()=>{},t=>{console.log("Erreur ! : "+t)})}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(rS),A.LFG(Nd))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})(),R1=(()=>{class n{constructor(t,r){this.router=t,this.angularFireAuth=r}canActivate(){return new Promise((t,r)=>{this.angularFireAuth.onAuthStateChanged(i=>{i?t(!0):(this.router.navigate(["/auth","signin"]),t(!1))})})}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(Ki),A.LFG(gc))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();function u_(){return n=>n.lift(new xR)}class xR{call(e,t){return t.subscribe(new wR(e))}}class wR extends Ii.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var bt,jE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},pl={},N1=N1||{},pn=jE||self;function Da(){}function GE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function c_(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var iS="closure_uid_"+(1e9*Math.random()>>>0),CR=0;function AR(n,e,t){return n.call.apply(n.bind,arguments)}function IR(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function gs(n,e,t){return(gs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?AR:IR).apply(null,arguments)}function l_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function wo(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[i].apply(r,l)}}function sf(){this.s=this.s,this.o=this.o}var oS={};sf.prototype.s=!1,sf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,iS)&&n[iS]||(n[iS]=++CR)}(this);delete oS[n]}},sf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sS=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},SR=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let o=0;o<r;o++)o in i&&e.call(t,i[o],o,n)};function WE(n){return Array.prototype.concat.apply([],arguments)}function zE(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function d_(n){return/^[\s\xa0]*$/.test(n)}var ms,$E=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function fo(n,e){return-1!=n.indexOf(e)}function P1(n,e){return n<e?-1:n>e?1:0}e:{var uS=pn.navigator;if(uS){var cS=uS.userAgent;if(cS){ms=cS;break e}}ms=""}function lS(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function TR(n){const e={};for(const t in n)e[t]=n[t];return e}var DR="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qE(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<DR.length;o++)t=DR[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function f_(n){return f_[" "](n),n}f_[" "]=Da;var a0,RR=fo(ms,"Opera"),s0=fo(ms,"Trident")||fo(ms,"MSIE"),dS=fo(ms,"Edge"),h_=dS||s0,NR=fo(ms,"Gecko")&&!(fo(ms.toLowerCase(),"webkit")&&!fo(ms,"Edge"))&&!(fo(ms,"Trident")||fo(ms,"MSIE"))&&!fo(ms,"Edge"),QM=fo(ms.toLowerCase(),"webkit")&&!fo(ms,"Edge");function fS(){var n=pn.document;return n?n.documentMode:void 0}e:{var Xi="",hS=function(){var n=ms;return NR?/rv:([^\);]+)(\)|;)/.exec(n):dS?/Edge\/([\d\.]+)/.exec(n):s0?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):QM?/WebKit\/(\S+)/.exec(n):RR?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(hS&&(Xi=hS?hS[1]:""),s0){var p_=fS();if(null!=p_&&p_>parseFloat(Xi)){a0=String(p_);break e}}a0=Xi}var pS={};function PR(){return e=pS,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=$E(String(a0)).split("."),t=$E("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",o=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=P1(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||P1(0==i[2].length,0==o[2].length)||P1(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n}();var e}var MR=pn.document&&s0&&(fS()||parseInt(a0,10))||void 0,mS=function(){if(!pn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{pn.addEventListener("test",Da,e),pn.removeEventListener("test",Da,e)}catch(t){}return n}();function Di(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function c0(n,e){if(Di.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(NR){e:{try{f_(e.nodeName);var i=!0;break e}catch(o){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ZE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&c0.Z.h.call(this)}}Di.prototype.h=function(){this.defaultPrevented=!0},wo(c0,Di);var ZE={2:"touch",3:"pen",4:"mouse"};c0.prototype.h=function(){c0.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var yh="closure_listenable_"+(1e6*Math.random()|0),FR=0;function g_(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++FR,this.ca=this.fa=!1}function m_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function l0(n){this.src=n,this.g={},this.h=0}function v_(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=sS(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(m_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Qi(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ca&&o.listener==e&&o.capture==!!t&&o.ia==r)return i}return-1}l0.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var l=Qi(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new g_(e,this.src,o,!!r,i)).fa=t,n.push(e)),e};var vS="closure_lm_"+(1e6*Math.random()|0),KE={};function _S(n,e,t,r,i){if(r&&r.once)return yS(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)_S(n,e[o],t,r,i);return null}return t=QE(t),n&&n[yh]?n.N(e,t,c_(r)?!!r.capture:!!r,i):kR(n,e,t,!1,r,i)}function kR(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var l=c_(i)?!!i.capture:!!i,g=YE(n);if(g||(n[vS]=g=new l0(n)),(t=g.add(e,t,r,l,o)).proxy)return t;if(r=function(){var e=VR;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)mS||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(BR(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function yS(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)yS(n,e[o],t,r,i);return null}return t=QE(t),n&&n[yh]?n.O(e,t,c_(r)?!!r.capture:!!r,i):kR(n,e,t,!0,r,i)}function LR(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)LR(n,e[o],t,r,i);else r=c_(r)?!!r.capture:!!r,t=QE(t),n&&n[yh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Qi(o=n.g[e],t,r,i))&&(m_(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=YE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Qi(e,t,r,i)),(t=-1<n?e[n]:null)&&xS(t))}function xS(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[yh])v_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(BR(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=YE(e))?(v_(t,n),0==t.h&&(t.src=null,e[vS]=null)):m_(n)}}}function BR(n){return n in KE?KE[n]:KE[n]="on"+n}function VR(n,e){if(n.ca)n=!0;else{e=new c0(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&xS(n),n=t.call(r,e)}return n}function YE(n){return(n=n[vS])instanceof l0?n:null}var XE="__closure_events_fn_"+(1e9*Math.random()>>>0);function QE(n){return"function"==typeof n?n:(n[XE]||(n[XE]=function(e){return n.handleEvent(e)}),n[XE])}function Eo(){sf.call(this),this.i=new l0(this),this.P=this,this.I=null}function vs(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Di(e,n);else if(e instanceof Di)e.target=e.target||n;else{var i=e;qE(e=new Di(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var l=e.g=t[o];i=y_(l,r,!0,e)&&i}if(i=y_(l=e.g=n,r,!0,e)&&i,i=y_(l,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=y_(l=e.g=t[o],r,!1,e)&&i}function y_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.ca&&l.capture==t){var g=l.listener,_=l.ia||l.src;l.fa&&v_(n.i,l),i=!1!==g.call(_,r)&&i}}return i&&!r.defaultPrevented}wo(Eo,sf),Eo.prototype[yh]=!0,Eo.prototype.removeEventListener=function(n,e,t,r){LR(this,n,e,t,r)},Eo.prototype.M=function(){if(Eo.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)m_(t[r]);delete n.g[e],n.h--}}this.I=null},Eo.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Eo.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var JE=pn.JSON.stringify;function UR(){var n=wS;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var t2,HR=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new jR,n=>n.reset());class jR{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function GR(n){pn.setTimeout(()=>{throw n},0)}function e2(n,e){t2||function(){var n=pn.Promise.resolve(void 0);t2=function(){n.then(zR)}}(),eu||(t2(),eu=!0),wS.add(n,e)}var eu=!1,wS=new class{constructor(){this.h=this.g=null}add(e,t){const r=HR.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function zR(){for(var n;n=UR();){try{n.h.call(n.g)}catch(t){GR(t)}var e=HR;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}eu=!1}function x_(n,e){Eo.call(this),this.h=n||1,this.g=e||pn,this.j=gs(this.kb,this),this.l=Date.now()}function n2(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function ES(n,e,t){if("function"==typeof n)t&&(n=gs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=gs(n.handleEvent,n)}return 2147483647<Number(e)?-1:pn.setTimeout(n,e||0)}function CS(n){n.g=ES(()=>{n.g=null,n.i&&(n.i=!1,CS(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}wo(x_,Eo),(bt=x_.prototype).da=!1,bt.S=null,bt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),vs(this,"tick"),this.da&&(n2(this),this.start()))}},bt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bt.M=function(){x_.Z.M.call(this),n2(this),delete this.g};class $R extends sf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:CS(this)}M(){super.M(),this.g&&(pn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function M1(n){sf.call(this),this.h=n,this.g={}}wo(M1,sf);var d0=[];function r2(n,e,t,r){Array.isArray(t)||(t&&(d0[0]=t.toString()),t=d0);for(var i=0;i<t.length;i++){var o=_S(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function qR(n){lS(n.g,function(e,t){this.g.hasOwnProperty(t)&&xS(e)},n),n.g={}}function w_(){this.g=!0}function F1(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var l=1;l<i.length;l++)i[l]=""}}}return JE(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}M1.prototype.M=function(){M1.Z.M.call(this),qR(this)},M1.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},w_.prototype.Aa=function(){this.g=!1},w_.prototype.info=function(){};var xh={},AS=null;function o2(){return AS=AS||new Eo}function IS(n){Di.call(this,xh.Ma,n)}function k1(n){const e=o2();vs(e,new IS(e,n))}function bS(n,e){Di.call(this,xh.STAT_EVENT,n),this.stat=e}function ei(n){const e=o2();vs(e,new bS(e,n))}function KR(n,e){Di.call(this,xh.Na,n),this.size=e}function f0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return pn.setTimeout(function(){n()},e)}xh.Ma="serverreachability",wo(IS,Di),xh.STAT_EVENT="statevent",wo(bS,Di),xh.Na="timingevent",wo(KR,Di);var E_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},s2={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function C_(){}function A_(){}C_.prototype.h=null;var p0,wh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function L1(){Di.call(this,"d")}function h0(){Di.call(this,"c")}function B1(){}function g0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new M1(this),this.P=YR,this.W=new x_(n=h_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new SS}function SS(){this.i=null,this.g="",this.h=!1}wo(L1,Di),wo(h0,Di),wo(B1,C_),B1.prototype.g=function(){return new XMLHttpRequest},B1.prototype.i=function(){return{}},p0=new B1;var YR=45e3,I_={},b_={};function u2(n,e,t){n.K=1,n.v=O_(ud(e)),n.s=t,n.U=!0,TS(n,null)}function TS(n,e){n.F=Date.now(),sd(n),n.A=ud(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),MS(t.h,"t",r),n.C=0,t=n.l.H,n.h=new SS,n.g=V_(n.l,t?e:null,!n.s),0<n.O&&(n.L=new $R(gs(n.Ia,n,n.g),n.O)),r2(n.V,n.g,"readystatechange",n.gb),e=n.H?TR(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),k1(1),function(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var l="",g=o.split("&"),_=0;_<g.length;_++){var C=g[_].split("=");if(1<C.length){var D=C[0];C=C[1];var O=D.split("_");l=2<=O.length&&"type"==O[1]?l+(D+"=")+C+"&":l+(D+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function S_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function DS(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Js(n,t),i==b_){4==e&&(n.o=4,ei(14),r=!1),F1(n.j,n.m,null,"[Incomplete Response]");break}if(i==I_){n.o=4,ei(15),F1(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}F1(n.j,n.m,i,null),T_(n,i)}S_(n)&&i!=b_&&i!=I_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ei(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ih(e),e.L=!0,ei(11))):(F1(n.j,n.m,t,"[Invalid Chunked Response]"),ad(n),af(n))}function Js(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?b_:(t=Number(e.substring(t,r)),isNaN(t)?I_:(r+=1)+t>e.length?b_:(e=e.substr(r,t),n.C=r+t,e))}function sd(n){n.Y=Date.now()+n.P,V1(n,n.P)}function V1(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=f0(gs(n.eb,n),e)}function U1(n){n.B&&(pn.clearTimeout(n.B),n.B=null)}function af(n){0==n.l.G||n.I||Sh(n.l,n)}function ad(n){U1(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,n2(n.W),qR(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function T_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||R_(t.i,n)))if(t.I=n.N,!n.J&&R_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=f0(gs(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;dd(t),ye(t)}Oa(t),ei(18)}if(1>=BS(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else fd(t,11)}else if((n.J||t.g==n)&&dd(t),!d_(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let C=i[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const D=C[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const O=C[4];null!=O&&(t.za=O,t.h.info("SVER="+t.za));const M=C[5];null!=M&&"number"==typeof M&&0<M&&(t.K=r=1.5*M,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const G=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var o=r.i;!o.g&&(fo(G,"spdy")||fo(G,"quic")||fo(G,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(ld(o,o.h),o.h=null))}if(r.D){const $=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;$&&(r.sa=$,ii(r.F,r.D,$))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=B_(r,r.H?r.la:null,r.W),l.J){N_(r.i,l);var g=l,_=r.K;_&&g.setTimeout(_),g.B&&(U1(g),sd(g)),r.g=l}else Ji(r);0<t.l.length&&ut(t)}else"stop"!=C[0]&&"close"!=C[0]||fd(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?fd(t,7):le(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}k1(4)}catch(C){}}function c2(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(GE(n)||"string"==typeof n)SR(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(GE(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;i=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(GE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}}function m0(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof m0)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function l2(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Eh(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Eh(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Eh(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(bt=g0.prototype).setTimeout=function(n){this.P=n},bt.gb=function(n){n=n.target;const e=this.L;e&&3==N(n)?e.l():this.Ia(n)},bt.Ia=function(n){try{if(n==this.g)e:{const D=N(this.g);var e=this.g.Da();const O=this.g.ba();if(!(3>D)&&(3!=D||h_||this.g&&(this.h.h||this.g.ga()||F(this.g)))){this.I||4!=D||7==e||k1(8==e||0>=O?3:2),U1(this);var t=this.g.ba();this.N=t;t:if(S_(this)){var r=F(this.g);n="";var i=r.length,o=4==N(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ad(this),af(this);var l="";break t}this.h.i=new pn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function(n,e,t,r,i,o,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+l})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!d_(g)){var C=g;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,ei(12),ad(this),af(this);break e}F1(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,T_(this,t)}this.U?(DS(this,D,l),h_&&this.i&&3==D&&(r2(this.V,this.W,"tick",this.fb),this.W.start())):(F1(this.j,this.m,l,null),T_(this,l)),4==D&&ad(this),this.i&&!this.I&&(4==D?Sh(this.l,this):(this.i=!1,sd(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ei(12)):(this.o=0,ei(13)),ad(this),af(this)}}}catch(D){}},bt.fb=function(){if(this.g){var n=N(this.g),e=this.g.ga();this.C<e.length&&(U1(this),DS(this,n,e),this.i&&4!=n&&sd(this))}},bt.cancel=function(){this.I=!0,ad(this)},bt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(k1(3),ei(17)),ad(this),this.o=2,af(this)):V1(this,this.Y-n)},(bt=m0.prototype).R=function(){l2(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},bt.T=function(){return l2(this),this.g.concat()},bt.get=function(n,e){return Eh(this.h,n)?this.h[n]:e},bt.set=function(n,e){Eh(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},bt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],o=this.get(i);n.call(e,o,i,this)}};var d2=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ch(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ch){this.g=void 0!==e?e:n.g,Sc(this,n.j),this.s=n.s,uf(this,n.i),v0(this,n.m),this.l=n.l,e=n.h;var t=new cf;t.i=e.i,e.g&&(t.g=new m0(e.g),t.h=e.h),OS(this,t),this.o=n.o}else n&&(t=String(n).match(d2))?(this.g=!!e,Sc(this,t[1]||"",!0),this.s=_0(t[2]||""),uf(this,t[3]||"",!0),v0(this,t[4]),this.l=_0(t[5]||"",!0),OS(this,t[6]||"",!0),this.o=_0(t[7]||"")):(this.g=!!e,this.h=new cf(null,this.g))}function ud(n){return new Ch(n)}function Sc(n,e,t){n.j=t?_0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function uf(n,e,t){n.i=t?_0(e,!0):e}function v0(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function OS(n,e,t){e instanceof cf?(n.h=e,function(n,e){e&&!n.j&&(tu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(NS(this,r),MS(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=y0(e,H1)),n.h=new cf(e,n.g))}function ii(n,e,t){n.h.set(e,t)}function O_(n){return ii(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function y0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,JR),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function JR(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ch.prototype.toString=function(){var n=[],e=this.j;e&&n.push(y0(e,RS,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(y0(e,RS,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(y0(t,"/"==t.charAt(0)?cd:eN,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",y0(t,x0)),n.join("")};var RS=/[#\/\?@]/g,eN=/[#\?:]/g,cd=/[#\?]/g,H1=/[#\?@]/g,x0=/#/g;function cf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function tu(n){n.g||(n.g=new m0,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function NS(n,e){tu(n),e=Ah(n,e),Eh(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Eh((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&l2(n)))}function PS(n,e){return tu(n),e=Ah(n,e),Eh(n.g.h,e)}function MS(n,e,t){NS(n,e),0<t.length&&(n.i=null,n.g.set(Ah(n,e),zE(t)),n.h+=t.length)}function Ah(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function h2(n){this.l=n||p2,n=pn.PerformanceNavigationTiming?0<(n=pn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(pn.g&&pn.g.Ea&&pn.g.Ea()&&pn.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(bt=cf.prototype).add=function(n,e){tu(this),this.i=null,n=Ah(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},bt.forEach=function(n,e){tu(this),this.g.forEach(function(t,r){SR(t,function(i){n.call(e,i,r,this)},this)},this)},bt.T=function(){tu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],o=0;o<i.length;o++)t.push(e[r]);return t},bt.R=function(n){tu(this);var e=[];if("string"==typeof n)PS(this,n)&&(e=WE(e,this.g.get(Ah(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=WE(e,n[t])}return e},bt.set=function(n,e){return tu(this),this.i=null,PS(this,n=Ah(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},bt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},bt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var l=i;""!==r[o]&&(l+="="+encodeURIComponent(String(r[o]))),n.push(l)}}return this.i=n.join("&")};var p2=10;function LS(n){return!!n.h||!!n.g&&n.g.size>=n.j}function BS(n){return n.h?1:n.g?n.g.size:0}function R_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ld(n,e){n.g?n.g.add(e):n.h=e}function N_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function VS(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return zE(n.i)}function g2(){}function n4(){this.g=new g2}function r4(n,e,t){const r=t||"";try{c2(n,function(i,o){let l=i;c_(i)&&(l=JE(i)),e.push(r+o+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function m2(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function j1(n){this.l=n.$b||null,this.j=n.ib||!1}function P_(n,e){Eo.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=US,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}h2.prototype.cancel=function(){if(this.i=VS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},g2.prototype.stringify=function(n){return pn.JSON.stringify(n,void 0)},g2.prototype.parse=function(n){return pn.JSON.parse(n,void 0)},wo(j1,C_),j1.prototype.g=function(){return new P_(this.l,this.j)},j1.prototype.i=function(n){return function(){return n}}({}),wo(P_,Eo);var US=0;function tN(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function M_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,F_(n)}function F_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(bt=P_.prototype).open=function(n,e){if(this.readyState!=US)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,F_(this)},bt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||pn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},bt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,M_(this)),this.readyState=US},bt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,F_(this)),this.g&&(this.readyState=3,F_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==pn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tN(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},bt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?M_(this):F_(this),3==this.readyState&&tN(this)}},bt.Ua=function(n){this.g&&(this.response=this.responseText=n,M_(this))},bt.Ta=function(n){this.g&&(this.response=n,M_(this))},bt.ha=function(){this.g&&M_(this)},bt.setRequestHeader=function(n,e){this.v.append(n,e)},bt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},bt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(P_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var nN=pn.JSON.parse;function ho(n){Eo.call(this),this.headers=new m0,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rN,this.K=this.L=!1}wo(ho,Eo);var rN="",o4=/^https?$/i,s4=["POST","PUT"];function a(n){return"content-type"==n.toLowerCase()}function d(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,v(n),E(n)}function v(n){n.D||(n.D=!0,vs(n,"complete"),vs(n,"error"))}function y(n){if(n.h&&void 0!==N1&&(!n.C[1]||4!=N(n)||2!=n.ba()))if(n.v&&4==N(n))ES(n.Fa,0,n);else if(vs(n,"readystatechange"),4==N(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var i=String(n.H).match(d2)[1]||null;if(!i&&pn.self&&pn.self.location){var o=pn.self.location.protocol;i=o.substr(0,o.length-1)}r=!o4.test(i?i.toLowerCase():"")}t=r}if(t)vs(n,"complete"),vs(n,"success");else{n.m=6;try{var l=2<N(n)?n.g.statusText:""}catch(_){l=""}n.j=l+" ["+n.ba()+"]",v(n)}}finally{E(n)}}}function E(n,e){if(n.g){T(n);const t=n.g,r=n.C[0]?Da:null;n.g=null,n.C=null,e||vs(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function T(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(pn.clearTimeout(n.A),n.A=null)}function N(n){return n.g?n.g.readyState:0}function F(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case rN:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function W(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return lS(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ii(n,e,t))}function Z(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function X(n){this.za=0,this.l=[],this.h=new w_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Z("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Z("baseRetryDelayMs",5e3,n),this.$a=Z("retryDelaySeedMs",1e4,n),this.Ya=Z("forwardChannelMaxRetries",2,n),this.ra=Z("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new h2(n&&n.concurrentRequestLimit),this.Ca=new n4,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function le(n){if(He(n),3==n.G){var e=n.V++,t=ud(n.F);ii(t,"SID",n.J),ii(t,"RID",e),ii(t,"TYPE","terminate"),Jt(n,t),(e=new g0(n,n.h,e,void 0)).K=2,e.v=O_(ud(t)),t=!1,pn.navigator&&pn.navigator.sendBeacon&&(t=pn.navigator.sendBeacon(e.v.toString(),"")),!t&&pn.Image&&((new Image).src=e.v,t=!0),t||(e.g=V_(e.l,null),e.g.ea(e.v)),e.F=Date.now(),sd(e)}L_(n)}function ye(n){n.g&&(Ih(n),n.g.cancel(),n.g=null)}function He(n){ye(n),n.u&&(pn.clearTimeout(n.u),n.u=null),dd(n),n.i.cancel(),n.m&&("number"==typeof n.m&&pn.clearTimeout(n.m),n.m=null)}function be(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&ut(n)}function ut(n){LS(n.i)||n.m||(n.m=!0,e2(n.Ha,n),n.C=0)}function Lt(n,e){var t;t=e?e.m:n.V++;const r=ud(n.F);ii(r,"SID",n.J),ii(r,"RID",t),ii(r,"AID",n.U),Jt(n,r),n.o&&n.s&&W(r,n.o,n.s),t=new g0(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=On(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),ld(n.i,t),u2(t,r,e)}function Jt(n,e){n.j&&c2({},function(t,r){ii(e,r,t)})}function On(n,e,t){t=Math.min(n.l.length,t);var r=n.j?gs(n.j.Oa,n.j,n):null;e:{var i=n.l;let o=-1;for(;;){const l=["count="+t];-1==o?0<t?(o=i[0].h,l.push("ofs="+o)):o=0:l.push("ofs="+o);let g=!0;for(let _=0;_<t;_++){let C=i[_].h;const D=i[_].g;if(C-=o,0>C)o=Math.max(0,i[_].h-100),g=!1;else try{r4(D,l,"req"+C+"_")}catch(O){r&&r(D)}}if(g){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Ji(n){n.g||n.u||(n.Y=1,e2(n.Ga,n),n.A=0)}function Oa(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=f0(gs(n.Ga,n),k_(n,n.A)),n.A++,0))}function Ih(n){null!=n.B&&(pn.clearTimeout(n.B),n.B=null)}function bh(n){n.g=new g0(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ud(n.oa);ii(e,"RID","rpc"),ii(e,"SID",n.J),ii(e,"CI",n.N?"0":"1"),ii(e,"AID",n.U),Jt(n,e),ii(e,"TYPE","xmlhttp"),n.o&&n.s&&W(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=O_(ud(e)),t.s=null,t.U=!0,TS(t,n)}function dd(n){null!=n.v&&(pn.clearTimeout(n.v),n.v=null)}function Sh(n,e){var t=null;if(n.g==e){dd(n),Ih(n),n.g=null;var r=2}else{if(!R_(n.i,e))return;t=e.D,N_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;vs(r=o2(),new KR(r,t,e,i)),ut(n)}else Ji(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function(n,e){return!(BS(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=f0(gs(n.Ha,n,e),k_(n,n.C)),n.C++,0)))}(n,e)||2==r&&Oa(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:fd(n,5);break;case 4:fd(n,10);break;case 3:fd(n,6);break;default:fd(n,2)}}function k_(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function fd(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=gs(n.jb,n);t||(t=new Ch("//www.google.com/images/cleardot.gif"),pn.location&&"http"==pn.location.protocol||Sc(t,"https"),O_(t)),function(n,e){const t=new w_;if(pn.Image){const r=new Image;r.onload=l_(m2,t,r,"TestLoadImage: loaded",!0,e),r.onerror=l_(m2,t,r,"TestLoadImage: error",!1,e),r.onabort=l_(m2,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=l_(m2,t,r,"TestLoadImage: timeout",!1,e),pn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ei(2);n.G=0,n.j&&n.j.va(e),L_(n),He(n)}function L_(n){n.G=0,n.I=-1,n.j&&((0!=VS(n.i).length||0!=n.l.length)&&(n.i.i.length=0,zE(n.l),n.l.length=0),n.j.ua())}function B_(n,e,t){let r=function(n){return n instanceof Ch?ud(n):new Ch(n,void 0)}(t);if(""!=r.i)e&&uf(r,e+"."+r.i),v0(r,r.m);else{const i=pn.location;r=function(n,e,t,r){var i=new Ch(null,void 0);return n&&Sc(i,n),e&&uf(i,e),t&&v0(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&lS(n.aa,function(i,o){ii(r,o,i)}),t=n.sa,(e=n.D)&&t&&ii(r,e,t),ii(r,"VER",n.ma),Jt(n,r),r}function V_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ho(t&&n.Ba&&!n.qa?new j1({ib:!0}):n.qa)).L=n.H,e}function a4(){}function HS(){if(s0&&!(10<=Number(MR)))throw Error("Environmental error: no available transport.")}function Tc(n,e){Eo.call(this),this.g=new X(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!d_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!d_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new U_(this)}function u4(n){L1.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function c4(){h0.call(this),this.status=1}function U_(n){this.g=n}(bt=ho.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():p0.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:p0),this.g.onreadystatechange=gs(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void d(this,o)}n=t||"";const i=new m0(this.headers);r&&c2(r,function(o,l){i.set(l,o)}),r=function(n){e:{var e=a;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=pn.FormData&&n instanceof pn.FormData,!(0<=sS(s4,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,l){this.g.setRequestHeader(l,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{T(this),0<this.B&&((this.K=function(n){return s0&&PR()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gs(this.pa,this)):this.A=ES(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){d(this,o)}},bt.pa=function(){void 0!==N1&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vs(this,"timeout"),this.abort(8))},bt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vs(this,"complete"),vs(this,"abort"),E(this))},bt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),E(this,!0)),ho.Z.M.call(this)},bt.Fa=function(){this.s||(this.F||this.v||this.l?y(this):this.cb())},bt.cb=function(){y(this)},bt.ba=function(){try{return 2<N(this)?this.g.status:-1}catch(n){return-1}},bt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},bt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),nN(e)}},bt.Da=function(){return this.m},bt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(bt=X.prototype).ma=8,bt.G=1,bt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},bt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new g0(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=TR(o),qE(o,this.P)):o=this.P),null===this.o&&(i.H=o),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=On(this,i,e),ii(t=ud(this.F),"RID",n),ii(t,"CVER",22),this.D&&ii(t,"X-HTTP-Session-Id",this.D),Jt(this,t),this.o&&o&&W(t,this.o,o),ld(this.i,i),this.Ra&&ii(t,"TYPE","init"),this.ja?(ii(t,"$req",e),ii(t,"SID","null"),i.$=!0,u2(i,t,null)):u2(i,t,e),this.G=2}}else 3==this.G&&(n?Lt(this,n):0==this.l.length||LS(this.i)||Lt(this))},bt.Ga=function(){if(this.u=null,bh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=f0(gs(this.bb,this),n)}},bt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ei(10),ye(this),bh(this))},bt.ab=function(){null!=this.v&&(this.v=null,ye(this),Oa(this),ei(19))},bt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ei(2)):(this.h.info("Failed to ping google.com"),ei(1))},(bt=a4.prototype).xa=function(){},bt.wa=function(){},bt.va=function(){},bt.ua=function(){},bt.Oa=function(){},HS.prototype.g=function(n,e){return new Tc(n,e)},wo(Tc,Eo),Tc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),e2(gs(n.hb,n,e))),ei(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=B_(n,null,n.W),ut(n)},Tc.prototype.close=function(){le(this.g)},Tc.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,be(this.g,e)}else this.v?((e={}).__data__=JE(n),be(this.g,e)):be(this.g,n)},Tc.prototype.M=function(){this.g.j=null,delete this.j,le(this.g),delete this.g,Tc.Z.M.call(this)},wo(u4,L1),wo(c4,h0),wo(U_,a4),U_.prototype.xa=function(){vs(this.g,"a")},U_.prototype.wa=function(n){vs(this.g,new u4(n))},U_.prototype.va=function(n){vs(this.g,new c4(n))},U_.prototype.ua=function(){vs(this.g,"b")},HS.prototype.createWebChannel=HS.prototype.g,Tc.prototype.send=Tc.prototype.u,Tc.prototype.open=Tc.prototype.m,Tc.prototype.close=Tc.prototype.close,E_.NO_ERROR=0,E_.TIMEOUT=8,E_.HTTP_ERROR=6,s2.COMPLETE="complete",A_.EventType=wh,wh.OPEN="a",wh.CLOSE="b",wh.ERROR="c",wh.MESSAGE="d",Eo.prototype.listen=Eo.prototype.N,ho.prototype.listenOnce=ho.prototype.O,ho.prototype.getLastError=ho.prototype.La,ho.prototype.getLastErrorCode=ho.prototype.Da,ho.prototype.getStatus=ho.prototype.ba,ho.prototype.getResponseJson=ho.prototype.Qa,ho.prototype.getResponseText=ho.prototype.ga,ho.prototype.send=ho.prototype.ea;var oL=pl.createWebChannelTransport=function(){return new HS},sL=pl.getStatEventTarget=function(){return o2()},iN=pl.ErrorCode=E_,aL=pl.EventType=s2,uL=pl.Event=xh,l4=pl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},cL=pl.FetchXmlHttpFactory=j1,jS=pl.WebChannel=A_,lL=pl.XhrIo=ho;const d4="@firebase/firestore";class ea{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ea.UNAUTHENTICATED=new ea(null),ea.GOOGLE_CREDENTIALS=new ea("google-credentials-uid"),ea.FIRST_PARTY=new ea("first-party-uid"),ea.MOCK_USER=new ea("mock-user");let H_="9.1.3";const w0=new vo.Yd("@firebase/firestore");function oN(){return w0.logLevel}function vt(n,...e){if(w0.logLevel<=vo.in.DEBUG){const t=e.map(sN);w0.debug(`Firestore (${H_}): ${n}`,...t)}}function Co(n,...e){if(w0.logLevel<=vo.in.ERROR){const t=e.map(sN);w0.error(`Firestore (${H_}): ${n}`,...t)}}function v2(n,...e){if(w0.logLevel<=vo.in.WARN){const t=e.map(sN);w0.warn(`Firestore (${H_}): ${n}`,...t)}}function sN(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function zt(n="Unexpected state"){const e=`FIRESTORE (${H_}) INTERNAL ASSERTION FAILED: `+n;throw Co(e),new Error(e)}function hn(n,e){n||zt()}function wt(n,e){return n}const qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _s{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class f4{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class hL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ea.UNAUTHENTICATED))}shutdown(){}}class pL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gL{constructor(e){this.t=e,this.currentUser=ea.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=C=>this.i!==i?(i=this.i,t(C)):Promise.resolve();let l=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _s,e.enqueueRetryable(()=>o(this.currentUser))};const g=()=>{const C=l;e.enqueueRetryable((0,Ke.Z)(function*(){yield C.promise,yield o(r.currentUser)}))},_=C=>{vt("FirebaseCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(C=>_(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?_(C):(vt("FirebaseCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _s)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(vt("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(hn("string"==typeof r.accessToken),new f4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return hn(null===e||"string"==typeof e),new ea(e)}}class mL{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ea.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class vL{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new mL(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ea.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.g(r),this.p=r=>t.writeSequenceNumber(r))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function _L(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Dc.T=-1;class h4{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=_L(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function $n(n,e){return n<e?-1:n>e?1:0}function j_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function p4(n){return n+"\0"}class ys{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ct(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ct(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ct(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ct(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ys.fromMillis(Date.now())}static fromDate(e){return ys.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ys(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$n(this.nanoseconds,e.nanoseconds):$n(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class In{constructor(e){this.timestamp=e}static fromTimestamp(e){return new In(e)}static min(){return new In(new ys(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function g4(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function G1(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function m4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class _2{constructor(e,t,r){void 0===t?t=0:t>e.length&&zt(),void 0===r?r=e.length-t:r>e.length-t&&zt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===_2.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _2?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),l=t.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wr extends _2{construct(e,t,r){return new wr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ct(qe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new wr(t)}static emptyPath(){return new wr([])}}const yL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ta extends _2{construct(e,t,r){return new ta(e,t,r)}static isValidIdentifier(e){return yL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ta.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ta(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new ct(qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const g=e[i];if("\\"===g){if(i+1===e.length)throw new ct(qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new ct(qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===g?(l=!l,i++):"."!==g||l?(r+=g,i++):(o(),i++)}if(o(),l)throw new ct(qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ta(t)}static emptyPath(){return new ta([])}}class G_{constructor(e){this.fields=e,e.sort(ta.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return j_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class xs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new xs(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new xs(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $n(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xs.EMPTY_BYTE_STRING=new xs("");const wL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function E0(n){if(hn(!!n),"string"==typeof n){let e=0;const t=wL.exec(n);if(hn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ao(n.seconds),nanos:Ao(n.nanos)}}function Ao(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function W_(n){return"string"==typeof n?xs.fromBase64String(n):xs.fromUint8Array(n)}function aN(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function v4(n){const e=n.mapValue.fields.__previous_value__;return aN(e)?v4(e):e}function y2(n){const e=E0(n.mapValue.fields.__local_write_time__.timestampValue);return new ys(e.seconds,e.nanos)}function W1(n){return null==n}function GS(n){return 0===n&&1/n==-1/0}function _4(n){return"number"==typeof n&&Number.isInteger(n)&&!GS(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ut{constructor(e){this.path=e}static fromPath(e){return new Ut(wr.fromString(e))}static fromName(e){return new Ut(wr.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===wr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ut(new wr(e.slice()))}}function z1(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?aN(n)?4:10:zt()}function lf(n,e){const t=z1(n);if(t!==z1(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return y2(n).isEqual(y2(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=E0(r.timestampValue),l=E0(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,W_(n.bytesValue).isEqual(W_(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Ao(r.geoPointValue.latitude)===Ao(i.geoPointValue.latitude)&&Ao(r.geoPointValue.longitude)===Ao(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ao(r.integerValue)===Ao(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Ao(r.doubleValue),l=Ao(i.doubleValue);return o===l?GS(o)===GS(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return j_(n.arrayValue.values||[],e.arrayValue.values||[],lf);case 10:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(g4(o)!==g4(l))return!1;for(const g in o)if(o.hasOwnProperty(g)&&(void 0===l[g]||!lf(o[g],l[g])))return!1;return!0}(n,e);default:return zt()}var i}function x2(n,e){return void 0!==(n.values||[]).find(t=>lf(t,e))}function z_(n,e){const t=z1(n),r=z1(e);if(t!==r)return $n(t,r);switch(t){case 0:return 0;case 1:return $n(n.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ao(i.integerValue||i.doubleValue),g=Ao(o.integerValue||o.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return y4(n.timestampValue,e.timestampValue);case 4:return y4(y2(n),y2(e));case 5:return $n(n.stringValue,e.stringValue);case 6:return function(i,o){const l=W_(i),g=W_(o);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),g=o.split("/");for(let _=0;_<l.length&&_<g.length;_++){const C=$n(l[_],g[_]);if(0!==C)return C}return $n(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const l=$n(Ao(i.latitude),Ao(o.latitude));return 0!==l?l:$n(Ao(i.longitude),Ao(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const l=i.values||[],g=o.values||[];for(let _=0;_<l.length&&_<g.length;++_){const C=z_(l[_],g[_]);if(C)return C}return $n(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){const l=i.fields||{},g=Object.keys(l),_=o.fields||{},C=Object.keys(_);g.sort(),C.sort();for(let D=0;D<g.length&&D<C.length;++D){const O=$n(g[D],C[D]);if(0!==O)return O;const M=z_(l[g[D]],_[C[D]]);if(0!==M)return M}return $n(g.length,C.length)}(n.mapValue,e.mapValue);default:throw zt()}}function y4(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $n(n,e);const t=E0(n),r=E0(e),i=$n(t.seconds,r.seconds);return 0!==i?i:$n(t.nanos,r.nanos)}function uN(n){return cN(n)}function cN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=E0(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?W_(n.bytesValue).toBase64():"referenceValue"in n?Ut.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const l of r.values||[])o?o=!1:i+=",",i+=cN(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",l=!0;for(const g of i)l?l=!1:o+=",",o+=`${g}:${cN(r.fields[g])}`;return o+"}"}(n.mapValue):zt();var e}function WS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lN(n){return!!n&&"integerValue"in n}function dN(n){return!!n&&"arrayValue"in n}function x4(n){return!!n&&"nullValue"in n}function w4(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zS(n){return!!n&&"mapValue"in n}function w2(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return G1(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=w2(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=w2(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Ra{constructor(e){this.value=e}static empty(){return new Ra({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=w2(t)}setAll(e){let t=ta.emptyPath(),r={},i=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=g.popLast()}l?r[g.lastSegment()]=w2(l):i.push(g.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());zS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lf(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];zS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){G1(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ra(w2(this.value))}}function E4(n){const e=[];return G1(n.fields,(t,r)=>{const i=new ta([t]);if(zS(r)){const o=E4(r.mapValue).fields;if(0===o.length)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new G_(e)}class Oi{constructor(e,t,r,i,o){this.key=e,this.documentType=t,this.version=r,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Oi(e,0,In.min(),Ra.empty(),0)}static newFoundDocument(e,t,r){return new Oi(e,1,t,r,0)}static newNoDocument(e,t){return new Oi(e,2,t,Ra.empty(),0)}static newUnknownDocument(e,t){return new Oi(e,3,t,Ra.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ra.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ra.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Oi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Oi(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class EL{constructor(e,t=null,r=[],i=[],o=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=g,this.A=null}}function C4(n,e=null,t=[],r=[],i=null,o=null,l=null){return new EL(n,e,t,r,i,o,l)}function E2(n){const e=wt(n);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+uN(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),W1(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=ZS(e.startAt)),e.endAt&&(t+="|ub:",t+=ZS(e.endAt)),e.A=t}return e.A}function $S(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!NL(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!lf(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!b4(n.startAt,e.startAt)&&b4(n.endAt,e.endAt)}function qS(n){return Ut.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class nu extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,r):new IL(e,t,r):"array-contains"===t?new TL(e,r):"in"===t?new DL(e,r):"not-in"===t?new OL(e,r):"array-contains-any"===t?new RL(e,r):new nu(e,t,r)}static R(e,t,r){return"in"===t?new bL(e,r):new SL(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(z_(t,this.value)):null!==t&&z1(this.value)===z1(t)&&this.P(z_(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zt()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class IL extends nu{constructor(e,t,r){super(e,t,r),this.key=Ut.fromName(r.referenceValue)}matches(e){const t=Ut.comparator(e.key,this.key);return this.P(t)}}class bL extends nu{constructor(e,t){super(e,"in",t),this.keys=A4(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class SL extends nu{constructor(e,t){super(e,"not-in",t),this.keys=A4(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function A4(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ut.fromName(r.referenceValue))}class TL extends nu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dN(t)&&x2(t.arrayValue,this.value)}}class DL extends nu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&x2(this.value.arrayValue,t)}}class OL extends nu{constructor(e,t){super(e,"not-in",t)}matches(e){if(x2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!x2(this.value.arrayValue,t)}}class RL extends nu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dN(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>x2(this.value.arrayValue,r))}}class C2{constructor(e,t){this.position=e,this.before=t}}function ZS(n){return`${n.before?"b":"a"}:${n.position.map(e=>uN(e)).join(",")}`}class $_{constructor(e,t="asc"){this.field=e,this.dir=t}}function NL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function I4(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(r=o.field.isKeyField()?Ut.comparator(Ut.fromName(l.referenceValue),t.key):z_(l,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function b4(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!lf(n.position[t],e.position[t]))return!1;return!0}class Th{constructor(e,t=null,r=[],i=[],o=null,l="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=g,this.endAt=_,this.V=null,this.S=null}}function S4(n,e,t,r,i,o,l,g){return new Th(n,e,t,r,i,o,l,g)}function q_(n){return new Th(n)}function KS(n){return!W1(n.limit)&&"F"===n.limitType}function YS(n){return!W1(n.limit)&&"L"===n.limitType}function fN(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function hN(n){for(const e of n.filters)if(e.v())return e.field;return null}function pN(n){return null!==n.collectionGroup}function Z_(n){const e=wt(n);if(null===e.V){e.V=[];const t=hN(e),r=fN(e);if(null!==t&&null===r)t.isKeyField()||e.V.push(new $_(t)),e.V.push(new $_(ta.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.V.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new $_(ta.keyField(),o))}}}return e.V}function gl(n){const e=wt(n);if(!e.S)if("F"===e.limitType)e.S=C4(e.path,e.collectionGroup,Z_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of Z_(e))t.push(new $_(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new C2(e.endAt.position,!e.endAt.before):null,i=e.startAt?new C2(e.startAt.position,!e.startAt.before):null;e.S=C4(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.S}function T4(n,e,t){return new Th(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function A2(n,e){return $S(gl(n),gl(e))&&n.limitType===e.limitType}function D4(n){return`${E2(gl(n))}|lt:${n.limitType}`}function gN(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${uN(r.value)}`;var r}).join(", ")}]`),W1(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+ZS(n.startAt)),n.endAt&&(e+=", endAt: "+ZS(n.endAt)),`Target(${e})`}(gl(n))}; limitType=${n.limitType})`}function I2(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ut.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!I4(t.startAt,Z_(t),r)||t.endAt&&I4(t.endAt,Z_(t),r)));var t,r}function O4(n){return(e,t)=>{let r=!1;for(const i of Z_(n)){const o=PL(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function PL(n,e,t){const r=n.field.isKeyField()?Ut.comparator(e.key,t.key):function(i,o,l){const g=o.data.field(i),_=l.data.field(i);return null!==g&&null!==_?z_(g,_):zt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return zt()}}function R4(n,e){if(n.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:GS(e)?"-0":e}}function N4(n){return{integerValue:""+n}}function P4(n,e){return _4(e)?N4(e):R4(n,e)}class XS{constructor(){this._=void 0}}function ML(n,e,t){return n instanceof K_?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof $1?F4(n,e):n instanceof q1?k4(n,e):function(r,i){const o=M4(r,i),l=L4(o)+L4(r.C);return lN(o)&&lN(r.C)?N4(l):R4(r.N,l)}(n,e)}function FL(n,e,t){return n instanceof $1?F4(n,e):n instanceof q1?k4(n,e):t}function M4(n,e){return n instanceof Y_?lN(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class K_ extends XS{}class $1 extends XS{constructor(e){super(),this.elements=e}}function F4(n,e){const t=B4(e);for(const r of n.elements)t.some(i=>lf(i,r))||t.push(r);return{arrayValue:{values:t}}}class q1 extends XS{constructor(e){super(),this.elements=e}}function k4(n,e){let t=B4(e);for(const r of n.elements)t=t.filter(i=>!lf(i,r));return{arrayValue:{values:t}}}class Y_ extends XS{constructor(e,t){super(),this.N=e,this.C=t}}function L4(n){return Ao(n.integerValue||n.doubleValue)}function B4(n){return dN(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class b2{constructor(e,t){this.field=e,this.transform=t}}class LL{constructor(e,t){this.version=e,this.transformResults=t}}class Io{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Io}static exists(e){return new Io(void 0,e)}static updateTime(e){return new Io(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function QS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class JS{}function BL(n,e,t){n instanceof S2?function(r,i,o){const l=r.value.clone(),g=j4(r.fieldTransforms,i,o.transformResults);l.setAll(g),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof C0?function(r,i,o){if(!QS(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=j4(r.fieldTransforms,i,o.transformResults),g=i.data;g.setAll(H4(r)),g.setAll(l),i.convertToFoundDocument(o.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function mN(n,e,t){var i;n instanceof S2?function(r,i,o){if(!QS(r.precondition,i))return;const l=r.value.clone(),g=G4(r.fieldTransforms,o,i);l.setAll(g),i.convertToFoundDocument(U4(i),l).setHasLocalMutations()}(n,e,t):n instanceof C0?function(r,i,o){if(!QS(r.precondition,i))return;const l=G4(r.fieldTransforms,o,i),g=i.data;g.setAll(H4(r)),g.setAll(l),i.convertToFoundDocument(U4(i),g).setHasLocalMutations()}(n,e,t):QS(n.precondition,i=e)&&i.convertToNoDocument(In.min())}function VL(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=M4(r.transform,i||null);null!=o&&(null==t&&(t=Ra.empty()),t.set(r.field,o))}return t||null}function V4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&j_(t,r,(i,o)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof $1&&r instanceof $1||t instanceof q1&&r instanceof q1?j_(t.elements,r.elements,lf):t instanceof Y_&&r instanceof Y_?lf(t.C,r.C):t instanceof K_&&r instanceof K_);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function U4(n){return n.isFoundDocument()?n.version:In.min()}class S2 extends JS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class C0 extends JS{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}}function H4(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function j4(n,e,t){const r=new Map;hn(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,g=e.data.field(o.field);r.set(o.field,FL(l,g,t[i]))}return r}function G4(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,ML(o,l,e))}return r}class T2 extends JS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class vN extends JS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class UL{constructor(e){this.count=e}}var bo,tr;function W4(n){switch(n){default:return zt();case qe.CANCELLED:case qe.UNKNOWN:case qe.DEADLINE_EXCEEDED:case qe.RESOURCE_EXHAUSTED:case qe.INTERNAL:case qe.UNAVAILABLE:case qe.UNAUTHENTICATED:return!1;case qe.INVALID_ARGUMENT:case qe.NOT_FOUND:case qe.ALREADY_EXISTS:case qe.PERMISSION_DENIED:case qe.FAILED_PRECONDITION:case qe.ABORTED:case qe.OUT_OF_RANGE:case qe.UNIMPLEMENTED:case qe.DATA_LOSS:return!0}}function z4(n){if(void 0===n)return Co("GRPC error has no .code"),qe.UNKNOWN;switch(n){case bo.OK:return qe.OK;case bo.CANCELLED:return qe.CANCELLED;case bo.UNKNOWN:return qe.UNKNOWN;case bo.DEADLINE_EXCEEDED:return qe.DEADLINE_EXCEEDED;case bo.RESOURCE_EXHAUSTED:return qe.RESOURCE_EXHAUSTED;case bo.INTERNAL:return qe.INTERNAL;case bo.UNAVAILABLE:return qe.UNAVAILABLE;case bo.UNAUTHENTICATED:return qe.UNAUTHENTICATED;case bo.INVALID_ARGUMENT:return qe.INVALID_ARGUMENT;case bo.NOT_FOUND:return qe.NOT_FOUND;case bo.ALREADY_EXISTS:return qe.ALREADY_EXISTS;case bo.PERMISSION_DENIED:return qe.PERMISSION_DENIED;case bo.FAILED_PRECONDITION:return qe.FAILED_PRECONDITION;case bo.ABORTED:return qe.ABORTED;case bo.OUT_OF_RANGE:return qe.OUT_OF_RANGE;case bo.UNIMPLEMENTED:return qe.UNIMPLEMENTED;case bo.DATA_LOSS:return qe.DATA_LOSS;default:return zt()}}(tr=bo||(bo={}))[tr.OK=0]="OK",tr[tr.CANCELLED=1]="CANCELLED",tr[tr.UNKNOWN=2]="UNKNOWN",tr[tr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tr[tr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tr[tr.NOT_FOUND=5]="NOT_FOUND",tr[tr.ALREADY_EXISTS=6]="ALREADY_EXISTS",tr[tr.PERMISSION_DENIED=7]="PERMISSION_DENIED",tr[tr.UNAUTHENTICATED=16]="UNAUTHENTICATED",tr[tr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tr[tr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tr[tr.ABORTED=10]="ABORTED",tr[tr.OUT_OF_RANGE=11]="OUT_OF_RANGE",tr[tr.UNIMPLEMENTED=12]="UNIMPLEMENTED",tr[tr.INTERNAL=13]="INTERNAL",tr[tr.UNAVAILABLE=14]="UNAVAILABLE",tr[tr.DATA_LOSS=15]="DATA_LOSS";class Go{constructor(e,t){this.comparator=e,this.root=t||na.EMPTY}insert(e,t){return new Go(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,na.BLACK,null,null))}remove(e){return new Go(this.comparator,this.root.remove(e,this.comparator).copy(null,null,na.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eT(this.root,e,this.comparator,!1)}getReverseIterator(){return new eT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eT(this.root,e,this.comparator,!0)}}class eT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class na{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=null!=r?r:na.RED,this.left=null!=i?i:na.EMPTY,this.right=null!=o?o:na.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new na(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return na.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return na.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,na.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,na.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw zt();const e=this.left.check();if(e!==this.right.check())throw zt();return e+(this.isRed()?0:1)}}na.EMPTY=null,na.RED=!0,na.BLACK=!1,na.EMPTY=new class{constructor(){this.size=0}get key(){throw zt()}get value(){throw zt()}get color(){throw zt()}get left(){throw zt()}get right(){throw zt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new na(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class eo{constructor(e){this.comparator=e,this.data=new Go(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $4(this.data.getIterator())}getIteratorFrom(e){return new $4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new eo(this.comparator);return t.data=e,t}}class $4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const HL=new Go(Ut.comparator);function ml(){return HL}const jL=new Go(Ut.comparator);function _N(){return jL}const GL=new Go(Ut.comparator);function q4(){return GL}const WL=new eo(Ut.comparator);function Pr(...n){let e=WL;for(const t of n)e=e.add(t);return e}const zL=new eo($n);function tT(){return zL}class D2{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,O2.createSynthesizedTargetChangeForCurrentChange(e,t)),new D2(In.min(),r,tT(),ml(),Pr())}}class O2{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t){return new O2(xs.EMPTY_BYTE_STRING,t,Pr(),Pr(),Pr())}}class nT{constructor(e,t,r,i){this.k=e,this.removedTargetIds=t,this.key=r,this.$=i}}class Z4{constructor(e,t){this.targetId=e,this.O=t}}class K4{constructor(e,t,r=xs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Y4{constructor(){this.F=0,this.M=Q4(),this.L=xs.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=Pr(),t=Pr(),r=Pr();return this.M.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:zt()}}),new O2(this.L,this.B,e,t,r)}G(){this.U=!1,this.M=Q4()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class $L{constructor(e){this.tt=e,this.et=new Map,this.nt=ml(),this.st=X4(),this.it=new eo($n)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,t=>{const r=this.ut(t);switch(e.state){case 0:this.ht(t)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||this.removeTarget(t);break;case 3:this.ht(t)&&(r.Z(),r.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),r.j(e.resumeToken));break;default:zt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((r,i)=>{this.ht(i)&&t(i)})}ft(e){const t=e.targetId,r=e.O.count,i=this.dt(t);if(i){const o=i.target;if(qS(o))if(0===r){const l=new Ut(o.path);this.at(t,l,Oi.newNoDocument(l,In.min()))}else hn(1===r);else this.wt(t)!==r&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((o,l)=>{const g=this.dt(l);if(g){if(o.current&&qS(g.target)){const _=new Ut(g.target.path);null!==this.nt.get(_)||this.gt(l,_)||this.at(l,_,Oi.newNoDocument(_,e))}o.K&&(t.set(l,o.W()),o.G())}});let r=Pr();this.st.forEach((o,l)=>{let g=!0;l.forEachWhile(_=>{const C=this.dt(_);return!C||2===C.purpose||(g=!1,!1)}),g&&(r=r.add(o))});const i=new D2(e,t,this.it,this.nt,r);return this.nt=ml(),this.st=X4(),this.it=new eo($n),i}ot(e,t){if(!this.ht(e))return;const r=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,r),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,r){if(!this.ht(e))return;const i=this.ut(e);this.gt(e,t)?i.H(t,1):i.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),r&&(this.nt=this.nt.insert(t,r))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new Y4,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new eo($n),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||vt("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new Y4),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function X4(){return new Go(Ut.comparator)}function Q4(){return new Go(Ut.comparator)}const qL={asc:"ASCENDING",desc:"DESCENDING"},ZL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class KL{constructor(e,t){this.databaseId=e,this.D=t}}function R2(n,e){return n.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J4(n,e){return n.D?e.toBase64():e.toUint8Array()}function YL(n,e){return R2(n,e.toTimestamp())}function ws(n){return hn(!!n),In.fromTimestamp(function(e){const t=E0(e);return new ys(t.seconds,t.nanos)}(n))}function yN(n,e){return(t=n,new wr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function e6(n){const e=wr.fromString(n);return hn(f6(e)),e}function N2(n,e){return yN(n.databaseId,e.path)}function df(n,e){const t=e6(e);if(t.get(1)!==n.databaseId.projectId)throw new ct(qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ct(qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ut(n6(t))}function xN(n,e){return yN(n.databaseId,e)}function t6(n){const e=e6(n);return 4===e.length?wr.emptyPath():n6(e)}function P2(n){return new wr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function n6(n){return hn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function r6(n,e,t){return{name:N2(n,e),fields:t.value.mapValue.fields}}function i6(n,e,t){const r=df(n,e.name),i=ws(e.updateTime),o=new Ra({mapValue:{fields:e.fields}}),l=Oi.newFoundDocument(r,i,o);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function rT(n,e){let t;if(e instanceof S2)t={update:r6(n,e.key,e.value)};else if(e instanceof T2)t={delete:N2(n,e.key)};else if(e instanceof C0)t={update:r6(n,e.key,e.data),updateMask:o7(e.fieldMask)};else{if(!(e instanceof vN))return zt();t={verify:N2(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof K_)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof $1)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof q1)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Y_)return{fieldPath:o.field.canonicalString(),increment:l.C};throw zt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:YL(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:zt()),t;var i}function o6(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Io.updateTime(ws(i.updateTime)):void 0!==i.exists?Io.exists(i.exists):Io.none():Io.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,l){let g=null;"setToServerValue"in l?(hn("REQUEST_TIME"===l.setToServerValue),g=new K_):"appendMissingElements"in l?g=new $1(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new q1(l.removeAllFromArray.values||[]):"increment"in l?g=new Y_(o,l.increment):zt();const _=ta.fromServerFormat(l.fieldPath);return new b2(_,g)}(n,i)):[];var i;if(e.update){const i=df(n,e.update.name),o=new Ra({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new G_((e.updateMask.fieldPaths||[]).map(C=>ta.fromServerFormat(C)));return new C0(i,o,l,t,r)}return new S2(i,o,t,r)}if(e.delete){const i=df(n,e.delete);return new T2(i,t)}if(e.verify){const i=df(n,e.verify);return new vN(i,t)}return zt()}function s6(n,e){return{documents:[xN(n,e.path)]}}function a6(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=xN(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xN(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const _=g.map(C=>function(D){if("=="===D.op){if(w4(D.value))return{unaryFilter:{field:X_(D.field),op:"IS_NAN"}};if(x4(D.value))return{unaryFilter:{field:X_(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(w4(D.value))return{unaryFilter:{field:X_(D.field),op:"IS_NOT_NAN"}};if(x4(D.value))return{unaryFilter:{field:X_(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:X_(D.field),op:n7(D.op),value:D.value}}}(C));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(e.filters);i&&(t.structuredQuery.where=i);const o=function(g){if(0!==g.length)return g.map(_=>{return{field:X_((C=_).field),direction:t7(C.dir)};var C})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=(_=e.limit,n.D||W1(_)?_:{value:_});var _;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=l6(e.startAt)),e.endAt&&(t.structuredQuery.endAt=l6(e.endAt)),t}function u6(n){let e=t6(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){hn(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let o=[];t.where&&(o=c6(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new $_(Q_((O=D).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let g=null;t.limit&&(g=function(D){let O;return O="object"==typeof D?D.value:D,W1(O)?null:O}(t.limit));let _=null;t.startAt&&(_=d6(t.startAt));let C=null;return t.endAt&&(C=d6(t.endAt)),S4(e,i,l,o,g,"F",_,C)}function c6(n){return n?void 0!==n.unaryFilter?[i7(n)]:void 0!==n.fieldFilter?[r7(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>c6(e)).reduce((e,t)=>e.concat(t)):zt():[]}function l6(n){return{before:n.before,values:n.position}}function d6(n){return new C2(n.values||[],!!n.before)}function t7(n){return qL[n]}function n7(n){return ZL[n]}function X_(n){return{fieldPath:n.canonicalString()}}function Q_(n){return ta.fromServerFormat(n.fieldPath)}function r7(n){return nu.create(Q_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zt()}}(n.fieldFilter.op),n.fieldFilter.value)}function i7(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Q_(n.unaryFilter.field);return nu.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Q_(n.unaryFilter.field);return nu.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Q_(n.unaryFilter.field);return nu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Q_(n.unaryFilter.field);return nu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return zt()}}function o7(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function f6(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function hd(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=h6(e)),e=s7(n.get(t),e);return h6(e)}function s7(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function h6(n){return n+"\x01\x01"}function Dh(n){const e=n.length;if(hn(e>=2),2===e)return hn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),wr.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const l=n.indexOf("\x01",o);switch((l<0||l>t)&&zt(),n.charAt(l+1)){case"\x01":const g=n.substring(o,l);let _;0===i.length?_=g:(i+=g,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(o,l),i+="\0";break;case"\x11":i+=n.substring(o,l+1);break;default:zt()}o=l+2}return new wr(r)}class a7{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Oc{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Oc.store="owner",Oc.key="owner";class A0{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}A0.store="mutationQueues",A0.keyPath="userId";class mi{constructor(e,t,r,i,o){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=o}}mi.store="mutations",mi.keyPath="batchId",mi.userMutationsIndex="userMutationsIndex",mi.userMutationsKeyPath=["userId","batchId"];class Na{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,hd(t)]}static key(e,t,r){return[e,hd(t),r]}}Na.store="documentMutations",Na.PLACEHOLDER=new Na;class u7{constructor(e,t){this.path=e,this.readTime=t}}class c7{constructor(e,t){this.path=e,this.version=t}}class to{constructor(e,t,r,i,o,l){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=o,this.parentPath=l}}to.store="remoteDocuments",to.readTimeIndex="readTimeIndex",to.readTimeIndexPath="readTime",to.collectionReadTimeIndex="collectionReadTimeIndex",to.collectionReadTimeIndexPath=["parentPath","readTime"];class ff{constructor(e){this.byteSize=e}}ff.store="remoteDocumentGlobal",ff.key="remoteDocumentGlobalKey";class Bu{constructor(e,t,r,i,o,l,g){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=l,this.query=g}}Bu.store="targets",Bu.keyPath="targetId",Bu.queryTargetsIndexName="queryTargetsIndex",Bu.queryTargetsKeyPath=["canonicalId","targetId"];class ra{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}ra.store="targetDocuments",ra.keyPath=["targetId","path"],ra.documentTargetsIndex="documentTargetsIndex",ra.documentTargetsKeyPath=["path","targetId"];class Rc{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}Rc.key="targetGlobalKey",Rc.store="targetGlobal";class Z1{constructor(e,t){this.collectionId=e,this.parent=t}}Z1.store="collectionParents",Z1.keyPath=["collectionId","parent"];class Oh{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}Oh.store="clientMetadata",Oh.keyPath="clientId";class J_{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}J_.store="bundles",J_.keyPath="bundleId";class ey{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}ey.store="namedQueries",ey.keyPath="name";const l7=[A0.store,mi.store,Na.store,to.store,Bu.store,Oc.store,Rc.store,ra.store,Oh.store,ff.store,Z1.store,J_.store,ey.store],p6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class at{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new at((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof at?t:at.resolve(t)}catch(t){return at.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):at.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):at.reject(t)}static resolve(e){return new at((t,r)=>{t(e)})}static reject(e){return new at((t,r)=>{r(e)})}static waitFor(e){return new at((t,r)=>{let i=0,o=0,l=!1;e.forEach(g=>{++i,g.next(()=>{++o,l&&o===i&&t()},_=>r(_))}),l=!0,o===i&&t()})}static or(e){let t=at.resolve(!1);for(const r of e)t=t.next(i=>i?at.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}}class iT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new _s,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new M2(e,t.error)):this.Et.resolve()},this.transaction.onerror=r=>{const i=wN(r.target.error);this.Et.reject(new M2(e,i))}}static open(e,t,r,i){try{return new iT(t,e.transaction(i,r))}catch(o){throw new M2(t,o)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(vt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new f7(t)}}class pd{constructor(e,t,r){this.name=e,this.version=t,this.At=r,12.2===pd.Rt((0,Q.z$)())&&Co("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return vt("SimpleDb","Removing database:",e),Y1(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,Q.hl)())return!1;if(pd.Pt())return!0;const e=(0,Q.z$)(),t=pd.Rt(e),r=0<t&&t<10,i=pd.vt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Dt(e){var t=this;return(0,Ke.Z)(function*(){return t.db||(vt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=l=>{r(l.target.result)},o.onblocked=()=>{i(new M2(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const g=l.target.error;i("VersionError"===g.name?new ct(qe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new ct(qe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new M2(e,g))},o.onupgradeneeded=l=>{vt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.At.Ct(l.target.result,o.transaction,l.oldVersion,t.version).next(()=>{vt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=r=>t.Nt(r)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,Ke.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{o.db=yield o.Dt(e);const _=iT.open(o.db,e,l?"readonly":"readwrite",r),C=i(_).catch(D=>(_.abort(D),at.reject(D))).toPromise();return C.catch(()=>{}),yield _.It,C}catch(_){const C="FirebaseError"!==_.name&&g<3;if(vt("SimpleDb","Transaction failed with error:",_.message,"Retrying:",C),o.close(),!C)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class d7{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return Y1(this.kt.delete())}}class M2 extends ct{constructor(e,t){super(qe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function K1(n){return"IndexedDbTransactionError"===n.name}class f7{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(vt("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(vt("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Y1(r)}add(e){return vt("SimpleDb","ADD",this.store.name,e,e),Y1(this.store.add(e))}get(e){return Y1(this.store.get(e)).next(t=>(void 0===t&&(t=null),vt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return vt("SimpleDb","DELETE",this.store.name,e),Y1(this.store.delete(e))}count(){return vt("SimpleDb","COUNT",this.store.name),Y1(this.store.count())}Lt(e,t){const r=this.cursor(this.options(e,t)),i=[];return this.Bt(r,(o,l)=>{i.push(l)}).next(()=>i)}Ut(e,t){vt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.qt=!1;const i=this.cursor(r);return this.Bt(i,(o,l,g)=>g.delete())}Kt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Bt(i,t)}jt(e){const t=this.cursor({});return new at((r,i)=>{t.onerror=o=>{const l=wN(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}Bt(e,t){const r=[];return new at((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void i();const _=new d7(g),C=t(g.primaryKey,g.value,_);if(C instanceof at){const D=C.catch(O=>(_.done(),at.reject(O)));r.push(D)}_.isDone?i():null===_.Ft?g.continue():g.continue(_.Ft)}}).next(()=>at.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.qt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Y1(n){return new at((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=wN(r.target.error);t(i)}})}let m6=!1;function wN(n){const e=pd.Rt((0,Q.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ct("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return m6||(m6=!0,setTimeout(()=>{throw r},0)),r}}return n}class v6 extends g6{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Vu(n,e){const t=wt(n);return pd.St(t.Qt,e)}class EN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&BL(o,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&mN(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&mN(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(In.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pr())}isEqual(e){return this.batchId===e.batchId&&j_(this.mutations,e.mutations,(t,r)=>V4(t,r))&&j_(this.baseMutations,e.baseMutations,(t,r)=>V4(t,r))}}class CN{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){hn(e.mutations.length===r.length);let i=q4();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new CN(e,t,r,i)}}class I0{constructor(e,t,r,i,o=In.min(),l=In.min(),g=xs.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g}withSequenceNumber(e){return new I0(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new I0(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new I0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class _6{constructor(e){this.Wt=e}}function AN(n,e){if(e.document)return i6(n.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=Ut.fromSegments(e.noDocument.path),r=ny(e.noDocument.readTime),i=Oi.newNoDocument(t,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){const t=Ut.fromSegments(e.unknownDocument.path),r=ny(e.unknownDocument.version);return Oi.newUnknownDocument(t,r)}return zt()}function y6(n,e,t){const r=IN(t),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){const o={name:N2(g=n.Wt,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:R2(g,_.version.toTimestamp())};return new to(null,null,o,e.hasCommittedMutations,r,i)}var g,_;if(e.isNoDocument()){const o=e.key.path.toArray(),l=ty(e.version),g=e.hasCommittedMutations;return new to(null,new u7(o,l),null,g,r,i)}if(e.isUnknownDocument()){const o=e.key.path.toArray(),l=ty(e.version);return new to(new c7(o,l),null,null,!0,r,i)}return zt()}function IN(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function x6(n){const e=new ys(n[0],n[1]);return In.fromTimestamp(e)}function ty(n){const e=n.toTimestamp();return new a7(e.seconds,e.nanoseconds)}function ny(n){const e=new ys(n.seconds,n.nanoseconds);return In.fromTimestamp(e)}function ry(n,e){const t=(e.baseMutations||[]).map(o=>o6(n.Wt,o));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(l.updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o)}const r=e.mutations.map(o=>o6(n.Wt,o)),i=ys.fromMillis(e.localWriteTimeMs);return new EN(e.batchId,i,t,r)}function F2(n){const e=ny(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ny(n.lastLimboFreeSnapshotVersion):In.min();let r;var i;return void 0!==n.query.documents?(hn(1===(i=n.query).documents.length),r=gl(q_(t6(i.documents[0])))):r=gl(u6(n.query)),new I0(r,n.targetId,0,n.lastListenSequenceNumber,e,t,xs.fromBase64String(n.resumeToken))}function w6(n,e){const t=ty(e.snapshotVersion),r=ty(e.lastLimboFreeSnapshotVersion);let i;i=qS(e.target)?s6(n.Wt,e.target):a6(n.Wt,e.target);const o=e.resumeToken.toBase64();return new Bu(e.targetId,E2(e.target),t,o,e.sequenceNumber,r,i)}function bN(n){const e=u6({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?T4(e,e.limit,"L"):e}class h7{getBundleMetadata(e,t){return E6(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ny(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return E6(e).put({bundleId:(r=t).id,createTime:ty(ws(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return C6(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:bN(i.bundledQuery),readTime:ny(i.readTime)};var i})}saveNamedQuery(e,t){return C6(e).put({name:(r=t).name,readTime:ty(ws(r.readTime)),bundledQuery:r.bundledQuery});var r}}function E6(n){return Vu(n,J_.store)}function C6(n){return Vu(n,ey.store)}class p7{constructor(){this.Gt=new SN}addToCollectionParentIndex(e,t){return this.Gt.add(t),at.resolve()}getCollectionParents(e,t){return at.resolve(this.Gt.getEntries(t))}}class SN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new eo(wr.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new eo(wr.comparator)).toArray()}}class g7{constructor(){this.zt=new SN}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const o={collectionId:r,parent:hd(i)};return A6(e).put(o)}return at.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[p4(t),""],!1,!0);return A6(e).Lt(i).next(o=>{for(const l of o){if(l.collectionId!==t)break;r.push(Dh(l.parent))}return r})}}function A6(n){return Vu(n,Z1.store)}const I6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Uu{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Uu(e,Uu.DEFAULT_COLLECTION_PERCENTILE,Uu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function b6(n,e,t){const r=n.store(mi.store),i=n.store(Na.store),o=[],l=IDBKeyRange.only(t.batchId);let g=0;const _=r.Kt({range:l},(D,O,M)=>(g++,M.delete()));o.push(_.next(()=>{hn(1===g)}));const C=[];for(const D of t.mutations){const O=Na.key(e,D.key.path,t.batchId);o.push(i.delete(O)),C.push(D.key)}return at.waitFor(o).next(()=>C)}function oT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw zt();e=n.noDocument}return JSON.stringify(e).length}Uu.DEFAULT_COLLECTION_PERCENTILE=10,Uu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uu.DEFAULT=new Uu(41943040,Uu.DEFAULT_COLLECTION_PERCENTILE,Uu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uu.DISABLED=new Uu(-1,0,0);class TN{constructor(e,t,r,i){this.userId=e,this.N=t,this.Ht=r,this.referenceDelegate=i,this.Jt={}}static Yt(e,t,r,i){hn(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new TN(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return b0(e).Kt({index:mi.userMutationsIndex,range:r},(i,o,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=iy(e),l=b0(e);return l.add({}).next(g=>{hn("number"==typeof g);const _=new EN(g,t,r,i),C=function(M,B,G){const $=G.baseMutations.map(ce=>rT(M.Wt,ce)),ie=G.mutations.map(ce=>rT(M.Wt,ce));return new mi(B,G.batchId,G.localWriteTime.toMillis(),$,ie)}(this.N,this.userId,_),D=[];let O=new eo((M,B)=>$n(M.canonicalString(),B.canonicalString()));for(const M of i){const B=Na.key(this.userId,M.key.path,g);O=O.add(M.key.path.popLast()),D.push(l.put(C)),D.push(o.put(B,Na.PLACEHOLDER))}return O.forEach(M=>{D.push(this.Ht.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.Jt[g]=_.keys()}),at.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return b0(e).get(t).next(r=>r?(hn(r.userId===this.userId),ry(this.N,r)):null)}Xt(e,t){return this.Jt[t]?at.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Jt[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return b0(e).Kt({index:mi.userMutationsIndex,range:i},(l,g,_)=>{g.userId===this.userId&&(hn(g.batchId>=r),o=ry(this.N,g)),_.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return b0(e).Kt({index:mi.userMutationsIndex,range:t,reverse:!0},(i,o,l)=>{r=o.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return b0(e).Lt(mi.userMutationsIndex,t).next(r=>r.map(i=>ry(this.N,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Na.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return iy(e).Kt({range:i},(l,g,_)=>{const[C,D,O]=l,M=Dh(D);if(C===this.userId&&t.path.isEqual(M))return b0(e).get(O).next(B=>{if(!B)throw zt();hn(B.userId===this.userId),o.push(ry(this.N,B))});_.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new eo($n);const i=[];return t.forEach(o=>{const l=Na.prefixForPath(this.userId,o.path),g=IDBKeyRange.lowerBound(l),_=iy(e).Kt({range:g},(C,D,O)=>{const[M,B,G]=C,$=Dh(B);M===this.userId&&o.path.isEqual($)?r=r.add(G):O.done()});i.push(_)}),at.waitFor(i).next(()=>this.Zt(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Na.prefixForPath(this.userId,r),l=IDBKeyRange.lowerBound(o);let g=new eo($n);return iy(e).Kt({range:l},(_,C,D)=>{const[O,M,B]=_,G=Dh(M);O===this.userId&&r.isPrefixOf(G)?G.length===i&&(g=g.add(B)):D.done()}).next(()=>this.Zt(e,g))}Zt(e,t){const r=[],i=[];return t.forEach(o=>{i.push(b0(e).get(o).next(l=>{if(null===l)throw zt();hn(l.userId===this.userId),r.push(ry(this.N,l))}))}),at.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return b6(e.Qt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),at.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return at.resolve();const r=IDBKeyRange.lowerBound(Na.prefixForUser(this.userId)),i=[];return iy(e).Kt({range:r},(o,l,g)=>{if(o[0]===this.userId){const _=Dh(o[1]);i.push(_)}else g.done()}).next(()=>{hn(0===i.length)})})}containsKey(e,t){return S6(e,this.userId,t)}ee(e){return T6(e).get(this.userId).next(t=>t||new A0(this.userId,-1,""))}}function S6(n,e,t){const r=Na.prefixForPath(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return iy(n).Kt({range:o,qt:!0},(g,_,C)=>{const[D,O,M]=g;D===e&&O===i&&(l=!0),C.done()}).next(()=>l)}function b0(n){return Vu(n,mi.store)}function iy(n){return Vu(n,Na.store)}function T6(n){return Vu(n,A0.store)}class X1{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new X1(0)}static ie(){return new X1(-1)}}class m7{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const r=new X1(t.highestTargetId);return t.highestTargetId=r.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(t=>In.fromTimestamp(new ys(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.re(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.oe(e,i)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.re(e).next(r=>(r.targetCount+=1,this.ce(t,r),this.oe(e,r))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oy(e).delete(t.targetId)).next(()=>this.re(e)).next(r=>(hn(r.targetCount>0),r.targetCount-=1,this.oe(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return oy(e).Kt((l,g)=>{const _=F2(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,o.push(this.removeTargetData(e,_)))}).next(()=>at.waitFor(o)).next(()=>i)}forEachTarget(e,t){return oy(e).Kt((r,i)=>{const o=F2(i);t(o)})}re(e){return D6(e).get(Rc.key).next(t=>(hn(null!==t),t))}oe(e,t){return D6(e).put(Rc.key,t)}ae(e,t){return oy(e).put(w6(this.N,t))}ce(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.re(e).next(t=>t.targetCount)}getTargetData(e,t){const r=E2(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return oy(e).Kt({range:i,index:Bu.queryTargetsIndexName},(l,g,_)=>{const C=F2(g);$S(t,C.target)&&(o=C,_.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=S0(e);return t.forEach(l=>{const g=hd(l.path);i.push(o.put(new ra(r,g))),i.push(this.referenceDelegate.addReference(e,r,l))}),at.waitFor(i)}removeMatchingKeys(e,t,r){const i=S0(e);return at.forEach(t,o=>{const l=hd(o.path);return at.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=S0(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=S0(e);let o=Pr();return i.Kt({range:r,qt:!0},(l,g,_)=>{const C=Dh(l[1]),D=new Ut(C);o=o.add(D)}).next(()=>o)}containsKey(e,t){const r=hd(t.path),i=IDBKeyRange.bound([r],[p4(r)],!1,!0);let o=0;return S0(e).Kt({index:ra.documentTargetsIndex,qt:!0,range:i},([l,g],_,C)=>{0!==l&&(o++,C.done())}).next(()=>o>0)}Tt(e,t){return oy(e).get(t).next(r=>r?F2(r):null)}}function oy(n){return Vu(n,Bu.store)}function D6(n){return Vu(n,Rc.store)}function S0(n){return Vu(n,ra.store)}function Q1(n){return DN.apply(this,arguments)}function DN(){return(DN=(0,Ke.Z)(function*(n){if(n.code!==qe.FAILED_PRECONDITION||n.message!==p6)throw n;vt("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function O6([n,e],[t,r]){const i=$n(n,t);return 0===i?$n(e,r):i}class v7{constructor(e){this.ue=e,this.buffer=new eo(O6),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();O6(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _7{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const r=this.de?3e5:6e4;vt("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ke.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){K1(i)?vt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Q1(i)}yield t._e(e)}))}}class y7{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return at.resolve(Dc.T);const r=new v7(t);return this.me.forEachTarget(e,i=>r.fe(i.sequenceNumber)).next(()=>this.me.ye(e,i=>r.fe(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.me.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(vt("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(I6)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),I6):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let r,i,o,l,g,_,C;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),i=this.params.maximumSequenceNumbersToCollect):i=O,l=Date.now(),this.nthSequenceNumber(e,i))).next(O=>(r=O,g=Date.now(),this.removeTargets(e,r,t))).next(O=>(o=O,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(C=Date.now(),oN()<=vo.in.DEBUG&&vt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(g-l)+`ms\n\tRemoved ${o} targets in `+(_-g)+`ms\n\tRemoved ${O} documents in `+(C-_)+`ms\nTotal Duration: ${C-D}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:O})))}}class x7{constructor(e,t){this.db=e,this.garbageCollector=new y7(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Te(e){let t=0;return this.ye(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(r,i)=>t(i))}addReference(e,t,r){return sT(e,r)}removeReference(e,t,r){return sT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return sT(e,t)}Ie(e,t){return function(r,i){let o=!1;return T6(r).jt(l=>S6(r,l,i).next(g=>(g&&(o=!0),at.resolve(!g)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Ee(e,(l,g)=>{if(g<=t){const _=this.Ie(e,l).next(C=>{if(!C)return o++,r.getEntry(e,l).next(()=>(r.removeEntry(l),S0(e).delete([0,hd(l.path)])))});i.push(_)}}).next(()=>at.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return sT(e,t)}Ee(e,t){const r=S0(e);let i,o=Dc.T;return r.Kt({index:ra.documentTargetsIndex},([l,g],{path:_,sequenceNumber:C})=>{0===l?(o!==Dc.T&&t(new Ut(Dh(i)),o),o=C,i=_):o=Dc.T}).next(()=>{o!==Dc.T&&t(new Ut(Dh(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sT(n,e){return S0(n).put((r=n.currentSequenceNumber,new ra(0,hd(e.path),r)));var r}class sy{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){G1(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return m4(this.inner)}}class R6{constructor(){this.changes=new sy(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:In.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Oi.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?at.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class w7{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,r){return T0(e).put(aT(t),r)}removeEntry(e,t){const r=T0(e),i=aT(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Ae(e,r)))}getEntry(e,t){return T0(e).get(aT(t)).next(r=>this.Re(t,r))}be(e,t){return T0(e).get(aT(t)).next(r=>({document:this.Re(t,r),size:oT(r)}))}getEntries(e,t){let r=ml();return this.Pe(e,t,(i,o)=>{const l=this.Re(i,o);r=r.insert(i,l)}).next(()=>r)}ve(e,t){let r=ml(),i=new Go(Ut.comparator);return this.Pe(e,t,(o,l)=>{const g=this.Re(o,l);r=r.insert(o,g),i=i.insert(o,oT(l))}).next(()=>({documents:r,Ve:i}))}Pe(e,t,r){if(t.isEmpty())return at.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),o=t.getIterator();let l=o.getNext();return T0(e).Kt({range:i},(g,_,C)=>{const D=Ut.fromSegments(g);for(;l&&Ut.comparator(l,D)<0;)r(l,null),l=o.getNext();l&&l.isEqual(D)&&(r(l,_),l=o.hasNext()?o.getNext():null),l?C.Mt(l.path.toArray()):C.done()}).next(()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r){let i=ml();const o=t.path.length+1,l={};if(r.isEqual(In.min())){const g=t.path.toArray();l.range=IDBKeyRange.lowerBound(g)}else{const g=t.path.toArray(),_=IN(r);l.range=IDBKeyRange.lowerBound([g,_],!0),l.index=to.collectionReadTimeIndex}return T0(e).Kt(l,(g,_,C)=>{if(g.length!==o)return;const D=AN(this.N,_);t.path.isPrefixOf(D.key.path)?I2(t,D)&&(i=i.insert(D.key,D)):C.done()}).next(()=>i)}newChangeBuffer(e){return new E7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return N6(e).get(ff.key).next(t=>(hn(!!t),t))}Ae(e,t){return N6(e).put(ff.key,t)}Re(e,t){if(t){const r=AN(this.N,t);if(!r.isNoDocument()||!r.version.isEqual(In.min()))return r}return Oi.newInvalidDocument(e)}}class E7 extends R6{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new sy(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new eo((o,l)=>$n(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const g=this.De.get(o);if(l.document.isValidDocument()){const _=y6(this.Se.N,l.document,this.getReadTime(o));i=i.add(o.path.popLast()),r+=oT(_)-g,t.push(this.Se.addEntry(e,o,_))}else if(r-=g,this.trackRemovals){const _=y6(this.Se.N,Oi.newNoDocument(o,In.min()),this.getReadTime(o));t.push(this.Se.addEntry(e,o,_))}else t.push(this.Se.removeEntry(e,o))}),i.forEach(o=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,o))}),t.push(this.Se.updateMetadata(e,r)),at.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(r=>(this.De.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:r,Ve:i})=>(i.forEach((o,l)=>{this.De.set(o,l)}),r))}}function N6(n){return Vu(n,ff.store)}function T0(n){return Vu(n,to.store)}function aT(n){return n.path.toArray()}class C7{constructor(e){this.N=e}Ct(e,t,r,i){hn(r<i&&r>=0&&i<=11);const o=new iT("createOrUpgrade",t);var g;r<1&&i>=1&&(e.createObjectStore(Oc.store),(g=e).createObjectStore(A0.store,{keyPath:A0.keyPath}),g.createObjectStore(mi.store,{keyPath:mi.keyPath,autoIncrement:!0}).createIndex(mi.userMutationsIndex,mi.userMutationsKeyPath,{unique:!0}),g.createObjectStore(Na.store),P6(e),function(g){g.createObjectStore(to.store)}(e));let l=at.resolve();return r<3&&i>=3&&(0!==r&&(function(g){g.deleteObjectStore(ra.store),g.deleteObjectStore(Bu.store),g.deleteObjectStore(Rc.store)}(e),P6(e)),l=l.next(()=>function(g){const _=g.store(Rc.store),C=new Rc(0,0,In.min().toTimestamp(),0);return _.put(Rc.key,C)}(o))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(g,_){return _.store(mi.store).Lt().next(C=>{g.deleteObjectStore(mi.store),g.createObjectStore(mi.store,{keyPath:mi.keyPath,autoIncrement:!0}).createIndex(mi.userMutationsIndex,mi.userMutationsKeyPath,{unique:!0});const D=_.store(mi.store),O=C.map(M=>D.put(M));return at.waitFor(O)})}(e,o))),l=l.next(()=>{!function(g){g.createObjectStore(Oh.store,{keyPath:Oh.keyPath})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ce(o))),r<6&&i>=6&&(l=l.next(()=>(function(g){g.createObjectStore(ff.store)}(e),this.Ne(o)))),r<7&&i>=7&&(l=l.next(()=>this.xe(o))),r<8&&i>=8&&(l=l.next(()=>this.ke(e,o))),r<9&&i>=9&&(l=l.next(()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e),function(g){const _=g.objectStore(to.store);_.createIndex(to.readTimeIndex,to.readTimeIndexPath,{unique:!1}),_.createIndex(to.collectionReadTimeIndex,to.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(l=l.next(()=>this.$e(o))),r<11&&i>=11&&(l=l.next(()=>{(function(g){g.createObjectStore(J_.store,{keyPath:J_.keyPath})})(e),function(g){g.createObjectStore(ey.store,{keyPath:ey.keyPath})}(e)})),l}Ne(e){let t=0;return e.store(to.store).Kt((r,i)=>{t+=oT(i)}).next(()=>{const r=new ff(t);return e.store(ff.store).put(ff.key,r)})}Ce(e){const t=e.store(A0.store),r=e.store(mi.store);return t.Lt().next(i=>at.forEach(i,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.Lt(mi.userMutationsIndex,l).next(g=>at.forEach(g,_=>{hn(_.userId===o.userId);const C=ry(this.N,_);return b6(e,o.userId,C).next(()=>{})}))}))}xe(e){const t=e.store(ra.store),r=e.store(to.store);return e.store(Rc.store).get(Rc.key).next(i=>{const o=[];return r.Kt((l,g)=>{const _=new wr(l),C=[0,hd(_)];o.push(t.get(C).next(D=>D?at.resolve():t.put(new ra(0,hd(_),i.highestListenSequenceNumber))))}).next(()=>at.waitFor(o))})}ke(e,t){e.createObjectStore(Z1.store,{keyPath:Z1.keyPath});const r=t.store(Z1.store),i=new SN,o=l=>{if(i.add(l)){const g=l.lastSegment(),_=l.popLast();return r.put({collectionId:g,parent:hd(_)})}};return t.store(to.store).Kt({qt:!0},(l,g)=>{const _=new wr(l);return o(_.popLast())}).next(()=>t.store(Na.store).Kt({qt:!0},([l,g,_],C)=>{const D=Dh(g);return o(D.popLast())}))}$e(e){const t=e.store(Bu.store);return t.Kt((r,i)=>{const o=F2(i),l=w6(this.N,o);return t.put(l)})}}function P6(n){n.createObjectStore(ra.store,{keyPath:ra.keyPath}).createIndex(ra.documentTargetsIndex,ra.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Bu.store,{keyPath:Bu.keyPath}).createIndex(Bu.queryTargetsIndexName,Bu.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Rc.store)}const ON="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class RN{constructor(e,t,r,i,o,l,g,_,C,D){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Oe=o,this.window=l,this.document=g,this.Fe=C,this.Me=D,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=O=>Promise.resolve(),!RN.bt())throw new ct(qe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new x7(this,i),this.We=t+"main",this.N=new _6(_),this.Ge=new pd(this.We,11,new C7(this.N)),this.ze=new m7(this.referenceDelegate,this.N),this.Ht=new g7,this.He=new w7(this.N,this.Ht),this.Je=new h7,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===D&&Co("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ct(qe.FAILED_PRECONDITION,ON);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new Dc(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var r=(0,Ke.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,Ke.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,Ke.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uT(e).put(new Oh(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(K1(e))return vt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return vt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return k2(e).get(Oc.key).next(t=>at.resolve(this.cn(t)))}un(e){return uT(e).delete(this.clientId)}hn(){var e=this;return(0,Ke.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Vu(r,Oh.store);return i.Lt().next(o=>{const l=e.fn(o,18e5),g=o.filter(_=>-1===l.indexOf(_));return at.forEach(g,_=>i.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e.Ye)for(const r of t)e.Ye.removeItem(e.dn(r.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?at.resolve(!0):k2(e).get(Oc.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new ct(qe.FAILED_PRECONDITION,ON);return!1}}return!(!this.networkEnabled||!this.inForeground)||uT(e).Lt().next(r=>void 0===this.fn(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,g=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&vt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ke.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[Oc.store,Oh.store],t=>{const r=new v6(t,Dc.T);return e.on(r).next(()=>e.un(r))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(r=>this.ln(r.updateTimeMs,t)&&!this.wn(r.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>uT(e).Lt().next(t=>this.fn(t,18e5).map(r=>r.clientId)))}get started(){return this.Be}getMutationQueue(e){return TN.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,r){let o;return vt("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",l7,l=>(o=new v6(l,this.Le?this.Le.next():Dc.T),"readwrite-primary"===t?this.sn(o).next(g=>!!g||this.rn(o)).next(g=>{if(!g)throw Co(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new ct(qe.FAILED_PRECONDITION,p6);return r(o)}).next(g=>this.an(o).next(()=>g)):this.Tn(o).next(()=>r(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Tn(e){return k2(e).get(Oc.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.cn(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ct(qe.FAILED_PRECONDITION,ON)})}an(e){const t=new Oc(this.clientId,this.allowTabSynchronization,Date.now());return k2(e).put(Oc.key,t)}static bt(){return pd.bt()}on(e){const t=k2(e);return t.get(Oc.key).next(r=>this.cn(r)?(vt("IndexedDbPersistence","Releasing primary lease."),t.delete(Oc.key)):at.resolve())}ln(e,t){const r=Date.now();return!(e<r-t||e>r&&(Co(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,Q.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const r=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return vt("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Co("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){Co("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function k2(n){return Vu(n,Oc.store)}function uT(n){return Vu(n,Oh.store)}function NN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class A7{constructor(e,t){this.progress=e,this.En=t}}class M6{constructor(e,t,r){this.He=e,this.In=t,this.Ht=r}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Rn(e,t,r))}Rn(e,t,r){return this.He.getEntry(e,t).next(i=>{for(const o of r)o.applyToLocalView(i);return i})}bn(e,t){e.forEach((r,i)=>{for(const o of t)o.applyToLocalView(i)})}Pn(e,t){return this.He.getEntries(e,t).next(r=>this.vn(e,r).next(()=>r))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.bn(t,r))}getDocumentsMatchingQuery(e,t,r){return Ut.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Vn(e,t.path):pN(t)?this.Sn(e,t,r):this.Dn(e,t,r);var i}Vn(e,t){return this.An(e,new Ut(t)).next(r=>{let i=_N();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Sn(e,t,r){const i=t.collectionGroup;let o=_N();return this.Ht.getCollectionParents(e,i).next(l=>at.forEach(l,g=>{const _=(C=t,D=g.child(i),new Th(D,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,D;return this.Dn(e,_,r).next(C=>{C.forEach((D,O)=>{o=o.insert(D,O)})})}).next(()=>o))}Dn(e,t,r){let i,o;return this.He.getDocumentsMatchingQuery(e,t,r).next(l=>(i=l,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(l=>(o=l,this.Cn(e,o,i).next(g=>{i=g;for(const _ of o)for(const C of _.mutations){const D=C.key;let O=i.get(D);null==O&&(O=Oi.newInvalidDocument(D),i=i.insert(D,O)),mN(C,O,_.localWriteTime),O.isFoundDocument()||(i=i.remove(D))}}))).next(()=>(i.forEach((l,g)=>{I2(t,g)||(i=i.remove(l))}),i))}Cn(e,t,r){let i=Pr();for(const l of t)for(const g of l.mutations)g instanceof C0&&null===r.get(g.key)&&(i=i.add(g.key));let o=r;return this.He.getEntries(e,i).next(l=>(l.forEach((g,_)=>{_.isFoundDocument()&&(o=o.insert(g,_))}),o))}}class PN{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Nn=r,this.xn=i}static kn(e,t){let r=Pr(),i=Pr();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new PN(e,t.fromCache,r,i)}}class F6{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,r,i){return 0===(o=t).filters.length&&null===o.limit&&null==o.startAt&&null==o.endAt&&(0===o.explicitOrderBy.length||1===o.explicitOrderBy.length&&o.explicitOrderBy[0].field.isKeyField())||r.isEqual(In.min())?this.Fn(e,t):this.On.Pn(e,i).next(o=>{const l=this.Mn(t,o);return(KS(t)||YS(t))&&this.Ln(t.limitType,l,i,r)?this.Fn(e,t):(oN()<=vo.in.DEBUG&&vt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gN(t)),this.On.getDocumentsMatchingQuery(e,t,r).next(g=>(l.forEach(_=>{g=g.insert(_.key,_)}),g)))});var o}Mn(e,t){let r=new eo(O4(e));return t.forEach((i,o)=>{I2(e,o)&&(r=r.add(o))}),r}Ln(e,t,r,i){if(r.size!==t.size)return!0;const o="F"===e?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Fn(e,t){return oN()<=vo.in.DEBUG&&vt("QueryEngine","Using full collection scan to execute query:",gN(t)),this.On.getDocumentsMatchingQuery(e,t,In.min())}}class I7{constructor(e,t,r,i){this.persistence=e,this.Bn=t,this.N=i,this.Un=new Go($n),this.qn=new sy(o=>E2(o),$S),this.Kn=In.min(),this.In=e.getMutationQueue(r),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new M6(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function k6(n,e,t,r){return new I7(n,e,t,r)}function L6(n,e){return MN.apply(this,arguments)}function MN(){return(MN=(0,Ke.Z)(function*(n,e){const t=wt(n);let r=t.In,i=t.Qn;const o=yield t.persistence.runTransaction("Handle user change","readonly",l=>{let g;return t.In.getAllMutationBatches(l).next(_=>(g=_,r=t.persistence.getMutationQueue(e),i=new M6(t.jn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(l))).next(_=>{const C=[],D=[];let O=Pr();for(const M of g){C.push(M.batchId);for(const B of M.mutations)O=O.add(B.key)}for(const M of _){D.push(M.batchId);for(const B of M.mutations)O=O.add(B.key)}return i.Pn(l,O).next(M=>({Wn:M,removedBatchIds:C,addedBatchIds:D}))})});return t.In=r,t.Qn=i,t.Bn.$n(t.Qn),o})).apply(this,arguments)}function b7(n,e){const t=wt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.jn.newChangeBuffer({trackRemovals:!0});return function(l,g,_,C){const D=_.batch,O=D.keys();let M=at.resolve();return O.forEach(B=>{M=M.next(()=>C.getEntry(g,B)).next(G=>{const $=_.docVersions.get(B);hn(null!==$),G.version.compareTo($)<0&&(D.applyToRemoteDocument(G,_),G.isValidDocument()&&C.addEntry(G,_.commitVersion))})}),M.next(()=>l.In.removeMutationBatch(g,D))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.In.performConsistencyCheck(r)).next(()=>t.Qn.Pn(r,i))})}function B6(n){const e=wt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ze.getLastRemoteSnapshotVersion(t))}function S7(n,e){const t=wt(n),r=e.snapshotVersion;let i=t.Un;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.jn.newChangeBuffer({trackRemovals:!0});i=t.Un;const g=[];e.targetChanges.forEach((C,D)=>{const O=i.get(D);if(!O)return;g.push(t.ze.removeMatchingKeys(o,C.removedDocuments,D).next(()=>t.ze.addMatchingKeys(o,C.addedDocuments,D)));const M=C.resumeToken;if(M.approximateByteSize()>0){const B=O.withResumeToken(M,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(D,B),G=O,ie=C,hn(($=B).resumeToken.approximateByteSize()>0),(0===G.resumeToken.approximateByteSize()||$.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0)&&g.push(t.ze.updateTargetData(o,B))}var G,$,ie});let _=ml();if(e.documentUpdates.forEach((C,D)=>{e.resolvedLimboDocuments.has(C)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(o,C))}),g.push(V6(o,l,e.documentUpdates,r,void 0).next(C=>{_=C})),!r.isEqual(In.min())){const C=t.ze.getLastRemoteSnapshotVersion(o).next(D=>t.ze.setTargetsMetadata(o,o.currentSequenceNumber,r));g.push(C)}return at.waitFor(g).next(()=>l.apply(o)).next(()=>t.Qn.vn(o,_)).next(()=>_)}).then(o=>(t.Un=i,o))}function V6(n,e,t,r,i){let o=Pr();return t.forEach(l=>o=o.add(l)),e.getEntries(n,o).next(l=>{let g=ml();return t.forEach((_,C)=>{const D=l.get(_),O=(null==i?void 0:i.get(_))||r;C.isNoDocument()&&C.version.isEqual(In.min())?(e.removeEntry(_,O),g=g.insert(_,C)):!D.isValidDocument()||C.version.compareTo(D.version)>0||0===C.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(C,O),g=g.insert(_,C)):vt("LocalStore","Ignoring outdated watch update for ",_,". Current version:",D.version," Watch version:",C.version)}),g})}function T7(n,e){const t=wt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.In.getNextMutationBatchAfterBatchId(r,e)))}function ay(n,e){const t=wt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ze.getTargetData(r,e).next(o=>o?(i=o,at.resolve(i)):t.ze.allocateTargetId(r).next(l=>(i=new I0(e,l,0,r.currentSequenceNumber),t.ze.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Un.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Un=t.Un.insert(r.targetId,r),t.qn.set(e,r.targetId)),r})}function uy(n,e,t){return FN.apply(this,arguments)}function FN(){return(FN=(0,Ke.Z)(function*(n,e,t){const r=wt(n),i=r.Un.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!K1(l))throw l;vt("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Un=r.Un.remove(e),r.qn.delete(i.target)})).apply(this,arguments)}function cT(n,e,t){const r=wt(n);let i=In.min(),o=Pr();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,_,C){const D=wt(g),O=D.qn.get(C);return void 0!==O?at.resolve(D.Un.get(O)):D.ze.getTargetData(_,C)}(r,l,gl(e)).next(g=>{if(g)return i=g.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(l,g.targetId).next(_=>{o=_})}).next(()=>r.Bn.getDocumentsMatchingQuery(l,e,t?i:In.min(),t?o:Pr())).next(g=>({documents:g,Gn:o})))}function U6(n,e){const t=wt(n),r=wt(t.ze),i=t.Un.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Tt(o,e).next(l=>l?l.target:null))}function H6(n){const e=wt(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,o){const l=wt(r);let g=ml(),_=IN(o);const C=T0(i),D=IDBKeyRange.lowerBound(_,!0);return C.Kt({index:to.readTimeIndex,range:D},(O,M)=>{const B=AN(l.N,M);g=g.insert(B.key,B),_=M.readTime}).next(()=>({En:g,readTime:x6(_)}))}(e.jn,t,e.Kn)).then(({En:t,readTime:r})=>(e.Kn=r,t))}function kN(){return(kN=(0,Ke.Z)(function*(n){const e=wt(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=T0(r);let o=In.min();return i.Kt({index:to.readTimeIndex,reverse:!0},(l,g,_)=>{g.readTime&&(o=x6(g.readTime)),_.done()}).next(()=>o)}(t)).then(t=>{e.Kn=t})})).apply(this,arguments)}function LN(){return(LN=(0,Ke.Z)(function*(n,e,t,r){const i=wt(n);let o=Pr(),l=ml(),g=q4();for(const D of t){const O=e.zn(D.metadata.name);D.document&&(o=o.add(O)),l=l.insert(O,e.Hn(D)),g=g.insert(O,e.Jn(D.metadata.readTime))}const _=i.jn.newChangeBuffer({trackRemovals:!0}),C=yield ay(i,(D=r,gl(q_(wr.fromString(`__bundle__/docs/${D}`)))));var D;return i.persistence.runTransaction("Apply bundle documents","readwrite",D=>V6(D,_,l,In.min(),g).next(O=>(_.apply(D),O)).next(O=>i.ze.removeMatchingKeysForTargetId(D,C.targetId).next(()=>i.ze.addMatchingKeys(D,o,C.targetId)).next(()=>i.Qn.vn(D,O)).next(()=>O)))})).apply(this,arguments)}function R7(n,e){return BN.apply(this,arguments)}function BN(){return(BN=(0,Ke.Z)(function*(n,e,t=Pr()){const r=yield ay(n,gl(bN(e.bundledQuery))),i=wt(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const l=ws(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Je.saveNamedQuery(o,e);const g=r.withResumeToken(xs.EMPTY_BYTE_STRING,l);return i.Un=i.Un.insert(g.targetId,g),i.ze.updateTargetData(o,g).next(()=>i.ze.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.ze.addMatchingKeys(o,t,r.targetId)).next(()=>i.Je.saveNamedQuery(o,e))})})).apply(this,arguments)}class N7{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return at.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var r;return this.Yn.set(t.id,{id:(r=t).id,version:r.version,createTime:ws(r.createTime)}),at.resolve()}getNamedQuery(e,t){return at.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:bN(r.bundledQuery),readTime:ws(r.readTime)}),at.resolve();var r}}class VN{constructor(){this.Zn=new eo(Es.ts),this.es=new eo(Es.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Es(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Es(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}cs(e){const t=new Ut(new wr([])),r=new Es(t,e),i=new Es(t,e+1),o=[];return this.es.forEachInRange([r,i],l=>{this.rs(l),o.push(l.key)}),o}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ut(new wr([])),r=new Es(t,e),i=new Es(t,e+1);let o=Pr();return this.es.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Es(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Es{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ut.comparator(e.key,t.key)||$n(e.ls,t.ls)}static ns(e,t){return $n(e.ls,t.ls)||Ut.comparator(e.key,t.key)}}class P7{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new eo(Es.ts)}checkEmpty(e){return at.resolve(0===this.In.length)}addMutationBatch(e,t,r,i){const o=this.fs;this.fs++;const l=new EN(o,t,r,i);this.In.push(l);for(const g of i)this.ds=this.ds.add(new Es(g.key,o)),this.Ht.addToCollectionParentIndex(e,g.key.path.popLast());return at.resolve(l)}lookupMutationBatch(e,t){return at.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const i=this._s(t+1),o=i<0?0:i;return at.resolve(this.In.length>o?this.In[o]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return at.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Es(t,0),i=new Es(t,Number.POSITIVE_INFINITY),o=[];return this.ds.forEachInRange([r,i],l=>{const g=this.ws(l.ls);o.push(g)}),at.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new eo($n);return t.forEach(i=>{const o=new Es(i,0),l=new Es(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([o,l],g=>{r=r.add(g.ls)})}),at.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ut.isDocumentKey(o)||(o=o.child(""));const l=new Es(new Ut(o),0);let g=new eo($n);return this.ds.forEachWhile(_=>{const C=_.key.path;return!!r.isPrefixOf(C)&&(C.length===i&&(g=g.add(_.ls)),!0)},l),at.resolve(this.gs(g))}gs(e){const t=[];return e.forEach(r=>{const i=this.ws(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){hn(0===this.ys(t.batchId,"removed")),this.In.shift();let r=this.ds;return at.forEach(t.mutations,i=>{const o=new Es(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}te(e){}containsKey(e,t){const r=new Es(t,0),i=this.ds.firstAfterOrEqual(r);return at.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return at.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class M7{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new Go(Ut.comparator),this.size=0}addEntry(e,t,r){const i=t.key,o=this.docs.get(i),l=o?o.size:0,g=this.ps(t);return this.docs=this.docs.insert(i,{document:t.clone(),size:g,readTime:r}),this.size+=g-l,this.Ht.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return at.resolve(r?r.document.clone():Oi.newInvalidDocument(t))}getEntries(e,t){let r=ml();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.clone():Oi.newInvalidDocument(i))}),at.resolve(r)}getDocumentsMatchingQuery(e,t,r){let i=ml();const o=new Ut(t.path.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:g,value:{document:_,readTime:C}}=l.getNext();if(!t.path.isPrefixOf(g.path))break;C.compareTo(r)<=0||I2(t,_)&&(i=i.insert(_.key,_.clone()))}return at.resolve(i)}Ts(e,t){return at.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new F7(this)}getSize(e){return at.resolve(this.size)}}class F7 extends R6{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.document.isValidDocument()?t.push(this.Se.addEntry(e,i.document,this.getReadTime(r))):this.Se.removeEntry(r)}),at.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class k7{constructor(e){this.persistence=e,this.Es=new sy(t=>E2(t),$S),this.lastRemoteSnapshotVersion=In.min(),this.highestTargetId=0,this.Is=0,this.As=new VN,this.targetCount=0,this.Rs=X1.se()}forEachTarget(e,t){return this.Es.forEach((r,i)=>t(i)),at.resolve()}getLastRemoteSnapshotVersion(e){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return at.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Is&&(this.Is=t),at.resolve()}ae(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new X1(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,at.resolve()}updateTargetData(e,t){return this.ae(t),at.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,at.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Es.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Es.delete(l),o.push(this.removeMatchingKeysForTargetId(e,g.targetId)),i++)}),at.waitFor(o).next(()=>i)}getTargetCount(e){return at.resolve(this.targetCount)}getTargetData(e,t){const r=this.Es.get(t)||null;return at.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),at.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),at.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),at.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return at.resolve(r)}containsKey(e,t){return at.resolve(this.As.containsKey(t))}}class L7{constructor(e,t){this.bs={},this.Le=new Dc(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new k7(this),this.Ht=new p7,this.He=new M7(this.Ht,r=>this.referenceDelegate.Ps(r)),this.N=new _6(t),this.Je=new N7(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new P7(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,r){vt("MemoryPersistence","Starting transaction:",e);const i=new B7(this.Le.next());return this.referenceDelegate.vs(),r(i).next(o=>this.referenceDelegate.Vs(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ss(e,t){return at.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class B7 extends g6{constructor(e){super(),this.currentSequenceNumber=e}}class UN{constructor(e){this.persistence=e,this.Ds=new VN,this.Cs=null}static Ns(e){return new UN(e)}get xs(){if(this.Cs)return this.Cs;throw zt()}addReference(e,t,r){return this.Ds.addReference(r,t),this.xs.delete(r.toString()),at.resolve()}removeReference(e,t,r){return this.Ds.removeReference(r,t),this.xs.add(r.toString()),at.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),at.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(i=>this.xs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.xs.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.xs,r=>{const i=Ut.fromPath(r);return this.ks(e,i).next(o=>{o||t.removeEntry(i)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return at.or([()=>at.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function j6(n,e){return`firestore_clients_${n}_${e}`}function G6(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function HN(n,e){return`firestore_targets_${n}_${e}`}class lT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static $s(e,t,r){const i=JSON.parse(r);let o,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(o=new ct(i.error.code,i.error.message))),l?new lT(e,t,i.state,o):(Co("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class L2{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new ct(r.error.code,r.error.message))),o?new L2(e,r.state,i):(Co("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=tT();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=_4(r.activeTargetIds[l]),o=o.add(r.activeTargetIds[l]);return i?new dT(e,o):(Co("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class jN{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jN(t.clientId,t.onlineState):(Co("SharedClientState",`Failed to parse online state: ${e}`),null)}}class GN{constructor(){this.activeTargetIds=tT()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WN{constructor(e,t,r,i,o){this.window=e,this.Oe=t,this.persistenceKey=r,this.Ls=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Go($n),this.started=!1,this.Ks=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.js=j6(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new GN),this.Ws=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(g){return`firestore_bundle_loaded_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ke.Z)(function*(){const t=yield e.syncEngine.pn();for(const i of t){if(i===e.Ls)continue;const o=e.getItem(j6(e.persistenceKey,i));if(o){const l=dT.$s(i,o);l&&(e.qs=e.qs.insert(l.clientId,l))}}e.Ys();const r=e.storage.getItem(e.Hs);if(r){const i=e.Xs(r);i&&e.Zs(i)}for(const i of e.Ks)e.Us(i);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,r){this.ei(e,t,r),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(HN(this.persistenceKey,e));if(r){const i=L2.$s(e,r);i&&(t=i.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(HN(this.persistenceKey,e))}updateQueryState(e,t,r){this.ii(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ni(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return vt("SharedClientState","READ",e,t),t}setItem(e,t){vt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){vt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const r=e;if(r.storageArea===this.storage){if(vt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.js)return void Co("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Ke.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ws.test(r.key)){if(null==r.newValue){const i=t.ai(r.key);return t.ci(i,null)}{const i=t.ui(r.key,r.newValue);if(i)return t.ci(i.clientId,i)}}else if(t.Gs.test(r.key)){if(null!==r.newValue){const i=t.hi(r.key,r.newValue);if(i)return t.li(i)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const i=t.fi(r.key,r.newValue);if(i)return t.di(i)}}else if(r.key===t.Hs){if(null!==r.newValue){const i=t.Xs(r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.Qs){const i=function(o){let l=Dc.T;if(null!=o)try{const g=JSON.parse(o);hn("number"==typeof g),l=g}catch(g){Co("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);i!==Dc.T&&t.sequenceNumberHandler(i)}else if(r.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(r)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,r){const i=new lT(this.currentUser,e,t,r),o=G6(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Os())}ni(e){const t=G6(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,r){const i=HN(this.persistenceKey,e),o=new L2(e,t,r);this.setItem(i,o.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const r=this.ai(e);return dT.$s(r,t)}hi(e,t){const r=this.Gs.exec(e),i=Number(r[1]);return lT.$s(new ea(void 0!==r[2]?r[2]:null),i,t)}fi(e,t){const r=this.zs.exec(e),i=Number(r[1]);return L2.$s(i,t)}Xs(e){return jN.$s(e)}li(e){var t=this;return(0,Ke.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);vt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,t){const r=t?this.qs.insert(e,t):this.qs.remove(e),i=this.ti(this.qs),o=this.ti(r),l=[],g=[];return o.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{o.has(_)||g.push(_)}),this.syncEngine.gi(l,g).then(()=>{this.qs=r})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=tT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class W6{constructor(){this.yi=new GN,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,r){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new GN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class V7{Ti(e){}shutdown(){}}class z6{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){vt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){vt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const U7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class H7{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class j7 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,r,i){const o=this.Bi(e,t);vt("RestConnection","Sending: ",o,r);const l={};return this.Ui(l,i),this.qi(e,o,l,r).then(g=>(vt("RestConnection","Received: ",g),g),g=>{throw v2("RestConnection",`${e} failed with error: `,g,"url: ",o,"request:",r),g})}Ki(e,t,r,i){return this.Li(e,t,r,i)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+H_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const r in t.authHeaders)t.authHeaders.hasOwnProperty(r)&&(e[r]=t.authHeaders[r])}Bi(e,t){return`${this.Fi}/v1/${t}:${U7[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,r,i){return new Promise((o,l)=>{const g=new lL;g.listenOnce(aL.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case iN.NO_ERROR:const C=g.getResponseJson();vt("Connection","XHR received:",JSON.stringify(C)),o(C);break;case iN.TIMEOUT:vt("Connection",'RPC "'+e+'" timed out'),l(new ct(qe.DEADLINE_EXCEEDED,"Request time out"));break;case iN.HTTP_ERROR:const D=g.getStatus();if(vt("Connection",'RPC "'+e+'" failed with status:',D,"response text:",g.getResponseText()),D>0){const O=g.getResponseJson().error;if(O&&O.status&&O.message){const M=function(B){const G=B.toLowerCase().replace(/_/g,"-");return Object.values(qe).indexOf(G)>=0?G:qe.UNKNOWN}(O.status);l(new ct(M,O.message))}else l(new ct(qe.UNKNOWN,"Server responded with status "+g.getStatus()))}else l(new ct(qe.UNAVAILABLE,"Connection failed."));break;default:zt()}}finally{vt("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);g.send(t,"POST",_,r,15)})}ji(e,t){const r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=oL(),o=sL(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new cL({})),this.Ui(l.initMessageHeaders,t),(0,Q.uI)()||(0,Q.b$)()||(0,Q.d)()||(0,Q.w1)()||(0,Q.Mn)()||(0,Q.ru)()||(l.httpHeadersOverwriteParam="$httpHeaders");const g=r.join("");vt("Connection","Creating WebChannel: "+g,l);const _=i.createWebChannel(g,l);let C=!1,D=!1;const O=new H7({vi:B=>{D?vt("Connection","Not sending because WebChannel is closed:",B):(C||(vt("Connection","Opening WebChannel transport."),_.open(),C=!0),vt("Connection","WebChannel sending:",B),_.send(B))},Vi:()=>_.close()}),M=(B,G,$)=>{B.listen(G,ie=>{try{$(ie)}catch(ce){setTimeout(()=>{throw ce},0)}})};return M(_,jS.EventType.OPEN,()=>{D||vt("Connection","WebChannel transport opened.")}),M(_,jS.EventType.CLOSE,()=>{D||(D=!0,vt("Connection","WebChannel transport closed"),O.$i())}),M(_,jS.EventType.ERROR,B=>{D||(D=!0,v2("Connection","WebChannel transport errored:",B),O.$i(new ct(qe.UNAVAILABLE,"The operation could not be completed")))}),M(_,jS.EventType.MESSAGE,B=>{var G;if(!D){const $=B.data[0];hn(!!$);const ie=$,ce=ie.error||(null===(G=ie[0])||void 0===G?void 0:G.error);if(ce){vt("Connection","WebChannel received error:",ce);const fe=ce.status;let Ae=function(nt){const ht=bo[nt];if(void 0!==ht)return z4(ht)}(fe),De=ce.message;void 0===Ae&&(Ae=qe.INTERNAL,De="Unknown error status: "+fe+" with message "+ce.message),D=!0,O.$i(new ct(Ae,De)),_.close()}else vt("Connection","WebChannel received:",$),O.Oi($)}}),M(o,uL.STAT_EVENT,B=>{B.stat===l4.PROXY?vt("Connection","Detected buffering proxy"):B.stat===l4.NOPROXY&&vt("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.ki()},0),O}}function $6(){return"undefined"!=typeof window?window:null}function fT(){return"undefined"!=typeof document?document:null}function B2(n){return new KL(n,!0)}class zN{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Oe=e,this.timerId=t,this.Qi=r,this.Wi=i,this.Gi=o,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),i=Math.max(0,t-r);i>0&&vt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,i,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class q6{constructor(e,t,r,i,o,l){this.Oe=e,this.er=r,this.nr=i,this.credentialsProvider=o,this.listener=l,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new zN(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,Ke.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,Ke.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,t){var r=this;return(0,Ke.Z)(function*(){r._r(),r.rr.cancel(),r.sr++,3!==e?r.rr.reset():t&&t.code===qe.RESOURCE_EXHAUSTED?(Co(t.toString()),Co("Using maximum backoff delay to prevent overloading the backend."),r.rr.Yi()):t&&t.code===qe.UNAUTHENTICATED&&r.credentialsProvider.invalidateToken(),null!==r.stream&&(r.mr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ci(t)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then(r=>{this.sr===t&&this.yr(r)},r=>{e(()=>{const i=new ct(qe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.pr(i)})})}yr(e){const t=this.gr(this.sr);this.stream=this.Tr(e),this.stream.Si(()=>{t(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(r=>{t(()=>this.pr(r))}),this.stream.onMessage(r=>{t(()=>this.onMessage(r))})}ur(){var e=this;this.state=4,this.rr.Xi((0,Ke.Z)(function*(){e.state=0,e.start()}))}pr(e){return vt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget(()=>this.sr===e?t():(vt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class G7 extends q6{constructor(e,t,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,r,o),this.N=i}Tr(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:zt(),i=e.targetChange.targetIds||[],o=function(_,C){return _.D?(hn(void 0===C||"string"==typeof C),xs.fromBase64String(C||"")):(hn(void 0===C||C instanceof Uint8Array),xs.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(_){const C=void 0===_.code?qe.UNKNOWN:z4(_.code);return new ct(C,_.message||"")}(l);t=new K4(r,i,o,g||null)}else if("documentChange"in e){const r=e.documentChange,i=df(n,r.document.name),o=ws(r.document.updateTime),l=new Ra({mapValue:{fields:r.document.fields}}),g=Oi.newFoundDocument(i,o,l);t=new nT(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=df(n,r.document),o=r.readTime?ws(r.readTime):In.min(),l=Oi.newNoDocument(i,o);t=new nT([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=df(n,r.document);t=new nT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return zt();{const r=e.filter,o=new UL(r.count||0);t=new Z4(r.targetId,o)}}var _;return t}(this.N,e),r=function(i){if(!("targetChange"in i))return In.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?In.min():o.readTime?ws(o.readTime):In.min()}(e);return this.listener.Er(t,r)}Ir(e){const t={};t.database=P2(this.N),t.addTarget=function(i,o){let l;const g=o.target;return l=qS(g)?{documents:s6(i,g)}:{query:a6(i,g)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?l.resumeToken=J4(i,o.resumeToken):o.snapshotVersion.compareTo(In.min())>0&&(l.readTime=R2(i,o.snapshotVersion.toTimestamp())),l}(this.N,e);const r=function(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.wr(t)}Ar(e){const t={};t.database=P2(this.N),t.removeTarget=e,this.wr(t)}}class W7 extends q6{constructor(e,t,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle",t,r,o),this.N=i,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Tr(e){return this.nr.ji("Write",e)}onMessage(e){if(hn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(n,e){return n&&n.length>0?(hn(void 0!==e),n.map(t=>function(r,i){let o=ws(r.updateTime?r.updateTime:i);return o.isEqual(In.min())&&(o=ws(i)),new LL(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ws(e.commitTime);return this.listener.vr(r,t)}return hn(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=P2(this.N),this.wr(e)}Pr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>rT(this.N,r))};this.wr(t)}}class z7 extends class{}{constructor(e,t,r){super(),this.credentials=e,this.nr=t,this.N=r,this.Dr=!1}Cr(){if(this.Dr)throw new ct(qe.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,r){return this.Cr(),this.credentials.getToken().then(i=>this.nr.Li(e,t,r,i)).catch(i=>{throw"FirebaseError"===i.name?(i.code===qe.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new ct(qe.UNKNOWN,i.toString())})}Ki(e,t,r){return this.Cr(),this.credentials.getToken().then(i=>this.nr.Ki(e,t,r,i)).catch(i=>{throw"FirebaseError"===i.name?(i.code===qe.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new ct(qe.UNKNOWN,i.toString())})}terminate(){this.Dr=!0}}class $7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(Co(t),this.$r=!1):vt("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class q7{constructor(e,t,r,i,o){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=o,this.Qr.Ti(g=>{r.enqueueAndForget((0,Ke.Z)(function*(){var _;D0(l)&&(vt("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ke.Z)(function*(C){const D=wt(C);D.Kr.add(4),yield cy(D),D.Wr.set("Unknown"),D.Kr.delete(4),yield V2(D)}),function(C){return _.apply(this,arguments)})(l))}))}),this.Wr=new $7(r,i)}}function V2(n){return $N.apply(this,arguments)}function $N(){return($N=(0,Ke.Z)(function*(n){if(D0(n))for(const e of n.jr)yield e(!0)})).apply(this,arguments)}function cy(n){return qN.apply(this,arguments)}function qN(){return(qN=(0,Ke.Z)(function*(n){for(const e of n.jr)yield e(!1)})).apply(this,arguments)}function hT(n,e){const t=wt(n);t.qr.has(e.targetId)||(t.qr.set(e.targetId,e),YN(t)?KN(t):dy(t).cr()&&ZN(t,e))}function U2(n,e){const t=wt(n),r=dy(t);t.qr.delete(e),r.cr()&&Z6(t,e),0===t.qr.size&&(r.cr()?r.lr():D0(t)&&t.Wr.set("Unknown"))}function ZN(n,e){n.Gr.Y(e.targetId),dy(n).Ir(e)}function Z6(n,e){n.Gr.Y(e),dy(n).Ar(e)}function KN(n){n.Gr=new $L({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qr.get(e)||null}),dy(n).start(),n.Wr.Or()}function YN(n){return D0(n)&&!dy(n).ar()&&n.qr.size>0}function D0(n){return 0===wt(n).Kr.size}function K6(n){n.Gr=void 0}function Z7(n){return XN.apply(this,arguments)}function XN(){return(XN=(0,Ke.Z)(function*(n){n.qr.forEach((e,t)=>{ZN(n,e)})})).apply(this,arguments)}function K7(n,e){return QN.apply(this,arguments)}function QN(){return(QN=(0,Ke.Z)(function*(n,e){K6(n),YN(n)?(n.Wr.Lr(e),KN(n)):n.Wr.set("Unknown")})).apply(this,arguments)}function Y7(n,e,t){return JN.apply(this,arguments)}function JN(){return(JN=(0,Ke.Z)(function*(n,e,t){if(n.Wr.set("Online"),e instanceof K4&&2===e.state&&e.cause)try{yield(r=(0,Ke.Z)(function*(i,o){const l=o.cause;for(const g of o.targetIds)i.qr.has(g)&&(yield i.remoteSyncer.rejectListen(g,l),i.qr.delete(g),i.Gr.removeTarget(g))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){vt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pT(n,r)}else if(e instanceof nT?n.Gr.rt(e):e instanceof Z4?n.Gr.ft(e):n.Gr.ct(e),!t.isEqual(In.min()))try{const r=yield B6(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const l=i.Gr._t(o);return l.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const C=i.qr.get(_);C&&i.qr.set(_,C.withResumeToken(g.resumeToken,o))}}),l.targetMismatches.forEach(g=>{const _=i.qr.get(g);if(!_)return;i.qr.set(g,_.withResumeToken(xs.EMPTY_BYTE_STRING,_.snapshotVersion)),Z6(i,g);const C=new I0(_.target,g,1,_.sequenceNumber);ZN(i,C)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){vt("RemoteStore","Failed to raise snapshot:",r),yield pT(n,r)}var r})).apply(this,arguments)}function pT(n,e,t){return eP.apply(this,arguments)}function eP(){return(eP=(0,Ke.Z)(function*(n,e,t){if(!K1(e))throw e;n.Kr.add(1),yield cy(n),n.Wr.set("Offline"),t||(t=()=>B6(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ke.Z)(function*(){vt("RemoteStore","Retrying IndexedDB access"),yield t(),n.Kr.delete(1),yield V2(n)}))})).apply(this,arguments)}function Y6(n,e){return e().catch(t=>pT(n,t,e))}function ly(n){return tP.apply(this,arguments)}function tP(){return(tP=(0,Ke.Z)(function*(n){const e=wt(n),t=O0(e);let r=e.Ur.length>0?e.Ur[e.Ur.length-1].batchId:-1;for(;X7(e);)try{const i=yield T7(e.localStore,r);if(null===i){0===e.Ur.length&&t.lr();break}r=i.batchId,Q7(e,i)}catch(i){yield pT(e,i)}X6(e)&&Q6(e)})).apply(this,arguments)}function X7(n){return D0(n)&&n.Ur.length<10}function Q7(n,e){n.Ur.push(e);const t=O0(n);t.cr()&&t.br&&t.Pr(e.mutations)}function X6(n){return D0(n)&&!O0(n).ar()&&n.Ur.length>0}function Q6(n){O0(n).start()}function J7(n){return nP.apply(this,arguments)}function nP(){return(nP=(0,Ke.Z)(function*(n){O0(n).Sr()})).apply(this,arguments)}function e5(n){return rP.apply(this,arguments)}function rP(){return(rP=(0,Ke.Z)(function*(n){const e=O0(n);for(const t of n.Ur)e.Pr(t.mutations)})).apply(this,arguments)}function t5(n,e,t){return iP.apply(this,arguments)}function iP(){return(iP=(0,Ke.Z)(function*(n,e,t){const r=n.Ur.shift(),i=CN.from(r,e,t);yield Y6(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ly(n)})).apply(this,arguments)}function n5(n,e){return oP.apply(this,arguments)}function oP(){return(oP=(0,Ke.Z)(function*(n,e){var t;e&&O0(n).br&&(yield(t=(0,Ke.Z)(function*(r,i){if(W4(o=i.code)&&o!==qe.ABORTED){const l=r.Ur.shift();O0(r).hr(),yield Y6(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield ly(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),X6(n)&&Q6(n)})).apply(this,arguments)}function sP(n,e){return aP.apply(this,arguments)}function aP(){return(aP=(0,Ke.Z)(function*(n,e){const t=wt(n);e?(t.Kr.delete(2),yield V2(t)):e||(t.Kr.add(2),yield cy(t),t.Wr.set("Unknown"))})).apply(this,arguments)}function dy(n){return n.zr||(n.zr=function(e,t,r){const i=wt(e);return i.Cr(),new G7(t,i.nr,i.credentials,i.N,r)}(n.datastore,n.asyncQueue,{Si:Z7.bind(null,n),Ci:K7.bind(null,n),Er:Y7.bind(null,n)}),n.jr.push(function(){var e=(0,Ke.Z)(function*(t){t?(n.zr.hr(),YN(n)?KN(n):n.Wr.set("Unknown")):(yield n.zr.stop(),K6(n))});return function(t){return e.apply(this,arguments)}}())),n.zr}function O0(n){return n.Hr||(n.Hr=function(e,t,r){const i=wt(e);return i.Cr(),new W7(t,i.nr,i.credentials,i.N,r)}(n.datastore,n.asyncQueue,{Si:J7.bind(null,n),Ci:n5.bind(null,n),Vr:e5.bind(null,n),vr:t5.bind(null,n)}),n.jr.push(function(){var e=(0,Ke.Z)(function*(t){t?(n.Hr.hr(),yield ly(n)):(yield n.Hr.stop(),n.Ur.length>0&&(vt("RemoteStore",`Stopping write stream with ${n.Ur.length} pending writes`),n.Ur=[]))});return function(t){return e.apply(this,arguments)}}())),n.Hr}class uP{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,g=new uP(e,t,l,i,o);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ct(qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(n,e){if(Co("AsyncQueue",`${e}: ${n}`),K1(n))return new ct(qe.UNAVAILABLE,`${e}: ${n}`);throw n}class hy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ut.comparator(t.key,r.key):(t,r)=>Ut.comparator(t.key,r.key),this.keyedMap=_N(),this.sortedSet=new Go(this.comparator)}static emptySet(e){return new hy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new hy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class J6{constructor(){this.Jr=new Go(Ut.comparator)}track(e){const t=e.doc.key,r=this.Jr.get(t);r?0!==e.type&&3===r.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==r.type?this.Jr=this.Jr.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jr=this.Jr.remove(t):1===e.type&&2===r.type?this.Jr=this.Jr.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):zt():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal((t,r)=>{e.push(r)}),e}}class py{constructor(e,t,r,i,o,l,g,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new py(e,t,hy.emptySet(t),o,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&A2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class r5{constructor(){this.Xr=void 0,this.listeners=[]}}class i5{constructor(){this.queries=new sy(e=>D4(e),A2),this.onlineState="Unknown",this.Zr=new Set}}function cP(n,e){return lP.apply(this,arguments)}function lP(){return(lP=(0,Ke.Z)(function*(n,e){const t=wt(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new r5),i)try{o.Xr=yield t.onListen(r)}catch(l){const g=fy(l,`Initialization of query '${gN(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,o),o.listeners.push(e),e.eo(t.onlineState),o.Xr&&e.no(o.Xr)&&hP(t)})).apply(this,arguments)}function dP(n,e){return fP.apply(this,arguments)}function fP(){return(fP=(0,Ke.Z)(function*(n,e){const t=wt(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const l=o.listeners.indexOf(e);l>=0&&(o.listeners.splice(l,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function o5(n,e){const t=wt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const g of l.listeners)g.no(i)&&(r=!0);l.Xr=i}}r&&hP(t)}function s5(n,e,t){const r=wt(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function hP(n){n.Zr.forEach(e=>{e.next()})}class pP{constructor(e,t,r){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=r||{}}no(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new py(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=py.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class a5{constructor(e,t){this.payload=e,this.byteLength=t}ho(){return"metadata"in this.payload}}class eF{constructor(e){this.N=e}zn(e){return df(this.N,e)}Hn(e){return e.metadata.exists?i6(this.N,e.document,!1):Oi.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return ws(e)}}class u5{constructor(e,t,r){this.lo=e,this.localStore=t,this.N=r,this.queries=[],this.documents=[],this.progress=tF(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}wo(e){const t=new Map,r=new eF(this.N);for(const i of e)if(i.metadata.queries){const o=r.zn(i.metadata.name);for(const l of i.metadata.queries){const g=(t.get(l)||Pr()).add(o);t.set(l,g)}}return t}complete(){var e=this;return(0,Ke.Z)(function*(){const t=yield function(n,e,t,r){return LN.apply(this,arguments)}(e.localStore,new eF(e.N),e.documents,e.lo.id),r=e.wo(e.documents);for(const i of e.queries)yield R7(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new A7(Object.assign({},e.progress),t)})()}}function tF(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class nF{constructor(e){this.key=e}}class rF{constructor(e){this.key=e}}class iF{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=Pr(),this.mutatedKeys=Pr(),this.po=O4(e),this.To=new hy(this.po)}get Eo(){return this._o}Io(e,t){const r=t?t.Ao:new J6,i=t?t.To:this.To;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,g=!1;const _=KS(this.query)&&i.size===this.query.limit?i.last():null,C=YS(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,O)=>{const M=i.get(D),B=I2(this.query,O)?O:null,G=!!M&&this.mutatedKeys.has(M.key),$=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let ie=!1;M&&B?M.data.isEqual(B.data)?G!==$&&(r.track({type:3,doc:B}),ie=!0):this.Ro(M,B)||(r.track({type:2,doc:B}),ie=!0,(_&&this.po(B,_)>0||C&&this.po(B,C)<0)&&(g=!0)):!M&&B?(r.track({type:0,doc:B}),ie=!0):M&&!B&&(r.track({type:1,doc:M}),ie=!0,(_||C)&&(g=!0)),ie&&(B?(l=l.add(B),o=$?o.add(D):o.delete(D)):(l=l.delete(D),o=o.delete(D)))}),KS(this.query)||YS(this.query))for(;l.size>this.query.limit;){const D=KS(this.query)?l.last():l.first();l=l.delete(D.key),o=o.delete(D.key),r.track({type:1,doc:D})}return{To:l,Ao:r,Ln:g,mutatedKeys:o}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.To;this.To=e.To,this.mutatedKeys=e.mutatedKeys;const o=e.Ao.Yr();o.sort((C,D)=>function(O,M){const B=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zt()}};return B(O)-B(M)}(C.type,D.type)||this.po(C.doc,D.doc)),this.bo(r);const l=t?this.Po():[],g=0===this.yo.size&&this.current?1:0,_=g!==this.mo;return this.mo=g,0!==o.length||_?{snapshot:new py(this.query,e.To,i,o,e.mutatedKeys,0===g,_,!1),vo:l}:{vo:l}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({To:this.To,Ao:new J6,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.To.has(e)&&!this.To.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(t=>this._o=this._o.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this._o=this._o.delete(t)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=Pr(),this.To.forEach(r=>{this.Vo(r.key)&&(this.yo=this.yo.add(r.key))});const t=[];return e.forEach(r=>{this.yo.has(r)||t.push(new rF(r))}),this.yo.forEach(r=>{e.has(r)||t.push(new nF(r))}),t}So(e){this._o=e.Gn,this.yo=Pr();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return py.fromInitialDocuments(this.query,this.To,this.mutatedKeys,0===this.mo)}}class c5{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class l5{constructor(e){this.key=e,this.Co=!1}}class d5{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.No={},this.xo=new sy(g=>D4(g),A2),this.ko=new Map,this.$o=new Set,this.Oo=new Go(Ut.comparator),this.Fo=new Map,this.Mo=new VN,this.Lo={},this.Bo=new Map,this.Uo=X1.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function f5(n,e){return gP.apply(this,arguments)}function gP(){return(gP=(0,Ke.Z)(function*(n,e){const t=BP(n);let r,i;const o=t.xo.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.Do();else{const l=yield ay(t.localStore,gl(e)),g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield mP(t,e,r,"current"===g),t.isPrimaryClient&&hT(t.remoteStore,l)}return i})).apply(this,arguments)}function mP(n,e,t,r){return vP.apply(this,arguments)}function vP(){return(vP=(0,Ke.Z)(function*(n,e,t,r){n.Ko=(D,O,M)=>{return(B=(0,Ke.Z)(function*(G,$,ie,ce){let fe=$.view.Io(ie);fe.Ln&&(fe=yield cT(G.localStore,$.query,!1).then(({documents:nt})=>$.view.Io(nt,fe)));const Ae=ce&&ce.targetChanges.get($.targetId),De=$.view.applyChanges(fe,G.isPrimaryClient,Ae);return SP(G,$.targetId,De.vo),De.snapshot}),function(G,$,ie,ce){return B.apply(this,arguments)})(n,D,O,M);var B};const i=yield cT(n.localStore,e,!0),o=new iF(e,i.Gn),l=o.Io(i.documents),g=O2.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=o.applyChanges(l,n.isPrimaryClient,g);SP(n,t,_.vo);const C=new c5(e,t,o);return n.xo.set(e,C),n.ko.has(t)?n.ko.get(t).push(e):n.ko.set(t,[e]),_.snapshot})).apply(this,arguments)}function h5(n,e){return _P.apply(this,arguments)}function _P(){return(_P=(0,Ke.Z)(function*(n,e){const t=wt(n),r=t.xo.get(e),i=t.ko.get(r.targetId);if(i.length>1)return t.ko.set(r.targetId,i.filter(o=>!A2(o,e))),void t.xo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield uy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),U2(t.remoteStore,r.targetId),gy(t,r.targetId)}).catch(Q1))):(gy(t,r.targetId),yield uy(t.localStore,r.targetId,!0))})).apply(this,arguments)}function yP(){return(yP=(0,Ke.Z)(function*(n,e,t){const r=VP(n);try{const i=yield function(o,l){const g=wt(o),_=ys.now(),C=l.reduce((O,M)=>O.add(M.key),Pr());let D;return g.persistence.runTransaction("Locally write mutations","readwrite",O=>g.Qn.Pn(O,C).next(M=>{D=M;const B=[];for(const G of l){const $=VL(G,D.get(G.key));null!=$&&B.push(new C0(G.key,$,E4($.value.mapValue),Io.exists(!0)))}return g.In.addMutationBatch(O,_,B,l)})).then(O=>(O.applyToLocalDocumentSet(D),{batchId:O.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,g){let _=o.Lo[o.currentUser.toKey()];_||(_=new Go($n)),_=_.insert(l,g),o.Lo[o.currentUser.toKey()]=_}(r,i.batchId,t),yield Rh(r,i.changes),yield ly(r.remoteStore)}catch(i){const o=fy(i,"Failed to persist write");t.reject(o)}})).apply(this,arguments)}function oF(n,e){return xP.apply(this,arguments)}function xP(){return(xP=(0,Ke.Z)(function*(n,e){const t=wt(n);try{const r=yield S7(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.Fo.get(o);l&&(hn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Co=!0:i.modifiedDocuments.size>0?hn(l.Co):i.removedDocuments.size>0&&(hn(l.Co),l.Co=!1))}),yield Rh(t,r,e)}catch(r){yield Q1(r)}})).apply(this,arguments)}function sF(n,e,t){const r=wt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.xo.forEach((o,l)=>{const g=l.view.eo(e);g.snapshot&&i.push(g.snapshot)}),function(o,l){const g=wt(o);g.onlineState=l;let _=!1;g.queries.forEach((C,D)=>{for(const O of D.listeners)O.eo(l)&&(_=!0)}),_&&hP(g)}(r.eventManager,e),i.length&&r.No.Er(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function g5(n,e,t){return wP.apply(this,arguments)}function wP(){return(wP=(0,Ke.Z)(function*(n,e,t){const r=wt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fo.get(e),o=i&&i.key;if(o){let l=new Go(Ut.comparator);l=l.insert(o,Oi.newNoDocument(o,In.min()));const g=Pr().add(o),_=new D2(In.min(),new Map,new eo($n),l,g);yield oF(r,_),r.Oo=r.Oo.remove(o),r.Fo.delete(e),TP(r)}else yield uy(r.localStore,e,!1).then(()=>gy(r,e,t)).catch(Q1)})).apply(this,arguments)}function m5(n,e){return EP.apply(this,arguments)}function EP(){return(EP=(0,Ke.Z)(function*(n,e){const t=wt(n),r=e.batch.batchId;try{const i=yield b7(t.localStore,e);bP(t,r,null),IP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Rh(t,i)}catch(i){yield Q1(i)}})).apply(this,arguments)}function v5(n,e,t){return CP.apply(this,arguments)}function CP(){return(CP=(0,Ke.Z)(function*(n,e,t){const r=wt(n);try{const i=yield function(o,l){const g=wt(o);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let C;return g.In.lookupMutationBatch(_,l).next(D=>(hn(null!==D),C=D.keys(),g.In.removeMutationBatch(_,D))).next(()=>g.In.performConsistencyCheck(_)).next(()=>g.Qn.Pn(_,C))})}(r.localStore,e);bP(r,e,t),IP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Rh(r,i)}catch(i){yield Q1(i)}})).apply(this,arguments)}function AP(){return(AP=(0,Ke.Z)(function*(n,e){const t=wt(n);D0(t.remoteStore)||vt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const l=wt(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.In.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Bo.get(r)||[];i.push(e),t.Bo.set(r,i)}catch(r){const i=fy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function IP(n,e){(n.Bo.get(e)||[]).forEach(t=>{t.resolve()}),n.Bo.delete(e)}function bP(n,e,t){const r=wt(n);let i=r.Lo[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function gy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ko.get(e))n.xo.delete(r),t&&n.No.jo(r,t);n.ko.delete(e),n.isPrimaryClient&&n.Mo.cs(e).forEach(r=>{n.Mo.containsKey(r)||aF(n,r)})}function aF(n,e){n.$o.delete(e.path.canonicalString());const t=n.Oo.get(e);null!==t&&(U2(n.remoteStore,t),n.Oo=n.Oo.remove(e),n.Fo.delete(t),TP(n))}function SP(n,e,t){for(const r of t)r instanceof nF?(n.Mo.addReference(r.key,e),y5(n,r)):r instanceof rF?(vt("SyncEngine","Document no longer in limbo: "+r.key),n.Mo.removeReference(r.key,e),n.Mo.containsKey(r.key)||aF(n,r.key)):zt()}function y5(n,e){const t=e.key,r=t.path.canonicalString();n.Oo.get(t)||n.$o.has(r)||(vt("SyncEngine","New document in limbo: "+t),n.$o.add(r),TP(n))}function TP(n){for(;n.$o.size>0&&n.Oo.size<n.maxConcurrentLimboResolutions;){const e=n.$o.values().next().value;n.$o.delete(e);const t=new Ut(wr.fromString(e)),r=n.Uo.next();n.Fo.set(r,new l5(t)),n.Oo=n.Oo.insert(t,r),hT(n.remoteStore,new I0(gl(q_(t.path)),r,2,Dc.T))}}function Rh(n,e,t){return DP.apply(this,arguments)}function DP(){return(DP=(0,Ke.Z)(function*(n,e,t){const r=wt(n),i=[],o=[],l=[];var g;r.xo.isEmpty()||(r.xo.forEach((g,_)=>{l.push(r.Ko(_,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,C.fromCache?"not-current":"current"),i.push(C);const D=PN.kn(_.targetId,C);o.push(D)}}))}),yield Promise.all(l),r.No.Er(i),yield(g=(0,Ke.Z)(function*(_,C){const D=wt(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>at.forEach(C,M=>at.forEach(M.Nn,B=>D.persistence.referenceDelegate.addReference(O,M.targetId,B)).next(()=>at.forEach(M.xn,B=>D.persistence.referenceDelegate.removeReference(O,M.targetId,B)))))}catch(O){if(!K1(O))throw O;vt("LocalStore","Failed to update sequence numbers: "+O)}for(const O of C){const M=O.targetId;if(!O.fromCache){const B=D.Un.get(M),$=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);D.Un=D.Un.insert(M,$)}}}),function(_,C){return g.apply(this,arguments)})(r.localStore,o))})).apply(this,arguments)}function x5(n,e){return OP.apply(this,arguments)}function OP(){return(OP=(0,Ke.Z)(function*(n,e){const t=wt(n);if(!t.currentUser.isEqual(e)){vt("SyncEngine","User change. New user:",e.toKey());const r=yield L6(t.localStore,e);t.currentUser=e,(i=t).Bo.forEach(l=>{l.forEach(g=>{g.reject(new ct(qe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Bo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Rh(t,r.Wn)}var i})).apply(this,arguments)}function w5(n,e){const t=wt(n),r=t.Fo.get(e);if(r&&r.Co)return Pr().add(r.key);{let i=Pr();const o=t.ko.get(e);if(!o)return i;for(const l of o){const g=t.xo.get(l);i=i.unionWith(g.view.Eo)}return i}}function E5(n,e){return RP.apply(this,arguments)}function RP(){return(RP=(0,Ke.Z)(function*(n,e){const t=wt(n),r=yield cT(t.localStore,e.query,!0),i=e.view.So(r);return t.isPrimaryClient&&SP(t,e.targetId,i.vo),i})).apply(this,arguments)}function C5(n){return NP.apply(this,arguments)}function NP(){return(NP=(0,Ke.Z)(function*(n){const e=wt(n);return H6(e.localStore).then(t=>Rh(e,t))})).apply(this,arguments)}function A5(n,e,t,r){return PP.apply(this,arguments)}function PP(){return(PP=(0,Ke.Z)(function*(n,e,t,r){const i=wt(n),o=yield function(l,g){const _=wt(l),C=wt(_.In);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>C.Xt(D,g).next(O=>O?_.Qn.Pn(D,O):at.resolve(null)))}(i.localStore,e);var g;null!==o?("pending"===t?yield ly(i.remoteStore):"acknowledged"===t||"rejected"===t?(bP(i,e,r||null),IP(i,e),g=e,wt(wt(i.localStore).In).te(g)):zt(),yield Rh(i,o)):vt("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function MP(){return(MP=(0,Ke.Z)(function*(n,e){const t=wt(n);if(BP(t),VP(t),!0===e&&!0!==t.qo){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield uF(t,r.toArray());t.qo=!0,yield sP(t.remoteStore,!0);for(const o of i)hT(t.remoteStore,o)}else if(!1===e&&!1!==t.qo){const r=[];let i=Promise.resolve();t.ko.forEach((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(gy(t,l),uy(t.localStore,l,!0))),U2(t.remoteStore,l)}),yield i,yield uF(t,r),function(o){const l=wt(o);l.Fo.forEach((g,_)=>{U2(l.remoteStore,_)}),l.Mo.us(),l.Fo=new Map,l.Oo=new Go(Ut.comparator)}(t),t.qo=!1,yield sP(t.remoteStore,!1)}})).apply(this,arguments)}function uF(n,e,t){return FP.apply(this,arguments)}function FP(){return(FP=(0,Ke.Z)(function*(n,e,t){const r=wt(n),i=[],o=[];for(const l of e){let g;const _=r.ko.get(l);if(_&&0!==_.length){g=yield ay(r.localStore,gl(_[0]));for(const C of _){const D=r.xo.get(C),O=yield E5(r,D);O.snapshot&&o.push(O.snapshot)}}else{const C=yield U6(r.localStore,l);g=yield ay(r.localStore,C),yield mP(r,cF(C),l,!1)}i.push(g)}return r.No.Er(o),i})).apply(this,arguments)}function cF(n){return S4(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function b5(n){const e=wt(n);return wt(wt(e.localStore).persistence).pn()}function S5(n,e,t,r){return kP.apply(this,arguments)}function kP(){return(kP=(0,Ke.Z)(function*(n,e,t,r){const i=wt(n);if(i.qo)vt("SyncEngine","Ignoring unexpected query state notification.");else if(i.ko.has(e))switch(t){case"current":case"not-current":{const o=yield H6(i.localStore),l=D2.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Rh(i,o,l);break}case"rejected":yield uy(i.localStore,e,!0),gy(i,e,r);break;default:zt()}})).apply(this,arguments)}function T5(n,e,t){return LP.apply(this,arguments)}function LP(){return(LP=(0,Ke.Z)(function*(n,e,t){const r=BP(n);if(r.qo){for(const i of e){if(r.ko.has(i)){vt("SyncEngine","Adding an already active target "+i);continue}const o=yield U6(r.localStore,i),l=yield ay(r.localStore,o);yield mP(r,cF(o),l.targetId,!1),hT(r.remoteStore,l)}for(const i of t)r.ko.has(i)&&(yield uy(r.localStore,i,!1).then(()=>{U2(r.remoteStore,i),gy(r,i)}).catch(Q1))}})).apply(this,arguments)}function BP(n){const e=wt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g5.bind(null,e),e.No.Er=o5.bind(null,e.eventManager),e.No.jo=s5.bind(null,e.eventManager),e}function VP(n){const e=wt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v5.bind(null,e),e}class lF{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ke.Z)(function*(){t.N=B2(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),yield t.persistence.start(),t.gcScheduler=t.zo(e),t.localStore=t.Ho(e)})()}zo(e){return null}Ho(e){return k6(this.persistence,new F6,e.initialUser,this.N)}Go(e){return new L7(UN.Ns,this.N)}Wo(e){return new W6}terminate(){var e=this;return(0,Ke.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class dF extends lF{constructor(e,t,r){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ke.Z)(function*(){yield t().call(r,e),yield function(n){return kN.apply(this,arguments)}(r.localStore),yield r.Jo.initialize(r,e),yield VP(r.Jo.syncEngine),yield ly(r.Jo.remoteStore),yield r.persistence.nn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ho(e){return k6(this.persistence,new F6,e.initialUser,this.N)}zo(e){return new _7(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const t=NN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Uu.withCacheSize(this.cacheSizeBytes):Uu.DEFAULT;return new RN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,$6(),fT(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new W6}}class O5 extends dF{constructor(e,t){super(e,t,!1),this.Jo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ke.Z)(function*(){yield t().call(r,e);const i=r.Jo.syncEngine;r.sharedClientState instanceof WN&&(r.sharedClientState.syncEngine={_i:A5.bind(null,i),mi:S5.bind(null,i),gi:T5.bind(null,i),pn:b5.bind(null,i),wi:C5.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.nn(function(){var o=(0,Ke.Z)(function*(l){yield function(n,e){return MP.apply(this,arguments)}(r.Jo.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return o.apply(this,arguments)}}())})()}Wo(e){const t=$6();if(!WN.bt(t))throw new ct(qe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=NN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new WN(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class UP{initialize(e,t){var r=this;return(0,Ke.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>sF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=x5.bind(null,r.syncEngine),yield sP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new i5}createDatastore(e){const t=B2(e.databaseInfo.databaseId),r=new j7(e.databaseInfo);return new z7(e.credentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=g=>sF(this.syncEngine,g,0),l=z6.bt()?new z6:new V7,new q7(t,r,i,o,l);var t,r,i,o,l}createSyncEngine(e,t){return function(r,i,o,l,g,_,C){const D=new d5(r,i,o,l,g,_);return C&&(D.qo=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ke.Z)(function*(t){const r=wt(t);vt("RemoteStore","RemoteStore shutting down."),r.Kr.add(5),yield cy(r),r.Qr.shutdown(),r.Wr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function fF(n,e=10240){let t=0;return{read:()=>(0,Ke.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ke.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class gT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class R5{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new _s,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(r=>{r&&r.ho()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,Ke.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,Ke.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,Ke.Z)(function*(){const t=yield e.na();if(null===t)return null;const r=e.ta.decode(t),i=Number(r);isNaN(i)&&e.sa(`length string (${r}) is not valid number`);const o=yield e.ia(i);return new a5(JSON.parse(o),t.length+i)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,Ke.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const t=e.ra();t<0&&e.sa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ia(e){var t=this;return(0,Ke.Z)(function*(){for(;t.buffer.length<e;)(yield t.oa())&&t.sa("Reached the end of bundle when more is expected.");const r=t.ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,Ke.Z)(function*(){const t=yield e.Zo.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class N5{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ke.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ct(qe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ke.Z)(function*(o,l){const g=wt(o),_=P2(g.N)+"/documents",C={documents:l.map(B=>N2(g.N,B))},D=yield g.Ki("BatchGetDocuments",_,C),O=new Map;D.forEach(B=>{const G=function(n,e){return"found"in e?function(t,r){hn(!!r.found);const i=df(t,r.found.name),o=ws(r.found.updateTime),l=new Ra({mapValue:{fields:r.found.fields}});return Oi.newFoundDocument(i,o,l)}(n,e):"missing"in e?function(t,r){hn(!!r.missing),hn(!!r.readTime);const i=df(t,r.missing),o=ws(r.readTime);return Oi.newNoDocument(i,o)}(n,e):zt()}(g.N,B);O.set(G.key.toString(),G)});const M=[];return l.forEach(B=>{const G=O.get(B.toString());hn(!!G),M.push(G)}),M}),function(o,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new T2(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ke.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Ut.fromPath(i);e.mutations.push(new vN(o,e.precondition(o)))}),yield(r=(0,Ke.Z)(function*(i,o){const l=wt(i),g=P2(l.N)+"/documents",_={writes:o.map(C=>rT(l.N,C))};yield l.Li("Commit",g,_)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw zt();t=In.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ct(qe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Io.updateTime(t):Io.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(In.min()))throw new ct(qe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Io.updateTime(t)}return Io.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class P5{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.aa=5,this.rr=new zN(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,Ke.Z)(function*(){const t=new N5(e.datastore),r=e.ua(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.ha(o)}))}).catch(i=>{e.ha(i)})}))}ua(e){try{const t=this.updateFunction(e);return!W1(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!W4(t)}return!1}}class M5{constructor(e,t,r){var i=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=r,this.user=ea.UNAUTHENTICATED,this.clientId=h4.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var o=(0,Ke.Z)(function*(l){vt("FirestoreClient","Received user=",l.uid),yield i.credentialListener(l),i.user=l});return function(l){return o.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,Ke.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ct(qe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ke.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(r){const i=fy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function hF(n,e){return HP.apply(this,arguments)}function HP(){return(HP=(0,Ke.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),vt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ke.Z)(function*(o){r.isEqual(o)||(yield L6(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function pF(n,e){return jP.apply(this,arguments)}function jP(){return(jP=(0,Ke.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield GP(n);vt("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>{return(o=(0,Ke.Z)(function*(l,g){const _=wt(l);_.asyncQueue.verifyOperationInProgress(),vt("RemoteStore","RemoteStore received new credentials");const C=D0(_);_.Kr.add(3),yield cy(_),C&&_.Wr.set("Unknown"),yield _.remoteSyncer.handleCredentialChange(g),_.Kr.delete(3),yield V2(_)}),function(l,g){return o.apply(this,arguments)})(e.remoteStore,i);var o}),n.onlineComponents=e})).apply(this,arguments)}function GP(n){return WP.apply(this,arguments)}function WP(){return(WP=(0,Ke.Z)(function*(n){return n.offlineComponents||(vt("FirestoreClient","Using default OfflineComponentProvider"),yield hF(n,new lF)),n.offlineComponents})).apply(this,arguments)}function mT(n){return zP.apply(this,arguments)}function zP(){return(zP=(0,Ke.Z)(function*(n){return n.onlineComponents||(vt("FirestoreClient","Using default OnlineComponentProvider"),yield pF(n,new UP)),n.onlineComponents})).apply(this,arguments)}function gF(n){return GP(n).then(e=>e.persistence)}function $P(n){return GP(n).then(e=>e.localStore)}function mF(n){return mT(n).then(e=>e.remoteStore)}function qP(n){return mT(n).then(e=>e.syncEngine)}function my(n){return ZP.apply(this,arguments)}function ZP(){return(ZP=(0,Ke.Z)(function*(n){const e=yield mT(n),t=e.eventManager;return t.onListen=f5.bind(null,e.syncEngine),t.onUnlisten=h5.bind(null,e.syncEngine),t})).apply(this,arguments)}function vF(n,e,t={}){const r=new _s;return n.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return function(i,o,l,g,_){const C=new gT({next:O=>{o.enqueueAndForget(()=>dP(i,D));const M=O.docs.has(l);!M&&O.fromCache?_.reject(new ct(qe.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&O.fromCache&&g&&"server"===g.source?_.reject(new ct(qe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(O)},error:O=>_.reject(O)}),D=new pP(q_(l.path),C,{includeMetadataChanges:!0,uo:!0});return cP(i,D)}(yield my(n),n.asyncQueue,e,t,r)})),r.promise}function _F(n,e,t={}){const r=new _s;return n.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return function(i,o,l,g,_){const C=new gT({next:O=>{o.enqueueAndForget(()=>dP(i,D)),O.fromCache&&"server"===g.source?_.reject(new ct(qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(O)},error:O=>_.reject(O)}),D=new pP(l,C,{includeMetadataChanges:!0,uo:!0});return cP(i,D)}(yield my(n),n.asyncQueue,e,t,r)})),r.promise}class G5{constructor(e,t,r,i,o,l,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.useFetchStreams=_}}class vy{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vy&&e.projectId===this.projectId&&e.database===this.database}}const yF=new Map;function KP(n,e,t){if(!t)throw new ct(qe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xF(n,e,t,r){if(!0===e&&!0===r)throw new ct(qe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wF(n){if(!Ut.isDocumentKey(n))throw new ct(qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EF(n){if(Ut.isDocumentKey(n))throw new ct(qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":zt()}function or(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ct(qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vT(n);throw new ct(qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function CF(n,e){if(e<=0)throw new ct(qe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class AF{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ct(qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ct(qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,xF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class H2{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AF({}),this._settingsFrozen=!1,e instanceof vy?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ct(qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vy(r.options.projectId)}(e))}get app(){if(!this._app)throw new ct(qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ct(qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AF(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new hL;switch(t.type){case"gapi":const r=t.client;return hn(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new vL(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ct(qe.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yF.get(e);t&&(vt("ComponentProvider","Removing Datastore"),yF.delete(e),t.terminate())}(this),Promise.resolve()}}class vi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vi(this.firestore,e,this._key)}}class Pa{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pa(this.firestore,e,this._query)}}class hf extends Pa{constructor(e,t,r){super(e,t,q_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vi(this.firestore,null,new Ut(e))}withConverter(e){return new hf(this.firestore,e,this._path)}}function IF(n,e,...t){if(n=(0,Q.m9)(n),KP("collection","path",e),n instanceof H2){const r=wr.fromString(e,...t);return EF(r),new hf(n,null,r)}{if(!(n instanceof vi||n instanceof hf))throw new ct(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wr.fromString(e,...t));return EF(r),new hf(n.firestore,null,r)}}function _T(n,e,...t){if(n=(0,Q.m9)(n),1===arguments.length&&(e=h4.I()),KP("doc","path",e),n instanceof H2){const r=wr.fromString(e,...t);return wF(r),new vi(n,null,new Ut(r))}{if(!(n instanceof vi||n instanceof hf))throw new ct(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wr.fromString(e,...t));return wF(r),new vi(n.firestore,n instanceof hf?n.converter:null,new Ut(r))}}function bF(n,e){return n=(0,Q.m9)(n),e=(0,Q.m9)(e),(n instanceof vi||n instanceof hf)&&(e instanceof vi||e instanceof hf)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function SF(n,e){return n=(0,Q.m9)(n),e=(0,Q.m9)(e),n instanceof Pa&&e instanceof Pa&&n.firestore===e.firestore&&A2(n._query,e._query)&&n.converter===e.converter}class $5{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new zN(this,"async_queue_retry"),this.Ta=()=>{const t=fT();t&&vt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.rr.tr()};const e=fT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ta)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ea(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=fT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ta)}}enqueue(e){if(this.Ea(),this.wa)return new Promise(()=>{});const t=new _s;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,Ke.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(t){if(!K1(t))throw t;vt("AsyncQueue","Operation failed with retryable error: "+t)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const t=this.fa.then(()=>(this.ga=!0,e().catch(r=>{throw this.ma=r,this.ga=!1,Co("INTERNAL UNHANDLED ERROR: ",function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),l}(r)),r}).then(r=>(this.ga=!1,r))));return this.fa=t,t}enqueueAfterDelay(e,t,r){this.Ea(),this.pa.indexOf(e)>-1&&(t=0);const i=uP.createAndSchedule(this,e,t,r,o=>this.Ra(o));return this._a.push(i),i}Ea(){this.ma&&zt()}verifyOperationInProgress(){}ba(){var e=this;return(0,Ke.Z)(function*(){let t;do{t=e.fa,yield t}while(t!==e.fa)})()}Pa(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function YP(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class q5{constructor(){this._progressObserver={},this._taskCompletionResolver=new _s,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class no extends H2{constructor(e,t){super(e,t),this.type="firestore",this._queue=new $5,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||TF(this),this._firestoreClient.terminate()}}function Wo(n){return n._firestoreClient||TF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function TF(n){var e;const t=n._freezeSettings(),r=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new G5(n._databaseId,o,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var o,g;n._firestoreClient=new M5(n._credentials,n._queue,r)}function DF(n,e,t){const r=new _s;return n.asyncQueue.enqueue((0,Ke.Z)(function*(){try{yield hF(n,t),yield pF(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(o=i).name?o.code===qe.FAILED_PRECONDITION||o.code===qe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var o})).then(()=>r.promise)}function OF(n){if(n._initialized||n._terminated)throw new ct(qe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Nh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ct(qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ta(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pf(xs.fromBase64String(e))}catch(t){throw new ct(qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pf(xs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class J1{constructor(e){this._methodName=e}}class yT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ct(qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ct(qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $n(this._lat,e._lat)||$n(this._long,e._long)}}const r9=/^__.*__$/;class i9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new C0(e,this.data,this.fieldMask,t,this.fieldTransforms):new S2(e,this.data,t,this.fieldTransforms)}}class RF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new C0(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zt()}}class xT{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.N=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Sa(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new xT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Ca({path:r,xa:!1});return i.ka(e),i}$a(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Ca({path:r,xa:!1});return i.Sa(),i}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return ET(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(NF(this.Da)&&r9.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class o9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=r||B2(e)}Ba(e,t,r,i=!1){return new xT({Da:e,methodName:t,La:r,path:ta.emptyPath(),xa:!1,Ma:i},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function em(n){const e=n._freezeSettings(),t=B2(n._databaseId);return new o9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wT(n,e,t,r,i,o={}){const l=n.Ba(o.merge||o.mergeFields?2:0,e,t,i);e8("Data must be an object, but it was:",l,r);const g=FF(r,l);let _,C;if(o.merge)_=new G_(l.fieldMask),C=l.fieldTransforms;else if(o.mergeFields){const D=[];for(const O of o.mergeFields){const M=t8(e,O,t);if(!l.contains(M))throw new ct(qe.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);LF(D,M)||D.push(M)}_=new G_(D),C=l.fieldTransforms.filter(O=>_.covers(O.field))}else _=null,C=l.fieldTransforms;return new i9(new Ra(g),_,C)}class j2 extends J1{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof j2}}function PF(n,e,t){return new xT({Da:3,La:e.settings.La,methodName:n._methodName,xa:t},e.databaseId,e.N,e.ignoreUndefinedProperties)}class XP extends J1{_toFieldTransform(e){return new b2(e.path,new K_)}isEqual(e){return e instanceof XP}}class s9 extends J1{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=PF(this,e,!0),r=this.Ua.map(o=>tm(o,t)),i=new $1(r);return new b2(e.path,i)}isEqual(e){return this===e}}class a9 extends J1{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=PF(this,e,!0),r=this.Ua.map(o=>tm(o,t)),i=new q1(r);return new b2(e.path,i)}isEqual(e){return this===e}}class u9 extends J1{constructor(e,t){super(e),this.qa=t}_toFieldTransform(e){const t=new Y_(e.N,P4(e.N,this.qa));return new b2(e.path,t)}isEqual(e){return this===e}}function QP(n,e,t,r){const i=n.Ba(1,e,t);e8("Data must be an object, but it was:",i,r);const o=[],l=Ra.empty();G1(r,(_,C)=>{const D=n8(e,_,t);C=(0,Q.m9)(C);const O=i.$a(D);if(C instanceof j2)o.push(D);else{const M=tm(C,O);null!=M&&(o.push(D),l.set(D,M))}});const g=new G_(o);return new RF(l,g,i.fieldTransforms)}function JP(n,e,t,r,i,o){const l=n.Ba(1,e,t),g=[t8(e,r,t)],_=[i];if(o.length%2!=0)throw new ct(qe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<o.length;M+=2)g.push(t8(e,o[M])),_.push(o[M+1]);const C=[],D=Ra.empty();for(let M=g.length-1;M>=0;--M)if(!LF(C,g[M])){const B=g[M];let G=_[M];G=(0,Q.m9)(G);const $=l.$a(B);if(G instanceof j2)C.push(B);else{const ie=tm(G,$);null!=ie&&(C.push(B),D.set(B,ie))}}const O=new G_(C);return new RF(D,O,l.fieldTransforms)}function MF(n,e,t,r=!1){return tm(t,n.Ba(r?4:3,e))}function tm(n,e){if(kF(n=(0,Q.m9)(n)))return e8("Unsupported field value:",e,n),FF(n,e);if(n instanceof J1)return function(t,r){if(!NF(r.Da))throw r.Fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Fa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xa&&4!==e.Da)throw e.Fa("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const l of t){let g=tm(l,r.Oa(o));null==g&&(g={nullValue:"NULL_VALUE"}),i.push(g),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Q.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return P4(r.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ys.fromDate(t);return{timestampValue:R2(r.N,i)}}if(t instanceof ys){const i=new ys(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:R2(r.N,i)}}if(t instanceof yT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pf)return{bytesValue:J4(r.N,t._byteString)};if(t instanceof vi){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r.Fa(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:yN(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Fa(`Unsupported field value: ${vT(t)}`)}(n,e)}function FF(n,e){const t={};return m4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):G1(n,(r,i)=>{const o=tm(i,e.Na(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function kF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ys||n instanceof yT||n instanceof pf||n instanceof vi||n instanceof J1)}function e8(n,e,t){if(!kF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vT(t);throw e.Fa("an object"===r?n+" a custom object":n+" "+r)}var r}function t8(n,e,t){if((e=(0,Q.m9)(e))instanceof Nh)return e._internalPath;if("string"==typeof e)return n8(n,e);throw ET("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const c9=new RegExp("[~\\*/\\[\\]]");function n8(n,e,t){if(e.search(c9)>=0)throw ET(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nh(...e.split("."))._internalPath}catch(r){throw ET(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ET(n,e,t,r,i){const o=r&&!r.isEmpty(),l=void 0!==i;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(o||l)&&(_+=" (found",o&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new ct(qe.INVALID_ARGUMENT,g+n+_)}function LF(n,e){return n.some(t=>t.isEqual(e))}class G2{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new vi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new l9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(CT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class l9 extends G2{data(){return super.data()}}function CT(n,e){return"string"==typeof e?n8(n,e):e instanceof Nh?e._internalPath:e._delegate._internalPath}class nm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ph extends G2{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new W2(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(CT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class W2 extends Ph{data(e={}){return super.data(e)}}class R0{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new nm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new W2(this._firestore,this._userDataWriter,r.key,r,new nm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ct(qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new W2(r._firestore,r._userDataWriter,l.doc.key,l.doc,new nm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const g=new W2(r._firestore,r._userDataWriter,l.doc.key,l.doc,new nm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,C=-1;return 0!==l.type&&(_=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),1!==l.type&&(o=o.add(l.doc),C=o.indexOf(l.doc.key)),{type:d9(l.type),doc:g,oldIndex:_,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function d9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zt()}}function BF(n,e){return n instanceof Ph&&e instanceof Ph?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof R0&&e instanceof R0&&n._firestore===e._firestore&&SF(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function VF(n){if(YS(n)&&0===n.explicitOrderBy.length)throw new ct(qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class z2{}function N0(n,...e){for(const t of e)n=t._apply(n);return n}class f9 extends z2{constructor(e,t,r){super(),this.Ka=e,this.ja=t,this.Qa=r,this.type="where"}_apply(e){const t=em(e.firestore),r=function(i,o,l,g,_,C,D){let O;if(_.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new ct(qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on FieldPath.documentId().`);if("in"===C||"not-in"===C){zF(D,C);const B=[];for(const G of D)B.push(WF(g,i,G));O={arrayValue:{values:B}}}else O=WF(g,i,D)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||zF(D,C),O=MF(l,"where",D,"in"===C||"not-in"===C);const M=nu.create(_,C,O);return function(B,G){if(G.v()){const ie=hN(B);if(null!==ie&&!ie.isEqual(G.field))throw new ct(qe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ie.toString()}' and '${G.field.toString()}'`);const ce=fN(B);null!==ce&&$F(0,G.field,ce)}const $=function(ie,ce){for(const fe of ie.filters)if(ce.indexOf(fe.op)>=0)return fe.op;return null}(B,function(ie){switch(ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==$)throw new ct(qe.INVALID_ARGUMENT,$===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${$.toString()}' filters.`)}(i,M),M}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Pa(e.firestore,e.converter,function(i,o){const l=i.filters.concat([o]);return new Th(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class p9 extends z2{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new ct(qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ct(qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new $_(i,o);return function(g,_){if(null===fN(g)){const C=hN(g);null!==C&&$F(0,C,_.field)}}(r,l),l}(e._query,this.Ka,this.Wa);return new Pa(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Th(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class UF extends z2{constructor(e,t,r){super(),this.type=e,this.Ga=t,this.za=r}_apply(e){return new Pa(e.firestore,e.converter,T4(e._query,this.Ga,this.za))}}class HF extends z2{constructor(e,t,r){super(),this.type=e,this.Ha=t,this.Ja=r}_apply(e){const t=GF(e,this.type,this.Ha,this.Ja);return new Pa(e.firestore,e.converter,(i=t,new Th((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class jF extends z2{constructor(e,t,r){super(),this.type=e,this.Ha=t,this.Ja=r}_apply(e){const t=GF(e,this.type,this.Ha,this.Ja);return new Pa(e.firestore,e.converter,(i=t,new Th((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function GF(n,e,t,r){if(t[0]=(0,Q.m9)(t[0]),t[0]instanceof G2)return function(i,o,l,g,_){if(!g)throw new ct(qe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const C=[];for(const D of Z_(i))if(D.field.isKeyField())C.push(WS(o,g.key));else{const O=g.data.field(D.field);if(aN(O))throw new ct(qe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const M=D.field.canonicalString();throw new ct(qe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}C.push(O)}return new C2(C,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=em(n.firestore);return function(o,l,g,_,C,D){const O=o.explicitOrderBy;if(C.length>O.length)throw new ct(qe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let B=0;B<C.length;B++){const G=C[B];if(O[B].field.isKeyField()){if("string"!=typeof G)throw new ct(qe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof G}`);if(!pN(o)&&-1!==G.indexOf("/"))throw new ct(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${_}() must be a plain document ID, but '${G}' contains a slash.`);const $=o.path.child(wr.fromString(G));if(!Ut.isDocumentKey($))throw new ct(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${_}() must result in a valid document path, but '${$}' is not because it contains an odd number of segments.`);const ie=new Ut($);M.push(WS(l,ie))}else{const $=MF(g,_,G);M.push($)}}return new C2(M,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function WF(n,e,t){if("string"==typeof(t=(0,Q.m9)(t))){if(""===t)throw new ct(qe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!pN(e)&&-1!==t.indexOf("/"))throw new ct(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(wr.fromString(t));if(!Ut.isDocumentKey(r))throw new ct(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return WS(n,new Ut(r))}if(t instanceof vi)return WS(n,t._key);throw new ct(qe.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${vT(t)}.`)}function zF(n,e){if(!Array.isArray(n)||0===n.length)throw new ct(qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ct(qe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function $F(n,e,t){if(!t.isEqual(e))throw new ct(qe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class r8{convertValue(e,t="none"){switch(z1(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ao(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(W_(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zt()}}convertObject(e,t){const r={};return G1(e.fields,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new yT(Ao(e.latitude),Ao(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=v4(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(y2(e));default:return null}}convertTimestamp(e){const t=E0(e);return new ys(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=wr.fromString(e);hn(f6(r));const i=new vy(r.get(1),r.get(3)),o=new Ut(r.popFirst(5));return i.isEqual(t)||Co(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function AT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class E9 extends r8{constructor(e){super(),this.firestore=e}convertBytes(e){return new pf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vi(this.firestore,null,t)}}class qF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=em(e)}set(e,t,r){this._verifyNotCommitted();const i=P0(e,this._firestore),o=AT(i.converter,t,r),l=wT(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Io.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=P0(e,this._firestore);let l;return l="string"==typeof(t=(0,Q.m9)(t))||t instanceof Nh?JP(this._dataReader,"WriteBatch.update",o._key,t,r,i):QP(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(l.toMutation(o._key,Io.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=P0(e,this._firestore);return this._mutations=this._mutations.concat(new T2(t._key,Io.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ct(qe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function P0(n,e){if((n=(0,Q.m9)(n)).firestore!==e)throw new ct(qe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class rm extends r8{constructor(e){super(),this.firestore=e}convertBytes(e){return new pf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vi(this.firestore,null,t)}}function ZF(n,e,t){n=or(n,vi);const r=or(n.firestore,no),i=AT(n.converter,e,t);return _y(r,[wT(em(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Io.none())])}function KF(n,e,t,...r){n=or(n,vi);const i=or(n.firestore,no),o=em(i);let l;return l="string"==typeof(e=(0,Q.m9)(e))||e instanceof Nh?JP(o,"updateDoc",n._key,e,t,r):QP(o,"updateDoc",n._key,e),_y(i,[l.toMutation(n._key,Io.exists(!0))])}function YF(n,...e){var t,r,i;n=(0,Q.m9)(n);let o={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||YP(e[l])||(o=e[l],l++);const g={includeMetadataChanges:o.includeMetadataChanges};if(YP(e[l])){const O=e[l];e[l]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[l+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[l+2]=null===(i=O.complete)||void 0===i?void 0:i.bind(O)}let _,C,D;if(n instanceof vi)C=or(n.firestore,no),D=q_(n._key.path),_={next:O=>{e[l]&&e[l](i8(C,n,O))},error:e[l+1],complete:e[l+2]};else{const O=or(n,Pa);C=or(O.firestore,no),D=O._query;const M=new rm(C);_={next:B=>{e[l]&&e[l](new R0(C,M,O,B))},error:e[l+1],complete:e[l+2]},VF(n._query)}return function(O,M,B,G){const $=new gT(G),ie=new pP(M,$,B);return O.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return cP(yield my(O),ie)})),()=>{$.Xo(),O.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return dP(yield my(O),ie)}))}}(Wo(C),D,g,_)}function _y(n,e){return function(t,r){const i=new _s;return t.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return function(n,e,t){return yP.apply(this,arguments)}(yield qP(t),r,i)})),i.promise}(Wo(n),e)}function i8(n,e,t){const r=t.docs.get(e._key),i=new rm(n);return new Ph(n,i,e._key,r,new nm(t.hasPendingWrites,t.fromCache),e.converter)}class N9 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=em(e)}get(e){const t=P0(e,this._firestore),r=new E9(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return zt();const o=i[0];if(o.isFoundDocument())return new G2(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new G2(this._firestore,r,t._key,null,t.converter);throw zt()})}set(e,t,r){const i=P0(e,this._firestore),o=AT(i.converter,t,r),l=wT(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const o=P0(e,this._firestore);let l;return l="string"==typeof(t=(0,Q.m9)(t))||t instanceof Nh?JP(this._dataReader,"Transaction.update",o._key,t,r,i):QP(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,l),this}delete(e){const t=P0(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=P0(e,this._firestore),r=new rm(this._firestore);return super.get(e).then(i=>new Ph(this._firestore,r,t._key,i._document,new nm(!1,!1),t.converter))}}function o8(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ct("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function XF(){if("undefined"==typeof Uint8Array)throw new ct("unimplemented","Uint8Arrays are not available in this environment.")}function QF(){if("undefined"==typeof atob)throw new ct("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(n){H_=n})(Ga.SDK_VERSION),(0,Ga._registerComponent)(new zs.wA("firestore",(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=new no(t,new gL(n.getProvider("auth-internal")));return e=Object.assign({useFetchStreams:!0},e),r._setSettings(e),r},"PUBLIC")),(0,Ga.registerVersion)(d4,"3.1.1",void 0),(0,Ga.registerVersion)(d4,"3.1.1","esm2017");class $2{constructor(e){this._delegate=e}static fromBase64String(e){return QF(),new $2(pf.fromBase64String(e))}static fromUint8Array(e){return XF(),new $2(pf.fromUint8Array(e))}toBase64(){return QF(),this._delegate.toBase64()}toUint8Array(){return XF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function s8(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class G9{enableIndexedDbPersistence(e,t){return function(n,e){OF(n=or(n,no));const t=Wo(n),r=n._freezeSettings(),i=new UP;return DF(t,i,new dF(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){OF(n=or(n,no));const e=Wo(n),t=n._freezeSettings(),r=new UP;return DF(e,r,new O5(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new ct(qe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _s;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ke.Z)(function*(){try{yield(t=(0,Ke.Z)(function*(r){if(!pd.bt())return Promise.resolve();const i=r+"main";yield pd.delete(i)}),function(r){return t.apply(this,arguments)})(NN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class JF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vy||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&v2("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var i;const o=(n=or(n,H2))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&v2("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,g;if("string"==typeof r.mockUserToken)l=r.mockUserToken,g=ea.MOCK_USER;else{l=(0,Q.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new ct(qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ea(_)}n._credentials=new pL(new f4(l,g))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ke.Z)(function*(){const e=yield gF(n),t=yield mF(n);return e.setNetworkEnabled(!0),function(r){const i=wt(r);return i.Kr.delete(0),V2(i)}(t)}))}(Wo(n=or(n,no)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ke.Z)(function*(){const e=yield gF(n),t=yield mF(n);return e.setNetworkEnabled(!1),(r=(0,Ke.Z)(function*(i){const o=wt(i);o.Kr.add(0),yield cy(o),o.Wr.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Wo(n=or(n,no)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,xF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new _s;return e.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return function(n,e){return AP.apply(this,arguments)}(yield qP(e),t)})),t.promise}(Wo(n=or(n,no)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new gT(e);return n.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return r=yield my(n),i=t,wt(r).Zr.add(i),void i.next();var r,i})),()=>{t.Xo(),n.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return r=yield my(n),i=t,void wt(r).Zr.delete(i);var r,i}))}}(Wo(n=or(n,no)),YP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ct("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yy(this,IF(this._delegate,e))}catch(t){throw ru(t,"collection()","Firestore.collection()")}}doc(e){try{return new vl(this,_T(this._delegate,e))}catch(t){throw ru(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new iu(this,function(n,e){if(n=or(n,H2),KP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ct(qe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pa(n,null,(t=e,new Th(wr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ru(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new _s;return n.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){const r=yield(i=n,mT(i).then(o=>o.datastore));var i;new P5(n.asyncQueue,r,e,t).run()})),t.promise}(Wo(n),t=>e(new N9(n,t)))}(this._delegate,t=>e(new ek(this,t)))}batch(){return Wo(this._delegate),new tk(new qF(this._delegate,e=>_y(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Wo(n=or(n,no)),r=new q5;return function(n,e,t,r){const i=function(o,l){let g;return g="string"==typeof o?(new TextEncoder).encode(o):o,_=function(_,C){if(_ instanceof Uint8Array)return fF(_,C);if(_ instanceof ArrayBuffer)return fF(new Uint8Array(_),C);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new R5(_,l);var _}(t,B2(e));n.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){!function(n,e,t){const r=wt(n);var i;(i=(0,Ke.Z)(function*(o,l,g){try{const _=yield l.getMetadata();if(yield function(M,B){const G=wt(M),$=ws(B.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",ie=>G.Je.getBundleMetadata(ie,B.id)).then(ie=>!!ie&&ie.createTime.compareTo($)>=0)}(o.localStore,_))return yield l.close(),void g._completeWith((M=_,{taskState:"Success",documentsLoaded:M.totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}));g._updateProgress(tF(_));const C=new u5(_,o.localStore,l.N);let D=yield l.Qo();for(;D;){const M=yield C.fo(D);M&&g._updateProgress(M),D=yield l.Qo()}const O=yield C.complete();yield Rh(o,O.En,void 0),yield function(M,B){const G=wt(M);return G.persistence.runTransaction("Save bundle","readwrite",$=>G.Je.saveBundleMetadata($,B))}(o.localStore,_),g._completeWith(O.progress)}catch(_){v2("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_)}var M}),function(o,l,g){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield qP(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Ke.Z)(function*(){return function(t,r){const i=wt(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.Je.getNamedQuery(o,r))}(yield $P(n),e)}))}(Wo(n=or(n,no)),e).then(t=>t?new Pa(n,null,t.query):null)}(this._delegate,e).then(t=>t?new iu(this,t):null)}}class IT extends r8{constructor(e){super(),this.firestore=e}convertBytes(e){return new $2(new pf(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return vl.forKey(t,this.firestore,null)}}class ek{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new IT(e)}get(e){const t=om(e);return this._delegate.get(t).then(r=>new q2(this._firestore,new Ph(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=om(e);return r?(o8("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=om(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=om(e);return this._delegate.delete(t),this}}class tk{constructor(e){this._delegate=e}set(e,t,r){const i=om(e);return r?(o8("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=om(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=om(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class im{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new W2(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Z2(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=im.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new im(e,new IT(e),t),i.set(t,o)),o}}im.INSTANCES=new WeakMap;class vl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new IT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ct("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new vl(t,new vi(t._delegate,r,new Ut(e)))}static forKey(e,t,r){return new vl(t,new vi(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new yy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yy(this.firestore,IF(this._delegate,e))}catch(t){throw ru(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Q.m9)(e))instanceof vi&&bF(this._delegate,e)}set(e,t){t=o8("DocumentReference.set",t);try{return t?ZF(this._delegate,e,t):ZF(this._delegate,e)}catch(r){throw ru(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?KF(this._delegate,e):KF(this._delegate,e,t,...r)}catch(i){throw ru(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return _y(or(n.firestore,no),[new T2(n._key,Io.none())])}(this._delegate)}onSnapshot(...e){const t=nk(e),r=rk(e,i=>new q2(this.firestore,new Ph(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return YF(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=or(n,vi);const e=or(n.firestore,no),t=Wo(e),r=new rm(e);return function(n,e){const t=new _s;return n.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return(r=(0,Ke.Z)(function*(i,o,l){try{const g=yield function(_,C){const D=wt(_);return D.persistence.runTransaction("read document","readonly",O=>D.Qn.An(O,C))}(i,o);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new ct(qe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=fy(g,`Failed to get document '${o} from cache`);l.reject(_)}}),function(i,o,l){return r.apply(this,arguments)})(yield $P(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ph(e,r,n._key,i,new nm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=or(n,vi);const e=or(n.firestore,no);return vF(Wo(e),n._key,{source:"server"}).then(t=>i8(e,n,t))}(this._delegate):function(n){n=or(n,vi);const e=or(n.firestore,no);return vF(Wo(e),n._key).then(t=>i8(e,n,t))}(this._delegate),t.then(r=>new q2(this.firestore,new Ph(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new vl(this.firestore,this._delegate.withConverter(e?im.getInstance(this.firestore,e):null))}}function ru(n,e,t){return n.message=n.message.replace(e,t),n}function nk(n){for(const e of n)if("object"==typeof e&&!s8(e))return e;return{}}function rk(n,e){var t,r;let i;return i=s8(n[0])?n[0]:s8(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class q2{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new vl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return BF(this._delegate,e._delegate)}}class Z2 extends q2{data(e){const t=this._delegate.data(e);return function(n,e){n||zt()}(void 0!==t),t}}class iu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new IT(e)}where(e,t,r){try{return new iu(this.firestore,N0(this._delegate,function(n,e,t){const r=e,i=CT("where",n);return new f9(i,r,t)}(e,t,r)))}catch(i){throw ru(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new iu(this.firestore,N0(this._delegate,function(n,e="asc"){const t=e,r=CT("orderBy",n);return new p9(r,t)}(e,t)))}catch(r){throw ru(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new iu(this.firestore,N0(this._delegate,function(n){return CF("limit",n),new UF("limit",n,"F")}(e)))}catch(t){throw ru(t,"limit()","Query.limit()")}}limitToLast(e){try{return new iu(this.firestore,N0(this._delegate,function(n){return CF("limitToLast",n),new UF("limitToLast",n,"L")}(e)))}catch(t){throw ru(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new iu(this.firestore,N0(this._delegate,function(...n){return new HF("startAt",n,!0)}(...e)))}catch(t){throw ru(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new iu(this.firestore,N0(this._delegate,function(...n){return new HF("startAfter",n,!1)}(...e)))}catch(t){throw ru(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new iu(this.firestore,N0(this._delegate,function(...n){return new jF("endBefore",n,!0)}(...e)))}catch(t){throw ru(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new iu(this.firestore,N0(this._delegate,function(...n){return new jF("endAt",n,!1)}(...e)))}catch(t){throw ru(t,"endAt()","Query.endAt()")}}isEqual(e){return SF(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=or(n,Pa);const e=or(n.firestore,no),t=Wo(e),r=new rm(e);return function(n,e){const t=new _s;return n.asyncQueue.enqueueAndForget((0,Ke.Z)(function*(){return(r=(0,Ke.Z)(function*(i,o,l){try{const g=yield cT(i,o,!0),_=new iF(o,g.Gn),C=_.Io(g.documents),D=_.applyChanges(C,!1);l.resolve(D.snapshot)}catch(g){const _=fy(g,`Failed to execute query '${o} against cache`);l.reject(_)}}),function(i,o,l){return r.apply(this,arguments)})(yield $P(n),e,t);var r})),t.promise}(t,n._query).then(i=>new R0(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=or(n,Pa);const e=or(n.firestore,no),t=Wo(e),r=new rm(e);return _F(t,n._query,{source:"server"}).then(i=>new R0(e,r,n,i))}(this._delegate):function(n){n=or(n,Pa);const e=or(n.firestore,no),t=Wo(e),r=new rm(e);return VF(n._query),_F(t,n._query).then(i=>new R0(e,r,n,i))}(this._delegate),t.then(r=>new a8(this.firestore,new R0(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=nk(e),r=rk(e,i=>new a8(this.firestore,new R0(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return YF(this._delegate,t,r)}withConverter(e){return new iu(this.firestore,this._delegate.withConverter(e?im.getInstance(this.firestore,e):null))}}class z9{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Z2(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class a8{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new iu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Z2(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new z9(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Z2(this._firestore,r))})}isEqual(e){return BF(this._delegate,e._delegate)}}class yy extends iu{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new vl(this.firestore,e):null}doc(e){try{return new vl(this.firestore,void 0===e?_T(this._delegate):_T(this._delegate,e))}catch(t){throw ru(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=or(n.firestore,no),r=_T(n),i=AT(n.converter,e);return _y(t,[wT(em(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Io.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new vl(this.firestore,t))}isEqual(e){return bF(this._delegate,e._delegate)}withConverter(e){return new yy(this.firestore,this._delegate.withConverter(e?im.getInstance(this.firestore,e):null))}}function om(n){return or(n,vi)}class u8{constructor(...e){this._delegate=new Nh(...e)}static documentId(){return new u8(ta.keyField().canonicalString())}isEqual(e){return(e=(0,Q.m9)(e))instanceof Nh&&this._delegate._internalPath.isEqual(e._internalPath)}}class sm{constructor(e){this._delegate=e}static serverTimestamp(){const e=new XP("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new sm(e)}static delete(){const e=new j2("deleteField");return e._methodName="FieldValue.delete",new sm(e)}static arrayUnion(...e){const t=function(...n){return new s9("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new sm(t)}static arrayRemove(...e){const t=function(...n){return new a9("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new sm(t)}static increment(e){const t=function(n){return new u9("increment",n)}(e);return t._methodName="FieldValue.increment",new sm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const $9={Firestore:JF,GeoPoint:yT,Timestamp:ys,Blob:$2,Transaction:ek,WriteBatch:tk,DocumentReference:vl,DocumentSnapshot:q2,Query:iu,QueryDocumentSnapshot:Z2,QuerySnapshot:a8,CollectionReference:yy,FieldPath:u8,FieldValue:sm,setLogLevel:function(n){!function(n){w0.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function ik(n,e){return function(n,e=cw.z){return new Qn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function c8(n,e){return ik(n,e).pipe((0,jt.U)(t=>({payload:t,type:"query"})))}function bT(n,e){return c8(n,e).pipe(op(void 0),u_(),(0,jt.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const _=i.find(D=>D.doc.ref.isEqual(l.ref)),C=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&C&&JSON.stringify(C.metadata)===JSON.stringify(l.metadata)||o.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),o}))}function ok(n,e,t){return bT(n,t).pipe(Hd((r,i)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return l8(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return l8(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return l8(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),nI(),(0,jt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function l8(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function sk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new zs.wA("firestore-compat",t=>((e,t)=>new JF(e,t,new G9))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},$9)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.4")}(jg.Z);class ak{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=bT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,jt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(op(void 0),u_(),bi(([r,i])=>i.length>0||!r),(0,jt.U)(([r,i])=>i),pr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Hd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sk(e);return ok(this.query,t,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(e={}){return c8(this.query,this.afs.schedulers.outsideAngular).pipe((0,jt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),pr.iC)}get(e){return(0,Cn.D)(this.query.get(e)).pipe(pr.iC)}add(e){return this.ref.add(e)}doc(e){return new uk(this.ref.doc(e),this.afs)}}class uk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=dk(r,t);return new ak(i,o,this.afs)}snapshotChanges(){return function(n,e){return ik(n,e).pipe(op(void 0),u_(),(0,jt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,jt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Cn.D)(this.ref.get(e)).pipe(pr.iC)}}class J9{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?bT(this.query,this.afs.schedulers.outsideAngular).pipe((0,jt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),bi(t=>t.length>0),pr.iC):bT(this.query,this.afs.schedulers.outsideAngular).pipe(pr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Hd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sk(e);return ok(this.query,t,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(e={}){return c8(this.query,this.afs.schedulers.outsideAngular).pipe((0,jt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),pr.iC)}get(e){return(0,Cn.D)(this.query.get(e)).pipe(pr.iC)}}const ck=new A.OlP("angularfire2.enableFirestorePersistence"),lk=new A.OlP("angularfire2.firestore.persistenceSettings"),eB=new A.OlP("angularfire2.firestore.settings"),tB=new A.OlP("angularfire2.firestore.use-emulator");function dk(n,e=(t=>t)){return{query:e(n),ref:n}}let nB=(()=>{class n{constructor(t,r,i,o,l,g,_,C,D,O,M,B,G,$,ie,ce,fe){this.schedulers=_;const Ae=(0,jr.on)(t,g,r),De=D;O&&os(Ae,g,M,G,$,ie,B,ce),[this.firestore,this.persistenceEnabled$]=(0,jr.cc)(`${Ae.name}.firestore`,"AngularFirestore",Ae.name,()=>{const nt=g.runOutsideAngular(()=>Ae.firestore());if(o&&nt.settings(o),De&&nt.useEmulator(...De),i&&!Ln(l)){const ht=()=>{try{return(0,Cn.D)(nt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(xt){return"undefined"!=typeof console&&console.warn(xt),(0,Ft.of)(!1)}};return[nt,g.runOutsideAngular(ht)]}return[nt,(0,Ft.of)(!1)]},[o,De,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:l}=dk(i,r),g=this.schedulers.ngZone.run(()=>o);return new ak(g,l,this)}collectionGroup(t,r){const i=r||(l=>l),o=this.firestore.collectionGroup(t);return new J9(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new uk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(jr.Dh),A.LFG(jr.xv,8),A.LFG(ck,8),A.LFG(eB,8),A.LFG(A.Lbi),A.LFG(A.R0b),A.LFG(pr.HU),A.LFG(lk,8),A.LFG(tB,8),A.LFG(gc,8),A.LFG(Ze,8),A.LFG(gt,8),A.LFG(_t,8),A.LFG(Xt,8),A.LFG(Wt,8),A.LFG(pi,8),A.LFG(jl,8))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rB=(()=>{class n{constructor(){Y.Z.registerVersion("angularfire",pr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:ck,useValue:!0},{provide:lk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=A.oAB({type:n}),n.\u0275inj=A.cJS({providers:[nB]}),n})();const fk_firebaseConfig={apiKey:"AIzaSyBQwLnlRqs3vo39SinQd9ROboyvtOLHUNE",authDomain:"gestion-livre-23045.firebaseapp.com",databaseURL:"https://gestion-livre-23045-default-rtdb.europe-west1.firebasedatabase.app",projectId:"gestion-livre-23045",storageBucket:"gestion-livre-23045.appspot.com",messagingSenderId:"908443147418",appId:"1:908443147418:web:166993903fed51f1079323"};let iB=(()=>{class n{constructor(t,r,i){this.formBuilder=t,this.authService=r,this.router=i}ngOnInit(){this.initForm()}initForm(){this.signupForm=this.formBuilder.group({email:["",[wc.required,wc.email]],password:["",[wc.required,wc.pattern(/[0-9a-zA-Z]{6,}/)]]})}onSubmit(){const t=this.signupForm.get("email").value,r=this.signupForm.get("password").value;this.authService.createNewUser(t,r).then(()=>{this.router.navigate(["/books"])},i=>{this.errorMessage=i})}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(Ka),A.Y36(Ud),A.Y36(Ki))},n.\u0275cmp=A.Xpm({type:n,selectors:[["app-signup"]],decls:17,vars:3,consts:[[1,"row"],[1,"col-sm-8","col-sm-offset-2"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"]],template:function(t,r){1&t&&(A.TgZ(0,"div",0),A.TgZ(1,"div",1),A.TgZ(2,"h2"),A._uU(3,"Cr\xe9er un compte"),A.qZA(),A.TgZ(4,"form",2),A.NdJ("ngSubmit",function(){return r.onSubmit()}),A.TgZ(5,"div",3),A.TgZ(6,"label",4),A._uU(7,"Adresse mail"),A.qZA(),A._UZ(8,"input",5),A.qZA(),A.TgZ(9,"div",3),A.TgZ(10,"label",6),A._uU(11,"Mot de passe"),A.qZA(),A._UZ(12,"input",7),A.qZA(),A.TgZ(13,"button",8),A._uU(14,"Cr\xe9er mon compte"),A.qZA(),A.qZA(),A.TgZ(15,"p",9),A._uU(16),A.qZA(),A.qZA(),A.qZA()),2&t&&(A.xp6(4),A.Q6J("formGroup",r.signupForm),A.xp6(9),A.Q6J("disabled",r.signupForm.invalid),A.xp6(3),A.Oqu(r.errorMessage))},directives:[bp,Ng,eh,$d,Rg,th],encapsulation:2}),n})(),oB=(()=>{class n{constructor(t,r,i){this.formBuilder=t,this.authService=r,this.router=i}ngOnInit(){this.initForm()}initForm(){this.signinForm=this.formBuilder.group({email:["",[wc.required,wc.email]],password:["",[wc.required,wc.pattern(/[0-9a-zA-Z]{6,}/)]]})}onSubmit(){const t=this.signinForm.get("email").value,r=this.signinForm.get("password").value;this.authService.signInUser(t,r).then(()=>{this.router.navigate(["/books"])},i=>{this.errorMessage=i})}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(Ka),A.Y36(Ud),A.Y36(Ki))},n.\u0275cmp=A.Xpm({type:n,selectors:[["app-signin"]],decls:17,vars:3,consts:[[1,"row"],[1,"col-sm-8","col-sm-offset-2"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"]],template:function(t,r){1&t&&(A.TgZ(0,"div",0),A.TgZ(1,"div",1),A.TgZ(2,"h2"),A._uU(3,"Authentification"),A.qZA(),A.TgZ(4,"form",2),A.NdJ("ngSubmit",function(){return r.onSubmit()}),A.TgZ(5,"div",3),A.TgZ(6,"label",4),A._uU(7,"Adresse mail"),A.qZA(),A._UZ(8,"input",5),A.qZA(),A.TgZ(9,"div",3),A.TgZ(10,"label",6),A._uU(11,"Mot de passe"),A.qZA(),A._UZ(12,"input",7),A.qZA(),A.TgZ(13,"button",8),A._uU(14,"Connexion"),A.qZA(),A.qZA(),A.TgZ(15,"p",9),A._uU(16),A.qZA(),A.qZA(),A.qZA()),2&t&&(A.xp6(4),A.Q6J("formGroup",r.signinForm),A.xp6(9),A.Q6J("disabled",r.signinForm.invalid),A.xp6(3),A.Oqu(r.errorMessage))},directives:[bp,Ng,eh,$d,Rg,th],encapsulation:2}),n})();function sB(n,e){if(1&n){const t=A.EpF();A.TgZ(0,"button",5),A.NdJ("click",function(){const o=A.CHM(t).index;return A.oxw().onViewBook(o)}),A.TgZ(1,"h3",6),A._uU(2),A.TgZ(3,"button",7),A.NdJ("click",function(){const o=A.CHM(t).$implicit;return A.oxw().onDeleteBook(o)}),A._UZ(4,"span",8),A.qZA(),A.qZA(),A.TgZ(5,"p",9),A._uU(6),A.qZA(),A.qZA()}if(2&n){const t=e.$implicit;A.xp6(2),A.hij(" ",t.title," "),A.xp6(4),A.Oqu(t.author)}}let aB=(()=>{class n{constructor(t,r){this.booksService=t,this.router=r}ngOnInit(){this.booksSubscription=this.booksService.booksSubject.subscribe(t=>{this.books=t}),this.booksService.emitBooks()}onNewBook(){this.router.navigate(["/books","new"])}onDeleteBook(t){this.booksService.removeBook(t)}onViewBook(t){this.router.navigate(["/books","view",t])}ngOnDestroy(){this.booksSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(a_),A.Y36(Ki))},n.\u0275cmp=A.Xpm({type:n,selectors:[["app-book-list"]],decls:8,vars:1,consts:[[1,"row"],[1,"col-xs-12"],[1,"list-group"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"list-group-item",3,"click"],[1,"list-group-item-heading"],[1,"btn","btn-default","pull-right",3,"click"],[1,"glyphicon","glyphicon-minus"],[1,"list-group-item-text"]],template:function(t,r){1&t&&(A.TgZ(0,"div",0),A.TgZ(1,"div",1),A.TgZ(2,"h2"),A._uU(3,"Vos livres"),A.qZA(),A.TgZ(4,"div",2),A.YNc(5,sB,7,2,"button",3),A.qZA(),A.TgZ(6,"button",4),A.NdJ("click",function(){return r.onNewBook()}),A._uU(7,"Nouveau livre"),A.qZA(),A.qZA(),A.qZA()),2&t&&(A.xp6(5),A.Q6J("ngForOf",r.books))},directives:[Nn],encapsulation:2}),n})();class hk{constructor(e,t,r){this.title=e,this.author=t,this.id=r}}let uB=(()=>{class n{constructor(t,r,i){this.route=t,this.booksService=r,this.router=i}ngOnInit(){this.book=new hk("","",0),this.booksService.getSingleBook(+this.route.snapshot.params.id).then(r=>{this.book=r})}onBack(){this.router.navigate(["/books"])}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(lp),A.Y36(a_),A.Y36(Ki))},n.\u0275cmp=A.Xpm({type:n,selectors:[["app-single-book"]],decls:10,vars:3,consts:[[1,"row"],[1,"col-xs-12"],[1,"btn","btn-default",3,"click"]],template:function(t,r){1&t&&(A.TgZ(0,"div",0),A.TgZ(1,"div",1),A.TgZ(2,"h1"),A._uU(3),A.qZA(),A.TgZ(4,"h3"),A._uU(5),A.qZA(),A.TgZ(6,"p"),A._uU(7),A.qZA(),A.TgZ(8,"button",2),A.NdJ("click",function(){return r.onBack()}),A._uU(9,"Retour"),A.qZA(),A.qZA(),A.qZA()),2&t&&(A.xp6(3),A.Oqu(r.book.title),A.xp6(2),A.Oqu(r.book.author),A.xp6(2),A.Oqu(r.book.synopsis))},encapsulation:2}),n})();var lB=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),dB=function(n){function e(t){var r=this.constructor,i=n.call(this,t)||this;return Object.defineProperty(i,"name",{value:r.name,enumerable:!1,configurable:!0}),function(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}(i,r.prototype),function(n,e){void 0===e&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}(i),i}return lB(e,n),e}(Error),hB=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const Hu=function(n){function e(t){void 0===t&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return hB(e,n),e.prototype.getKind=function(){return this.constructor.kind},e.kind="Exception",e}(dB);var gB=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const gd=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return gB(e,n),e.kind="ArgumentException",e}(Hu);var vB=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const Gt=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return vB(e,n),e.kind="IllegalArgumentException",e}(Hu),xB=function(){function n(e){if(this.binarizer=e,null===e)throw new Gt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var o=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(o))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(e){return""}},n}();var wB=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const Cs=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return wB(e,n),e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Hu),AB=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),oi=function(){function n(){}return n.arraycopy=function(e,t,r,i,o){for(;o--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}();var bB=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const d8=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return bB(e,n),e.kind="IndexOutOfBoundsException",e}(Hu);var TB=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const gk=function(n){function e(t,r){void 0===t&&(t=void 0),void 0===r&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return TB(e,n),e.kind="ArrayIndexOutOfBoundsException",e}(d8),ju=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var o=t;o<r;o++)e[o]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Gt("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new gk(t);if(r>e)throw new gk(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){return Array.from({length:e}).map(function(o){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){return Array.from({length:e}).map(function(o){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!(e&&t&&e.length&&t.length&&e.length===t.length))return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(null===e)return 0;var i=1;try{for(var o=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),l=o.next();!l.done;l=o.next())i=31*i+l.value}catch(_){t={error:_}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,o=new Int32Array(i);return oi.arraycopy(e,t,o,0,i),o},n.binarySearch=function(e,t,r){void 0===r&&(r=n.numberComparator);for(var i=0,o=e.length-1;i<=o;){var l=o+i>>1,g=r(t,e[l]);if(g>0)i=l+1;else{if(!(g<0))return l;o=l-1}}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),qn=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(0===e)return 32;var r=31;return 0!=(t=e<<16)&&(r-=16,e=t),0!=(t=e<<8)&&(r-=8,e=t),0!=(t=e<<4)&&(r-=4,e=t),0!=(t=e<<2)&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(0===e)return 32;var t=1;return e>>>16==0&&(t+=16,e<<=16),e>>>24==0&&(t+=8,e<<=8),e>>>28==0&&(t+=4,e<<=4),e>>>30==0&&(t+=2,e<<=2),t-(e>>>31)},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,63&(e+=e>>>8)+(e>>>16)},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),As=function(){function n(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=null==t?n.makeArray(e):t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>32*this.bits.length){var t=n.makeArray(e);oi.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return 0!=(this.bits[Math.floor(e/32)]&1<<(31&e))},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(31&e))-1);for(var l=r.length;0===o;){if(++i===l)return t;o=r[i]}var g=32*i+qn.numberOfTrailingZeros(o);return g>t?t:g},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(31&e))-1);for(var l=r.length;0===o;){if(++i===l)return t;o=~r[i]}var g=32*i+qn.numberOfTrailingZeros(o);return g>t?t:g},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Gt;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,l=r;l<=i;l++)o[l]|=(2<<(l<i?31:31&t))-(1<<(l>r?0:31&e))}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Gt;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),l=this.bits,g=i;g<=o;g++){var D=(2<<(g<o?31:31&t))-(1<<(g>i?0:31&e))&4294967295;if((l[g]&D)!==(r?D:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Gt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit(1==(e>>r-1&1))},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Gt("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var o=0;o<i;o++){for(var l=0,g=0;g<8;g++)this.get(e)&&(l|=1<<7-g),e++;t[r+o]=l}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,o=0;o<r;o++){var l=i[o];e[t-o]=l=(l=(l=(l=(l=l>>1&1431655765|(1431655765&l)<<1)>>2&858993459|(858993459&l)<<2)>>4&252645135|(252645135&l)<<4)>>8&16711935|(16711935&l)<<8)>>16&65535|(65535&l)<<16}if(this.size!==32*r){var g=32*r-this.size,_=e[0]>>>g;for(o=1;o<r;o++){var C=e[o];e[o-1]=_|=C<<32-g,_=C>>>g}e[r-1]=_}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){return e instanceof n&&(this.size===e.size&&ju.equals(this.bits,e.bits))},n.prototype.hashCode=function(){return 31*this.size+ju.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)0==(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n}();var ST=(()=>(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ASSUME_GS1=7]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(ST||(ST={})),ST))();const Wr=ST;var MB=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const yt=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return MB(e,n),e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Hu);var kB=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tr=(()=>(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"}(Tr||(Tr={})),Tr))();const zo=function(){function n(e,t,r){for(var i,o,l=[],g=3;g<arguments.length;g++)l[g-3]=arguments[g];this.valueIdentifier=e,this.name=r,this.values="number"==typeof t?Int32Array.from([t]):t,this.otherEncodingNames=l,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var _=this.values,C=0,D=_.length;C!==D;C++){var O=_[C];n.VALUES_TO_ECI.set(O,this)}try{for(var M=kB(l),B=M.next();!B.done;B=M.next()){var G=B.value;n.NAME_TO_ECI.set(G,this)}}catch($){i={error:$}}finally{try{B&&!B.done&&(o=M.return)&&o.call(M)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new yt("incorect value");var t=n.VALUES_TO_ECI.get(e);if(void 0===t)throw new yt("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(void 0===t)throw new yt("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Tr.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Tr.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Tr.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Tr.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Tr.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Tr.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Tr.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Tr.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Tr.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Tr.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Tr.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Tr.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Tr.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Tr.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Tr.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Tr.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Tr.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Tr.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Tr.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Tr.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Tr.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Tr.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Tr.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Tr.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Tr.Big5,28,"Big5"),n.GB18030=new n(Tr.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Tr.EUC_KR,30,"EUC_KR","EUC-KR"),n}();var BB=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const TT=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return BB(e,n),e.kind="UnsupportedOperationException",e}(Hu),gf=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&"ISO-8859-1"===e},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):"undefined"==typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)},n.isBrowser=function(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)},n.encodingName=function(e){return"string"==typeof e?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof zo?e:zo.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",o=0,l=e.length;o<l;o++){var g=e[o].toString(16);g.length<2&&(g="0"+g),i+="%"+g}return decodeURIComponent(i)}if(r.equals(zo.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new TT("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(zo.UTF8)||e.equals(zo.ISO8859_1)||e.equals(zo.ASCII)},n.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))).split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},n}(),ti=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){void 0===t&&(t=null);var r=t?t.getName():this.ISO88591;return gf.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(null!=t&&void 0!==t.get(Wr.CHARACTER_SET))return t.get(Wr.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,l=!0,g=0,_=0,C=0,D=0,O=0,M=0,B=0,G=0,$=0,ie=0,ce=0,fe=e.length>3&&239===e[0]&&187===e[1]&&191===e[2],Ae=0;Ae<r&&(i||o||l);Ae++){var De=255&e[Ae];l&&(g>0?0==(128&De)?l=!1:g--:0!=(128&De)&&(0==(64&De)?l=!1:(g++,0==(32&De)?_++:(g++,0==(16&De)?C++:(g++,0==(8&De)?D++:l=!1))))),i&&(De>127&&De<160?i=!1:De>159&&(De<192||215===De||247===De)&&ce++),o&&(O>0?De<64||127===De||De>252?o=!1:O--:128===De||160===De||De>239?o=!1:De>160&&De<224?(M++,G=0,++B>$&&($=B)):De>127?(O++,B=0,++G>ie&&(ie=G)):(B=0,G=0))}return l&&g>0&&(l=!1),o&&O>0&&(o=!1),l&&(fe||_+C+D>0)?n.UTF8:o&&(n.ASSUME_SHIFT_JIS||$>=3||ie>=3)?n.SHIFT_JIS:i&&o?2===$&&2===M||10*ce>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:o?n.SHIFT_JIS:l?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function o(g,_,C,D,O,M){if("%%"===g)return"%";if(void 0!==t[++i]){g=D?parseInt(D.substr(1)):void 0;var G,B=O?parseInt(O.substr(1)):void 0;switch(M){case"s":G=t[i];break;case"c":G=t[i][0];break;case"f":G=parseFloat(t[i]).toFixed(g);break;case"p":G=parseFloat(t[i]).toPrecision(g);break;case"e":G=parseFloat(t[i]).toExponential(g);break;case"x":G=parseInt(t[i]).toString(B||16);break;case"d":G=parseFloat(parseInt(t[i],B||10).toPrecision(g)).toFixed(0)}G="object"==typeof G?JSON.stringify(G):(+G).toString(B);for(var $=parseInt(C),ie=C&&C[0]+""=="0"?"0":" ";G.length<$;)G=void 0!==_?G+ie:ie+G;return G}}var l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(l,o)},n.getBytes=function(e,t){return gf.encode(e,t)},n.getCharCode=function(e,t){return void 0===t&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=zo.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=zo.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=zo.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),zr=function(){function n(e){void 0===e&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return this.value+="string"==typeof e?e.toString():this.encoding?ti.castAsNonUtf8Char(e,this.encoding):String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)},n}(),_l=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,null==t&&(t=e),this.height=t,e<1||t<1)throw new Gt("Both dimensions must be greater than 0");null==r&&(r=Math.floor((e+31)/32)),this.rowSize=r,null==i&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),o=0;o<t;o++)for(var l=e[o],g=0;g<r;g++)l[g]&&i.set(g,o);return i},n.parseFromString=function(e,t,r){if(null===e)throw new Gt("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,l=0,g=-1,_=0,C=0;C<e.length;)if("\n"===e.charAt(C)||"\r"===e.charAt(C)){if(o>l){if(-1===g)g=o-l;else if(o-l!==g)throw new Gt("row lengths do not match");l=o,_++}C++}else if(e.substring(C,C+t.length)===t)C+=t.length,i[o]=!0,o++;else{if(e.substring(C,C+r.length)!==r)throw new Gt("illegal character encountered: "+e.substring(C));C+=r.length,i[o]=!1,o++}if(o>l){if(-1===g)g=o-l;else if(o-l!==g)throw new Gt("row lengths do not match");_++}for(var D=new n(g,_),O=0;O<o;O++)i[O]&&D.set(Math.floor(O%g),Math.floor(O/g));return D},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return 0!=(this.bits[r]>>>(31&e)&1)},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(31&e)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(31&e)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(31&e)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Gt("input matrix dimensions do not match");for(var t=new As(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,l=this.height;o<l;o++)for(var g=o*r,_=e.getRow(o,t).getBitArray(),C=0;C<r;C++)i[g+C]^=_[C]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Gt("Left and top must be nonnegative");if(i<1||r<1)throw new Gt("Height and width must be at least 1");var o=e+r,l=t+i;if(l>this.height||o>this.width)throw new Gt("The region must fit inside the matrix");for(var g=this.rowSize,_=this.bits,C=t;C<l;C++)for(var D=C*g,O=e;O<o;O++)_[D+Math.floor(O/32)]|=1<<(31&O)&4294967295},n.prototype.getRow=function(e,t){null==t||t.getSize()<this.width?t=new As(this.width):t.clear();for(var r=this.rowSize,i=this.bits,o=e*r,l=0;l<r;l++)t.setBulk(32*l,i[o+l]);return t},n.prototype.setRow=function(e,t){oi.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new As(e),i=new As(e),o=0,l=Math.floor((t+1)/2);o<l;o++)r=this.getRow(o,r),i=this.getRow(t-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,r)},n.prototype.getEnclosingRectangle=function(){for(var t=this.height,r=this.rowSize,i=this.bits,o=this.width,l=t,g=-1,_=-1,C=0;C<t;C++)for(var D=0;D<r;D++){var O=i[C*r+D];if(0!==O){if(C<l&&(l=C),C>_&&(_=C),32*D<o){for(var M=0;0==(O<<31-M&4294967295);)M++;32*D+M<o&&(o=32*D+M)}if(32*D+31>g){for(M=31;O>>>M==0;)M--;32*D+M>g&&(g=32*D+M)}}}return g<o||_<l?null:Int32Array.from([o,l,g-o+1,_-l+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&0===t[r];)r++;if(r===t.length)return null;for(var i=r/e,o=r%e*32,l=t[r],g=0;0==(l<<31-g&4294967295);)g++;return Int32Array.from([o+=g,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&0===t[r];)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=32*Math.floor(r%e),l=t[r],g=31;l>>>g==0;)g--;return Int32Array.from([o+=g,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){return e instanceof n&&(this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&ju.equals(this.bits,e.bits))},n.prototype.hashCode=function(){var e=this.width;return 31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+ju.hashCode(this.bits)},n.prototype.toString=function(e,t,r){return void 0===e&&(e="X "),void 0===t&&(t="  "),void 0===r&&(r="\n"),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new zr,o=0,l=this.height;o<l;o++){for(var g=0,_=this.width;g<_;g++)i.append(this.get(g,o)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}();var WB=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const it=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return WB(e,n),e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Hu);var $B=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const ZB=function(n){function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return $B(e,n),e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),o=i.getWidth();null==r||r.getSize()<o?r=new As(o):r.clear(),this.initArrays(o);for(var l=i.getRow(t,this.luminances),g=this.buckets,_=0;_<o;_++)g[(255&l[_])>>e.LUMINANCE_SHIFT]++;var C=e.estimateBlackPoint(g);if(o<3)for(_=0;_<o;_++)(255&l[_])<C&&r.set(_);else{var D=255&l[0],O=255&l[1];for(_=1;_<o-1;_++){var M=255&l[_+1];(4*O-D-M)/2<C&&r.set(_),D=O,O=M}}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),o=new _l(r,i);this.initArrays(r);for(var l=this.buckets,g=1;g<5;g++)for(var _=Math.floor(i*g/5),C=t.getRow(_,this.luminances),D=Math.floor(4*r/5),O=Math.floor(r/5);O<D;O++)l[(255&C[O])>>e.LUMINANCE_SHIFT]++;var B=e.estimateBlackPoint(l),G=t.getMatrix();for(g=0;g<i;g++){var $=g*r;for(O=0;O<r;O++)(255&G[$+O])<B&&o.set(O,g)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,o=0,l=0,g=0;g<r;g++)t[g]>l&&(o=g,l=t[g]),t[g]>i&&(i=t[g]);var _=0,C=0;for(g=0;g<r;g++){var D=g-o;(O=t[g]*D*D)>C&&(_=g,C=O)}if(o>_){var M=o;o=_,_=M}if(_-o<=r/16)throw new it;var B=_-1,G=-1;for(g=_-1;g>o;g--){var O,$=g-o;(O=$*$*(_-g)*(i-t[g]))>G&&(B=g,G=O)}return B<<e.LUMINANCE_SHIFT},e.LUMINANCE_SHIFT=8-(e.LUMINANCE_BITS=5),e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(AB);var KB=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const XB=function(n){function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return KB(e,n),e.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),l=r>>e.BLOCK_SIZE_POWER;0!=(r&e.BLOCK_SIZE_MASK)&&l++;var g=i>>e.BLOCK_SIZE_POWER;0!=(i&e.BLOCK_SIZE_MASK)&&g++;var _=e.calculateBlackPoints(o,l,g,r,i),C=new _l(r,i);e.calculateThresholdForBlock(o,l,g,r,i,_,C),this.matrix=C}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,o,l,g,_){for(var C=l-e.BLOCK_SIZE,D=o-e.BLOCK_SIZE,O=0;O<i;O++){var M=O<<e.BLOCK_SIZE_POWER;M>C&&(M=C);for(var B=e.cap(O,2,i-3),G=0;G<r;G++){var $=G<<e.BLOCK_SIZE_POWER;$>D&&($=D);for(var ie=e.cap(G,2,r-3),ce=0,fe=-2;fe<=2;fe++){var Ae=g[B+fe];ce+=Ae[ie-2]+Ae[ie-1]+Ae[ie]+Ae[ie+1]+Ae[ie+2]}e.thresholdBlock(t,$,M,ce/25,o,_)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,o,l,g){for(var _=0,C=i*l+r;_<e.BLOCK_SIZE;_++,C+=l)for(var D=0;D<e.BLOCK_SIZE;D++)(255&t[C+D])<=o&&g.set(r+D,i+_)},e.calculateBlackPoints=function(t,r,i,o,l){for(var g=l-e.BLOCK_SIZE,_=o-e.BLOCK_SIZE,C=new Array(i),D=0;D<i;D++){C[D]=new Int32Array(r);var O=D<<e.BLOCK_SIZE_POWER;O>g&&(O=g);for(var M=0;M<r;M++){var B=M<<e.BLOCK_SIZE_POWER;B>_&&(B=_);for(var G=0,$=255,ie=0,ce=0,fe=O*o+B;ce<e.BLOCK_SIZE;ce++,fe+=o){for(var Ae=0;Ae<e.BLOCK_SIZE;Ae++){var De=255&t[fe+Ae];G+=De,De<$&&($=De),De>ie&&(ie=De)}if(ie-$>e.MIN_DYNAMIC_RANGE)for(ce++,fe+=o;ce<e.BLOCK_SIZE;ce++,fe+=o)for(Ae=0;Ae<e.BLOCK_SIZE;Ae++)G+=255&t[fe+Ae]}var nt=G>>2*e.BLOCK_SIZE_POWER;if(ie-$<=e.MIN_DYNAMIC_RANGE&&(nt=$/2,D>0&&M>0)){var ht=(C[D-1][M]+2*C[D][M-1]+C[D-1][M-1])/4;$<ht&&(nt=ht)}C[D][M]=nt}}return C},e.BLOCK_SIZE_MASK=(e.BLOCK_SIZE=1<<(e.BLOCK_SIZE_POWER=3))-1,e.MINIMUM_DIMENSION=5*e.BLOCK_SIZE,e.MIN_DYNAMIC_RANGE=24,e}(ZB),DT=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new TT("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new TT("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new TT("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new zr,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var l=255&i[o];t.append(l<64?"#":l<128?"+":l<192?".":" ")}t.append("\n")}return t.toString()},n}();var JB=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const f8=function(n){function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return JB(e,n),e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),o=this.getWidth(),l=0;l<o;l++)i[l]=255-(255&i[l]);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(255&t[o]);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,o){return new e(this.delegate.crop(t,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(DT);var tV=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),nV=function(n){function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return tV(e,n),e.makeBufferFromCanvasImageData=function(t){var r=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(r.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var o=new Uint8ClampedArray(r*i),l=0,g=0,_=t.length;l<_;l+=4,g++){o[g]=0===t[l+3]?255:306*t[l]+601*t[l+1]+117*t[l+2]+512>>10}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Gt("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return null===r?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,l=this.canvas.width,g=this.canvas.height,_=Math.ceil(Math.abs(Math.cos(o))*l+Math.abs(Math.sin(o))*g),C=Math.ceil(Math.abs(Math.sin(o))*l+Math.abs(Math.cos(o))*g);return r.width=_,r.height=C,i.translate(_/2,C/2),i.rotate(o),i.drawImage(this.canvas,l/-2,g/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new f8(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e}(DT),rV=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),ou=function(n,e,t,r){return new(t||(t=Promise))(function(o,l){function g(D){try{C(r.next(D))}catch(O){l(O)}}function _(D){try{C(r.throw(D))}catch(O){l(O)}}function C(D){D.done?o(D.value):function(o){return o instanceof t?o:new t(function(l){l(o)})}(D.value).then(g,_)}C((r=r.apply(n,e||[])).next())})},su=function(n,e){var r,i,o,l,t={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return l={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function g(C){return function(D){return function(C){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=2&C[0]?i.return:C[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,C[1])).done)return o;switch(i=0,o&&(C=[2&C[0],o.value]),C[0]){case 0:case 1:o=C;break;case 4:return t.label++,{value:C[1],done:!1};case 5:t.label++,i=C[1],C=[0];continue;case 7:C=t.ops.pop(),t.trys.pop();continue;default:if(!(o=(o=t.trys).length>0&&o[o.length-1])&&(6===C[0]||2===C[0])){t=0;continue}if(3===C[0]&&(!o||C[1]>o[0]&&C[1]<o[3])){t.label=C[1];break}if(6===C[0]&&t.label<o[1]){t.label=o[1],o=C;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(C);break}o[2]&&t.ops.pop(),t.trys.pop();continue}C=e.call(n,t)}catch(D){C=[6,D],i=0}finally{r=o=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,D])}}},xy=function(){function n(e,t,r){void 0===t&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return"undefined"!=typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return ou(this,void 0,void 0,function(){var e,t,r,i,o,l,O,M;return su(this,function(B){switch(B.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=B.sent(),t=[];try{for(r=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),i=r.next();!i.done;i=r.next())"videoinput"===(l="video"===(o=i.value).kind?"videoinput":o.kind)&&t.push({deviceId:o.deviceId||o.id,label:o.label||"Video device "+(t.length+1),kind:l,groupId:o.groupId})}catch(G){O={error:G}}finally{try{i&&!i.done&&(M=r.return)&&M.call(r)}finally{if(O)throw O.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return ou(this,void 0,void 0,function(){return su(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,t.sent().map(function(r){return new rV(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return ou(this,void 0,void 0,function(){var t;return su(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(t=r.sent())?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return ou(this,void 0,void 0,function(){return su(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return ou(this,void 0,void 0,function(){return su(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.decodeOnceFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},t)];case 1:return[2,o.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return ou(this,void 0,void 0,function(){var r;return su(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return ou(this,void 0,void 0,function(){var r;return su(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return[2,o.sent()]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return ou(this,void 0,void 0,function(){return su(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return ou(this,void 0,void 0,function(){return su(this,function(l){switch(l.label){case 0:return[4,this.decodeFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},t,r)];case 1:return[2,l.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return ou(this,void 0,void 0,function(){var i;return su(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,o.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return ou(this,void 0,void 0,function(){var i;return su(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return ou(this,void 0,void 0,function(){var r;return su(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return ou(this,void 0,void 0,function(){return su(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new gd("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new gd("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new gd("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new gd("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(void 0===e&&void 0===t)throw new gd("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new gd("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);return this.imageElement=t,this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t)},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new gd("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new gd("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new gd("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new gd("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return ou(this,void 0,void 0,function(){return su(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return ou(this,void 0,void 0,function(){return su(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||0===e.naturalWidth)},n.prototype.prepareImageElement=function(e){var t;return void 0===e&&((t=document.createElement("img")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&"undefined"!=typeof document&&((t=document.createElement("video")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;void 0===t&&(t=!0),void 0===r&&(r=!0),this._stopAsyncDecode=!1;var o=function(l,g){if(i._stopAsyncDecode)return g(new it("Video stream has ended before any code could be detected.")),void(i._stopAsyncDecode=void 0);try{l(i.decode(e))}catch(M){if(t&&M instanceof it||(M instanceof Cs||M instanceof yt)&&r)return setTimeout(o,i._timeBetweenDecodingAttempts,l,g);g(M)}};return new Promise(function(l,g){return o(l,g)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode)r._stopContinuousDecode=void 0;else try{var o=r.decode(e);t(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(_){t(null,_),(_ instanceof Cs||_ instanceof yt||_ instanceof it)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){var t=this.getCaptureCanvasContext(e);this.drawImageOnCanvas(t,e);var r=this.getCaptureCanvas(e),i=new nV(r),o=new XB(i);return new xB(o)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;var r,i,t=document.createElement("canvas");return void 0!==e&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){!this.videoElement||(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){!this.imageElement||(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch(r){e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")},n}();const Gu=function(){function n(e,t,r,i,o,l){void 0===r&&(r=null==t?0:8*t.length),void 0===l&&(l=oi.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=l,this.text=e,this.rawBytes=t,this.numBits=null==r?null==t?0:8*t.length:r,this.resultPoints=i,this.format=o,this.resultMetadata=null,this.timestamp=null==l?oi.currentTimeMillis():l}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){null!==e&&(this.resultMetadata=null===this.resultMetadata?e:new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){var r=new Array(t.length+e.length);oi.arraycopy(t,0,r,0,t.length),oi.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}();var OT=(()=>(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(OT||(OT={})),OT))();const en=OT;var RT=(()=>(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(RT||(RT={})),RT))();const ia=RT,NT=function(){function n(e,t,r,i,o,l){void 0===o&&(o=-1),void 0===l&&(l=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=l,this.numBits=null==e?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),K2=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(0===e)throw new Gt;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),M0=function(){function n(e,t){if(0===t.length)throw new Gt;this.field=e;var r=t.length;if(r>1&&0===t[0]){for(var i=1;i<r&&0===t[i];)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),oi.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return 0===this.coefficients[0]},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(0===e)return this.getCoefficient(0);var r,t=this.coefficients;if(1===e){r=0;for(var i=0,o=t.length;i!==o;i++)r=K2.addOrSubtract(r,t[i]);return r}r=t[0];var g=t.length,_=this.field;for(i=1;i<g;i++)r=K2.addOrSubtract(_.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Gt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),l=r.length-t.length;oi.arraycopy(r,0,o,0,l);for(var g=l;g<r.length;g++)o[g]=K2.addOrSubtract(t[g-l],r[g]);return new n(this.field,o)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Gt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,l=new Int32Array(r+o-1),g=this.field,_=0;_<r;_++)for(var C=t[_],D=0;D<o;D++)l[_+D]=K2.addOrSubtract(l[_+D],g.multiply(C,i[D]));return new n(g,l)},n.prototype.multiplyScalar=function(e){if(0===e)return this.field.getZero();if(1===e)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),o=this.coefficients,l=0;l<t;l++)i[l]=r.multiply(o[l],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Gt;if(0===t)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),l=this.field,g=0;g<i;g++)o[g]=l.multiply(r[g],t);return new n(l,o)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Gt("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Gt("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),l=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var g=i.getDegree()-e.getDegree(),_=t.multiply(i.getCoefficient(i.getDegree()),l),C=e.multiplyByMonomial(g,_),D=t.buildMonomial(g,_);r=r.addOrSubtract(D),i=i.addOrSubtract(C)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(0!==r){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),0===t||1!==r){var i=this.field.log(r);0===i?e+="1":1===i?e+="a":(e+="a^",e+=i)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e},n}();var cV=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const mk=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return cV(e,n),e.kind="ArithmeticException",e}(Hu);var dV=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const Wu=function(n){function e(t,r,i){var o=n.call(this)||this;o.primitive=t,o.size=r,o.generatorBase=i;for(var l=new Int32Array(r),g=1,_=0;_<r;_++)l[_]=g,(g*=2)>=r&&(g^=t,g&=r-1);o.expTable=l;var C=new Int32Array(r);for(_=0;_<r-1;_++)C[l[_]]=_;return o.logTable=C,o.zero=new M0(o,Int32Array.from([0])),o.one=new M0(o,Int32Array.from([1])),o}return dV(e,n),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Gt;if(0===r)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new M0(this,i)},e.prototype.inverse=function(t){if(0===t)throw new mk;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return 0===t||0===r?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+qn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(K2);var hV=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const PT=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return hV(e,n),e.kind="ReedSolomonException",e}(Hu);var gV=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const F0=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return gV(e,n),e.kind="IllegalStateException",e}(Hu),MT=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new M0(r,e),o=new Int32Array(t),l=!0,g=0;g<t;g++){var _=i.evaluateAt(r.exp(g+r.getGeneratorBase()));o[o.length-1-g]=_,0!==_&&(l=!1)}if(!l){var C=new M0(r,o),D=this.runEuclideanAlgorithm(r.buildMonomial(t,1),C,t),M=D[1],B=this.findErrorLocations(D[0]),G=this.findErrorMagnitudes(M,B);for(g=0;g<B.length;g++){var $=e.length-1-r.log(B[g]);if($<0)throw new PT("Bad error location");e[$]=Wu.addOrSubtract(e[$],G[g])}}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,l=e,g=t,_=o.getZero(),C=o.getOne();g.getDegree()>=(r/2|0);){var D=l,O=_;if(_=C,(l=g).isZero())throw new PT("r_{i-1} was zero");g=D;for(var M=o.getZero(),B=l.getCoefficient(l.getDegree()),G=o.inverse(B);g.getDegree()>=l.getDegree()&&!g.isZero();){var $=g.getDegree()-l.getDegree(),ie=o.multiply(g.getCoefficient(g.getDegree()),G);M=M.addOrSubtract(o.buildMonomial($,ie)),g=g.addOrSubtract(l.multiplyByMonomial($,ie))}if(C=M.multiply(_).addOrSubtract(O),g.getDegree()>=l.getDegree())throw new F0("Division algorithm failed to reduce polynomial?")}var ce=C.getCoefficient(0);if(0===ce)throw new PT("sigmaTilde(0) was zero");var fe=o.inverse(ce);return[C.multiplyScalar(fe),g.multiplyScalar(fe)]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,o=this.field,l=1;l<o.getSize()&&i<t;l++)0===e.evaluateAt(l)&&(r[i]=o.inverse(l),i++);if(i!==t)throw new PT("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),o=this.field,l=0;l<r;l++){for(var g=o.inverse(t[l]),_=1,C=0;C<r;C++)if(l!==C){var D=o.multiply(t[C],g);_=o.multiply(_,0==(1&D)?1|D:-2&D)}i[l]=o.multiply(e.evaluateAt(g),o.inverse(_)),0!==o.getGeneratorBase()&&(i[l]=o.multiply(i[l],g))}return i},n}();var Is=(()=>(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"}(Is||(Is={})),Is))();const vk=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),o=n.convertBoolArrayToByteArray(i),l=n.getEncodedData(i),g=new NT(o,l,null,null);return g.setNumBits(i.length),g},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Is.UPPER,i=Is.UPPER,o="",l=0;l<t;)if(i===Is.BINARY){if(t-l<5)break;var g=n.readCode(e,l,5);if(l+=5,0===g){if(t-l<11)break;g=n.readCode(e,l,11)+31,l+=11}for(var _=0;_<g;_++){if(t-l<8){l=t;break}var C=n.readCode(e,l,8);o+=ti.castAsNonUtf8Char(C),l+=8}i=r}else{var D=i===Is.DIGIT?4:5;if(t-l<D)break;C=n.readCode(e,l,D),l+=D;var O=n.getCharacter(i,C);O.startsWith("CTRL_")?(r=i,i=n.getTable(O.charAt(5)),"L"===O.charAt(6)&&(r=i)):(o+=O,i=r)}return o},n.getTable=function(e){switch(e){case"L":return Is.LOWER;case"P":return Is.PUNCT;case"M":return Is.MIXED;case"D":return Is.DIGIT;case"B":return Is.BINARY;case"U":default:return Is.UPPER}},n.getCharacter=function(e,t){switch(e){case Is.UPPER:return n.UPPER_TABLE[t];case Is.LOWER:return n.LOWER_TABLE[t];case Is.MIXED:return n.MIXED_TABLE[t];case Is.PUNCT:return n.PUNCT_TABLE[t];case Is.DIGIT:return n.DIGIT_TABLE[t];default:throw new F0("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Wu.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Wu.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Wu.AZTEC_DATA_10):(r=12,t=Wu.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new yt;for(var l=e.length%r,g=new Int32Array(o),_=0;_<o;_++,l+=r)g[_]=n.readCode(e,l,r);try{new MT(t).decode(g,o-i)}catch(ie){throw new yt(ie)}var D=(1<<r)-1,O=0;for(_=0;_<i;_++){if(0===(M=g[_])||M===D)throw new yt;(1===M||M===D-1)&&O++}var B=new Array(i*r-O),G=0;for(_=0;_<i;_++){var M;if(1===(M=g[_])||M===D-1)B.fill(M>1,G,G+r-1),G+=r-1;else for(var $=r-1;$>=0;--$)B[G++]=0!=(M&1<<$)}return B},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+4*r,o=new Int32Array(i),l=new Array(this.totalBitsInLayer(r,t));if(t)for(var g=0;g<o.length;g++)o[g]=g;else{var _=i+1+2*qn.truncDivision(qn.truncDivision(i,2)-1,15),C=i/2,D=qn.truncDivision(_,2);for(g=0;g<C;g++){var O=g+qn.truncDivision(g,15);o[C-g-1]=D-O-1,o[C+g]=D+O+1}}g=0;for(var M=0;g<r;g++){for(var B=4*(r-g)+(t?9:12),G=2*g,$=i-1-G,ie=0;ie<B;ie++)for(var ce=2*ie,fe=0;fe<2;fe++)l[M+ce+fe]=e.get(o[G+fe],o[G+ie]),l[M+2*B+ce+fe]=e.get(o[G+ie],o[$-fe]),l[M+4*B+ce+fe]=e.get(o[$-fe],o[$-ie]),l[M+6*B+ce+fe]=e.get(o[$-ie],o[G+fe]);M+=8*B}return l},n.readCode=function(e,t,r){for(var i=0,o=t;o<t+r;o++)i<<=1,e[o]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),mr=function(){function n(){}return n.round=function(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var o=e-r,l=t-i;return Math.sqrt(o*o+l*l)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++)t+=e[r];return t},n}(),h8=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),$t=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){return e instanceof n&&(this.x===e.x&&this.y===e.y)},n.prototype.hashCode=function(){return 31*h8.floatToIntBits(this.x)+h8.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var o,l,g,t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]);if(r>=t&&r>=i?(l=e[0],o=e[1],g=e[2]):i>=r&&i>=t?(l=e[1],o=e[0],g=e[2]):(l=e[2],o=e[0],g=e[1]),this.crossProductZ(o,l,g)<0){var _=o;o=g,g=_}e[0]=o,e[1]=l,e[2]=g},n.distance=function(e,t){return mr.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,o=t.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},n}(),p8=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}();var CV=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const IV=function(n){function e(t,r,i,o,l){var g=n.call(this,t,r)||this;return g.compact=i,g.nbDatablocks=o,g.nbLayers=l,g}return CV(e,n),e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(p8),g8=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),null==t&&(t=n.INIT_SIZE),null==r&&(r=e.getWidth()/2|0),null==i&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new it}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,o=!1,l=!0,g=!1,_=!1,C=!1,D=!1,O=!1,M=this.width,B=this.height;l;){l=!1;for(var G=!0;(G||!_)&&t<M;)(G=this.containsBlackPoint(r,i,t,!1))?(t++,l=!0,_=!0):_||t++;if(t>=M){o=!0;break}for(var $=!0;($||!C)&&i<B;)($=this.containsBlackPoint(e,t,i,!0))?(i++,l=!0,C=!0):C||i++;if(i>=B){o=!0;break}for(var ie=!0;(ie||!D)&&e>=0;)(ie=this.containsBlackPoint(r,i,e,!1))?(e--,l=!0,D=!0):D||e--;if(e<0){o=!0;break}for(var ce=!0;(ce||!O)&&r>=0;)(ce=this.containsBlackPoint(e,t,r,!0))?(r--,l=!0,O=!0):O||r--;if(r<0){o=!0;break}l&&(g=!0)}if(!o&&g){for(var fe=t-e,Ae=null,De=1;null===Ae&&De<fe;De++)Ae=this.getBlackPointOnSegment(e,i-De,e+De,i);if(null==Ae)throw new it;var nt=null;for(De=1;null===nt&&De<fe;De++)nt=this.getBlackPointOnSegment(e,r+De,e+De,r);if(null==nt)throw new it;var ht=null;for(De=1;null===ht&&De<fe;De++)ht=this.getBlackPointOnSegment(t,r+De,t-De,r);if(null==ht)throw new it;var xt=null;for(De=1;null===xt&&De<fe;De++)xt=this.getBlackPointOnSegment(t,i-De,t-De,i);if(null==xt)throw new it;return this.centerEdges(xt,Ae,ht,nt)}throw new it},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var o=mr.round(mr.distance(e,t,r,i)),l=(r-e)/o,g=(i-t)/o,_=this.image,C=0;C<o;C++){var D=mr.round(e+C*l),O=mr.round(t+C*g);if(_.get(D,O))return new $t(D,O)}return null},n.prototype.centerEdges=function(e,t,r,i){var o=e.getX(),l=e.getY(),g=t.getX(),_=t.getY(),C=r.getX(),D=r.getY(),O=i.getX(),M=i.getY(),B=n.CORR;return o<this.width/2?[new $t(O-B,M+B),new $t(g+B,_+B),new $t(C-B,D-B),new $t(o+B,l-B)]:[new $t(O+B,M+B),new $t(g+B,_-B),new $t(C-B,D+B),new $t(o-B,l-B)]},n.prototype.containsBlackPoint=function(e,t,r,i){var o=this.image;if(i){for(var l=e;l<=t;l++)if(o.get(l,r))return!0}else for(var g=e;g<=t;g++)if(o.get(r,g))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),_k=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),o=!0,l=0;l<t.length&&o;l+=2){var g=Math.floor(t[l]),_=Math.floor(t[l+1]);if(g<-1||g>r||_<-1||_>i)throw new it;o=!1,-1===g?(t[l]=0,o=!0):g===r&&(t[l]=r-1,o=!0),-1===_?(t[l+1]=0,o=!0):_===i&&(t[l+1]=i-1,o=!0)}for(o=!0,l=t.length-2;l>=0&&o;l-=2){if(g=Math.floor(t[l]),_=Math.floor(t[l+1]),g<-1||g>r||_<-1||_>i)throw new it;o=!1,-1===g?(t[l]=0,o=!0):g===r&&(t[l]=r-1,o=!0),-1===_?(t[l+1]=0,o=!0):_===i&&(t[l+1]=i-1,o=!0)}},n}(),yk=function(){function n(e,t,r,i,o,l,g,_,C){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=o,this.a32=l,this.a13=g,this.a23=_,this.a33=C}return n.quadrilateralToQuadrilateral=function(e,t,r,i,o,l,g,_,C,D,O,M,B,G,$,ie){var ce=n.quadrilateralToSquare(e,t,r,i,o,l,g,_);return n.squareToQuadrilateral(C,D,O,M,B,G,$,ie).times(ce)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,o=this.a13,l=this.a21,g=this.a22,_=this.a23,C=this.a31,D=this.a32,O=this.a33,M=0;M<t;M+=2){var B=e[M],G=e[M+1],$=o*B+_*G+O;e[M]=(r*B+l*G+C)/$,e[M+1]=(i*B+g*G+D)/$}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,o=this.a13,l=this.a21,g=this.a22,_=this.a23,C=this.a31,D=this.a32,O=this.a33,M=e.length,B=0;B<M;B++){var G=e[B],$=t[B],ie=o*G+_*$+O;e[B]=(r*G+l*$+C)/ie,t[B]=(i*G+g*$+D)/ie}},n.squareToQuadrilateral=function(e,t,r,i,o,l,g,_){var C=e-r+o-g,D=t-i+l-_;if(0===C&&0===D)return new n(r-e,o-r,e,i-t,l-i,t,0,0,1);var O=r-o,M=g-o,B=i-l,G=_-l,$=O*G-M*B,ie=(C*G-M*D)/$,ce=(O*D-C*B)/$;return new n(r-e+ie*r,g-e+ce*g,e,i-t+ie*i,_-t+ce*_,t,ie,ce,1)},n.quadrilateralToSquare=function(e,t,r,i,o,l,g,_){return n.squareToQuadrilateral(e,t,r,i,o,l,g,_).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}();var DV=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const RV=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return DV(e,n),e.prototype.sampleGrid=function(t,r,i,o,l,g,_,C,D,O,M,B,G,$,ie,ce,fe,Ae,De){var nt=yk.quadrilateralToQuadrilateral(o,l,g,_,C,D,O,M,B,G,$,ie,ce,fe,Ae,De);return this.sampleGridWithTransform(t,r,i,nt)},e.prototype.sampleGridWithTransform=function(t,r,i,o){if(r<=0||i<=0)throw new it;for(var l=new _l(r,i),g=new Float32Array(2*r),_=0;_<i;_++){for(var C=g.length,D=_+.5,O=0;O<C;O+=2)g[O]=O/2+.5,g[O+1]=D;o.transformPoints(g),_k.checkAndNudgePoints(t,g);try{for(O=0;O<C;O+=2)t.get(Math.floor(g[O]),Math.floor(g[O+1]))&&l.set(O/2,_)}catch(M){throw new it}}return l},e}(_k),m8=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new RV,n}();var zu=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new $t(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}();const MV=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),l=this.getMatrixCornerPoints(r);return new IV(o,l,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!(this.isValidPoint(e[0])&&this.isValidPoint(e[1])&&this.isValidPoint(e[2])&&this.isValidPoint(e[3])))throw new it;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,o=0;o<4;o++){var l=r[(this.shift+o)%4];this.compact?(i<<=7,i+=l>>1&127):(i<<=10,i+=(l>>2&992)+(l>>1&31))}var g=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=1+(g>>6),this.nbDataBlocks=1+(63&g)):(this.nbLayers=1+(g>>11),this.nbDataBlocks=1+(2047&g))},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(o,l,g){r=(o>>t-2<<1)+(1&o)+(r<<3)}),r=((1&r)<<11)+(r>>1);for(var i=0;i<4;i++)if(qn.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new it},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var o=r-i,l=new Int32Array(r),g=r-1;g>=0;--g)l[g]=15&e,e>>=4;try{new MT(Wu.AZTEC_PARAM).decode(l,o)}catch(D){throw new it}var C=0;for(g=0;g<i;g++)C=(C<<4)+l[g];return C},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,o=e,l=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var g=this.getFirstDifferent(t,l,1,-1),_=this.getFirstDifferent(r,l,1,1),C=this.getFirstDifferent(i,l,-1,1),D=this.getFirstDifferent(o,l,-1,-1);if(this.nbCenterLayers>2){var O=this.distancePoint(D,g)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(O<.75||O>1.25||!this.isWhiteOrBlackRectangle(g,_,C,D))break}t=g,r=_,i=C,o=D,l=!l}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new it;this.compact=5===this.nbCenterLayers;var M=new $t(t.getX()+.5,t.getY()-.5),B=new $t(r.getX()+.5,r.getY()+.5),G=new $t(i.getX()-.5,i.getY()+.5),$=new $t(o.getX()-.5,o.getY()-.5);return this.expandSquare([M,B,G,$],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{e=(o=new g8(this.image).detect())[0],t=o[1],r=o[2],i=o[3]}catch(D){var l=this.image.getWidth()/2,g=this.image.getHeight()/2;e=this.getFirstDifferent(new zu(l+7,g-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new zu(l+7,g+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new zu(l-7,g+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new zu(l-7,g-7),!1,-1,-1).toResultPoint()}var _=mr.round((e.getX()+i.getX()+t.getX()+r.getX())/4),C=mr.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var o;e=(o=new g8(this.image,15,_,C).detect())[0],t=o[1],r=o[2],i=o[3]}catch(D){e=this.getFirstDifferent(new zu(_+7,C-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new zu(_+7,C+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new zu(_-7,C+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new zu(_-7,C-7),!1,-1,-1).toResultPoint()}return _=mr.round((e.getX()+i.getX()+t.getX()+r.getX())/4),C=mr.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new zu(_,C)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,o){var l=m8.getInstance(),g=this.getDimension(),_=g/2-this.nbCenterLayers,C=g/2+this.nbCenterLayers;return l.sampleGrid(e,g,g,_,_,C,_,C,C,_,C,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,o=this.distanceResultPoint(e,t),l=o/r,g=e.getX(),_=e.getY(),C=l*(t.getX()-e.getX())/o,D=l*(t.getY()-e.getY())/o,O=0;O<r;O++)this.image.get(mr.round(g+O*C),mr.round(_+O*D))&&(i|=1<<r-O-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){e=new zu(e.getX()-3,e.getY()+3),t=new zu(t.getX()-3,t.getY()-3),r=new zu(r.getX()+3,r.getY()-3),i=new zu(i.getX()+3,i.getY()+3);var l=this.getColor(i,e);if(0===l)return!1;var g=this.getColor(e,t);return g===l&&(g=this.getColor(t,r))===l&&(g=this.getColor(r,i))===l},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,o=(t.getY()-e.getY())/r,l=0,g=e.getX(),_=e.getY(),C=this.image.get(e.getX(),e.getY()),D=Math.ceil(r),O=0;O<D;O++)_+=o,this.image.get(mr.round(g+=i),mr.round(_))!==C&&l++;var M=l/r;return M>.1&&M<.9?0:M<=.1===C?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var o=e.getX()+r,l=e.getY()+i;this.isValid(o,l)&&this.image.get(o,l)===t;)o+=r,l+=i;for(o-=r,l-=i;this.isValid(o,l)&&this.image.get(o,l)===t;)o+=r;for(o-=r;this.isValid(o,l)&&this.image.get(o,l)===t;)l+=i;return new zu(o,l-=i)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),o=e[0].getX()-e[2].getX(),l=e[0].getY()-e[2].getY(),g=(e[0].getX()+e[2].getX())/2,_=(e[0].getY()+e[2].getY())/2,C=new $t(g+i*o,_+i*l),D=new $t(g-i*o,_-i*l);return o=e[1].getX()-e[3].getX(),l=e[1].getY()-e[3].getY(),g=(e[1].getX()+e[3].getX())/2,_=(e[1].getY()+e[3].getY())/2,[C,new $t(g+i*o,_+i*l),D,new $t(g-i*o,_-i*l)]},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=mr.round(e.getX()),r=mr.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return mr.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return mr.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(qn.truncDivision(this.nbLayers-4,8)+1)+15},n}(),v8=function(){function n(){}return n.prototype.decode=function(e,t){void 0===t&&(t=null);var r=null,i=new MV(e.getBlackMatrix()),o=null,l=null;try{o=(g=i.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(t,o),l=(new vk).decode(g)}catch(O){r=O}if(null==l)try{var g;o=(g=i.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(t,o),l=(new vk).decode(g)}catch(O){throw null!=r?r:O}var _=new Gu(l.getText(),l.getRawBytes(),l.getNumBits(),o,en.AZTEC,oi.currentTimeMillis()),C=l.getByteSegments();null!=C&&_.putMetadata(ia.BYTE_SEGMENTS,C);var D=l.getECLevel();return null!=D&&_.putMetadata(ia.ERROR_CORRECTION_LEVEL,D),_},n.prototype.reportFoundResultPoints=function(e,t){if(null!=e){var r=e.get(Wr.NEED_RESULT_POINT_CALLBACK);null!=r&&t.forEach(function(i,o,l){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}();var kV=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();!function(n){kV(function(t){return void 0===t&&(t=500),n.call(this,new v8,t)||this},n)}(xy);const oa=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch(O){if(t&&!0===t.get(Wr.TRY_HARDER)&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),l=o.getResultMetadata(),g=270;null!==l&&!0===l.get(ia.ORIENTATION)&&(g+=l.get(ia.ORIENTATION)%360),o.putMetadata(ia.ORIENTATION,g);var _=o.getResultPoints();if(null!==_)for(var C=i.getHeight(),D=0;D<_.length;D++)_[D]=new $t(C-_[D].getY()-1,_[D].getX());return o}throw new it}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var _,r=e.getWidth(),i=e.getHeight(),o=new As(r),l=t&&!0===t.get(Wr.TRY_HARDER),g=Math.max(1,i>>(l?8:5));_=l?i:15;for(var C=Math.trunc(i/2),D=0;D<_;D++){var O=Math.trunc((D+1)/2),B=C+g*(0==(1&D)?O:-O);if(B<0||B>=i)break;try{o=e.getBlackRow(B,o)}catch(fe){continue}for(var G=function(fe){if(1===fe&&(o.reverse(),t&&!0===t.get(Wr.NEED_RESULT_POINT_CALLBACK))){var Ae=new Map;t.forEach(function(ht,xt){return Ae.set(xt,ht)}),Ae.delete(Wr.NEED_RESULT_POINT_CALLBACK),t=Ae}try{var De=$.decodeRow(B,o,t);if(1===fe){De.putMetadata(ia.ORIENTATION,180);var nt=De.getResultPoints();null!==nt&&(nt[0]=new $t(r-nt[0].getX()-1,nt[0].getY()),nt[1]=new $t(r-nt[1].getX()-1,nt[1].getY()))}return{value:De}}catch(ht){}},$=this,ie=0;ie<2;ie++){var ce=G(ie);if("object"==typeof ce)return ce.value}}throw new it},n.recordPattern=function(e,t,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var l=e.getSize();if(t>=l)throw new it;for(var g=!e.get(t),_=0,C=t;C<l;){if(e.get(C)!==g)r[_]++;else{if(++_===i)break;r[_]=1,g=!g}C++}if(_!==i&&(_!==i-1||C!==l))throw new it},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new it;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,l=0,g=0;g<i;g++)o+=e[g],l+=t[g];if(o<l)return Number.POSITIVE_INFINITY;var _=o/l;r*=_;for(var C=0,D=0;D<i;D++){var O=e[D],M=t[D]*_,B=O>M?O-M:M-O;if(B>r)return Number.POSITIVE_INFINITY;C+=B}return C/o},n}();var BV=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const xk=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return BV(e,n),e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),o=0,l=Int32Array.from([0,0,0,0,0,0]),g=i,_=!1,D=i;D<r;D++)if(t.get(D)!==_)l[o]++;else{if(5===o){for(var O=e.MAX_AVG_VARIANCE,M=-1,B=e.CODE_START_A;B<=e.CODE_START_C;B++){var G=oa.patternMatchVariance(l,e.CODE_PATTERNS[B],e.MAX_INDIVIDUAL_VARIANCE);G<O&&(O=G,M=B)}if(M>=0&&t.isRange(Math.max(0,g-(D-g)/2),g,!1))return Int32Array.from([g,D,M]);g+=l[0]+l[1],(l=l.slice(2,l.length-1))[o-1]=0,l[o]=0,o--}else o++;l[o]=1,_=!_}throw new it},e.decodeCode=function(t,r,i){oa.recordPattern(t,i,r);for(var o=e.MAX_AVG_VARIANCE,l=-1,g=0;g<e.CODE_PATTERNS.length;g++){var C=this.patternMatchVariance(r,e.CODE_PATTERNS[g],e.MAX_INDIVIDUAL_VARIANCE);C<o&&(o=C,l=g)}if(l>=0)return l;throw new it},e.prototype.decodeRow=function(t,r,i){var D,o=i&&!0===i.get(Wr.ASSUME_GS1),l=e.findStartPattern(r),g=l[2],_=0,C=new Uint8Array(20);switch(C[_++]=g,g){case e.CODE_START_A:D=e.CODE_CODE_A;break;case e.CODE_START_B:D=e.CODE_CODE_B;break;case e.CODE_START_C:D=e.CODE_CODE_C;break;default:throw new yt}for(var O=!1,M=!1,B="",G=l[0],$=l[1],ie=Int32Array.from([0,0,0,0,0,0]),ce=0,fe=0,Ae=g,De=0,nt=!0,ht=!1,xt=!1;!O;){var Yt=M;switch(M=!1,ce=fe,fe=e.decodeCode(r,ie,$),C[_++]=fe,fe!==e.CODE_STOP&&(nt=!0),fe!==e.CODE_STOP&&(Ae+=++De*fe),G=$,$+=ie.reduce(function(k8,L8){return k8+L8},0),fe){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new yt}switch(D){case e.CODE_CODE_A:if(fe<64)B+=String.fromCharCode(xt===ht?" ".charCodeAt(0)+fe:" ".charCodeAt(0)+fe+128),xt=!1;else if(fe<96)B+=String.fromCharCode(xt===ht?fe-64:fe+64),xt=!1;else switch(fe!==e.CODE_STOP&&(nt=!1),fe){case e.CODE_FNC_1:o&&(B+=0===B.length?"]C1":String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!ht&&xt?(ht=!0,xt=!1):ht&&xt?(ht=!1,xt=!1):xt=!0;break;case e.CODE_SHIFT:M=!0,D=e.CODE_CODE_B;break;case e.CODE_CODE_B:D=e.CODE_CODE_B;break;case e.CODE_CODE_C:D=e.CODE_CODE_C;break;case e.CODE_STOP:O=!0}break;case e.CODE_CODE_B:if(fe<96)B+=String.fromCharCode(xt===ht?" ".charCodeAt(0)+fe:" ".charCodeAt(0)+fe+128),xt=!1;else switch(fe!==e.CODE_STOP&&(nt=!1),fe){case e.CODE_FNC_1:o&&(B+=0===B.length?"]C1":String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!ht&&xt?(ht=!0,xt=!1):ht&&xt?(ht=!1,xt=!1):xt=!0;break;case e.CODE_SHIFT:M=!0,D=e.CODE_CODE_A;break;case e.CODE_CODE_A:D=e.CODE_CODE_A;break;case e.CODE_CODE_C:D=e.CODE_CODE_C;break;case e.CODE_STOP:O=!0}break;case e.CODE_CODE_C:if(fe<100)fe<10&&(B+="0"),B+=fe;else switch(fe!==e.CODE_STOP&&(nt=!1),fe){case e.CODE_FNC_1:o&&(B+=0===B.length?"]C1":String.fromCharCode(29));break;case e.CODE_CODE_A:D=e.CODE_CODE_A;break;case e.CODE_CODE_B:D=e.CODE_CODE_B;break;case e.CODE_STOP:O=!0}}Yt&&(D=D===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var nr=$-G;if($=r.getNextUnset($),!r.isRange($,Math.min(r.getSize(),$+($-G)/2),!1))throw new it;if((Ae-=De*ce)%103!==ce)throw new Cs;var cn=B.length;if(0===cn)throw new it;cn>0&&nt&&(B=B.substring(0,D===e.CODE_CODE_C?cn-2:cn-1));for(var po=(l[1]+l[0])/2,ar=G+nr/2,ki=C.length,xl=new Uint8Array(ki),H0=0;H0<ki;H0++)xl[H0]=C[H0];var F8=[new $t(po,t),new $t(ar,t)];return new Gu(B,xl,0,F8,en.CODE_128,(new Date).getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(oa);var UV=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),_8=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const wk=function(n){function e(t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return UV(e,n),e.prototype.decodeRow=function(t,r,i){var o,l,g,_,C=this.counters;C.fill(0),this.decodeRowResult="";var B,G,D=e.findAsteriskPattern(r,C),O=r.getNextSet(D[1]),M=r.getSize();do{e.recordPattern(r,O,C);var $=e.toNarrowWidePattern(C);if($<0)throw new it;B=e.patternToChar($),this.decodeRowResult+=B,G=O;try{for(var ie=(o=void 0,_8(C)),ce=ie.next();!ce.done;ce=ie.next())O+=ce.value}catch(ki){o={error:ki}}finally{try{ce&&!ce.done&&(l=ie.return)&&l.call(ie)}finally{if(o)throw o.error}}O=r.getNextSet(O)}while("*"!==B);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var cn,Ae=0;try{for(var De=_8(C),nt=De.next();!nt.done;nt=De.next())Ae+=nt.value}catch(ki){g={error:ki}}finally{try{nt&&!nt.done&&(_=De.return)&&_.call(De)}finally{if(g)throw g.error}}if(O!==M&&2*(O-G-Ae)<Ae)throw new it;if(this.usingCheckDigit){for(var xt=this.decodeRowResult.length-1,Yt=0,nr=0;nr<xt;nr++)Yt+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(nr));if(this.decodeRowResult.charAt(xt)!==e.ALPHABET_STRING.charAt(Yt%43))throw new Cs;this.decodeRowResult=this.decodeRowResult.substring(0,xt)}if(0===this.decodeRowResult.length)throw new it;cn=this.extendedMode?e.decodeExtended(this.decodeRowResult):this.decodeRowResult;var ar=G+Ae/2;return new Gu(cn,null,0,[new $t((D[1]+D[0])/2,t),new $t(ar,t)],en.CODE_39,(new Date).getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),o=t.getNextSet(0),l=0,g=o,_=!1,C=r.length,D=o;D<i;D++)if(t.get(D)!==_)r[l]++;else{if(l===C-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,g-Math.floor((D-g)/2)),g,!1))return[g,D];g+=r[0]+r[1],r.copyWithin(0,2,2+l-1),r[l-1]=0,r[l]=0,l--}else l++;r[l]=1,_=!_}throw new it},e.toNarrowWidePattern=function(t){var r,i,g,o=t.length,l=0;do{var _=2147483647;try{for(var C=(r=void 0,_8(t)),D=C.next();!D.done;D=C.next())(O=D.value)<_&&O>l&&(_=O)}catch($){r={error:$}}finally{try{D&&!D.done&&(i=C.return)&&i.call(C)}finally{if(r)throw r.error}}l=_,g=0;for(var M=0,B=0,G=0;G<o;G++)(O=t[G])>l&&(B|=1<<o-1-G,g++,M+=O);if(3===g){for(G=0;G<o&&g>0;G++){var O;if((O=t[G])>l&&(g--,2*O>=M))return-1}return B}}while(g>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new it},e.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var l=t.charAt(o);if("+"===l||"$"===l||"%"===l||"/"===l){var g=t.charAt(o+1),_="\0";switch(l){case"+":if(!(g>="A"&&g<="Z"))throw new yt;_=String.fromCharCode(g.charCodeAt(0)+32);break;case"$":if(!(g>="A"&&g<="Z"))throw new yt;_=String.fromCharCode(g.charCodeAt(0)-64);break;case"%":if(g>="A"&&g<="E")_=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")_=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")_=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")_=String.fromCharCode(g.charCodeAt(0)+43);else if("U"===g)_="\0";else if("V"===g)_="@";else if("W"===g)_="`";else{if("X"!==g&&"Y"!==g&&"Z"!==g)throw new yt;_="\x7f"}break;case"/":if(g>="A"&&g<="O")_=String.fromCharCode(g.charCodeAt(0)-32);else{if("Z"!==g)throw new yt;_=":"}}i+=_,o++}else i+=l}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(oa);var jV=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const Ek=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return jV(e,n),e.prototype.decodeRow=function(t,r,i){var o,l,g=this.decodeStart(r),_=this.decodeEnd(r),C=new zr;e.decodeMiddle(r,g[1],_[0],C);var D=C.toString(),O=null;null!=i&&(O=i.get(Wr.ALLOWED_LENGTHS)),null==O&&(O=e.DEFAULT_ALLOWED_LENGTHS);var M=D.length,B=!1,G=0;try{for(var $=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(O),ie=$.next();!ie.done;ie=$.next()){var ce=ie.value;if(M===ce){B=!0;break}ce>G&&(G=ce)}}catch(De){o={error:De}}finally{try{ie&&!ie.done&&(l=$.return)&&l.call($)}finally{if(o)throw o.error}}if(!B&&M>G&&(B=!0),!B)throw new yt;var fe=[new $t(g[1],t),new $t(_[0],t)];return new Gu(D,null,0,fe,en.ITF,(new Date).getTime())},e.decodeMiddle=function(t,r,i,o){var l=new Int32Array(10),g=new Int32Array(5),_=new Int32Array(5);for(l.fill(0),g.fill(0),_.fill(0);r<i;){oa.recordPattern(t,r,l);for(var C=0;C<5;C++){var D=2*C;g[C]=l[D],_[C]=l[D+1]}var O=e.decodeDigit(g);o.append(O.toString()),O=this.decodeDigit(_),o.append(O.toString()),l.forEach(function(M){r+=M})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=10*this.narrowLineWidth;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!t.get(o);o--)i--;if(0!==i)throw new it},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new it;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(l){l instanceof it&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var o=i.length,l=new Int32Array(o),g=t.getSize(),_=!1,C=0,D=r;l.fill(0);for(var O=r;O<g;O++)if(t.get(O)!==_)l[C]++;else{if(C===o-1){if(oa.patternMatchVariance(l,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[D,O];D+=l[0]+l[1],oi.arraycopy(l,2,l,0,C-1),l[C-1]=0,l[C]=0,C--}else C++;l[C]=1,_=!_}throw new it},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,l=0;l<o;l++){var _=oa.patternMatchVariance(t,e.PATTERNS[l],e.MAX_INDIVIDUAL_VARIANCE);_<r?(r=_,i=l):_===r&&(i=-1)}if(i>=0)return i%10;throw new it},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(oa);var zV=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const wy=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return zV(e,n),e.findStartGuardPattern=function(t){for(var i,r=!1,o=0,l=Int32Array.from([0,0,0]);!r;){l=Int32Array.from([0,0,0]);var g=(i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,l))[0],_=g-((o=i[1])-g);_>=0&&(r=t.isRange(_,g,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(0===r)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){if((l=t.charAt(o).charCodeAt(0)-"0".charCodeAt(0))<0||l>9)throw new yt;i+=l}for(i*=3,o=r-2;o>=0;o-=2){var l;if((l=t.charAt(o).charCodeAt(0)-"0".charCodeAt(0))<0||l>9)throw new yt;i+=l}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,o){return this.findGuardPattern(t,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,r,i,o,l){for(var g=t.getSize(),_=0,C=r=i?t.getNextUnset(r):t.getNextSet(r),D=o.length,O=i,M=r;M<g;M++)if(t.get(M)!==O)l[_]++;else{if(_===D-1){if(oa.patternMatchVariance(l,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([C,M]);C+=l[0]+l[1];for(var B=l.slice(2,l.length-1),G=0;G<_-1;G++)l[G]=B[G];l[_-1]=0,l[_]=0,_--}else _++;l[_]=1,O=!O}throw new it},e.decodeDigit=function(t,r,i,o){this.recordPattern(t,i,r);for(var l=this.MAX_AVG_VARIANCE,g=-1,_=o.length,C=0;C<_;C++){var O=oa.patternMatchVariance(r,o[C],e.MAX_INDIVIDUAL_VARIANCE);O<l&&(l=O,g=C)}if(g>=0)return g;throw new it},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(oa);var qV=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const KV=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),l=i.toString(),g=n.parseExtensionString(l),_=[new $t((r[0]+r[1])/2,e),new $t(o,e)],C=new Gu(l,null,0,_,en.UPC_EAN_EXTENSION,(new Date).getTime());return null!=g&&C.putAllMetadata(g),C},n.prototype.decodeMiddle=function(e,t,r){var i,o,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var g=e.getSize(),_=t[1],C=0,D=0;D<5&&_<g;D++){var O=wy.decodeDigit(e,l,_,wy.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+O%10);try{for(var M=(i=void 0,qV(l)),B=M.next();!B.done;B=M.next())_+=B.value}catch(ie){i={error:ie}}finally{try{B&&!B.done&&(o=M.return)&&o.call(M)}finally{if(i)throw i.error}}O>=10&&(C|=1<<4-D),4!==D&&(_=e.getNextSet(_),_=e.getNextUnset(_))}if(5!==r.length)throw new it;var $=this.determineCheckDigit(C);if(n.extensionChecksum(r.toString())!==$)throw new it;return _},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);for(r*=3,i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);return(r*=3)%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new it},n.parseExtensionString=function(e){if(5!==e.length)return null;var t=n.parseExtension5String(e);return null==t?null:new Map([[ia.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}var r=parseInt(e.substring(1)),o=r%100;return t+(r/100).toString()+"."+(o<10?"0"+o:o.toString())},n}();var YV=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const QV=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),l=i.toString(),g=n.parseExtensionString(l),_=[new $t((r[0]+r[1])/2,e),new $t(o,e)],C=new Gu(l,null,0,_,en.UPC_EAN_EXTENSION,(new Date).getTime());return null!=g&&C.putAllMetadata(g),C},n.prototype.decodeMiddle=function(e,t,r){var i,o,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var g=e.getSize(),_=t[1],C=0,D=0;D<2&&_<g;D++){var O=wy.decodeDigit(e,l,_,wy.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+O%10);try{for(var M=(i=void 0,YV(l)),B=M.next();!B.done;B=M.next())_+=B.value}catch($){i={error:$}}finally{try{B&&!B.done&&(o=M.return)&&o.call(M)}finally{if(i)throw i.error}}O>=10&&(C|=1<<1-D),1!==D&&(_=e.getNextSet(_),_=e.getNextUnset(_))}if(2!==r.length)throw new it;if(parseInt(r.toString())%4!==C)throw new it;return _},n.parseExtensionString=function(e){return 2!==e.length?null:new Map([[ia.ISSUE_NUMBER,parseInt(e)]])},n}(),eU=function(){function n(){}return n.decodeRow=function(e,t,r){var i=wy.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new KV).decodeRow(e,t,i)}catch(g){return(new QV).decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}();var tU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const $o=function(n){function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(g){return Int32Array.from(g)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),l=0;l<i.length;l++)o[l]=i[i.length-l-1];e.L_AND_G_PATTERNS[r]=o}return t}return tU(e,n),e.prototype.decodeRow=function(t,r,i){var o=e.findStartGuardPattern(r),l=null==i?null:i.get(Wr.NEED_RESULT_POINT_CALLBACK);if(null!=l){var g=new $t((o[0]+o[1])/2,t);l.foundPossibleResultPoint(g)}var _=this.decodeMiddle(r,o,this.decodeRowStringBuffer),C=_.rowOffset,D=_.resultString;if(null!=l){var O=new $t(C,t);l.foundPossibleResultPoint(O)}var M=e.decodeEnd(r,C);if(null!=l){var B=new $t((M[0]+M[1])/2,t);l.foundPossibleResultPoint(B)}var G=M[1],$=G+(G-M[0]);if($>=r.getSize()||!r.isRange(G,$,!1))throw new it;var ie=D.toString();if(ie.length<8)throw new yt;if(!e.checkChecksum(ie))throw new Cs;var ce=(o[1]+o[0])/2,fe=(M[1]+M[0])/2,Ae=this.getBarcodeFormat(),De=[new $t(ce,t),new $t(fe,t)],nt=new Gu(ie,null,0,De,Ae,(new Date).getTime()),ht=0;try{var xt=eU.decodeRow(t,r,M[1]);nt.putMetadata(ia.UPC_EAN_EXTENSION,xt.getText()),nt.putAllMetadata(xt.getResultMetadata()),nt.addResultPoints(xt.getResultPoints()),ht=xt.getText().length}catch(po){}var Yt=null==i?null:i.get(Wr.ALLOWED_EAN_EXTENSIONS);if(null!=Yt){var nr=!1;for(var cn in Yt)if(ht.toString()===cn){nr=!0;break}if(!nr)throw new it}return nt},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(0===r)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){if((l=t.charAt(o).charCodeAt(0)-"0".charCodeAt(0))<0||l>9)throw new yt;i+=l}for(i*=3,o=r-2;o>=0;o-=2){var l;if((l=t.charAt(o).charCodeAt(0)-"0".charCodeAt(0))<0||l>9)throw new yt;i+=l}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(wy);var rU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ck=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const y8=function(n){function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return rU(e,n),e.prototype.decodeMiddle=function(t,r,i){var o,l,g,_,C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;for(var D=t.getSize(),O=r[1],M=0,B=0;B<6&&O<D;B++){var G=$o.decodeDigit(t,C,O,$o.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+G%10);try{for(var $=(o=void 0,Ck(C)),ie=$.next();!ie.done;ie=$.next())O+=ie.value}catch(nt){o={error:nt}}finally{try{ie&&!ie.done&&(l=$.return)&&l.call($)}finally{if(o)throw o.error}}G>=10&&(M|=1<<5-B)}for(i=e.determineFirstDigit(i,M),O=$o.findGuardPattern(t,O,!0,$o.MIDDLE_PATTERN,new Int32Array($o.MIDDLE_PATTERN.length).fill(0))[1],B=0;B<6&&O<D;B++){G=$o.decodeDigit(t,C,O,$o.L_PATTERNS),i+=String.fromCharCode("0".charCodeAt(0)+G);try{for(var Ae=(g=void 0,Ck(C)),De=Ae.next();!De.done;De=Ae.next())O+=De.value}catch(xt){g={error:xt}}finally{try{De&&!De.done&&(_=Ae.return)&&_.call(Ae)}finally{if(g)throw g.error}}}return{rowOffset:O,resultString:i}},e.prototype.getBarcodeFormat=function(){return en.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return String.fromCharCode("0".charCodeAt(0)+i)+t;throw new it},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}($o);var oU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ak=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Ik=function(n){function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return oU(e,n),e.prototype.decodeMiddle=function(t,r,i){var o,l,g,_,C=this.decodeMiddleCounters;C[0]=0,C[1]=0,C[2]=0,C[3]=0;for(var D=t.getSize(),O=r[1],M=0;M<4&&O<D;M++){var B=$o.decodeDigit(t,C,O,$o.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+B);try{for(var G=(o=void 0,Ak(C)),$=G.next();!$.done;$=G.next())O+=$.value}catch(De){o={error:De}}finally{try{$&&!$.done&&(l=G.return)&&l.call(G)}finally{if(o)throw o.error}}}for(O=$o.findGuardPattern(t,O,!0,$o.MIDDLE_PATTERN,new Int32Array($o.MIDDLE_PATTERN.length).fill(0))[1],M=0;M<4&&O<D;M++){B=$o.decodeDigit(t,C,O,$o.L_PATTERNS),i+=String.fromCharCode("0".charCodeAt(0)+B);try{for(var fe=(g=void 0,Ak(C)),Ae=fe.next();!Ae.done;Ae=fe.next())O+=Ae.value}catch(ht){g={error:ht}}finally{try{Ae&&!Ae.done&&(_=fe.return)&&_.call(fe)}finally{if(g)throw g.error}}}return{rowOffset:O,resultString:i}},e.prototype.getBarcodeFormat=function(){return en.EAN_8},e}($o);var aU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const cU=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.ean13Reader=new y8,t}return aU(e,n),e.prototype.getBarcodeFormat=function(){return en.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if("0"===r.charAt(0)){var i=new Gu(r.substring(1),null,null,t.getResultPoints(),en.UPC_A);return null!=t.getResultMetadata()&&i.putAllMetadata(t.getResultMetadata()),i}throw new it},e.prototype.reset=function(){this.ean13Reader.reset()},e}($o);var lU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),dU=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const bk=function(n){function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return lU(e,n),e.prototype.decodeMiddle=function(t,r,i){var o,l,g=this.decodeMiddleCounters.map(function(ie){return ie});g[0]=0,g[1]=0,g[2]=0,g[3]=0;for(var _=t.getSize(),C=r[1],D=0,O=0;O<6&&C<_;O++){var M=e.decodeDigit(t,g,C,e.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+M%10);try{for(var B=(o=void 0,dU(g)),G=B.next();!G.done;G=B.next())C+=G.value}catch(ie){o={error:ie}}finally{try{G&&!G.done&&(l=B.return)&&l.call(B)}finally{if(o)throw o.error}}M>=10&&(D|=1<<5-O)}return e.determineNumSysAndCheckDigit(new zr(i),D),C},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return $o.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o])return t.insert(0,"0"+i),void t.append("0"+o);throw it.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return en.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(l){return l.charCodeAt(0)}),i=new zr;i.append(t.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o)}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}($o);var hU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Sk=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const x8=function(n){function e(t){var r=n.call(this)||this,i=null==t?null:t.get(Wr.POSSIBLE_FORMATS),o=[];return null!=i&&(i.indexOf(en.EAN_13)>-1?o.push(new y8):i.indexOf(en.UPC_A)>-1&&o.push(new cU),i.indexOf(en.EAN_8)>-1&&o.push(new Ik),i.indexOf(en.UPC_E)>-1&&o.push(new bk)),0===o.length&&(o.push(new y8),o.push(new Ik),o.push(new bk)),r.readers=o,r}return hU(e,n),e.prototype.decodeRow=function(t,r,i){var o,l;try{for(var g=Sk(this.readers),_=g.next();!_.done;_=g.next()){var C=_.value;try{var D=C.decodeRow(t,r,i),O=D.getBarcodeFormat()===en.EAN_13&&"0"===D.getText().charAt(0),M=null==i?null:i.get(Wr.POSSIBLE_FORMATS),B=null==M||M.includes(en.UPC_A);if(O&&B){var G=D.getRawBytes(),$=new Gu(D.getText().substring(1),G,G.length,D.getResultPoints(),en.UPC_A);return $.putAllMetadata(D.getResultMetadata()),$}return D}catch(ie){}}}catch(ie){o={error:ie}}finally{try{_&&!_.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}throw new it},e.prototype.reset=function(){var t,r;try{for(var i=Sk(this.readers),o=i.next();!o.done;o=i.next())o.value.reset()}catch(g){t={error:g}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(oa);var gU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const am=function(n){function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return gU(e,n),e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(oa.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new it},e.count=function(t){return mr.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,o=r[0],l=1;l<t.length;l++)r[l]>o&&(o=r[l],i=l);t[i]++},e.decrement=function(t,r){for(var i=0,o=r[0],l=1;l<t.length;l++)r[l]<o&&(o=r[l],i=l);t[i]--},e.isFinderPattern=function(t){var r,i,o=t[0]+t[1],g=o/(o+t[2]+t[3]);if(g>=e.MIN_FINDER_PATTERN_RATIO&&g<=e.MAX_FINDER_PATTERN_RATIO){var _=Number.MAX_SAFE_INTEGER,C=Number.MIN_SAFE_INTEGER;try{for(var D=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),O=D.next();!O.done;O=D.next()){var M=O.value;M>C&&(C=M),M<_&&(_=M)}}catch(B){r={error:B}}finally{try{O&&!O.done&&(i=D.return)&&i.call(D)}finally{if(r)throw r.error}}return C<10*_}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(oa),FT=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){return e instanceof n&&(this.value===e.value&&this.checksumPortion===e.checksumPortion)},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),Tk=function(){function n(e,t,r,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new $t(r,o)),this.resultPoints.push(new $t(i,o))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){return e instanceof n&&this.value===e.value},n.prototype.hashCode=function(){return this.value},n}(),Ey=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,o,l=0;try{for(var g=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),_=g.next();!_.done;_=g.next())l+=_.value}catch(fe){i={error:fe}}finally{try{_&&!_.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}for(var D=0,O=0,M=e.length,B=0;B<M-1;B++){var G=void 0;for(G=1,O|=1<<B;G<e[B];G++,O&=~(1<<B)){var $=n.combins(l-G-1,M-B-2);if(r&&0===O&&l-G-(M-B-1)>=M-B-1&&($-=n.combins(l-G-(M-B),M-B-2)),M-B-1>1){for(var ie=0,ce=l-G-(M-B-2);ce>t;ce--)ie+=n.combins(l-G-ce-1,M-B-3);$-=ie*(M-1-B)}else l-G>t&&$--;D+=$}l-=G}return D},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var o=1,l=1,g=e;g>r;g--)o*=g,l<=i&&(o/=l,l++);for(;l<=i;)o/=l,l++;return o},n}(),CU=function(){function n(){}return n.buildBitArray=function(e){var t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);for(var i=new As(12*t),o=0,g=e[0].getRightChar().getValue(),_=11;_>=0;--_)0!=(g&1<<_)&&i.set(o),o++;for(_=1;_<e.length;++_){for(var C=e[_],D=C.getLeftChar().getValue(),O=11;O>=0;--O)0!=(D&1<<O)&&i.set(o),o++;if(null!=C.getRightChar()){var M=C.getRightChar().getValue();for(O=11;O>=0;--O)0!=(M&1<<O)&&i.set(o),o++}}return i},n}(),um=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),w8=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}();var bU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const md=function(n){function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return bU(e,n),e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(w8);var TU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const cm=function(n){function e(t,r,i){var o=n.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return TU(e,n),e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(w8);var OU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const Cy=function(n){function e(t,r,i){var o=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new yt;return o.firstDigit=r,o.secondDigit=i,o}return OU(e,n),e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(w8);var kT=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const PU=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,o,l,g,_,C;if(!e)return null;if(e.length<2)throw new it;var D=e.substring(0,2);try{for(var O=kT(n.TWO_DIGIT_DATA_LENGTH),M=O.next();!M.done;M=O.next())if((B=M.value)[0]===D)return B[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,B[2],e):n.processFixedAI(2,B[1],e)}catch(ht){t={error:ht}}finally{try{M&&!M.done&&(r=O.return)&&r.call(O)}finally{if(t)throw t.error}}if(e.length<3)throw new it;var G=e.substring(0,3);try{for(var $=kT(n.THREE_DIGIT_DATA_LENGTH),ie=$.next();!ie.done;ie=$.next())if((B=ie.value)[0]===G)return B[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,B[2],e):n.processFixedAI(3,B[1],e)}catch(ht){i={error:ht}}finally{try{ie&&!ie.done&&(o=$.return)&&o.call($)}finally{if(i)throw i.error}}try{for(var ce=kT(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),fe=ce.next();!fe.done;fe=ce.next())if((B=fe.value)[0]===G)return B[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,B[2],e):n.processFixedAI(4,B[1],e)}catch(ht){l={error:ht}}finally{try{fe&&!fe.done&&(g=ce.return)&&g.call(ce)}finally{if(l)throw l.error}}if(e.length<4)throw new it;var Ae=e.substring(0,4);try{for(var De=kT(n.FOUR_DIGIT_DATA_LENGTH),nt=De.next();!nt.done;nt=De.next()){var B;if((B=nt.value)[0]===Ae)return B[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,B[2],e):n.processFixedAI(4,B[1],e)}}catch(ht){_={error:ht}}finally{try{nt&&!nt.done&&(C=De.return)&&C.call(De)}finally{if(_)throw _.error}}throw new it},n.processFixedAI=function(e,t,r){if(r.length<e)throw new it;var i=r.substring(0,e);if(r.length<e+t)throw new it;var o=r.substring(e,e+t),l=r.substring(e+t),g="("+i+")"+o,_=n.parseFieldsInGeneralPurpose(l);return null==_?g:g+_},n.processVariableAI=function(e,t,r){var o,i=r.substring(0,e),l=r.substring(e,o=r.length<e+t?r.length:e+t),g=r.substring(o),_="("+i+")"+l,C=n.parseFieldsInGeneralPurpose(g);return null==C?_:_+C},n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH=[],20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),LT=function(){function n(e){this.buffer=new zr,this.information=e}return n.prototype.decodeAllCodes=function(e,t){for(var r=t,i=null;;){var o=this.decodeGeneralPurposeField(r,i),l=PU.parseFieldsInGeneralPurpose(o.getNewString());if(null!=l&&e.append(l),i=o.isRemaining()?""+o.getRemainingValue():null,r===o.getNewPosition())break;r=o.getNewPosition()}return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return new Cy(this.information.getSize(),0===t?Cy.FNC1:t-1,Cy.FNC1)}var r=this.extractNumericValueFromBitArray(e,7);return new Cy(e+7,(r-8)/11,(r-8)%11)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,o=0;o<r;++o)e.get(t+o)&&(i|=1<<r-o-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return null!=r&&r.isRemaining()?new cm(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new cm(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();if(e=this.current.isAlpha()?(t=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(t=this.parseIsoIec646Block()).isFinished():(t=this.parseNumericBlock()).isFinished(),r===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return t=e.isSecondDigitFNC1()?new cm(this.current.getPosition(),this.buffer.toString()):new cm(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new um(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1())return t=new cm(this.current.getPosition(),this.buffer.toString()),new um(!0,t);this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new um(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new cm(this.current.getPosition(),this.buffer.toString());return new um(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new um(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new cm(this.current.getPosition(),this.buffer.toString());return new um(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new um(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new md(e+5,md.FNC1);if(t>=5&&t<15)return new md(e+5,"0"+(t-5));var o,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new md(e+7,""+(r+1));if(r>=90&&r<116)return new md(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new yt}return new md(e+8,o)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new md(e+5,md.FNC1);if(t>=5&&t<15)return new md(e+5,"0"+(t-5));var i,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new md(e+6,""+(r+33));switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new F0("Decoding invalid alphanumeric value: "+r)}return new md(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),Dk=function(){function n(e){this.information=e,this.generalDecoder=new LT(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}();var kU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const vd=function(n){function e(t){return n.call(this,t)||this}return kU(e,n),e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var o=0;o<4;++o){var l=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);l/100==0&&t.append("0"),l/10==0&&t.append("0"),t.append(l)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,o=0;o<13;o++){var l=t.charAt(o+r).charCodeAt(0)-"0".charCodeAt(0);i+=0==(1&o)?3*l:l}10==(i=10-i%10)&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(Dk);var BU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const UU=function(n){function e(t){return n.call(this,t)||this}return BU(e,n),e.prototype.parseInformation=function(){var t=new zr;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(vd);var HU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const GU=function(n){function e(t){return n.call(this,t)||this}return HU(e,n),e.prototype.parseInformation=function(){var t=new zr;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Dk);var WU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const BT=function(n){function e(t){return n.call(this,t)||this}return WU(e,n),e.prototype.encodeCompressedWeight=function(t,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,o);for(var l=this.checkWeight(o),g=1e5,_=0;_<5;++_)l/g==0&&t.append("0"),g/=10;t.append(l)},e}(vd);var $U=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const Ok=function(n){function e(t){return n.call(this,t)||this}return $U(e,n),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!=e.HEADER_SIZE+BT.GTIN_SIZE+e.WEIGHT_SIZE)throw new it;var t=new zr;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+BT.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(BT);var ZU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const YU=function(n){function e(t){return n.call(this,t)||this}return ZU(e,n),e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(Ok);var XU=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const JU=function(n){function e(t){return n.call(this,t)||this}return XU(e,n),e.prototype.addWeightCode=function(t,r){t.append(r<1e4?"(3202)":"(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(Ok);var eH=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const nH=function(n){function e(t){return n.call(this,t)||this}return eH(e,n),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+vd.GTIN_SIZE)throw new it;var t=new zr;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+vd.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+vd.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(vd);var rH=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const oH=function(n){function e(t){return n.call(this,t)||this}return rH(e,n),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+vd.GTIN_SIZE)throw new it;var t=new zr;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+vd.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+vd.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100==0&&t.append("0"),i/10==0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+vd.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(vd);var sH=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const k0=function(n){function e(t,r,i){var o=n.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=r,o}return sH(e,n),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!=e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new it;var t=new zr;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(38400!=i){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32,l=(i/=32)%12+1,g=i/=12;g/10==0&&t.append("0"),t.append(g),l/10==0&&t.append("0"),t.append(l),o/10==0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(BT),Rk=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return null==this.rightchar},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n&&n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern)},n.equalsOrNull=function(e,t){return null===e?null===t:n.equals(e,t)},n.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},n}(),dH=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed},n.prototype.checkEqualitity=function(e,t){var r;if(e&&t)return e.forEach(function(i,o){t.forEach(function(l){i.getLeftChar().getValue()===l.getLeftChar().getValue()&&i.getRightChar().getValue()===l.getRightChar().getValue()&&i.getFinderPatter().getValue()===l.getFinderPatter().getValue()&&(r=!0)})}),r},n}();var fH=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),L0=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const pH=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return fH(e,n),e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch(o){}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(g){if(g instanceof it){if(!this.pairs.length)throw new it;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(o=!!this.rows.length,this.storeRow(t,!1),o){var l=this.checkRowsBoolean(!1);if(null!=l||null!=(l=this.checkRowsBoolean(!0)))return l}throw new it},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,o,l=r;l<this.rows.length;l++){var g=this.rows[l];this.pairs.length=0;try{for(var _=(i=void 0,L0(t)),C=_.next();!C.done;C=_.next())this.pairs.push(C.value.getPairs())}catch(M){i={error:M}}finally{try{C&&!C.done&&(o=_.return)&&o.call(_)}finally{if(i)throw i.error}}if(this.pairs.push(g.getPairs()),e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var O=new Array(t);O.push(g);try{return this.checkRows(O,l+1)}catch(M){console.log(M)}}}throw new it},e.isValidSequence=function(t){var r,i;try{for(var o=L0(e.FINDER_PATTERN_SEQUENCES),l=o.next();!l.done;l=o.next()){var g=l.value;if(!(t.length>g.length)){for(var _=!0,C=0;C<t.length;C++)if(t[C].getFinderPattern().getValue()!=g[C]){_=!1;break}if(_)return!0}}}catch(D){r={error:D}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,o=!1,l=!1;i<this.rows.length;){var g=this.rows[i];if(g.getRowNumber()>t){l=g.isEquivalent(this.pairs);break}o=g.isEquivalent(this.pairs),i++}l||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new dH(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,o,l,g,_,C;try{for(var D=L0(r),O=D.next();!O.done;O=D.next()){var M=O.value;if(M.getPairs().length!==t.length)try{for(var G=(l=void 0,L0(M.getPairs())),$=G.next();!$.done;$=G.next()){var ie=$.value;try{for(var fe=(_=void 0,L0(t)),Ae=fe.next();!Ae.done;Ae=fe.next())if(Rk.equals(ie,Ae.value)){!0;break}}catch(nt){_={error:nt}}finally{try{Ae&&!Ae.done&&(C=fe.return)&&C.call(fe)}finally{if(_)throw _.error}}}}catch(nt){l={error:nt}}finally{try{$&&!$.done&&(g=G.return)&&g.call(G)}finally{if(l)throw l.error}}}}catch(nt){i={error:nt}}finally{try{O&&!O.done&&(o=D.return)&&o.call(D)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,o,l,g,_,C;try{for(var D=L0(r),O=D.next();!O.done;O=D.next()){var M=O.value,B=!0;try{for(var G=(l=void 0,L0(t)),$=G.next();!$.done;$=G.next()){var ie=$.value,ce=!1;try{for(var fe=(_=void 0,L0(M.getPairs())),Ae=fe.next();!Ae.done;Ae=fe.next())if(ie.equals(Ae.value)){ce=!0;break}}catch(nt){_={error:nt}}finally{try{Ae&&!Ae.done&&(C=fe.return)&&C.call(fe)}finally{if(_)throw _.error}}if(!ce){B=!1;break}}}catch(nt){l={error:nt}}finally{try{$&&!$.done&&(g=G.return)&&g.call(G)}finally{if(l)throw l.error}}if(B)return!0}}catch(nt){i={error:nt}}finally{try{O&&!O.done&&(o=D.return)&&o.call(D)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var o=function(n){try{if(n.get(1))return new UU(n);if(!n.get(2))return new GU(n);switch(LT.extractNumericValueFromBitArray(n,1,4)){case 4:return new YU(n);case 5:return new JU(n)}switch(LT.extractNumericValueFromBitArray(n,1,5)){case 12:return new nH(n);case 13:return new oH(n)}switch(LT.extractNumericValueFromBitArray(n,1,7)){case 56:return new k0(n,"310","11");case 57:return new k0(n,"320","11");case 58:return new k0(n,"310","13");case 59:return new k0(n,"320","13");case 60:return new k0(n,"310","15");case 61:return new k0(n,"320","15");case 62:return new k0(n,"310","17");case 63:return new k0(n,"320","17")}}catch(i){throw console.log(i),new F0("unknown decoder: "+n)}}(CU.buildBitArray(t)).parseInformation(),l=t[0].getFinderPattern().getResultPoints(),g=t[t.length-1].getFinderPattern().getResultPoints();return new Gu(o,null,null,[l[0],l[1],g[0],g[1]],en.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(null==i)return!1;for(var o=i.getChecksumPortion(),l=2,g=1;g<this.pairs.size();++g){var _=this.pairs.get(g);o+=_.getLeftChar().getChecksumPortion(),l++;var C=_.getRightChar();null!=C&&(o+=C.getChecksumPortion(),l++)}return 211*(l-4)+(o%=211)==r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var o=r.length%2==0;this.startFromEven&&(o=!o);var l,g=!0,_=-1;do{this.findNextPair(t,r,_),null==(l=this.parseFoundFinderPattern(t,i,o))?_=e.getNextSecondBar(t,this.startEnd[0]):g=!1}while(g);var D,C=this.decodeDataCharacter(t,l,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new it;try{D=this.decodeDataCharacter(t,l,o,!1)}catch(O){D=null,console.log(O)}return new Rk(C,D,l,!0)},e.prototype.isEmptyPair=function(t){return 0===t.length},e.prototype.findNextPair=function(t,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var g,l=t.getSize();g=i>=0?i:this.isEmptyPair(r)?0:r[r.length-1].getFinderPattern().getStartEnd()[1];var C=r.length%2!=0;this.startFromEven&&(C=!C);for(var D=!1;g<l&&(D=!t.get(g));)g++;for(var O=0,M=g,B=g;B<l;B++)if(t.get(B)!=D)o[O]++;else{if(3==O){if(C&&e.reverseCounters(o),e.isFinderPattern(o))return this.startEnd[0]=M,void(this.startEnd[1]=B);C&&e.reverseCounters(o),M+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,O--}else O++;o[O]=1,D=!D}throw new it},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var o=t[i];t[i]=t[r-i-1],t[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,r,i){var o,l,g;if(i){for(var _=this.startEnd[0]-1;_>=0&&!t.get(_);)_--;_++,o=this.startEnd[0]-_,l=_,g=this.startEnd[1]}else l=this.startEnd[0],o=(g=t.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var D,C=this.getDecodeFinderCounters();oi.arraycopy(C,0,C,1,C.length-1),C[0]=o;try{D=this.parseFinderValue(C,e.FINDER_PATTERNS)}catch(O){return null}return new Tk(D,[l,g],l,g,r)},e.prototype.decodeDataCharacter=function(t,r,i,o){for(var l=this.getDataCharacterCounters(),g=0;g<l.length;g++)l[g]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],l);else{e.recordPattern(t,r.getStartEnd()[1],l);for(var _=0,C=l.length-1;_<C;_++,C--){var D=l[_];l[_]=l[C],l[C]=D}}var M=mr.sum(new Int32Array(l))/17,B=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(M-B)/B>.3)throw new it;var G=this.getOddCounts(),$=this.getEvenCounts(),ie=this.getOddRoundingErrors(),ce=this.getEvenRoundingErrors();for(_=0;_<l.length;_++){var fe=1*l[_]/M,Ae=fe+.5;if(Ae<1){if(fe<.3)throw new it;Ae=1}else if(Ae>8){if(fe>8.7)throw new it;Ae=8}var De=_/2;0==(1&_)?(G[De]=Ae,ie[De]=fe-Ae):($[De]=Ae,ce[De]=fe-Ae)}this.adjustOddEvenCounts(17);var nt=4*r.getValue()+(i?0:2)+(o?0:1)-1,ht=0,xt=0;for(_=G.length-1;_>=0;_--)e.isNotA1left(r,i,o)&&(xt+=G[_]*e.WEIGHTS[nt][2*_]),ht+=G[_];var nr=0;for(_=$.length-1;_>=0;_--)e.isNotA1left(r,i,o)&&(nr+=$[_]*e.WEIGHTS[nt][2*_+1]);var cn=xt+nr;if(0!=(1&ht)||ht>13||ht<4)throw new it;var po=(13-ht)/2,ar=e.SYMBOL_WIDEST[po],ki=9-ar,xl=Ey.getRSSvalue(G,ar,!0),H0=Ey.getRSSvalue($,ki,!1);return new FT(xl*e.EVEN_TOTAL_SUBSET[po]+H0+e.GSUM[po],cn)},e.isNotA1left=function(t,r,i){return!(0==t.getValue()&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=mr.sum(new Int32Array(this.getOddCounts())),i=mr.sum(new Int32Array(this.getEvenCounts())),o=!1,l=!1;r>13?l=!0:r<4&&(o=!0);var g=!1,_=!1;i>13?_=!0:i<4&&(g=!0);var C=r+i-t,D=1==(1&r),O=0==(1&i);if(1==C)if(D){if(O)throw new it;l=!0}else{if(!O)throw new it;_=!0}else if(-1==C)if(D){if(O)throw new it;o=!0}else{if(!O)throw new it;g=!0}else{if(0!=C)throw new it;if(D){if(!O)throw new it;r<i?(o=!0,_=!0):(l=!0,g=!0)}else if(O)throw new it}if(o){if(l)throw new it;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(_)throw new it;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A=0,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B=1,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C=2,e.FINDER_PAT_B,e.FINDER_PAT_D=3],[e.FINDER_PAT_A,e.FINDER_PAT_E=4,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F=5],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(am);var gH=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const vH=function(n){function e(t,r,i){var o=n.call(this,t,r)||this;return o.count=0,o.finderPattern=i,o}return gH(e,n),e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(FT);var _H=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),E8=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Nk=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return _H(e,n),e.prototype.decodeRow=function(t,r,i){var o,l,g,_,C=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,C),r.reverse();var D=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,D),r.reverse();try{for(var O=E8(this.possibleLeftPairs),M=O.next();!M.done;M=O.next()){var B=M.value;if(B.getCount()>1)try{for(var G=(g=void 0,E8(this.possibleRightPairs)),$=G.next();!$.done;$=G.next()){var ie=$.value;if(ie.getCount()>1&&e.checkChecksum(B,ie))return e.constructResult(B,ie)}}catch(ce){g={error:ce}}finally{try{$&&!$.done&&(_=G.return)&&_.call(G)}finally{if(g)throw g.error}}}}catch(ce){o={error:ce}}finally{try{M&&!M.done&&(l=O.return)&&l.call(O)}finally{if(o)throw o.error}}throw new it},e.addOrTally=function(t,r){var i,o;if(null!=r){var l=!1;try{for(var g=E8(t),_=g.next();!_.done;_=g.next()){var C=_.value;if(C.getValue()===r.getValue()){C.incrementCount(),l=!0;break}}}catch(D){i={error:D}}finally{try{_&&!_.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}l||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),o=new String(i).toString(),l=new zr,g=13-o.length;g>0;g--)l.append("0");l.append(o);var _=0;for(g=0;g<13;g++){var C=l.charAt(g).charCodeAt(0)-"0".charCodeAt(0);_+=0==(1&g)?3*C:C}10==(_=10-_%10)&&(_=0),l.append(_.toString());var D=t.getFinderPattern().getResultPoints(),O=r.getFinderPattern().getResultPoints();return new Gu(l.toString(),null,0,[D[0],D[1],O[0],O[1]],en.RSS_14,(new Date).getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,r,i,o){try{var l=this.findFinderPattern(t,r),g=this.parseFoundFinderPattern(t,i,r,l),_=null==o?null:o.get(Wr.NEED_RESULT_POINT_CALLBACK);if(null!=_){var C=(l[0]+l[1])/2;r&&(C=t.getSize()-1-C),_.foundPossibleResultPoint(new $t(C,i))}var D=this.decodeDataCharacter(t,g,!0),O=this.decodeDataCharacter(t,g,!1);return new vH(1597*D.getValue()+O.getValue(),D.getChecksumPortion()+4*O.getChecksumPortion(),g)}catch(M){return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var o=this.getDataCharacterCounters(),l=0;l<o.length;l++)o[l]=0;if(i)oa.recordPatternInReverse(t,r.getStartEnd()[0],o);else{oa.recordPattern(t,r.getStartEnd()[1]+1,o);for(var g=0,_=o.length-1;g<_;g++,_--){var C=o[g];o[g]=o[_],o[_]=C}}var D=i?16:15,O=mr.sum(new Int32Array(o))/D,M=this.getOddCounts(),B=this.getEvenCounts(),G=this.getOddRoundingErrors(),$=this.getEvenRoundingErrors();for(g=0;g<o.length;g++){var ie=o[g]/O,ce=Math.floor(ie+.5);ce<1?ce=1:ce>8&&(ce=8);var fe=Math.floor(g/2);0==(1&g)?(M[fe]=ce,G[fe]=ie-ce):(B[fe]=ce,$[fe]=ie-ce)}this.adjustOddEvenCounts(i,D);var Ae=0,De=0;for(g=M.length-1;g>=0;g--)De*=9,De+=M[g],Ae+=M[g];var nt=0,ht=0;for(g=B.length-1;g>=0;g--)nt*=9,nt+=B[g],ht+=B[g];var Yt,nr,xt=De+3*nt;if(i){if(0!=(1&Ae)||Ae>12||Ae<4)throw new it;var cn=9-(nr=e.OUTSIDE_ODD_WIDEST[Yt=(12-Ae)/2]),po=Ey.getRSSvalue(M,nr,!1),ar=Ey.getRSSvalue(B,cn,!0);return new FT(po*e.OUTSIDE_EVEN_TOTAL_SUBSET[Yt]+ar+e.OUTSIDE_GSUM[Yt],xt)}if(0!=(1&ht)||ht>10||ht<4)throw new it;return cn=9-(nr=e.INSIDE_ODD_WIDEST[Yt=(10-ht)/2]),po=Ey.getRSSvalue(M,nr,!0),ar=Ey.getRSSvalue(B,cn,!1),new FT(ar*e.INSIDE_ODD_TOTAL_SUBSET[Yt]+po+e.INSIDE_GSUM[Yt],xt)},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),l=!1,g=0;g<o&&r!==(l=!t.get(g));)g++;for(var _=0,C=g,D=g;D<o;D++)if(t.get(D)!==l)i[_]++;else{if(3===_){if(am.isFinderPattern(i))return[C,D];C+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,_--}else _++;i[_]=1,l=!l}throw new it},e.prototype.parseFoundFinderPattern=function(t,r,i,o){for(var l=t.get(o[0]),g=o[0]-1;g>=0&&l!==t.get(g);)g--;g++;var _=o[0]-g,C=this.getDecodeFinderCounters(),D=new Int32Array(C.length);oi.arraycopy(C,0,D,1,C.length-1),D[0]=_;var O=this.parseFinderValue(D,e.FINDER_PATTERNS),M=g,B=o[1];return i&&(M=t.getSize()-1-M,B=t.getSize()-1-B),new Tk(O,[g,o[1]],M,B,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=mr.sum(new Int32Array(this.getOddCounts())),o=mr.sum(new Int32Array(this.getEvenCounts())),l=!1,g=!1,_=!1,C=!1;t?(i>12?g=!0:i<4&&(l=!0),o>12?C=!0:o<4&&(_=!0)):(i>11?g=!0:i<5&&(l=!0),o>10?C=!0:o<4&&(_=!0));var D=i+o-r,O=(1&i)==(t?1:0),M=1==(1&o);if(1===D)if(O){if(M)throw new it;g=!0}else{if(!M)throw new it;C=!0}else if(-1===D)if(O){if(M)throw new it;l=!0}else{if(!M)throw new it;_=!0}else{if(0!==D)throw new it;if(O){if(!M)throw new it;i<o?(l=!0,C=!0):(g=!0,_=!0)}else if(M)throw new it}if(l){if(g)throw new it;am.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&am.decrement(this.getOddCounts(),this.getOddRoundingErrors()),_){if(C)throw new it;am.increment(this.getEvenCounts(),this.getOddRoundingErrors())}C&&am.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(am);var xH=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const Y2=function(n){function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(Wr.POSSIBLE_FORMATS):null,o=t&&void 0!==t.get(Wr.ASSUME_CODE_39_CHECK_DIGIT);return i&&((i.includes(en.EAN_13)||i.includes(en.UPC_A)||i.includes(en.EAN_8)||i.includes(en.UPC_E))&&r.readers.push(new x8(t)),i.includes(en.CODE_39)&&r.readers.push(new wk(o)),i.includes(en.CODE_128)&&r.readers.push(new xk),i.includes(en.ITF)&&r.readers.push(new Ek),i.includes(en.RSS_14)&&r.readers.push(new Nk),i.includes(en.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new pH))),0===r.readers.length&&(r.readers.push(new x8(t)),r.readers.push(new wk),r.readers.push(new x8(t)),r.readers.push(new xk),r.readers.push(new Ek),r.readers.push(new Nk)),r}return xH(e,n),e.prototype.decodeRow=function(t,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,i)}catch(l){}throw new it},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(oa);var EH=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pk=(function(n){EH(function(t,r){return void 0===t&&(t=500),n.call(this,new Y2(r),t,r)||this},n)}(xy),function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}),Dr=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Er=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}();const AH=function(){function n(e,t,r,i,o,l){var g,_;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=l;var C=0,D=l.getECCodewords(),O=l.getECBlocks();try{for(var M=Pk(O),B=M.next();!B.done;B=M.next()){var G=B.value;C+=G.getCount()*(G.getDataCodewords()+D)}}catch($){g={error:$}}finally{try{B&&!B.done&&(_=M.return)&&_.call(M)}finally{if(g)throw g.error}}this.totalCodewords=C}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if(0!=(1&e)||0!=(1&t))throw new yt;try{for(var o=Pk(n.VERSIONS),l=o.next();!l.done;l=o.next()){var g=l.value;if(g.symbolSizeRows===e&&g.symbolSizeColumns===t)return g}}catch(_){r={error:_}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new yt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Dr(5,new Er(1,3))),new n(2,12,12,10,10,new Dr(7,new Er(1,5))),new n(3,14,14,12,12,new Dr(10,new Er(1,8))),new n(4,16,16,14,14,new Dr(12,new Er(1,12))),new n(5,18,18,16,16,new Dr(14,new Er(1,18))),new n(6,20,20,18,18,new Dr(18,new Er(1,22))),new n(7,22,22,20,20,new Dr(20,new Er(1,30))),new n(8,24,24,22,22,new Dr(24,new Er(1,36))),new n(9,26,26,24,24,new Dr(28,new Er(1,44))),new n(10,32,32,14,14,new Dr(36,new Er(1,62))),new n(11,36,36,16,16,new Dr(42,new Er(1,86))),new n(12,40,40,18,18,new Dr(48,new Er(1,114))),new n(13,44,44,20,20,new Dr(56,new Er(1,144))),new n(14,48,48,22,22,new Dr(68,new Er(1,174))),new n(15,52,52,24,24,new Dr(42,new Er(2,102))),new n(16,64,64,14,14,new Dr(56,new Er(2,140))),new n(17,72,72,16,16,new Dr(36,new Er(4,92))),new n(18,80,80,18,18,new Dr(48,new Er(4,114))),new n(19,88,88,20,20,new Dr(56,new Er(4,144))),new n(20,96,96,22,22,new Dr(68,new Er(4,174))),new n(21,104,104,24,24,new Dr(56,new Er(6,136))),new n(22,120,120,18,18,new Dr(68,new Er(6,175))),new n(23,132,132,20,20,new Dr(62,new Er(8,163))),new n(24,144,144,22,22,new Dr(62,new Er(8,156),new Er(2,155))),new n(25,8,18,6,16,new Dr(7,new Er(1,5))),new n(26,8,32,6,14,new Dr(11,new Er(1,10))),new n(27,12,26,10,24,new Dr(14,new Er(1,16))),new n(28,12,36,10,16,new Dr(18,new Er(1,22))),new n(29,16,36,14,16,new Dr(24,new Er(1,32))),new n(30,16,48,14,22,new Dr(28,new Er(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),bH=function(){function n(e){var t=e.getHeight();if(t<8||t>144||0!=(1&t))throw new yt;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new _l(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return AH.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),l=this.mappingBitMatrix.getWidth(),g=!1,_=!1,C=!1,D=!1;do{if(r!==o||0!==i||g)if(r!==o-2||0!==i||0==(3&l)||_)if(r!==o+4||2!==i||0!=(7&l)||C)if(r!==o-2||0!==i||4!=(7&l)||D){do{r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=255&this.readUtah(r,i,o,l)),r-=2,i+=2}while(r>=0&&i<l);r+=1,i+=3;do{r>=0&&i<l&&!this.readMappingMatrix.get(i,r)&&(e[t++]=255&this.readUtah(r,i,o,l)),r+=2,i-=2}while(r<o&&i>=0);r+=3,i+=1}else e[t++]=255&this.readCorner4(o,l),r-=2,i+=2,D=!0;else e[t++]=255&this.readCorner3(o,l),r-=2,i+=2,C=!0;else e[t++]=255&this.readCorner2(o,l),r-=2,i+=2,_=!0;else e[t++]=255&this.readCorner1(o,l),r-=2,i+=2,g=!0}while(r<o||i<l);if(t!==this.version.getTotalCodewords())throw new yt;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var o=0;return this.readModule(e-2,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t,r,i)&&(o|=1),o<<=1,this.readModule(e,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e,t,r,i)&&(o|=1),o},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Gt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),l=t/i|0,g=r/o|0,D=new _l(g*o,l*i),O=0;O<l;++O)for(var M=O*i,B=0;B<g;++B)for(var G=B*o,$=0;$<i;++$)for(var ie=O*(i+2)+1+$,ce=M+$,fe=0;fe<o;++fe)e.get(B*(o+2)+1+fe,ie)&&D.set(G+fe,ce);return D},n}();var Mk=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const TH=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,o,l,g=t.getECBlocks(),_=0,C=g.getECBlocks();try{for(var D=Mk(C),O=D.next();!O.done;O=D.next())_+=(M=O.value).getCount()}catch(xl){r={error:xl}}finally{try{O&&!O.done&&(i=D.return)&&i.call(D)}finally{if(r)throw r.error}}var B=new Array(_),G=0;try{for(var $=Mk(C),ie=$.next();!ie.done;ie=$.next())for(var M=ie.value,ce=0;ce<M.getCount();ce++){var fe=M.getDataCodewords(),Ae=g.getECCodewords()+fe;B[G++]=new n(fe,new Uint8Array(Ae))}}catch(xl){o={error:xl}}finally{try{ie&&!ie.done&&(l=$.return)&&l.call($)}finally{if(o)throw o.error}}var nt=B[0].codewords.length-g.getECCodewords(),ht=nt-1,xt=0;for(ce=0;ce<ht;ce++)for(var Yt=0;Yt<G;Yt++)B[Yt].codewords[ce]=e[xt++];var nr=24===t.getVersionNumber(),cn=nr?8:G;for(Yt=0;Yt<cn;Yt++)B[Yt].codewords[nt-1]=e[xt++];var po=B[0].codewords.length;for(ce=nt;ce<po;ce++)for(Yt=0;Yt<G;Yt++){var ar=nr?(Yt+8)%G:Yt;B[ar].codewords[nr&&ar>7?ce-1:ce]=e[xt++]}if(xt!==e.length)throw new Gt;return B},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),Fk=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Gt(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var l=8-r,g=e<l?e:l;t=(o[i]&255>>8-g<<(_=l-g))>>_,e-=g,8===(r+=g)&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|255&o[i],i++,e-=8;var _;e>0&&(t=t<<e|(o[i]&255>>(_=8-e)<<_)>>_,r+=e)}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}();var So=(()=>(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"}(So||(So={})),So))();const RH=function(){function n(){}return n.decode=function(e){var t=new Fk(e),r=new zr,i=new zr,o=new Array,l=So.ASCII_ENCODE;do{if(l===So.ASCII_ENCODE)l=this.decodeAsciiSegment(t,r,i);else{switch(l){case So.C40_ENCODE:this.decodeC40Segment(t,r);break;case So.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case So.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case So.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case So.BASE256_ENCODE:this.decodeBase256Segment(t,r,o);break;default:throw new yt}l=So.ASCII_ENCODE}}while(l!==So.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new NT(e,r.toString(),0===o.length?null:o,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var o=e.readBits(8);if(0===o)throw new yt;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),So.ASCII_ENCODE;if(129===o)return So.PAD_ENCODE;if(o<=229){var l=o-130;l<10&&t.append("0"),t.append(""+l)}else switch(o){case 230:return So.C40_ENCODE;case 231:return So.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>\x1e05\x1d"),r.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),r.insert(0,"\x1e\x04");break;case 238:return So.ANSIX12_ENCODE;case 239:return So.TEXT_ENCODE;case 240:return So.EDIFACT_ENCODE;case 241:break;default:if(254!==o||0!==e.available())throw new yt}}while(e.available()>0);return So.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],o=0;do{if(8===e.available())return;var l=e.readBits(8);if(254===l)return;this.parseTwoBytes(l,e.readBits(8),i);for(var g=0;g<3;g++){var _=i[g];switch(o){case 0:if(_<3)o=_+1;else{if(!(_<this.C40_BASIC_SET_CHARS.length))throw new yt;var C=this.C40_BASIC_SET_CHARS[_];r?(t.append(String.fromCharCode(C.charCodeAt(0)+128)),r=!1):t.append(C)}break;case 1:r?(t.append(String.fromCharCode(_+128)),r=!1):t.append(String.fromCharCode(_)),o=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length)C=this.C40_SHIFT2_SET_CHARS[_],r?(t.append(String.fromCharCode(C.charCodeAt(0)+128)),r=!1):t.append(C);else switch(_){case 27:t.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new yt}o=0;break;case 3:r?(t.append(String.fromCharCode(_+224)),r=!1):t.append(String.fromCharCode(_+96)),o=0;break;default:throw new yt}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],o=0;do{if(8===e.available())return;var l=e.readBits(8);if(254===l)return;this.parseTwoBytes(l,e.readBits(8),i);for(var g=0;g<3;g++){var _=i[g];switch(o){case 0:if(_<3)o=_+1;else{if(!(_<this.TEXT_BASIC_SET_CHARS.length))throw new yt;var C=this.TEXT_BASIC_SET_CHARS[_];r?(t.append(String.fromCharCode(C.charCodeAt(0)+128)),r=!1):t.append(C)}break;case 1:r?(t.append(String.fromCharCode(_+128)),r=!1):t.append(String.fromCharCode(_)),o=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length)C=this.TEXT_SHIFT2_SET_CHARS[_],r?(t.append(String.fromCharCode(C.charCodeAt(0)+128)),r=!1):t.append(C);else switch(_){case 27:t.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new yt}o=0;break;case 3:if(!(_<this.TEXT_SHIFT3_SET_CHARS.length))throw new yt;C=this.TEXT_SHIFT3_SET_CHARS[_],r?(t.append(String.fromCharCode(C.charCodeAt(0)+128)),r=!1):t.append(C),o=0;break;default:throw new yt}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(8===e.available())return;var i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var l=r[o];switch(l){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(l<14)t.append(String.fromCharCode(l+44));else{if(!(l<40))throw new yt;t.append(String.fromCharCode(l+51))}}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,o=Math.floor(i/1600);r[0]=o,i-=1600*o,o=Math.floor(i/40),r[1]=o,r[2]=i-40*o},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(31===i){var o=8-e.getBitOffset();return void(8!==o&&e.readBits(o))}0==(32&i)&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var l,i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++);if((l=0===o?e.available()/8|0:o<250?o:250*(o-249)+this.unrandomize255State(e.readBits(8),i++))<0)throw new yt;for(var g=new Uint8Array(l),_=0;_<l;_++){if(e.available()<8)throw new yt;g[_]=this.unrandomize255State(e.readBits(8),i++)}r.push(g);try{t.append(gf.decode(g,ti.ISO88591))}catch(C){throw new F0("Platform does not support required encoding: "+C.message)}},n.unrandomize255State=function(e,t){var i=e-(149*t%255+1);return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],n}(),MH=function(){function n(){this.rsDecoder=new MT(Wu.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new bH(e),o=i.getVersion(),l=i.readCodewords(),g=TH.getDataBlocks(l,o),_=0;try{for(var C=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(g),D=C.next();!D.done;D=C.next())_+=D.value.getNumDataCodewords()}catch(Ae){t={error:Ae}}finally{try{D&&!D.done&&(r=C.return)&&r.call(C)}finally{if(t)throw t.error}}for(var M=new Uint8Array(_),B=g.length,G=0;G<B;G++){var $=g[G],ie=$.getCodewords(),ce=$.getNumDataCodewords();this.correctErrors(ie,ce);for(var fe=0;fe<ce;fe++)M[fe*B+G]=ie[fe]}return RH.decode(M)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(o){throw new Cs}for(var i=0;i<t;i++)e[i]=r[i]},n}(),kH=function(){function n(e){this.image=e,this.rectangleDetector=new g8(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if((t=this.detectSolid2(t))[3]=this.correctTopRight(t),!t[3])throw new it;var r=(t=this.shiftToModuleCenter(t))[0],i=t[1],o=t[2],l=t[3],g=this.transitionsBetween(r,l)+1,_=this.transitionsBetween(o,l)+1;1==(1&g)&&(g+=1),1==(1&_)&&(_+=1),4*g<7*_&&4*_<7*g&&(g=_=Math.max(g,_));var C=n.sampleGrid(this.image,r,i,o,l,g,_);return new p8(C,[r,i,o,l])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),o=(t.getY()-e.getY())/(r+1);return new $t(e.getX()+i,e.getY()+o)},n.moveAway=function(e,t,r){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<r?o-=1:o+=1,new $t(i,o)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],o=e[2],l=this.transitionsBetween(t,r),g=this.transitionsBetween(r,i),_=this.transitionsBetween(i,o),C=this.transitionsBetween(o,t),D=l,O=[o,t,r,i];return D>g&&(D=g,O[0]=t,O[1]=r,O[2]=i,O[3]=o),D>_&&(D=_,O[0]=r,O[1]=i,O[2]=o,O[3]=t),D>C&&(O[0]=i,O[1]=o,O[2]=t,O[3]=r),O},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],l=this.transitionsBetween(t,o),g=n.shiftPoint(r,i,4*(l+1)),_=n.shiftPoint(i,r,4*(l+1));return this.transitionsBetween(g,t)<this.transitionsBetween(_,o)?(e[0]=t,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],l=this.transitionsBetween(t,o),g=this.transitionsBetween(r,o),_=n.shiftPoint(t,r,4*(g+1)),C=n.shiftPoint(i,r,4*(l+1));l=this.transitionsBetween(_,o),g=this.transitionsBetween(C,o);var D=new $t(o.getX()+(i.getX()-r.getX())/(l+1),o.getY()+(i.getY()-r.getY())/(l+1)),O=new $t(o.getX()+(t.getX()-r.getX())/(g+1),o.getY()+(t.getY()-r.getY())/(g+1));return this.isValid(D)?this.isValid(O)?this.transitionsBetween(_,D)+this.transitionsBetween(C,D)>this.transitionsBetween(_,O)+this.transitionsBetween(C,O)?D:O:D:this.isValid(O)?O:null},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],l=this.transitionsBetween(t,o)+1,g=this.transitionsBetween(i,o)+1,_=n.shiftPoint(t,r,4*g),C=n.shiftPoint(i,r,4*l);1==(1&(l=this.transitionsBetween(_,o)+1))&&(l+=1),1==(1&(g=this.transitionsBetween(C,o)+1))&&(g+=1);var M,B,D=(t.getX()+r.getX()+i.getX()+o.getX())/4,O=(t.getY()+r.getY()+i.getY()+o.getY())/4;return t=n.moveAway(t,D,O),r=n.moveAway(r,D,O),i=n.moveAway(i,D,O),o=n.moveAway(o,D,O),_=n.shiftPoint(t,r,4*g),_=n.shiftPoint(_,o,4*l),M=n.shiftPoint(r,t,4*g),M=n.shiftPoint(M,i,4*l),C=n.shiftPoint(i,o,4*g),C=n.shiftPoint(C,r,4*l),B=n.shiftPoint(o,i,4*g),[_,M,C,B=n.shiftPoint(B,t,4*l)]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,o,l,g){return m8.getInstance().sampleGrid(e,l,g,.5,.5,l-.5,.5,l-.5,g-.5,.5,g-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),l=Math.trunc(t.getY()),g=Math.abs(l-i)>Math.abs(o-r);if(g){var _=r;r=i,i=_,_=o,o=l,l=_}for(var C=Math.abs(o-r),D=Math.abs(l-i),O=-C/2,M=i<l?1:-1,B=r<o?1:-1,G=0,$=this.image.get(g?i:r,g?r:i),ie=r,ce=i;ie!==o;ie+=B){var fe=this.image.get(g?ce:ie,g?ie:ce);if(fe!==$&&(G++,$=fe),(O+=D)>0){if(ce===l)break;ce+=M,O-=C}}return G},n}(),C8=function(){function n(){this.decoder=new MH}return n.prototype.decode=function(e,t){var r,i;if(void 0===t&&(t=null),null!=t&&t.has(Wr.PURE_BARCODE)){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=n.NO_POINTS}else{var l=new kH(e.getBlackMatrix()).detect();r=this.decoder.decode(l.getBits()),i=l.getPoints()}var g=r.getRawBytes(),_=new Gu(r.getText(),g,8*g.length,i,en.DATA_MATRIX,oi.currentTimeMillis()),C=r.getByteSegments();null!=C&&_.putMetadata(ia.BYTE_SEGMENTS,C);var D=r.getECLevel();return null!=D&&_.putMetadata(ia.ERROR_CORRECTION_LEVEL,D),_},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null==t||null==r)throw new it;var i=this.moduleSize(t,e),o=t[1],g=t[0],C=(r[0]-g+1)/i,D=(r[1]-o+1)/i;if(C<=0||D<=0)throw new it;var O=i/2;o+=O,g+=O;for(var M=new _l(C,D),B=0;B<D;B++)for(var G=o+B*i,$=0;$<C;$++)e.get(g+$*i,G)&&M.set($,B);return M},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],o=e[1];i<r&&t.get(i,o);)i++;if(i===r)throw new it;var l=i-e[0];if(0===l)throw new it;return l},n.NO_POINTS=[],n}();var BH=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),lm=(function(n){BH(function(t){return void 0===t&&(t=500),n.call(this,new C8,t)||this},n)}(xy),(()=>(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"}(lm||(lm={})),lm))());const X2=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new gd(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){return e instanceof n&&this.value===e.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Gt;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(lm.L,"L",1),n.M=new n(lm.M,"M",0),n.Q=new n(lm.Q,"Q",3),n.H=new n(lm.H,"H",2),n}(),kk=function(){function n(e){this.errorCorrectionLevel=X2.forBits(e>>3&3),this.dataMask=7&e}return n.numBitsDiffering=function(e,t){return qn.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return null!==r?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,o=Number.MAX_SAFE_INTEGER,l=0;try{for(var g=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n.FORMAT_INFO_DECODE_LOOKUP),_=g.next();!_.done;_=g.next()){var C=_.value,D=C[0];if(D===e||D===t)return new n(C[1]);var O=n.numBitsDiffering(e,D);O<o&&(l=C[1],o=O),e!==t&&(O=n.numBitsDiffering(t,D))<o&&(l=C[1],o=O)}}catch(M){r={error:M}}finally{try{_&&!_.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}return o<=3?new n(l):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){return e instanceof n&&(this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask)},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),ke=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var o=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),l=o.next();!l.done;l=o.next())r+=l.value.getCount()}catch(_){e={error:_}}finally{try{l&&!l.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),ne=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}();var zH=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const dm=function(){function n(e,t){for(var r,i,o=[],l=2;l<arguments.length;l++)o[l-2]=arguments[l];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var g=0,_=o[0].getECCodewordsPerBlock(),C=o[0].getECBlocks();try{for(var D=zH(C),O=D.next();!O.done;O=D.next()){var M=O.value;g+=M.getCount()*(M.getDataCodewords()+_)}}catch(B){r={error:B}}finally{try{O&&!O.done&&(i=D.return)&&i.call(D)}finally{if(r)throw r.error}}this.totalCodewords=g}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!=1)throw new yt;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new yt}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Gt;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var o=n.VERSION_DECODE_INFO[i];if(o===e)return n.getVersionForNumber(i+7);var l=kk.numBitsDiffering(e,o);l<t&&(r=i+7,t=l)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new _l(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,l=0;l<r;l++)0===i&&(0===l||l===r-1)||i===r-1&&0===l||t.setRegion(this.alignmentPatternCenters[l]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new ke(7,new ne(1,19)),new ke(10,new ne(1,16)),new ke(13,new ne(1,13)),new ke(17,new ne(1,9))),new n(2,Int32Array.from([6,18]),new ke(10,new ne(1,34)),new ke(16,new ne(1,28)),new ke(22,new ne(1,22)),new ke(28,new ne(1,16))),new n(3,Int32Array.from([6,22]),new ke(15,new ne(1,55)),new ke(26,new ne(1,44)),new ke(18,new ne(2,17)),new ke(22,new ne(2,13))),new n(4,Int32Array.from([6,26]),new ke(20,new ne(1,80)),new ke(18,new ne(2,32)),new ke(26,new ne(2,24)),new ke(16,new ne(4,9))),new n(5,Int32Array.from([6,30]),new ke(26,new ne(1,108)),new ke(24,new ne(2,43)),new ke(18,new ne(2,15),new ne(2,16)),new ke(22,new ne(2,11),new ne(2,12))),new n(6,Int32Array.from([6,34]),new ke(18,new ne(2,68)),new ke(16,new ne(4,27)),new ke(24,new ne(4,19)),new ke(28,new ne(4,15))),new n(7,Int32Array.from([6,22,38]),new ke(20,new ne(2,78)),new ke(18,new ne(4,31)),new ke(18,new ne(2,14),new ne(4,15)),new ke(26,new ne(4,13),new ne(1,14))),new n(8,Int32Array.from([6,24,42]),new ke(24,new ne(2,97)),new ke(22,new ne(2,38),new ne(2,39)),new ke(22,new ne(4,18),new ne(2,19)),new ke(26,new ne(4,14),new ne(2,15))),new n(9,Int32Array.from([6,26,46]),new ke(30,new ne(2,116)),new ke(22,new ne(3,36),new ne(2,37)),new ke(20,new ne(4,16),new ne(4,17)),new ke(24,new ne(4,12),new ne(4,13))),new n(10,Int32Array.from([6,28,50]),new ke(18,new ne(2,68),new ne(2,69)),new ke(26,new ne(4,43),new ne(1,44)),new ke(24,new ne(6,19),new ne(2,20)),new ke(28,new ne(6,15),new ne(2,16))),new n(11,Int32Array.from([6,30,54]),new ke(20,new ne(4,81)),new ke(30,new ne(1,50),new ne(4,51)),new ke(28,new ne(4,22),new ne(4,23)),new ke(24,new ne(3,12),new ne(8,13))),new n(12,Int32Array.from([6,32,58]),new ke(24,new ne(2,92),new ne(2,93)),new ke(22,new ne(6,36),new ne(2,37)),new ke(26,new ne(4,20),new ne(6,21)),new ke(28,new ne(7,14),new ne(4,15))),new n(13,Int32Array.from([6,34,62]),new ke(26,new ne(4,107)),new ke(22,new ne(8,37),new ne(1,38)),new ke(24,new ne(8,20),new ne(4,21)),new ke(22,new ne(12,11),new ne(4,12))),new n(14,Int32Array.from([6,26,46,66]),new ke(30,new ne(3,115),new ne(1,116)),new ke(24,new ne(4,40),new ne(5,41)),new ke(20,new ne(11,16),new ne(5,17)),new ke(24,new ne(11,12),new ne(5,13))),new n(15,Int32Array.from([6,26,48,70]),new ke(22,new ne(5,87),new ne(1,88)),new ke(24,new ne(5,41),new ne(5,42)),new ke(30,new ne(5,24),new ne(7,25)),new ke(24,new ne(11,12),new ne(7,13))),new n(16,Int32Array.from([6,26,50,74]),new ke(24,new ne(5,98),new ne(1,99)),new ke(28,new ne(7,45),new ne(3,46)),new ke(24,new ne(15,19),new ne(2,20)),new ke(30,new ne(3,15),new ne(13,16))),new n(17,Int32Array.from([6,30,54,78]),new ke(28,new ne(1,107),new ne(5,108)),new ke(28,new ne(10,46),new ne(1,47)),new ke(28,new ne(1,22),new ne(15,23)),new ke(28,new ne(2,14),new ne(17,15))),new n(18,Int32Array.from([6,30,56,82]),new ke(30,new ne(5,120),new ne(1,121)),new ke(26,new ne(9,43),new ne(4,44)),new ke(28,new ne(17,22),new ne(1,23)),new ke(28,new ne(2,14),new ne(19,15))),new n(19,Int32Array.from([6,30,58,86]),new ke(28,new ne(3,113),new ne(4,114)),new ke(26,new ne(3,44),new ne(11,45)),new ke(26,new ne(17,21),new ne(4,22)),new ke(26,new ne(9,13),new ne(16,14))),new n(20,Int32Array.from([6,34,62,90]),new ke(28,new ne(3,107),new ne(5,108)),new ke(26,new ne(3,41),new ne(13,42)),new ke(30,new ne(15,24),new ne(5,25)),new ke(28,new ne(15,15),new ne(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new ke(28,new ne(4,116),new ne(4,117)),new ke(26,new ne(17,42)),new ke(28,new ne(17,22),new ne(6,23)),new ke(30,new ne(19,16),new ne(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new ke(28,new ne(2,111),new ne(7,112)),new ke(28,new ne(17,46)),new ke(30,new ne(7,24),new ne(16,25)),new ke(24,new ne(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new ke(30,new ne(4,121),new ne(5,122)),new ke(28,new ne(4,47),new ne(14,48)),new ke(30,new ne(11,24),new ne(14,25)),new ke(30,new ne(16,15),new ne(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new ke(30,new ne(6,117),new ne(4,118)),new ke(28,new ne(6,45),new ne(14,46)),new ke(30,new ne(11,24),new ne(16,25)),new ke(30,new ne(30,16),new ne(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new ke(26,new ne(8,106),new ne(4,107)),new ke(28,new ne(8,47),new ne(13,48)),new ke(30,new ne(7,24),new ne(22,25)),new ke(30,new ne(22,15),new ne(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new ke(28,new ne(10,114),new ne(2,115)),new ke(28,new ne(19,46),new ne(4,47)),new ke(28,new ne(28,22),new ne(6,23)),new ke(30,new ne(33,16),new ne(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new ke(30,new ne(8,122),new ne(4,123)),new ke(28,new ne(22,45),new ne(3,46)),new ke(30,new ne(8,23),new ne(26,24)),new ke(30,new ne(12,15),new ne(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new ke(30,new ne(3,117),new ne(10,118)),new ke(28,new ne(3,45),new ne(23,46)),new ke(30,new ne(4,24),new ne(31,25)),new ke(30,new ne(11,15),new ne(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new ke(30,new ne(7,116),new ne(7,117)),new ke(28,new ne(21,45),new ne(7,46)),new ke(30,new ne(1,23),new ne(37,24)),new ke(30,new ne(19,15),new ne(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new ke(30,new ne(5,115),new ne(10,116)),new ke(28,new ne(19,47),new ne(10,48)),new ke(30,new ne(15,24),new ne(25,25)),new ke(30,new ne(23,15),new ne(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new ke(30,new ne(13,115),new ne(3,116)),new ke(28,new ne(2,46),new ne(29,47)),new ke(30,new ne(42,24),new ne(1,25)),new ke(30,new ne(23,15),new ne(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new ke(30,new ne(17,115)),new ke(28,new ne(10,46),new ne(23,47)),new ke(30,new ne(10,24),new ne(35,25)),new ke(30,new ne(19,15),new ne(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new ke(30,new ne(17,115),new ne(1,116)),new ke(28,new ne(14,46),new ne(21,47)),new ke(30,new ne(29,24),new ne(19,25)),new ke(30,new ne(11,15),new ne(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new ke(30,new ne(13,115),new ne(6,116)),new ke(28,new ne(14,46),new ne(23,47)),new ke(30,new ne(44,24),new ne(7,25)),new ke(30,new ne(59,16),new ne(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new ke(30,new ne(12,121),new ne(7,122)),new ke(28,new ne(12,47),new ne(26,48)),new ke(30,new ne(39,24),new ne(14,25)),new ke(30,new ne(22,15),new ne(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new ke(30,new ne(6,121),new ne(14,122)),new ke(28,new ne(6,47),new ne(34,48)),new ke(30,new ne(46,24),new ne(10,25)),new ke(30,new ne(2,15),new ne(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new ke(30,new ne(17,122),new ne(4,123)),new ke(28,new ne(29,46),new ne(14,47)),new ke(30,new ne(49,24),new ne(10,25)),new ke(30,new ne(24,15),new ne(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new ke(30,new ne(4,122),new ne(18,123)),new ke(28,new ne(13,46),new ne(32,47)),new ke(30,new ne(48,24),new ne(14,25)),new ke(30,new ne(42,15),new ne(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new ke(30,new ne(20,117),new ne(4,118)),new ke(28,new ne(40,47),new ne(7,48)),new ke(30,new ne(43,24),new ne(22,25)),new ke(30,new ne(10,15),new ne(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new ke(30,new ne(19,118),new ne(6,119)),new ke(28,new ne(18,47),new ne(31,48)),new ke(30,new ne(34,24),new ne(34,25)),new ke(30,new ne(20,15),new ne(61,16)))],n}();var qo=(()=>(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"}(qo||(qo={})),qo))();const Lk=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[qo.DATA_MASK_000,new n(qo.DATA_MASK_000,function(e,t){return 0==(e+t&1)})],[qo.DATA_MASK_001,new n(qo.DATA_MASK_001,function(e,t){return 0==(1&e)})],[qo.DATA_MASK_010,new n(qo.DATA_MASK_010,function(e,t){return t%3==0})],[qo.DATA_MASK_011,new n(qo.DATA_MASK_011,function(e,t){return(e+t)%3==0})],[qo.DATA_MASK_100,new n(qo.DATA_MASK_100,function(e,t){return 0==(Math.floor(e/2)+Math.floor(t/3)&1)})],[qo.DATA_MASK_101,new n(qo.DATA_MASK_101,function(e,t){return e*t%6==0})],[qo.DATA_MASK_110,new n(qo.DATA_MASK_110,function(e,t){return e*t%6<3})],[qo.DATA_MASK_111,new n(qo.DATA_MASK_111,function(e,t){return 0==(e+t+e*t%3&1)})]]),n}(),KH=function(){function n(e){var t=e.getHeight();if(t<21||1!=(3&t))throw new yt;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);var i=this.bitMatrix.getHeight(),o=0,l=i-7;for(r=i-1;r>=l;r--)o=this.copyBit(8,r,o);for(t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=kk.decodeFormatInformation(e,o),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new yt},n.prototype.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return dm.getVersionForNumber(t);for(var r=0,i=e-11,o=5;o>=0;o--)for(var l=e-9;l>=i;l--)r=this.copyBit(l,o,r);var g=dm.decodeVersionInformation(r);if(null!==g&&g.getDimensionForVersion()===e)return this.parsedVersion=g,g;for(r=0,l=5;l>=0;l--)for(o=e-9;o>=i;o--)r=this.copyBit(l,o,r);if(null!==(g=dm.decodeVersionInformation(r))&&g.getDimensionForVersion()===e)return this.parsedVersion=g,g;throw new yt},n.prototype.copyBit=function(e,t,r){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=Lk.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),l=!0,g=new Uint8Array(t.getTotalCodewords()),_=0,C=0,D=0,O=i-1;O>0;O-=2){6===O&&O--;for(var M=0;M<i;M++)for(var B=l?i-1-M:M,G=0;G<2;G++)o.get(O-G,B)||(D++,C<<=1,this.bitMatrix.get(O-G,B)&&(C|=1),8===D&&(g[_++]=C,D=0,C=0));l=!l}if(_!==t.getTotalCodewords())throw new yt;return g},n.prototype.remask=function(){if(null!==this.parsedFormatInfo){var e=Lk.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}();var Bk=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const XH=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,o,l,g;if(e.length!==t.getTotalCodewords())throw new Gt;var _=t.getECBlocksForLevel(r),C=0,D=_.getECBlocks();try{for(var O=Bk(D),M=O.next();!M.done;M=O.next())C+=(B=M.value).getCount()}catch(ki){i={error:ki}}finally{try{M&&!M.done&&(o=O.return)&&o.call(O)}finally{if(i)throw i.error}}var G=new Array(C),$=0;try{for(var ie=Bk(D),ce=ie.next();!ce.done;ce=ie.next())for(var B=ce.value,fe=0;fe<B.getCount();fe++){var Ae=B.getDataCodewords(),De=_.getECCodewordsPerBlock()+Ae;G[$++]=new n(Ae,new Uint8Array(De))}}catch(ki){l={error:ki}}finally{try{ce&&!ce.done&&(g=ie.return)&&g.call(ie)}finally{if(l)throw l.error}}for(var nt=G[0].codewords.length,ht=G.length-1;ht>=0&&G[ht].codewords.length!==nt;)ht--;ht++;var Yt=nt-_.getECCodewordsPerBlock(),nr=0;for(fe=0;fe<Yt;fe++)for(var cn=0;cn<$;cn++)G[cn].codewords[fe]=e[nr++];for(cn=ht;cn<$;cn++)G[cn].codewords[Yt]=e[nr++];var po=G[0].codewords.length;for(fe=Yt;fe<po;fe++)for(cn=0;cn<$;cn++)G[cn].codewords[cn<ht?fe:fe+1]=e[nr++];return G},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}();var Nc=(()=>(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"}(Nc||(Nc={})),Nc))();const _i=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(void 0===t)throw new Gt;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber();return this.characterCountBitsForVersions[t<=9?0:t<=26?1:2]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){return e instanceof n&&this.value===e.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Nc.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Nc.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Nc.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Nc.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Nc.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Nc.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Nc.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Nc.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Nc.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Nc.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),ej=function(){function n(){}return n.decode=function(e,t,r,i){var o=new Fk(e),l=new zr,g=new Array,_=-1,C=-1;try{var D=null,O=!1,M=void 0;do{if(o.available()<4)M=_i.TERMINATOR;else{var B=o.readBits(4);M=_i.forBits(B)}switch(M){case _i.TERMINATOR:break;case _i.FNC1_FIRST_POSITION:case _i.FNC1_SECOND_POSITION:O=!0;break;case _i.STRUCTURED_APPEND:if(o.available()<16)throw new yt;_=o.readBits(8),C=o.readBits(8);break;case _i.ECI:var G=n.parseECIValue(o);if(null===(D=zo.getCharacterSetECIByValue(G)))throw new yt;break;case _i.HANZI:var $=o.readBits(4),ie=o.readBits(M.getCharacterCountBits(t));$===n.GB2312_SUBSET&&n.decodeHanziSegment(o,l,ie);break;default:var ce=o.readBits(M.getCharacterCountBits(t));switch(M){case _i.NUMERIC:n.decodeNumericSegment(o,l,ce);break;case _i.ALPHANUMERIC:n.decodeAlphanumericSegment(o,l,ce,O);break;case _i.BYTE:n.decodeByteSegment(o,l,ce,D,g,i);break;case _i.KANJI:n.decodeKanjiSegment(o,l,ce);break;default:throw new yt}}}while(M!==_i.TERMINATOR)}catch(fe){throw new yt}return new NT(e,l.toString(),0===g.length?null:g,null===r?null:r.toString(),_,C)},n.decodeHanziSegment=function(e,t,r){if(13*r>e.available())throw new yt;for(var i=new Uint8Array(2*r),o=0;r>0;){var l=e.readBits(13),g=l/96<<8&4294967295|l%96;i[o]=(g+=g<959?41377:42657)>>8&255,i[o+1]=255&g,o+=2,r--}try{t.append(gf.decode(i,ti.GB2312))}catch(_){throw new yt(_)}},n.decodeKanjiSegment=function(e,t,r){if(13*r>e.available())throw new yt;for(var i=new Uint8Array(2*r),o=0;r>0;){var l=e.readBits(13),g=l/192<<8&4294967295|l%192;i[o]=(g+=g<7936?33088:49472)>>8,i[o+1]=g,o+=2,r--}try{t.append(gf.decode(i,ti.SHIFT_JIS))}catch(_){throw new yt(_)}},n.decodeByteSegment=function(e,t,r,i,o,l){if(8*r>e.available())throw new yt;for(var g=new Uint8Array(r),_=0;_<r;_++)g[_]=e.readBits(8);var C;C=null===i?ti.guessEncoding(g,l):i.getName();try{t.append(gf.decode(g,C))}catch(D){throw new yt(D)}o.push(g)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new yt;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var o=t.length();r>1;){if(e.available()<11)throw new yt;var l=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(l/45))),t.append(n.toAlphaNumericChar(l%45)),r-=2}if(1===r){if(e.available()<6)throw new yt;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var g=o;g<t.length();g++)"%"===t.charAt(g)&&(g<t.length()-1&&"%"===t.charAt(g+1)?t.deleteCharAt(g+1):t.setCharAt(g,String.fromCharCode(29)))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new yt;var i=e.readBits(10);if(i>=1e3)throw new yt;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(2===r){if(e.available()<7)throw new yt;var o=e.readBits(7);if(o>=100)throw new yt;t.append(n.toAlphaNumericChar(Math.floor(o/10))),t.append(n.toAlphaNumericChar(o%10))}else if(1===r){if(e.available()<4)throw new yt;var l=e.readBits(4);if(l>=10)throw new yt;t.append(n.toAlphaNumericChar(l))}},n.parseECIValue=function(e){var t=e.readBits(8);if(0==(128&t))return 127&t;if(128==(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192==(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new yt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),Vk=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(this.mirrored&&null!==e&&!(e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}();var Uk=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const rj=function(){function n(){this.rsDecoder=new MT(Wu.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(_l.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new KH(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(l){i=l}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,t);return o.setOther(new Vk(!0)),o}catch(l){throw null!==i?i:l}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,o,l,g=e.readVersion(),_=e.readFormatInformation().getErrorCorrectionLevel(),C=e.readCodewords(),D=XH.getDataBlocks(C,g,_),O=0;try{for(var M=Uk(D),B=M.next();!B.done;B=M.next())O+=(G=B.value).getNumDataCodewords()}catch(ht){r={error:ht}}finally{try{B&&!B.done&&(i=M.return)&&i.call(M)}finally{if(r)throw r.error}}var $=new Uint8Array(O),ie=0;try{for(var ce=Uk(D),fe=ce.next();!fe.done;fe=ce.next()){var G,Ae=(G=fe.value).getCodewords(),De=G.getNumDataCodewords();this.correctErrors(Ae,De);for(var nt=0;nt<De;nt++)$[ie++]=Ae[nt]}}catch(ht){o={error:ht}}finally{try{fe&&!fe.done&&(l=ce.return)&&l.call(ce)}finally{if(o)throw o.error}}return ej.decode($,g,_,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(o){throw new Cs}for(var i=0;i<t;i++)e[i]=r[i]},n}();var ij=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const sj=function(n){function e(t,r,i){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o}return ij(e,n),e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){return new e((this.getX()+r)/2,(this.getY()+t)/2,(this.estimatedModuleSize+i)/2)},e}($t),cj=function(){function n(e,t,r,i,o,l,g){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=o,this.moduleSize=l,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,i=e+this.width,o=this.startY+t/2,l=new Int32Array(3),g=this.image,_=0;_<t;_++){var C=o+(0==(1&_)?Math.floor((_+1)/2):-Math.floor((_+1)/2));l[0]=0,l[1]=0,l[2]=0;for(var D=e;D<i&&!g.get(D,C);)D++;for(var O=0;D<i;){if(g.get(D,C))if(1===O)l[1]++;else if(2===O){var M;if(this.foundPatternCross(l)&&null!==(M=this.handlePossibleCenter(l,C,D)))return M;l[0]=l[2],l[1]=1,l[2]=0,O=1}else l[++O]++;else 1===O&&O++,l[O]++;D++}if(this.foundPatternCross(l)&&null!==(M=this.handlePossibleCenter(l,C,i)))return M}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new it},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var o=this.image,l=o.getHeight(),g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;for(var _=e;_>=0&&o.get(t,_)&&g[1]<=r;)g[1]++,_--;if(_<0||g[1]>r)return NaN;for(;_>=0&&!o.get(t,_)&&g[0]<=r;)g[0]++,_--;if(g[0]>r)return NaN;for(_=e+1;_<l&&o.get(t,_)&&g[1]<=r;)g[1]++,_++;if(_===l||g[1]>r)return NaN;for(;_<l&&!o.get(t,_)&&g[2]<=r;)g[2]++,_++;return g[2]>r||5*Math.abs(g[0]+g[1]+g[2]-i)>=2*i?NaN:this.foundPatternCross(g)?n.centerFromEnd(g,_):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,o,l=e[0]+e[1]+e[2],g=n.centerFromEnd(e,r),_=this.crossCheckVertical(t,g,2*e[1],l);if(!isNaN(_)){var C=(e[0]+e[1]+e[2])/3;try{for(var D=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.possibleCenters),O=D.next();!O.done;O=D.next()){var M=O.value;if(M.aboutEquals(C,_,g))return M.combineEstimate(_,g,C)}}catch(G){i={error:G}}finally{try{O&&!O.done&&(o=D.return)&&o.call(D)}finally{if(i)throw i.error}}var B=new sj(g,_,C);this.possibleCenters.push(B),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(B)}return null},n}();var lj=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const fj=function(n){function e(t,r,i,o){var l=n.call(this,t,r)||this;return l.estimatedModuleSize=i,l.count=o,void 0===o&&(l.count=1),l}return lj(e,n),e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=this.count+1;return new e((this.count*this.getX()+r)/o,(this.count*this.getY()+t)/o,(this.count*this.estimatedModuleSize+i)/o,o)},e}($t),pj=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}();var Q2=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const mj=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=null!=e&&void 0!==e.get(Wr.TRY_HARDER),r=null!=e&&void 0!==e.get(Wr.PURE_BARCODE),i=this.image,o=i.getHeight(),l=i.getWidth(),g=Math.floor(3*o/(4*n.MAX_MODULES));(g<n.MIN_SKIP||t)&&(g=n.MIN_SKIP);for(var _=!1,C=new Int32Array(5),D=g-1;D<o&&!_;D+=g){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;for(var O=0,M=0;M<l;M++)if(i.get(M,D))1==(1&O)&&O++,C[O]++;else if(0==(1&O))if(4===O)if(n.foundPatternCross(C)){if(!0!==this.handlePossibleCenter(C,D,M,r)){C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,O=3;continue}if(g=2,!0===this.hasSkipped)_=this.haveMultiplyConfirmedCenters();else{var G=this.findRowSkip();G>C[2]&&(D+=G-C[2]-g,M=l-1)}O=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,O=3;else C[++O]++;else C[O]++;n.foundPatternCross(C)&&!0===this.handlePossibleCenter(C,D,l,r)&&(g=C[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}var $=this.selectBestPatterns();return $t.orderBestPatterns($),new pj($)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(0===i)return!1;t+=i}if(t<7)return!1;var o=t/7,l=o/2;return Math.abs(o-e[0])<l&&Math.abs(o-e[1])<l&&Math.abs(3*o-e[2])<3*l&&Math.abs(o-e[3])<l&&Math.abs(o-e[4])<l},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var o=this.getCrossCheckStateCount(),l=0,g=this.image;e>=l&&t>=l&&g.get(t-l,e-l);)o[2]++,l++;if(e<l||t<l)return!1;for(;e>=l&&t>=l&&!g.get(t-l,e-l)&&o[1]<=r;)o[1]++,l++;if(e<l||t<l||o[1]>r)return!1;for(;e>=l&&t>=l&&g.get(t-l,e-l)&&o[0]<=r;)o[0]++,l++;if(o[0]>r)return!1;var _=g.getHeight(),C=g.getWidth();for(l=1;e+l<_&&t+l<C&&g.get(t+l,e+l);)o[2]++,l++;if(e+l>=_||t+l>=C)return!1;for(;e+l<_&&t+l<C&&!g.get(t+l,e+l)&&o[3]<r;)o[3]++,l++;if(e+l>=_||t+l>=C||o[3]>=r)return!1;for(;e+l<_&&t+l<C&&g.get(t+l,e+l)&&o[4]<r;)o[4]++,l++;return!(o[4]>=r)&&Math.abs(o[0]+o[1]+o[2]+o[3]+o[4]-i)<2*i&&n.foundPatternCross(o)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var o=this.image,l=o.getHeight(),g=this.getCrossCheckStateCount(),_=e;_>=0&&o.get(t,_);)g[2]++,_--;if(_<0)return NaN;for(;_>=0&&!o.get(t,_)&&g[1]<=r;)g[1]++,_--;if(_<0||g[1]>r)return NaN;for(;_>=0&&o.get(t,_)&&g[0]<=r;)g[0]++,_--;if(g[0]>r)return NaN;for(_=e+1;_<l&&o.get(t,_);)g[2]++,_++;if(_===l)return NaN;for(;_<l&&!o.get(t,_)&&g[3]<r;)g[3]++,_++;if(_===l||g[3]>=r)return NaN;for(;_<l&&o.get(t,_)&&g[4]<r;)g[4]++,_++;return g[4]>=r||5*Math.abs(g[0]+g[1]+g[2]+g[3]+g[4]-i)>=2*i?NaN:n.foundPatternCross(g)?n.centerFromEnd(g,_):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var o=this.image,l=o.getWidth(),g=this.getCrossCheckStateCount(),_=e;_>=0&&o.get(_,t);)g[2]++,_--;if(_<0)return NaN;for(;_>=0&&!o.get(_,t)&&g[1]<=r;)g[1]++,_--;if(_<0||g[1]>r)return NaN;for(;_>=0&&o.get(_,t)&&g[0]<=r;)g[0]++,_--;if(g[0]>r)return NaN;for(_=e+1;_<l&&o.get(_,t);)g[2]++,_++;if(_===l)return NaN;for(;_<l&&!o.get(_,t)&&g[3]<r;)g[3]++,_++;if(_===l||g[3]>=r)return NaN;for(;_<l&&o.get(_,t)&&g[4]<r;)g[4]++,_++;return g[4]>=r||5*Math.abs(g[0]+g[1]+g[2]+g[3]+g[4]-i)>=i?NaN:n.foundPatternCross(g)?n.centerFromEnd(g,_):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],l=n.centerFromEnd(e,r),g=this.crossCheckVertical(t,Math.floor(l),e[2],o);if(!isNaN(g)&&(l=this.crossCheckHorizontal(Math.floor(l),Math.floor(g),e[2],o),!isNaN(l)&&(!i||this.crossCheckDiagonal(Math.floor(g),Math.floor(l),e[2],o)))){for(var _=o/7,C=!1,D=this.possibleCenters,O=0,M=D.length;O<M;O++){var B=D[O];if(B.aboutEquals(_,g,l)){D[O]=B.combineEstimate(g,l,_),C=!0;break}}if(!C){var G=new fj(l,g,_);D.push(G),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(G)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t;if(this.possibleCenters.length<=1)return 0;var i=null;try{for(var o=Q2(this.possibleCenters),l=o.next();!l.done;l=o.next()){var g=l.value;if(g.getCount()>=n.CENTER_QUORUM){if(null!=i)return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-g.getX())-Math.abs(i.getY()-g.getY()))/2);i=g}}}catch(_){e={error:_}}finally{try{l&&!l.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,o=0,l=0,g=this.possibleCenters.length;try{for(var _=Q2(this.possibleCenters),C=_.next();!C.done;C=_.next())(D=C.value).getCount()>=n.CENTER_QUORUM&&(o++,l+=D.getEstimatedModuleSize())}catch($){e={error:$}}finally{try{C&&!C.done&&(t=_.return)&&t.call(_)}finally{if(e)throw e.error}}if(o<3)return!1;var O=l/g,M=0;try{for(var B=Q2(this.possibleCenters),G=B.next();!G.done;G=B.next()){var D=G.value;M+=Math.abs(D.getEstimatedModuleSize()-O)}}catch($){r={error:$}}finally{try{G&&!G.done&&(i=B.return)&&i.call(B)}finally{if(r)throw r.error}}return M<=.05*l},n.prototype.selectBestPatterns=function(){var e,t,r,i,o=this.possibleCenters.length;if(o<3)throw new it;var g,l=this.possibleCenters;if(o>3){var _=0,C=0;try{for(var D=Q2(this.possibleCenters),O=D.next();!O.done;O=D.next()){var B=O.value.getEstimatedModuleSize();_+=B,C+=B*B}}catch(nt){e={error:nt}}finally{try{O&&!O.done&&(t=D.return)&&t.call(D)}finally{if(e)throw e.error}}g=_/o;var G=Math.sqrt(C/o-g*g);l.sort(function(nt,ht){var xt=Math.abs(ht.getEstimatedModuleSize()-g),Yt=Math.abs(nt.getEstimatedModuleSize()-g);return xt<Yt?-1:xt>Yt?1:0});for(var $=Math.max(.2*g,G),ie=0;ie<l.length&&l.length>3;ie++)Math.abs(l[ie].getEstimatedModuleSize()-g)>$&&(l.splice(ie,1),ie--)}if(l.length>3){_=0;try{for(var fe=Q2(l),Ae=fe.next();!Ae.done;Ae=fe.next())_+=Ae.value.getEstimatedModuleSize()}catch(ht){r={error:ht}}finally{try{Ae&&!Ae.done&&(i=fe.return)&&i.call(fe)}finally{if(r)throw r.error}}g=_/l.length,l.sort(function(ht,xt){if(xt.getCount()===ht.getCount()){var Yt=Math.abs(xt.getEstimatedModuleSize()-g),nr=Math.abs(ht.getEstimatedModuleSize()-g);return Yt<nr?1:Yt>nr?-1:0}return xt.getCount()-ht.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),_j=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=null==e?null:e.get(Wr.NEED_RESULT_POINT_CALLBACK);var r=new mj(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,r,i);if(o<1)throw new it("No pattern found in proccess finder.");var l=n.computeDimension(t,r,i,o),g=dm.getProvisionalVersionForDimension(l),_=g.getDimensionForVersion()-7,C=null;if(g.getAlignmentPatternCenters().length>0)for(var D=r.getX()-t.getX()+i.getX(),O=r.getY()-t.getY()+i.getY(),M=1-3/_,B=Math.floor(t.getX()+M*(D-t.getX())),G=Math.floor(t.getY()+M*(O-t.getY())),$=4;$<=16;$<<=1)try{C=this.findAlignmentInRegion(o,B,G,$);break}catch(Ae){if(!(Ae instanceof it))throw Ae}var ie=n.createTransform(t,r,i,C,l),ce=n.sampleGrid(this.image,ie,l);return new p8(ce,null===C?[i,t,r]:[i,t,r,C])},n.createTransform=function(e,t,r,i,o){var g,_,C,D,l=o-3.5;return null!==i?(g=i.getX(),_=i.getY(),D=C=l-3):(g=t.getX()-e.getX()+r.getX(),_=t.getY()-e.getY()+r.getY(),C=l,D=l),yk.quadrilateralToQuadrilateral(3.5,3.5,l,3.5,C,D,3.5,l,e.getX(),e.getY(),t.getX(),t.getY(),g,_,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){return m8.getInstance().sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var o=mr.round($t.distance(e,t)/i),l=mr.round($t.distance(e,r)/i),g=Math.floor((o+l)/2)+7;switch(3&g){case 0:g++;break;case 2:g--;break;case 3:throw new it("Dimensions could be not found.")}return g},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,r,i),l=1,g=e-(r-e);g<0?(l=e/(e-g),g=0):g>=this.image.getWidth()&&(l=(this.image.getWidth()-1-e)/(g-e),g=this.image.getWidth()-1);var _=Math.floor(t-(i-t)*l);return l=1,_<0?(l=t/(t-_),_=0):_>=this.image.getHeight()&&(l=(this.image.getHeight()-1-t)/(_-t),_=this.image.getHeight()-1),g=Math.floor(e+(g-e)*l),(o+=this.sizeOfBlackWhiteBlackRun(e,t,g,_))-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var o=Math.abs(i-t)>Math.abs(r-e);if(o){var l=e;e=t,t=l,l=r,r=i,i=l}for(var g=Math.abs(r-e),_=Math.abs(i-t),C=-g/2,D=e<r?1:-1,O=t<i?1:-1,M=0,B=r+D,G=e,$=t;G!==B;G+=D){if(1===M===this.image.get(o?$:G,o?G:$)){if(2===M)return mr.distance(G,$,e,t);M++}if((C+=_)>0){if($===i)break;$+=O,C-=g}}return 2===M?mr.distance(r+D,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var o=Math.floor(i*e),l=Math.max(0,t-o),g=Math.min(this.image.getWidth()-1,t+o);if(g-l<3*e)throw new it("Alignment top exceeds estimated module size.");var _=Math.max(0,r-o),C=Math.min(this.image.getHeight()-1,r+o);if(C-_<3*e)throw new it("Alignment bottom exceeds estimated module size.");return new cj(this.image,l,_,g-l,C-_,e,this.resultPointCallback).find()},n}(),A8=function(){function n(){this.decoder=new rj}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(null!=t&&void 0!==t.get(Wr.PURE_BARCODE)){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,t),i=n.NO_POINTS}else{var l=new _j(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(l.getBits(),t),i=l.getPoints()}r.getOther()instanceof Vk&&r.getOther().applyMirroredCorrection(i);var g=new Gu(r.getText(),r.getRawBytes(),void 0,i,en.QR_CODE,void 0),_=r.getByteSegments();null!==_&&g.putMetadata(ia.BYTE_SEGMENTS,_);var C=r.getECLevel();return null!==C&&g.putMetadata(ia.ERROR_CORRECTION_LEVEL,C),r.hasStructuredAppend()&&(g.putMetadata(ia.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),g.putMetadata(ia.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),g},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null===t||null===r)throw new it;var i=this.moduleSize(t,e),o=t[1],l=r[1],g=t[0],_=r[0];if(g>=_||o>=l)throw new it;if(l-o!=_-g&&(_=g+(l-o))>=e.getWidth())throw new it;var C=Math.round((_-g+1)/i),D=Math.round((l-o+1)/i);if(C<=0||D<=0)throw new it;if(D!==C)throw new it;var O=Math.floor(i/2);o+=O;var M=(g+=O)+Math.floor((C-1)*i)-_;if(M>0){if(M>O)throw new it;g-=M}var B=o+Math.floor((D-1)*i)-l;if(B>0){if(B>O)throw new it;o-=B}for(var G=new _l(C,D),$=0;$<D;$++)for(var ie=o+Math.floor($*i),ce=0;ce<C;ce++)e.get(g+Math.floor(ce*i),ie)&&G.set(ce,$);return G},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),o=e[0],l=e[1],g=!0,_=0;o<i&&l<r;){if(g!==t.get(o,l)){if(5==++_)break;g=!g}o++,l++}if(o===i||l===r)throw new it;return(o-e[0])/7},n.NO_POINTS=new Array,n}(),sr=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return mr.sum(e)},n.toIntArray=function(e){var t,r;if(null==e||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var l=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),g=l.next();!g.done;g=l.next())i[o++]=g.value}catch(C){t={error:C}}finally{try{g&&!g.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=ju.binarySearch(n.SYMBOL_TABLE,262143&e);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.MAX_CODEWORDS_IN_BARCODE=(n.NUMBER_OF_CODEWORDS=929)-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),Cj=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}();var Aj=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const bj=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),o=n.detect(r,i);return o.length||((i=i.clone()).rotate180(),o=n.detect(r,i)),new Cj(i,o)},n.detect=function(e,t){for(var r,i,o=new Array,l=0,g=0,_=!1;l<t.getHeight();){var C=n.findVertices(t,l,g);if(null!=C[0]||null!=C[3]){if(_=!0,o.push(C),!e)break;null!=C[2]?(g=Math.trunc(C[2].getX()),l=Math.trunc(C[2].getY())):(g=Math.trunc(C[4].getX()),l=Math.trunc(C[4].getY()))}else{if(!_)break;_=!1,g=0;try{for(var D=(r=void 0,Aj(o)),O=D.next();!O.done;O=D.next()){var M=O.value;null!=M[1]&&(l=Math.trunc(Math.max(l,M[1].getY()))),null!=M[3]&&(l=Math.max(l,Math.trunc(M[3].getY())))}}catch(B){r={error:B}}finally{try{O&&!O.done&&(i=D.return)&&i.call(D)}finally{if(r)throw r.error}}l+=n.ROW_STEP}}return o},n.findVertices=function(e,t,r){var i=e.getHeight(),o=e.getWidth(),l=new Array(8);return n.copyToResult(l,n.findRowsWithPattern(e,i,o,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),null!=l[4]&&(r=Math.trunc(l[4].getX()),t=Math.trunc(l[4].getY())),n.copyToResult(l,n.findRowsWithPattern(e,i,o,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),l},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,o,l){for(var g=new Array(4),_=!1,C=new Int32Array(l.length);i<t;i+=n.ROW_STEP)if(null!=(D=n.findGuardPattern(e,o,i,r,!1,l,C))){for(;i>0;){if(null==(O=n.findGuardPattern(e,o,--i,r,!1,l,C))){i++;break}D=O}g[0]=new $t(D[0],i),g[1]=new $t(D[1],i),_=!0;break}var M=i+1;if(_){for(var B=0,O=Int32Array.from([Math.trunc(g[0].getX()),Math.trunc(g[1].getX())]);M<t;M++){var D;if(null!=(D=n.findGuardPattern(e,O[0],M,r,!1,l,C))&&Math.abs(O[0]-D[0])<n.MAX_PATTERN_DRIFT&&Math.abs(O[1]-D[1])<n.MAX_PATTERN_DRIFT)O=D,B=0;else{if(B>n.SKIPPED_ROW_COUNT_MAX)break;B++}}g[2]=new $t(O[0],M-=B+1),g[3]=new $t(O[1],M)}return M-i<n.BARCODE_MIN_HEIGHT&&ju.fill(g,null),g},n.findGuardPattern=function(e,t,r,i,o,l,g){ju.fillWithin(g,0,g.length,0);for(var _=t,C=0;e.get(_,r)&&_>0&&C++<n.MAX_PIXEL_DRIFT;)_--;for(var D=_,O=0,M=l.length,B=o;D<i;D++)if(e.get(D,r)!==B)g[O]++;else{if(O===M-1){if(n.patternMatchVariance(g,l,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([_,D]);_+=g[0]+g[1],oi.arraycopy(g,2,g,0,O-1),g[O-1]=0,g[O]=0,O--}else O++;g[O]=1,B=!B}return O===M-1&&n.patternMatchVariance(g,l,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([_,D-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,l=0,g=0;g<i;g++)o+=e[g],l+=t[g];if(o<l)return 1/0;var _=o/l;r*=_;for(var C=0,D=0;D<i;D++){var O=e[D],M=t[D]*_,B=O>M?O-M:M-O;if(B>r)return 1/0;C+=B}return C/o},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),fm=function(){function n(e,t){if(0===t.length)throw new Gt;this.field=e;var r=t.length;if(r>1&&0===t[0]){for(var i=1;i<r&&0===t[i];)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),oi.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return 0===this.coefficients[0]},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(0===e)return this.getCoefficient(0);if(1===e){var i=0;try{for(var o=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.coefficients),l=o.next();!l.done;l=o.next())i=this.field.add(i,l.value)}catch(O){t={error:O}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}for(var _=this.coefficients[0],C=this.coefficients.length,D=1;D<C;D++)_=this.field.add(this.field.multiply(e,_),this.coefficients[D]);return _},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Gt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),l=r.length-t.length;oi.arraycopy(r,0,o,0,l);for(var g=l;g<r.length;g++)o[g]=this.field.add(t[g-l],r[g]);return new n(this.field,o)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Gt("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Gt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,l=new Int32Array(r+o-1),g=0;g<r;g++)for(var _=t[g],C=0;C<o;C++)l[g+C]=this.field.add(l[g+C],this.field.multiply(_,i[C]));return new n(this.field,l)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(0===e)return new n(this.field,new Int32Array([0]));if(1===e)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Gt;if(0===t)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new zr,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);0!==r&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(0===t||1!==r)&&e.append(r),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),Oj=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(0===e)throw new Gt;return this.logTable[e]},n.prototype.inverse=function(e){if(0===e)throw new mk;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}();var Rj=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const Pj=function(n){function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,l=0;l<t;l++)i.expTable[l]=o,o=o*r%t;for(l=0;l<t-1;l++)i.logTable[i.expTable[l]]=l;return i.zero=new fm(i,new Int32Array([0])),i.one=new fm(i,new Int32Array([1])),i}return Rj(e,n),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Gt;if(0===r)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new fm(this,i)},e.PDF417_GF=new e(sr.NUMBER_OF_CODEWORDS,3),e}(Oj),kj=function(){function n(){this.field=Pj.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,o,l=new fm(this.field,e),g=new Int32Array(t),_=!1,C=t;C>0;C--){var D=l.evaluateAt(this.field.exp(C));g[t-C]=D,0!==D&&(_=!0)}if(!_)return 0;var O=this.field.getOne();if(null!=r)try{for(var M=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),B=M.next();!B.done;B=M.next()){var $=this.field.exp(e.length-1-B.value),ie=new fm(this.field,new Int32Array([this.field.subtract(0,$),1]));O=O.multiply(ie)}}catch(Yt){i={error:Yt}}finally{try{B&&!B.done&&(o=M.return)&&o.call(M)}finally{if(i)throw i.error}}var ce=new fm(this.field,g),fe=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),ce,t),Ae=fe[0],De=fe[1],nt=this.findErrorLocations(Ae),ht=this.findErrorMagnitudes(De,Ae,nt);for(C=0;C<nt.length;C++){var xt=e.length-1-this.field.log(nt[C]);if(xt<0)throw Cs.getChecksumInstance();e[xt]=this.field.subtract(e[xt],ht[C])}return nt.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,l=t,g=this.field.getZero(),_=this.field.getOne();l.getDegree()>=Math.round(r/2);){var C=o,D=g;if(g=_,(o=l).isZero())throw Cs.getChecksumInstance();l=C;for(var O=this.field.getZero(),M=o.getCoefficient(o.getDegree()),B=this.field.inverse(M);l.getDegree()>=o.getDegree()&&!l.isZero();){var G=l.getDegree()-o.getDegree(),$=this.field.multiply(l.getCoefficient(l.getDegree()),B);O=O.add(this.field.buildMonomial(G,$)),l=l.subtract(o.multiplyByMonomial(G,$))}_=O.multiply(g).subtract(D).negative()}var ie=_.getCoefficient(0);if(0===ie)throw Cs.getChecksumInstance();var ce=this.field.inverse(ie);return[_.multiply(ce),l.multiply(ce)]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)0===e.evaluateAt(o)&&(r[i]=this.field.inverse(o),i++);if(i!==t)throw Cs.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),o=new Int32Array(i),l=1;l<=i;l++)o[i-l]=this.field.multiply(l,t.getCoefficient(l));var g=new fm(this.field,o),_=r.length,C=new Int32Array(_);for(l=0;l<_;l++){var D=this.field.inverse(r[l]),O=this.field.subtract(0,e.evaluateAt(D)),M=this.field.inverse(g.evaluateAt(D));C[l]=this.field.multiply(O,M)}return C},n}(),I8=function(){function n(e,t,r,i,o){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,o)}return n.prototype.constructor_1=function(e,t,r,i,o){var l=null==t||null==r,g=null==i||null==o;if(l&&g)throw new it;l?(t=new $t(0,i.getY()),r=new $t(0,o.getY())):g&&(i=new $t(e.getWidth()-1,t.getY()),o=new $t(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return null==e?t:null==t?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,o=this.bottomLeft,l=this.topRight,g=this.bottomRight;if(e>0){var _=r?this.topLeft:this.topRight,C=Math.trunc(_.getY()-e);C<0&&(C=0);var D=new $t(_.getX(),C);r?i=D:l=D}if(t>0){var O=r?this.bottomLeft:this.bottomRight,M=Math.trunc(O.getY()+t);M>=this.image.getHeight()&&(M=this.image.getHeight()-1);var B=new $t(O.getX(),M);r?o=B:g=B}return new n(this.image,i,o,l,g)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),Vj=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),b8=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(l,g,_,C,D,O){if("%%"===l)return"%";if(void 0!==t[++r]){l=C?parseInt(C.substr(1)):void 0;var B,M=D?parseInt(D.substr(1)):void 0;switch(O){case"s":B=t[r];break;case"c":B=t[r][0];break;case"f":B=parseFloat(t[r]).toFixed(l);break;case"p":B=parseFloat(t[r]).toPrecision(l);break;case"e":B=parseFloat(t[r]).toExponential(l);break;case"x":B=parseInt(t[r]).toString(M||16);break;case"d":B=parseFloat(parseInt(t[r],M||10).toPrecision(l)).toFixed(0)}B="object"==typeof B?JSON.stringify(B):(+B).toString(M);for(var G=parseInt(_),$=_&&_[0]+""=="0"?"0":" ";B.length<G;)B=void 0!==g?B+$:$+B;return B}})},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),Hk=function(){function n(e){this.boundingBox=new I8(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(null!=t)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&null!=(t=this.codewords[i])||(i=this.imageRowToCodewordIndex(e)+r)<this.codewords.length&&null!=(t=this.codewords[i]))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new b8,i=0;try{for(var o=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.codewords),l=o.next();!l.done;l=o.next()){var g=l.value;null!=g?r.format("%3d: %3d|%3d%n",i++,g.getRowNumber(),g.getValue()):r.format("%3d:    |   %n",i++)}}catch(_){e={error:_}}finally{try{l&&!l.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}();var Wj=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var i,l,r=t.call(n),o=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(g){l={error:g}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return o};const J2=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,o=function(O,M){var B_getKey=function(){return O},B_getValue=function(){return M};B_getValue()>r?(r=B_getValue(),(i=[]).push(B_getKey())):B_getValue()===r&&i.push(B_getKey())};try{for(var l=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.values.entries()),g=l.next();!g.done;g=l.next()){var _=Wj(g.value,2);o(_[0],_[1])}}catch(O){e={error:O}}finally{try{g&&!g.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}return sr.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}();var $j=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),S8=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const jk=function(n){function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return $j(e,n),e.prototype.setRowNumbers=function(){var t,r;try{for(var i=S8(this.getCodewords()),o=i.next();!o.done;o=i.next()){var l=o.value;null!=l&&l.setRowNumberAsRowIndicatorColumn()}}catch(g){t={error:g}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),l=this._isLeft?i.getBottomLeft():i.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(o.getY())),_=this.imageRowToCodewordIndex(Math.trunc(l.getY())),C=-1,D=1,O=0,M=g;M<_;M++)if(null!=r[M]){var B=r[M],G=B.getRowNumber()-C;if(0===G)O++;else if(1===G)D=Math.max(D,O),O=1,C=B.getRowNumber();else if(G<0||B.getRowNumber()>=t.getRowCount()||G>M)r[M]=null;else{for(var $,ie=($=D>2?(D-2)*G:G)>=M,ce=1;ce<=$&&!ie;ce++)ie=null!=r[M-ce];ie?r[M]=null:(C=B.getRowNumber(),O=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(null==i)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var l=S8(this.getCodewords()),g=l.next();!g.done;g=l.next()){var _=g.value;if(null!=_){var C=_.getRowNumber();if(C>=o.length)continue;o[C]++}}}catch(D){t={error:D}}finally{try{g&&!g.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),g=this.imageRowToCodewordIndex(Math.trunc(o.getY())),_=this.getCodewords(),C=-1,D=1,O=0,M=l;M<g;M++)if(null!=_[M]){var B=_[M];B.setRowNumberAsRowIndicatorColumn();var G=B.getRowNumber()-C;0===G?O++:1===G?(D=Math.max(D,O),O=1,C=B.getRowNumber()):B.getRowNumber()>=t.getRowCount()?_[M]=null:(C=B.getRowNumber(),O=1)}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),o=new J2,l=new J2,g=new J2,_=new J2;try{for(var C=S8(i),D=C.next();!D.done;D=C.next()){var O=D.value;if(null!=O){O.setRowNumberAsRowIndicatorColumn();var M=O.getValue()%30,B=O.getRowNumber();switch(this._isLeft||(B+=2),B%3){case 0:l.setValue(3*M+1);break;case 1:_.setValue(M/3),g.setValue(M%3);break;case 2:o.setValue(M+1)}}}}catch($){t={error:$}}finally{try{D&&!D.done&&(r=C.return)&&r.call(C)}finally{if(t)throw t.error}}if(0===o.getValue().length||0===l.getValue().length||0===g.getValue().length||0===_.getValue().length||o.getValue()[0]<1||l.getValue()[0]+g.getValue()[0]<sr.MIN_ROWS_IN_BARCODE||l.getValue()[0]+g.getValue()[0]>sr.MAX_ROWS_IN_BARCODE)return null;var G=new Vj(o.getValue()[0],l.getValue()[0],g.getValue()[0],_.getValue()[0]);return this.removeIncorrectCodewords(i,G),G},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var o=t[i];if(null!=t[i]){var l=o.getValue()%30,g=o.getRowNumber();if(g>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:3*l+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(l/3)!==r.getErrorCorrectionLevel()||l%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:l+1!==r.getColumnCount()&&(t[i]=null)}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+n.prototype.toString.call(this)},e}(Hk),Yj=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t,e=sr.MAX_CODEWORDS_IN_BARCODE;do{t=e,e=this.adjustRowNumbersAndGetCount()}while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(0===e)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)null!=r[i]&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(null!=e[r]&&null!=t[r]&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];null!=o&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}},n.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(null!=t[r])for(var i=t[r].getRowNumber(),o=0,l=this.barcodeColumnCount+1;l>0&&o<this.ADJUST_ROW_NUMBER_SKIP;l--){var g=this.detectionResultColumns[l].getCodewords()[r];null!=g&&(o=n.adjustRowNumberIfValid(i,o,g),g.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(null!=t[r])for(var i=t[r].getRowNumber(),o=0,l=1;l<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;l++){var g=this.detectionResultColumns[l].getCodewords()[r];null!=g&&(o=n.adjustRowNumberIfValid(i,o,g),g.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return null==r||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,o,l=r[t],g=this.detectionResultColumns[e-1].getCodewords(),_=g;null!=this.detectionResultColumns[e+1]&&(_=this.detectionResultColumns[e+1].getCodewords());var C=new Array(14);C[2]=g[t],C[3]=_[t],t>0&&(C[0]=r[t-1],C[4]=g[t-1],C[5]=_[t-1]),t>1&&(C[8]=r[t-2],C[10]=g[t-2],C[11]=_[t-2]),t<r.length-1&&(C[1]=r[t+1],C[6]=g[t+1],C[7]=_[t+1]),t<r.length-2&&(C[9]=r[t+2],C[12]=g[t+2],C[13]=_[t+2]);try{for(var D=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(C),O=D.next();!O.done;O=D.next())if(n.adjustRowNumber(l,O.value))return}catch(B){i={error:B}}finally{try{O&&!O.done&&(o=D.return)&&o.call(D)}finally{if(i)throw i.error}}},n.adjustRowNumber=function(e,t){return!(null==t||!t.hasValidRowNumber()||t.getBucket()!==e.getBucket()||(e.setRowNumber(t.getRowNumber()),0))},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new b8,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++)if(null!=this.detectionResultColumns[i]){var o=this.detectionResultColumns[i].getCodewords()[r];null!=o?t.format(" %3d|%3d",o.getRowNumber(),o.getValue()):t.format("    |   ")}else t.format("    |   ");t.format("%n")}return t.toString()},n}(),Qj=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),eG=function(){function n(){}return n.initialize=function(){for(var e=0;e<sr.SYMBOL_TABLE.length;e++)for(var t=sr.SYMBOL_TABLE[e],r=1&t,i=0;i<sr.BARS_IN_MODULE;i++){for(var o=0;(1&t)===r;)o+=1,t>>=1;r=1&t,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(sr.BARS_IN_MODULE)),n.RATIOS_TABLE[e][sr.BARS_IN_MODULE-i-1]=Math.fround(o/sr.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return-1!==t?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=mr.sum(e),r=new Int32Array(sr.BARS_IN_MODULE),i=0,o=0,l=0;l<sr.MODULES_IN_CODEWORD;l++)o+e[i]<=t/(2*sr.MODULES_IN_CODEWORD)+l*t/sr.MODULES_IN_CODEWORD&&(o+=e[i],i++),r[i]++;return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return-1===sr.getCodeword(t)?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2==0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=mr.sum(e),r=new Array(sr.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var o=h8.MAX_VALUE,l=-1;this.bSymbolTableReady||n.initialize();for(var g=0;g<n.RATIOS_TABLE.length;g++){for(var _=0,C=n.RATIOS_TABLE[g],D=0;D<sr.BARS_IN_MODULE;D++){var O=Math.fround(C[D]-r[D]);if((_+=Math.fround(O*O))>=o)break}_<o&&(o=_,l=sr.SYMBOL_TABLE[g])}return l},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(sr.SYMBOL_TABLE.length).map(function(e){return new Array(sr.BARS_IN_MODULE)}),n}(),nG=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),Gk=function(){function n(){}return n.parseLong=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},n}();var iG=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const sG=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return iG(e,n),e.kind="NullPointerException",e}(Hu),uG=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(null==e)throw new sG;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new d8;if(0!==r)for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}();var cG=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const dG=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return cG(e,n),e}(Hu);var fG=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const pG=function(n){function e(t){void 0===t&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Gt("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return fG(e,n),e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var i=this.buf.length<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new dG;i=qn.MAX_VALUE}this.buf=ju.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new d8;this.ensureCapacity(this.count+i),oi.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ju.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?"string"==typeof t?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(uG);var VT,Mr=(()=>(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(Mr||(Mr={})),Mr))();function Wk(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function B0(n){if(void 0===VT&&(VT=Wk()),null===VT)throw new Error("BigInt is not supported!");return VT(n)}const vG=function(){function n(){}return n.decode=function(e,t){var r=new zr(""),i=zo.ISO8859_1;r.enableDecoding(i);for(var o=1,l=e[o++],g=new nG;o<e[0];){switch(l){case n.TEXT_COMPACTION_MODE_LATCH:o=n.textCompaction(e,o,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:o=n.byteCompaction(l,e,i,o,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:o=n.numericCompaction(e,o,r);break;case n.ECI_CHARSET:zo.getCharacterSetECIByValue(e[o++]);break;case n.ECI_GENERAL_PURPOSE:o+=2;break;case n.ECI_USER_DEFINED:o++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=n.decodeMacroBlock(e,o,g);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new yt;default:o--,o=n.textCompaction(e,o,r)}if(!(o<e.length))throw yt.getFormatInstance();l=e[o++]}if(0===r.length())throw yt.getFormatInstance();var C=new NT(null,r.toString(),null,t);return C.setOther(g),C},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw yt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<n.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];r.setSegmentIndex(qn.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var l=new zr;t=n.textCompaction(e,t,l),r.setFileId(l.toString());var g=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var _=new zr;t=n.textCompaction(e,t+1,_),r.setFileName(_.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var C=new zr;t=n.textCompaction(e,t+1,C),r.setSender(C.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var D=new zr;t=n.textCompaction(e,t+1,D),r.setAddressee(D.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var O=new zr;t=n.numericCompaction(e,t+1,O),r.setSegmentCount(qn.parseInt(O.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var M=new zr;t=n.numericCompaction(e,t+1,M),r.setTimestamp(Gk.parseLong(M.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var B=new zr;t=n.numericCompaction(e,t+1,B),r.setChecksum(qn.parseInt(B.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var G=new zr;t=n.numericCompaction(e,t+1,G),r.setFileSize(Gk.parseLong(G.toString()));break;default:throw yt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw yt.getFormatInstance()}if(-1!==g){var $=t-g;r.isLastSegment()&&$--,r.setOptionalData(ju.copyOfRange(e,g,g+$))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array(2*(e[0]-t)),o=new Int32Array(2*(e[0]-t)),l=0,g=!1;t<e[0]&&!g;){var _=e[t++];if(_<n.TEXT_COMPACTION_MODE_LATCH)i[l]=_/30,i[l+1]=_%30,l+=2;else switch(_){case n.TEXT_COMPACTION_MODE_LATCH:i[l++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,g=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[l]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=e[t++],o[l]=_,l++}}return n.decodeTextCompaction(i,o,l,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var o=Mr.ALPHA,l=Mr.ALPHA,g=0;g<r;){var _=e[g],C="";switch(o){case Mr.ALPHA:if(_<26)C=String.fromCharCode(65+_);else switch(_){case 26:C=" ";break;case n.LL:o=Mr.LOWER;break;case n.ML:o=Mr.MIXED;break;case n.PS:l=o,o=Mr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[g]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=Mr.ALPHA}break;case Mr.LOWER:if(_<26)C=String.fromCharCode(97+_);else switch(_){case 26:C=" ";break;case n.AS:l=o,o=Mr.ALPHA_SHIFT;break;case n.ML:o=Mr.MIXED;break;case n.PS:l=o,o=Mr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[g]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=Mr.ALPHA}break;case Mr.MIXED:if(_<n.PL)C=n.MIXED_CHARS[_];else switch(_){case n.PL:o=Mr.PUNCT;break;case 26:C=" ";break;case n.LL:o=Mr.LOWER;break;case n.AL:o=Mr.ALPHA;break;case n.PS:l=o,o=Mr.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[g]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=Mr.ALPHA}break;case Mr.PUNCT:if(_<n.PAL)C=n.PUNCT_CHARS[_];else switch(_){case n.PAL:o=Mr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[g]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=Mr.ALPHA}break;case Mr.ALPHA_SHIFT:if(o=l,_<26)C=String.fromCharCode(65+_);else switch(_){case 26:C=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:o=Mr.ALPHA}break;case Mr.PUNCT_SHIFT:if(o=l,_<n.PAL)C=n.PUNCT_CHARS[_];else switch(_){case n.PAL:o=Mr.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[g]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=Mr.ALPHA}}""!==C&&i.append(C),g++}},n.byteCompaction=function(e,t,r,i,o){var l=new pG,g=0,_=0,C=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var D=new Int32Array(6),O=t[i++];i<t[0]&&!C;)switch(D[g++]=O,_=900*_+O,O=t[i++],O){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,C=!0;break;default:if(g%5==0&&g>0){for(var M=0;M<6;++M)l.write(Number(B0(_)>>B0(8*(5-M))));_=0,g=0}}i===t[0]&&O<n.TEXT_COMPACTION_MODE_LATCH&&(D[g++]=O);for(var B=0;B<g;B++)l.write(D[B]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!C;){var G=t[i++];if(G<n.TEXT_COMPACTION_MODE_LATCH)g++,_=900*_+G;else switch(G){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,C=!0}if(g%5==0&&g>0){for(M=0;M<6;++M)l.write(Number(B0(_)>>B0(8*(5-M))));_=0,g=0}}}return o.append(gf.decode(l.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,o=!1,l=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var g=e[t++];if(t===e[0]&&(o=!0),g<n.TEXT_COMPACTION_MODE_LATCH)l[i]=g,i++;else switch(g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0}(i%n.MAX_NUMERIC_CODEWORDS==0||g===n.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(n.decodeBase900toBase10(l,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=B0(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*B0(e[i]);var o=r.toString();if("1"!==o.charAt(0))throw new yt;return o.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",n.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",n.EXP900=Wk()?function(){var n=[];n[0]=B0(1);var e=B0(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}();var eC=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const yG=function(){function n(){}return n.decode=function(e,t,r,i,o,l,g){for(var O,_=new I8(e,t,r,i,o),C=null,D=null,M=!0;;M=!1){if(null!=t&&(C=n.getRowIndicatorColumn(e,_,t,!0,l,g)),null!=i&&(D=n.getRowIndicatorColumn(e,_,i,!1,l,g)),null==(O=n.merge(C,D)))throw it.getNotFoundInstance();var B=O.getBoundingBox();if(!M||null==B||!(B.getMinY()<_.getMinY()||B.getMaxY()>_.getMaxY()))break;_=B}O.setBoundingBox(_);var G=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,C),O.setDetectionResultColumn(G,D);for(var $=null!=C,ie=1;ie<=G;ie++){var ce=$?ie:G-ie;if(void 0===O.getDetectionResultColumn(ce)){var fe=void 0;fe=0===ce||ce===G?new jk(_,0===ce):new Hk(_),O.setDetectionResultColumn(ce,fe);for(var Ae=-1,De=Ae,nt=_.getMinY();nt<=_.getMaxY();nt++){if((Ae=n.getStartColumn(O,ce,nt,$))<0||Ae>_.getMaxX()){if(-1===De)continue;Ae=De}var ht=n.detectCodeword(e,_.getMinX(),_.getMaxX(),$,Ae,nt,l,g);null!=ht&&(fe.setCodeword(nt,ht),De=Ae,l=Math.min(l,ht.getWidth()),g=Math.max(g,ht.getWidth()))}}}return n.createDecoderResult(O)},n.merge=function(e,t){if(null==e&&null==t)return null;var r=n.getBarcodeMetadata(e,t);if(null==r)return null;var i=I8.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new Yj(r,i)},n.adjustBoundingBox=function(e){var t,r;if(null==e)return null;var i=e.getRowHeights();if(null==i)return null;var o=n.getMax(i),l=0;try{for(var g=eC(i),_=g.next();!_.done;_=g.next()){var C=_.value;if(l+=o-C,C>0)break}}catch(B){t={error:B}}finally{try{_&&!_.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}for(var D=e.getCodewords(),O=0;l>0&&null==D[O];O++)l--;var M=0;for(O=i.length-1;O>=0&&(M+=o-i[O],!(i[O]>0));O--);for(O=D.length-1;M>0&&null==D[O];O--)M--;return e.getBoundingBox().addMissingRows(l,M,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var o=eC(e),l=o.next();!l.done;l=o.next())i=Math.max(i,l.value)}catch(_){t={error:_}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r,i;return null==e||null==(r=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(i=t.getBarcodeMetadata())?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,o,l){for(var g=new jk(t,i),_=0;_<2;_++)for(var C=0===_?1:-1,D=Math.trunc(Math.trunc(r.getX())),O=Math.trunc(Math.trunc(r.getY()));O<=t.getMaxY()&&O>=t.getMinY();O+=C){var M=n.detectCodeword(e,0,e.getWidth(),i,D,O,o,l);null!=M&&(g.setCodeword(O,M),D=i?M.getStartX():M.getEndX())}return g},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===i.length){if(o<1||o>sr.MAX_CODEWORDS_IN_BARCODE)throw it.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],l=new Array,g=0;g<e.getBarcodeRowCount();g++)for(var _=0;_<e.getBarcodeColumnCount();_++){var C=t[g][_+1].getValue(),D=g*e.getBarcodeColumnCount()+_;0===C.length?r.push(D):1===C.length?i[D]=C[0]:(l.push(D),o.push(C))}for(var O=new Array(o.length),M=0;M<O.length;M++)O[M]=o[M];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,sr.toIntArray(r),sr.toIntArray(l),O)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,o){for(var l=new Int32Array(i.length),g=100;g-- >0;){for(var _=0;_<l.length;_++)t[i[_]]=o[_][l[_]];try{return n.decodeCodewords(t,e,r)}catch(D){if(!(D instanceof Cs))throw D}if(0===l.length)throw Cs.getChecksumInstance();for(_=0;_<l.length;_++){if(l[_]<o[_].length-1){l[_]++;break}if(l[_]=0,_===l.length-1)throw Cs.getChecksumInstance()}}throw Cs.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,o,l=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),g=0;g<l.length;g++)for(var _=0;_<l[g].length;_++)l[g][_]=new J2;var C=0;try{for(var D=eC(e.getDetectionResultColumns()),O=D.next();!O.done;O=D.next()){var M=O.value;if(null!=M)try{for(var B=(i=void 0,eC(M.getCodewords())),G=B.next();!G.done;G=B.next()){var $=G.value;if(null!=$){var ie=$.getRowNumber();if(ie>=0){if(ie>=l.length)continue;l[ie][C].setValue($.getValue())}}}}catch(ce){i={error:ce}}finally{try{G&&!G.done&&(o=B.return)&&o.call(B)}finally{if(i)throw i.error}}C++}}catch(ce){t={error:ce}}finally{try{O&&!O.done&&(r=D.return)&&r.call(D)}finally{if(t)throw t.error}}return l},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var o,l,g=i?1:-1,_=null;if(n.isValidBarcodeColumn(e,t-g)&&(_=e.getDetectionResultColumn(t-g).getCodeword(r)),null!=_)return i?_.getEndX():_.getStartX();if(null!=(_=e.getDetectionResultColumn(t).getCodewordNearby(r)))return i?_.getStartX():_.getEndX();if(n.isValidBarcodeColumn(e,t-g)&&(_=e.getDetectionResultColumn(t-g).getCodewordNearby(r)),null!=_)return i?_.getEndX():_.getStartX();for(var C=0;n.isValidBarcodeColumn(e,t-g);){t-=g;try{for(var D=(o=void 0,eC(e.getDetectionResultColumn(t).getCodewords())),O=D.next();!O.done;O=D.next()){var M=O.value;if(null!=M)return(i?M.getEndX():M.getStartX())+g*C*(M.getEndX()-M.getStartX())}}catch(B){o={error:B}}finally{try{O&&!O.done&&(l=D.return)&&l.call(D)}finally{if(o)throw o.error}}C++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,o,l,g,_){o=n.adjustCodewordStartColumn(e,t,r,i,o,l);var C=n.getModuleBitCount(e,t,r,i,o,l);if(null==C)return null;var D,O=mr.sum(C);if(i)D=o+O;else{for(var M=0;M<C.length/2;M++){var B=C[M];C[M]=C[C.length-1-M],C[C.length-1-M]=B}o=(D=o)-O}if(!n.checkCodewordSkew(O,g,_))return null;var G=eG.getDecodedValue(C),$=sr.getCodeword(G);return-1===$?null:new Qj(o,D,n.getCodewordBucketNumber(G),$)},n.getModuleBitCount=function(e,t,r,i,o,l){for(var g=o,_=new Int32Array(8),C=0,D=i?1:-1,O=i;(i?g<r:g>=t)&&C<_.length;)e.get(g,l)===O?(_[C]++,g+=D):(C++,O=!O);return C===_.length||g===(i?r:t)&&C===_.length-1?_:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,o,l){for(var g=o,_=i?-1:1,C=0;C<2;C++){for(;(i?g>=t:g<r)&&i===e.get(g,l);){if(Math.abs(o-g)>n.CODEWORD_SKEW_SIZE)return o;g+=_}_=-_,i=!i}return g},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(0===e.length)throw yt.getFormatInstance();var i=1<<t+1,o=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var l=vG.decode(e,""+t);return l.setErrorsCorrected(o),l.setErasures(r.length),l},n.correctErrors=function(e,t,r){if(null!=t&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Cs.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw yt.getFormatInstance();var r=e[0];if(r>e.length)throw yt.getFormatInstance();if(0===r){if(!(t<e.length))throw yt.getFormatInstance();e[0]=e.length-t}},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((1&e)!==r&&(r=1&e,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new b8,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];0===o.getValue().length?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new kj,n}(),T8=function(){function n(){}return n.prototype.decode=function(e,t){void 0===t&&(t=null);var r=n.decode(e,t,!1);if(null==r||0===r.length||null==r[0])throw it.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){void 0===t&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof yt||r instanceof Cs?it.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,o,l=new Array,g=bj.detectMultiple(e,t,r);try{for(var _=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(g.getPoints()),C=_.next();!C.done;C=_.next()){var D=C.value,O=yG.decode(g.getBits(),D[4],D[5],D[6],D[7],n.getMinCodewordWidth(D),n.getMaxCodewordWidth(D)),M=new Gu(O.getText(),O.getRawBytes(),void 0,D,en.PDF_417);M.putMetadata(ia.ERROR_CORRECTION_LEVEL,O.getECLevel());var B=O.getOther();null!=B&&M.putMetadata(ia.PDF417_EXTRA_METADATA,B),l.push(M)}}catch(G){i={error:G}}finally{try{C&&!C.done&&(o=_.return)&&o.call(_)}finally{if(i)throw i.error}}return l.map(function(G){return G})},n.getMaxWidth=function(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return null==e||null==t?qn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*sr.MODULES_IN_CODEWORD/sr.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*sr.MODULES_IN_CODEWORD/sr.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*sr.MODULES_IN_CODEWORD/sr.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*sr.MODULES_IN_CODEWORD/sr.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}();var EG=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const zk=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return EG(e,n),e.kind="ReaderException",e}(Hu);var $k=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const IG=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return null==this.readers&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=null!=e&&void 0!==e.get(Wr.TRY_HARDER),r=null==e?null:e.get(Wr.POSSIBLE_FORMATS),i=new Array;if(null!=r){var o=r.some(function(l){return l===en.UPC_A||l===en.UPC_E||l===en.EAN_13||l===en.EAN_8||l===en.CODABAR||l===en.CODE_39||l===en.CODE_93||l===en.CODE_128||l===en.ITF||l===en.RSS_14||l===en.RSS_EXPANDED});o&&!t&&i.push(new Y2(e)),r.includes(en.QR_CODE)&&i.push(new A8),r.includes(en.DATA_MATRIX)&&i.push(new C8),r.includes(en.AZTEC)&&i.push(new v8),r.includes(en.PDF_417)&&i.push(new T8),o&&t&&i.push(new Y2(e))}0===i.length&&(t||i.push(new Y2(e)),i.push(new A8),i.push(new C8),i.push(new v8),i.push(new T8),t&&i.push(new Y2(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(null!==this.readers)try{for(var r=$k(this.readers),i=r.next();!i.done;i=r.next())i.value.reset()}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(null===this.readers)throw new zk("No readers where selected, nothing can be read.");try{for(var i=$k(this.readers),o=i.next();!o.done;o=i.next()){var l=o.value;try{return l.decode(e,this.hints)}catch(g){if(g instanceof zk)continue}}}catch(g){t={error:g}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new it("No MultiFormat Readers were able to detect the code.")},n}();var bG=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),SG=(function(n){function e(t,r){void 0===t&&(t=null),void 0===r&&(r=500);var o=new IG;return o.setHints(t),n.call(this,o,r)||this}bG(e,n),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)}}(xy),function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),TG=(function(n){SG(function(t){return void 0===t&&(t=500),n.call(this,new T8,t)||this},n)}(xy),function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),UT=(function(n){TG(function(t){return void 0===t&&(t=500),n.call(this,new A8,t)||this},n)}(xy),(()=>(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.MIN_SIZE=3]="MIN_SIZE",n[n.MAX_SIZE=4]="MAX_SIZE",n[n.MARGIN=5]="MARGIN",n[n.PDF417_COMPACT=6]="PDF417_COMPACT",n[n.PDF417_COMPACTION=7]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=9]="AZTEC_LAYERS",n[n.QR_VERSION=10]="QR_VERSION"}(UT||(UT={})),UT))());const bs=UT,qk=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new M0(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var l=r.multiply(new M0(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(l),r=l}return t[e]},n.prototype.encode=function(e,t){if(0===t)throw new Gt("No error correction bytes");var r=e.length-t;if(r<=0)throw new Gt("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(r);oi.arraycopy(e,0,o,0,r);for(var l=new M0(this.field,o),_=(l=l.multiplyByMonomial(t,1)).divide(i)[1].getCoefficients(),C=t-_.length,D=0;D<C;D++)e[r+D]=0;oi.arraycopy(_,0,e,r+C,_.length)},n}(),tC=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),l=0;l<o-1;l++)for(var g=r[l],_=0;_<i-1;_++){var C=g[_];C===g[_+1]&&C===r[l+1][_]&&C===r[l+1][_+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),l=0;l<o;l++)for(var g=0;g<i;g++){var _=r[l];g+6<i&&1===_[g]&&0===_[g+1]&&1===_[g+2]&&1===_[g+3]&&1===_[g+4]&&0===_[g+5]&&1===_[g+6]&&(n.isWhiteHorizontal(_,g-4,g)||n.isWhiteHorizontal(_,g+7,g+11))&&t++,l+6<o&&1===r[l][g]&&0===r[l+1][g]&&1===r[l+2][g]&&1===r[l+3][g]&&1===r[l+4][g]&&0===r[l+5][g]&&1===r[l+6][g]&&(n.isWhiteVertical(r,g,l-4,l)||n.isWhiteVertical(r,g,l+7,l+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(1===e[i])return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(1===e[o][t])return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),l=0;l<o;l++)for(var g=r[l],_=0;_<i;_++)1===g[_]&&t++;var C=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-C)/C)*n.N4},n.getDataMaskBit=function(e,t,r){var i,o;switch(e){case 0:i=r+t&1;break;case 1:i=1&r;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:i=(1&(o=r*t))+o%3;break;case 6:i=(1&(o=r*t))+o%3&1;break;case 7:i=(o=r*t)%3+(r+t&1)&1;break;default:throw new Gt("Invalid mask pattern: "+e)}return 0===i},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),l=e.getArray(),g=0;g<i;g++){for(var _=0,C=-1,D=0;D<o;D++){var O=t?l[g][D]:l[D][g];O===C?_++:(_>=5&&(r+=n.N1+(_-5)),_=1,C=O)}_>=5&&(r+=n.N1+(_-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),PG=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.bytes),o=i.next();!o.done;o=i.next())ju.fill(o.value,e)}catch(g){t={error:g}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],l=t.bytes[r],g=0,_=this.width;g<_;++g)if(o[g]!==l[g])return!1;return!0},n.prototype.toString=function(){for(var e=new zr,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],o=0,l=this.width;o<l;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()},n}(),D8=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new zr;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}();var FG=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const yi=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return FG(e,n),e.kind="WriterException",e}(Hu),Zk=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,o){n.clearMatrix(o),n.embedBasicPatterns(r,o),n.embedTypeInfo(t,i,o),n.maybeEmbedVersionInfo(r,o),n.embedDataBits(e,i,o)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new As;n.makeTypeInfoBits(e,t,i);for(var o=0,l=i.getSize();o<l;++o){var g=i.get(i.getSize()-1-o),_=n.TYPE_INFO_COORDINATES[o];if(r.setBoolean(_[0],_[1],g),o<8){var O=r.getWidth()-o-1;r.setBoolean(O,M=8,g)}else{O=8;var M=r.getHeight()-7+(o-8);r.setBoolean(O,M,g)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new As;n.makeVersionInfoBits(e,r);for(var i=17,o=0;o<6;++o)for(var l=0;l<3;++l){var g=r.get(i);i--,t.setBoolean(o,t.getHeight()-11+l,g),t.setBoolean(t.getHeight()-11+l,o,g)}}},n.embedDataBits=function(e,t,r){for(var i=0,o=-1,l=r.getWidth()-1,g=r.getHeight()-1;l>0;){for(6===l&&(l-=1);g>=0&&g<r.getHeight();){for(var _=0;_<2;++_){var C=l-_;if(n.isEmpty(r.get(C,g))){var D=void 0;i<e.getSize()?(D=e.get(i),++i):D=!1,255!==t&&tC.getDataMaskBit(t,C,g)&&(D=!D),r.setBoolean(C,g,D)}}g+=o}g+=o=-o,l-=2}if(i!==e.getSize())throw new yi("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-qn.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(0===t)throw new Gt("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!D8.isValidMaskPattern(t))throw new yi("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var o=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(o,10);var l=new As;if(l.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(l),15!==r.getSize())throw new yi("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),18!==t.getSize())throw new yi("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return 255===e},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(0===e.get(8,e.getHeight()-8))throw new yi;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new yi;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new yi;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var o=n.POSITION_ADJUSTMENT_PATTERN[i],l=0;l<5;++l)r.setNumber(e+l,t+i,o[l])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var o=n.POSITION_DETECTION_PATTERN[i],l=0;l<7;++l)r.setNumber(e+l,t+i,o[l])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e),n.embedHorizontalSeparationPattern(0,7,e),n.embedHorizontalSeparationPattern(e.getWidth()-8,7,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-8,e),n.embedVerticalSeparationPattern(7,0,e),n.embedVerticalSeparationPattern(e.getHeight()-7-1,0,e),n.embedVerticalSeparationPattern(7,e.getHeight()-7,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,l=i.length;o!==l;o++){var g=i[o];if(g>=0)for(var _=0;_!==l;_++){var C=i[_];C>=0&&n.isEmpty(t.get(C,g))&&n.embedPositionAdjustmentPattern(C-2,g-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),VG=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}();var Kk=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Yk=function(){function n(){}return n.calculateMaskPenalty=function(e){return tC.applyMaskPenaltyRule1(e)+tC.applyMaskPenaltyRule2(e)+tC.applyMaskPenaltyRule3(e)+tC.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){void 0===r&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,o=null!==r&&void 0!==r.get(bs.CHARACTER_SET);o&&(i=r.get(bs.CHARACTER_SET).toString());var l=this.chooseMode(e,i),g=new As;if(l===_i.BYTE&&(o||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var _=zo.getCharacterSetECIByName(i);void 0!==_&&this.appendECI(_,g)}this.appendModeInfo(l,g);var D,C=new As;if(this.appendBytes(e,l,C,i),null!==r&&void 0!==r.get(bs.QR_VERSION)){var O=Number.parseInt(r.get(bs.QR_VERSION).toString(),10);D=dm.getVersionForNumber(O);var M=this.calculateBitsNeeded(l,g,C,D);if(!this.willFit(M,D,t))throw new yi("Data too big for requested version")}else D=this.recommendVersion(t,l,g,C);var B=new As;B.appendBitArray(g);var G=l===_i.BYTE?C.getSizeInBytes():e.length;this.appendLengthInfo(G,D,l,B),B.appendBitArray(C);var $=D.getECBlocksForLevel(t),ie=D.getTotalCodewords()-$.getTotalECCodewords();this.terminateBits(ie,B);var ce=this.interleaveWithECBytes(B,D.getTotalCodewords(),ie,$.getNumBlocks()),fe=new D8;fe.setECLevel(t),fe.setMode(l),fe.setVersion(D);var Ae=D.getDimensionForVersion(),De=new PG(Ae,Ae),nt=this.chooseMaskPattern(ce,t,D,De);return fe.setMaskPattern(nt),Zk.buildMatrix(ce,t,D,nt,De),fe.setMatrix(De),fe},n.recommendVersion=function(e,t,r,i){var o=this.calculateBitsNeeded(t,r,i,dm.getVersionForNumber(1)),l=this.chooseVersion(o,e),g=this.calculateBitsNeeded(t,r,i,l);return this.chooseVersion(g,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(void 0===t&&(t=null),zo.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return _i.KANJI;for(var r=!1,i=!1,o=0,l=e.length;o<l;++o){var g=e.charAt(o);if(n.isDigit(g))r=!0;else{if(-1===this.getAlphanumericCode(g.charCodeAt(0)))return _i.BYTE;i=!0}}return i?_i.ALPHANUMERIC:r?_i.NUMERIC:_i.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=gf.encode(e,zo.SJIS)}catch(l){return!1}var r=t.length;if(r%2!=0)return!1;for(var i=0;i<r;i+=2){var o=255&t[i];if((o<129||o>159)&&(o<224||o>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var o=Number.MAX_SAFE_INTEGER,l=-1,g=0;g<D8.NUM_MASK_PATTERNS;g++){Zk.buildMatrix(e,t,r,g,i);var _=this.calculateMaskPenalty(i);_<o&&(o=_,l=g)}return l},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=dm.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new yi("Data too big")},n.willFit=function(e,t,r){return t.getTotalCodewords()-t.getECBlocksForLevel(r).getTotalECCodewords()>=(e+7)/8},n.terminateBits=function(e,t){var r=8*e;if(t.getSize()>r)throw new yi("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var o=7&t.getSize();if(o>0)for(i=o;i<8;i++)t.appendBit(!1);var l=e-t.getSizeInBytes();for(i=0;i<l;++i)t.appendBits(0==(1&i)?236:17,8);if(t.getSize()!==r)throw new yi("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,o,l){if(i>=r)throw new yi("Block ID too large");var g=e%r,_=r-g,C=Math.floor(e/r),D=C+1,O=Math.floor(t/r),M=O+1,B=C-O,G=D-M;if(B!==G)throw new yi("EC bytes mismatch");if(r!==_+g)throw new yi("RS blocks mismatch");if(e!==(O+B)*_+(M+G)*g)throw new yi("Total bytes mismatch");i<_?(o[0]=O,l[0]=B):(o[0]=M,l[0]=G)},n.interleaveWithECBytes=function(e,t,r,i){var o,l,g,_;if(e.getSizeInBytes()!==r)throw new yi("Number of bits and data bytes does not match");for(var C=0,D=0,O=0,M=new Array,B=0;B<i;++B){var G=new Int32Array(1),$=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,B,G,$);var ie=G[0],ce=new Uint8Array(ie);e.toBytes(8*C,ce,0,ie);var fe=n.generateECBytes(ce,$[0]);M.push(new VG(ce,fe)),D=Math.max(D,ie),O=Math.max(O,fe.length),C+=G[0]}if(r!==C)throw new yi("Data bytes does not match offset");var Ae=new As;for(B=0;B<D;++B)try{for(var De=(o=void 0,Kk(M)),nt=De.next();!nt.done;nt=De.next())B<(ce=nt.value.getDataBytes()).length&&Ae.appendBits(ce[B],8)}catch(cn){o={error:cn}}finally{try{nt&&!nt.done&&(l=De.return)&&l.call(De)}finally{if(o)throw o.error}}for(B=0;B<O;++B)try{for(var xt=(g=void 0,Kk(M)),Yt=xt.next();!Yt.done;Yt=xt.next())B<(fe=Yt.value.getErrorCorrectionBytes()).length&&Ae.appendBits(fe[B],8)}catch(cn){g={error:cn}}finally{try{Yt&&!Yt.done&&(_=xt.return)&&_.call(xt)}finally{if(g)throw g.error}}if(t!==Ae.getSizeInBytes())throw new yi("Interleaving error: "+t+" and "+Ae.getSizeInBytes()+" differ.");return Ae},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),o=0;o<r;o++)i[o]=255&e[o];new qk(Wu.QR_CODE_FIELD_256).encode(i,t);var l=new Uint8Array(t);for(o=0;o<t;o++)l[o]=i[r+o];return l},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var o=r.getCharacterCountBits(t);if(e>=1<<o)throw new yi(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},n.appendBytes=function(e,t,r,i){switch(t){case _i.NUMERIC:n.appendNumericBytes(e,r);break;case _i.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case _i.BYTE:n.append8BitBytes(e,r,i);break;case _i.KANJI:n.appendKanjiBytes(e,r);break;default:throw new yi("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getDigit(e.charAt(i));if(i+2<r){var l=n.getDigit(e.charAt(i+1)),g=n.getDigit(e.charAt(i+2));t.appendBits(100*o+10*l+g,10),i+=3}else i+1<r?(l=n.getDigit(e.charAt(i+1)),t.appendBits(10*o+l,7),i+=2):(t.appendBits(o,4),i++)}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getAlphanumericCode(e.charCodeAt(i));if(-1===o)throw new yi;if(i+1<r){var l=n.getAlphanumericCode(e.charCodeAt(i+1));if(-1===l)throw new yi;t.appendBits(45*o+l,11),i+=2}else t.appendBits(o,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=gf.encode(e,r)}catch(_){throw new yi(_)}for(var o=0,l=i.length;o!==l;o++)t.appendBits(i[o],8)},n.appendKanjiBytes=function(e,t){var r;try{r=gf.encode(e,zo.SJIS)}catch(O){throw new yi(O)}for(var i=r.length,o=0;o<i;o+=2){var _=(255&r[o])<<8&4294967295|255&r[o+1],C=-1;if(_>=33088&&_<=40956?C=_-33088:_>=57408&&_<=60351&&(C=_-49472),-1===C)throw new yi("Invalid byte sequence");t.appendBits(192*(C>>8)+(255&C),13)}},n.appendECI=function(e,t){t.appendBits(_i.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=zo.UTF8.getName(),n}();!function(){function n(){}n.prototype.write=function(e,t,r,i){if(void 0===i&&(i=null),0===e.length)throw new Gt("Found empty contents");if(t<0||r<0)throw new Gt("Requested dimensions are too small: "+t+"x"+r);var o=X2.L,l=n.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(bs.ERROR_CORRECTION)&&(o=X2.fromString(i.get(bs.ERROR_CORRECTION).toString())),void 0!==i.get(bs.MARGIN)&&(l=Number.parseInt(i.get(bs.MARGIN).toString(),10)));var g=Yk.encode(e,o,i);return this.renderResult(g,t,r,l)},n.prototype.writeToDom=function(e,t,r,i,o){void 0===o&&(o=null),"string"==typeof e&&(e=document.querySelector(e));var l=this.write(t,r,i,o);e&&e.appendChild(l)},n.prototype.renderResult=function(e,t,r,i){var o=e.getMatrix();if(null===o)throw new F0;for(var l=o.getWidth(),g=o.getHeight(),_=l+2*i,C=g+2*i,D=Math.max(t,_),O=Math.max(r,C),M=Math.min(Math.floor(D/_),Math.floor(O/C)),B=Math.floor((D-l*M)/2),G=Math.floor((O-g*M)/2),$=this.createSVGElement(D,O),ie=0,ce=G;ie<g;ie++,ce+=M)for(var fe=0,Ae=B;fe<l;fe++,Ae+=M)if(1===o.get(fe,ie)){var De=this.createSvgRectElement(Ae,ce,M,M);$.appendChild(De)}return $},n.prototype.createSVGElement=function(e,t){var r=document.createElementNS(n.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",t.toString()),r},n.prototype.createSvgRectElement=function(e,t,r,i){var o=document.createElementNS(n.SVG_NS,"rect");return o.setAttributeNS(null,"x",e.toString()),o.setAttributeNS(null,"y",t.toString()),o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",i.toString()),o.setAttributeNS(null,"fill","#000000"),o},n.QUIET_ZONE_SIZE=4,n.SVG_NS="http://www.w3.org/2000/svg"}();!function(){function n(){}n.prototype.encode=function(e,t,r,i,o){if(0===e.length)throw new Gt("Found empty contents");if(t!==en.QR_CODE)throw new Gt("Can only encode QR_CODE, but got "+t);if(r<0||i<0)throw new Gt("Requested dimensions are too small: "+r+"x"+i);var l=X2.L,g=n.QUIET_ZONE_SIZE;null!==o&&(void 0!==o.get(bs.ERROR_CORRECTION)&&(l=X2.fromString(o.get(bs.ERROR_CORRECTION).toString())),void 0!==o.get(bs.MARGIN)&&(g=Number.parseInt(o.get(bs.MARGIN).toString(),10)));var _=Yk.encode(e,l,o);return n.renderResult(_,r,i,g)},n.renderResult=function(e,t,r,i){var o=e.getMatrix();if(null===o)throw new F0;for(var l=o.getWidth(),g=o.getHeight(),_=l+2*i,C=g+2*i,D=Math.max(t,_),O=Math.max(r,C),M=Math.min(Math.floor(D/_),Math.floor(O/C)),B=Math.floor((D-l*M)/2),G=Math.floor((O-g*M)/2),$=new _l(D,O),ie=0,ce=G;ie<g;ie++,ce+=M)for(var fe=0,Ae=B;fe<l;fe++,Ae+=M)1===o.get(fe,ie)&&$.setRegion(Ae,ce,M,M);return $},n.QUIET_ZONE_SIZE=4}();var GG=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();!function(n){function e(t,r,i,o,l,g,_,C){var D=n.call(this,g,_)||this;if(D.yuvData=t,D.dataWidth=r,D.dataHeight=i,D.left=o,D.top=l,o+g>r||l+_>i)throw new Gt("Crop rectangle does not fit within image data.");return C&&D.reverseHorizontal(g,_),D}GG(e,n),e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Gt("Requested row is outside the image: "+t);var i=this.getWidth();return(null==r||r.length<i)&&(r=new Uint8ClampedArray(i)),oi.arraycopy(this.yuvData,(t+this.top)*this.dataWidth+this.left,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,o=new Uint8ClampedArray(i),l=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return oi.arraycopy(this.yuvData,l,o,0,i),o;for(var g=0;g<r;g++)oi.arraycopy(this.yuvData,l,o,g*t,t),l+=this.dataWidth;return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),o=this.yuvData,l=this.top*this.dataWidth+this.left,g=0;g<r;g++){for(var _=g*t,C=0;C<t;C++)i[_+C]=4278190080|65793*(255&o[l+C*e.THUMBNAIL_SCALE_FACTOR]);l+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,o=0,l=this.top*this.dataWidth+this.left;o<r;o++,l+=this.dataWidth)for(var g=l+t/2,_=l,C=l+t-1;_<g;_++,C--){var D=i[_];i[_]=i[C],i[C]=D}},e.prototype.invert=function(){return new f8(this)},e.THUMBNAIL_SCALE_FACTOR=2}(DT);var WG=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();!function(n){function e(t,r,i,o,l,g,_){var C=n.call(this,r,i)||this;if(C.dataWidth=o,C.dataHeight=l,C.left=g,C.top=_,4===t.BYTES_PER_ELEMENT){for(var D=r*i,O=new Uint8ClampedArray(D),M=0;M<D;M++){var B=t[M];O[M]=((B>>16&255)+(B>>7&510)+(255&B))/4&255}C.luminances=O}else C.luminances=t;if(void 0===o&&(C.dataWidth=r),void 0===l&&(C.dataHeight=i),void 0===g&&(C.left=0),void 0===_&&(C.top=0),C.left+r>C.dataWidth||C.top+i>C.dataHeight)throw new Gt("Crop rectangle does not fit within image data.");return C}WG(e,n),e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Gt("Requested row is outside the image: "+t);var i=this.getWidth();return(null==r||r.length<i)&&(r=new Uint8ClampedArray(i)),oi.arraycopy(this.luminances,(t+this.top)*this.dataWidth+this.left,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,o=new Uint8ClampedArray(i),l=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return oi.arraycopy(this.luminances,l,o,0,i),o;for(var g=0;g<r;g++)oi.arraycopy(this.luminances,l,o,g*t,t),l+=this.dataWidth;return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new f8(this)}}(DT);var zG=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const qG=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return zG(e,n),e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(zo),KG=function(){function n(){}return n.ISO_8859_1=zo.ISO8859_1,n}(),XG=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),Xk=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),eW=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}();var tW=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const O8=function(n){function e(t,r,i){var o=n.call(this,t)||this;return o.value=r,o.bitCount=i,o}return tW(e,n),e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return"<"+qn.toBinaryString((t|=1<<this.bitCount)|1<<this.bitCount).substring(1)+">"},e}(eW);var rW=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(e,t)};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const oW=function(n){function e(t,r,i){var o=n.call(this,t,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return rW(e,n),e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(0===i||31===i&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):t.appendBits(0===i?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(O8);function nC(n,e,t){return new O8(n,e,t)}var aW=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],uW=new O8(null,0,0),R8=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],Jk=function(n){var e,t;try{for(var r=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),i=r.next();!i.done;i=r.next())ju.fill(i.value,-1)}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[0][4]=0,n[1][4]=0,n[1][0]=28,n[3][4]=0,n[2][4]=0,n[2][0]=15,n}(ju.createInt32Array(6,6));const hW=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=R8[this.mode][e];i=nC(i,65535&o,o>>16),r+=o>>16}var l=2===e?4:5;return new n(i=nC(i,t,l),e,0,r+l)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=2===this.mode?4:5;return r=nC(r,Jk[this.mode][e],i),new n(r=nC(r,t,5),this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(4===this.mode||2===this.mode){var o=R8[r][0];t=nC(t,65535&o,o>>16),i+=o>>16,r=0}var g=new n(t,r,this.binaryShiftByteCount+1,i+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===g.binaryShiftByteCount&&(g=g.endBinaryShift(e+1)),g},n.prototype.endBinaryShift=function(e){if(0===this.binaryShiftByteCount)return this;var t=this.token;return new n(t=function(n,e,t){return new oW(n,e,t)}(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(R8[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],o=this.endBinaryShift(e.length).token;null!==o;o=o.getPrevious())i.unshift(o);var l=new As;try{for(var g=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),_=g.next();!_.done;_=g.next())_.value.appendTo(l,e)}catch(D){t={error:D}}finally{try{_&&!_.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}return l},n.prototype.toString=function(){return ti.format("%s bits=%d bytes=%d",aW[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(uW,0,0,0),n}();var N8=function(n){var e=ti.getCharCode(" "),t=ti.getCharCode("."),r=ti.getCharCode(",");n[0][e]=1;for(var i=ti.getCharCode("Z"),o=ti.getCharCode("A"),l=o;l<=i;l++)n[0][l]=l-o+2;n[1][e]=1;var g=ti.getCharCode("z"),_=ti.getCharCode("a");for(l=_;l<=g;l++)n[1][l]=l-_+2;n[2][e]=1;var C=ti.getCharCode("9"),D=ti.getCharCode("0");for(l=D;l<=C;l++)n[2][l]=l-D+2;n[2][r]=12,n[2][t]=13;for(var O=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],M=0;M<O.length;M++)n[3][ti.getCharCode(O[M])]=M;var B=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(M=0;M<B.length;M++)ti.getCharCode(B[M])>0&&(n[4][ti.getCharCode(B[M])]=M);return n}(ju.createInt32Array(5,256)),jT=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const mW=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=ti.getCharCode(" "),t=ti.getCharCode("\n"),r=Xk.singletonList(hW.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,l=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ti.getCharCode("\r"):o=l===t?2:0;break;case ti.getCharCode("."):o=l===e?3:0;break;case ti.getCharCode(","):o=l===e?4:0;break;case ti.getCharCode(":"):o=l===e?5:0;break;default:o=0}o>0?(r=n.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}return Xk.min(r,function(_,C){return _.getBitCount()-C.getBitCount()}).toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,o=[];try{for(var l=jT(e),g=l.next();!g.done;g=l.next())this.updateStateForChar(g.value,t,o)}catch(C){r={error:C}}finally{try{g&&!g.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return n.simplifyStates(o)},n.prototype.updateStateForChar=function(e,t,r){for(var i=255&this.text[t],o=N8[e.getMode()][i]>0,l=null,g=0;g<=4;g++){var _=N8[g][i];if(_>0){if(null==l&&(l=e.endBinaryShift(t)),!o||g===e.getMode()||2===g){var C=l.latchAndAppend(g,_);r.push(C)}if(!o&&Jk[e.getMode()][g]>=0){var D=l.shiftAndAppend(g,_);r.push(D)}}}if(e.getBinaryShiftByteCount()>0||0===N8[e.getMode()][i]){var O=e.addBinaryShiftChar(t);r.push(O)}},n.updateStateListForPair=function(e,t,r){var i,o,l=[];try{for(var g=jT(e),_=g.next();!_.done;_=g.next())this.updateStateForPair(_.value,t,r,l)}catch(D){i={error:D}}finally{try{_&&!_.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}return this.simplifyStates(l)},n.updateStateForPair=function(e,t,r,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(4,r)),4!==e.getMode()&&i.push(o.shiftAndAppend(4,r)),3===r||4===r){var l=o.latchAndAppend(2,16-r).latchAndAppend(2,1);i.push(l)}if(e.getBinaryShiftByteCount()>0){var g=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(g)}},n.simplifyStates=function(e){var t,r,i,o,l=[];try{for(var g=jT(e),_=g.next();!_.done;_=g.next()){var C=_.value,D=!0,O=function(ie){if(ie.isBetterThanOrEqualTo(C))return D=!1,"break";C.isBetterThanOrEqualTo(ie)&&(l=l.filter(function(ce){return ce!==ie}))};try{for(var M=(i=void 0,jT(l)),B=M.next();!B.done&&"break"!==O(B.value);B=M.next());}catch(ie){i={error:ie}}finally{try{B&&!B.done&&(o=M.return)&&o.call(M)}finally{if(i)throw i.error}}D&&l.push(C)}}catch(ie){t={error:ie}}finally{try{_&&!_.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}return l},n}(),P8=function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var g,_,C,D,O,i=new mW(e).encode(),o=qn.truncDivision(i.getSize()*t,100)+11,l=i.getSize()+o;if(r!==n.DEFAULT_AZTEC_LAYERS){if(g=r<0,(_=Math.abs(r))>(g?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Gt(ti.format("Illegal value %s for layers",r));var M=(C=n.totalBitsInLayer(_,g))-C%(D=n.WORD_SIZE[_]);if((O=n.stuffBits(i,D)).getSize()+o>M)throw new Gt("Data to large for user specified layer");if(g&&O.getSize()>64*D)throw new Gt("Data to large for user specified layer")}else{D=0,O=null;for(var B=0;;B++){if(B>n.MAX_NB_BITS)throw new Gt("Data too large for an Aztec code");if(!(l>(C=n.totalBitsInLayer(_=(g=B<=3)?B+1:B,g)))&&((null==O||D!==n.WORD_SIZE[_])&&(O=n.stuffBits(i,D=n.WORD_SIZE[_])),M=C-C%D,!(g&&O.getSize()>64*D)&&O.getSize()+o<=M))break}}var Ae,G=n.generateCheckWords(O,C,D),$=O.getSize()/D,ie=n.generateModeMessage(g,_,$),ce=(g?11:14)+4*_,fe=new Int32Array(ce);if(g)for(Ae=ce,B=0;B<fe.length;B++)fe[B]=B;else{Ae=ce+1+2*qn.truncDivision(qn.truncDivision(ce,2)-1,15);var De=qn.truncDivision(ce,2),nt=qn.truncDivision(Ae,2);for(B=0;B<De;B++){var ht=B+qn.truncDivision(B,15);fe[De-B-1]=nt-ht-1,fe[De+B]=nt+ht+1}}for(var xt=new _l(Ae),Yt=(B=0,0);B<_;B++){for(var nr=4*(_-B)+(g?9:12),cn=0;cn<nr;cn++)for(var po=2*cn,ar=0;ar<2;ar++)G.get(Yt+po+ar)&&xt.set(fe[2*B+ar],fe[2*B+cn]),G.get(Yt+2*nr+po+ar)&&xt.set(fe[2*B+cn],fe[ce-1-2*B-ar]),G.get(Yt+4*nr+po+ar)&&xt.set(fe[ce-1-2*B-ar],fe[ce-1-2*B-cn]),G.get(Yt+6*nr+po+ar)&&xt.set(fe[ce-1-2*B-cn],fe[2*B+ar]);Yt+=8*nr}if(n.drawModeMessage(xt,g,Ae,ie),g)n.drawBullsEye(xt,qn.truncDivision(Ae,2),5);else for(n.drawBullsEye(xt,qn.truncDivision(Ae,2),7),B=0,cn=0;B<qn.truncDivision(ce,2)-1;B+=15,cn+=16)for(ar=1&qn.truncDivision(Ae,2);ar<Ae;ar+=2)xt.set(qn.truncDivision(Ae,2)-cn,ar),xt.set(qn.truncDivision(Ae,2)+cn,ar),xt.set(ar,qn.truncDivision(Ae,2)-cn),xt.set(ar,qn.truncDivision(Ae,2)+cn);var ki=new XG;return ki.setCompact(g),ki.setSize(Ae),ki.setLayers(_),ki.setCodeWords($),ki.setMatrix(xt),ki},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new As;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var o=qn.truncDivision(r,2);if(t)for(var l=0;l<7;l++){var g=o-3+l;i.get(l)&&e.set(g,o-5),i.get(l+7)&&e.set(o+5,g),i.get(20-l)&&e.set(g,o+5),i.get(27-l)&&e.set(o-5,g)}else for(l=0;l<10;l++)g=o-5+l+qn.truncDivision(l,5),i.get(l)&&e.set(g,o-7),i.get(l+10)&&e.set(o+7,g),i.get(29-l)&&e.set(g,o+7),i.get(39-l)&&e.set(o-7,g)},n.generateCheckWords=function(e,t,r){var i,o,l=e.getSize()/r,g=new qk(n.getGF(r)),_=qn.truncDivision(t,r),C=n.bitsToWords(e,r,_);g.encode(C,_-l);var D=t%r,O=new As;O.appendBits(0,D);try{for(var M=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Array.from(C)),B=M.next();!B.done;B=M.next())O.appendBits(B.value,r)}catch($){i={error:$}}finally{try{B&&!B.done&&(o=M.return)&&o.call(M)}finally{if(i)throw i.error}}return O},n.bitsToWords=function(e,t,r){var o,l,i=new Int32Array(r);for(o=0,l=e.getSize()/t;o<l;o++){for(var g=0,_=0;_<t;_++)g|=e.get(o*t+_)?1<<t-_-1:0;i[o]=g}return i},n.getGF=function(e){switch(e){case 4:return Wu.AZTEC_PARAM;case 6:return Wu.AZTEC_DATA_6;case 8:return Wu.AZTEC_DATA_8;case 10:return Wu.AZTEC_DATA_10;case 12:return Wu.AZTEC_DATA_12;default:throw new Gt("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new As,i=e.getSize(),o=(1<<t)-2,l=0;l<i;l+=t){for(var g=0,_=0;_<t;_++)(l+_>=i||e.get(l+_))&&(g|=1<<t-1-_);(g&o)===o?(r.appendBits(g&o,t),l--):0==(g&o)?(r.appendBits(1|g,t),l--):r.appendBits(g,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n}();!function(){function n(){}n.prototype.encode=function(e,t,r,i){return this.encodeWithHints(e,t,r,i,null)},n.prototype.encodeWithHints=function(e,t,r,i,o){var l=KG.ISO_8859_1,g=P8.DEFAULT_EC_PERCENT,_=P8.DEFAULT_AZTEC_LAYERS;return null!=o&&(o.has(bs.CHARACTER_SET)&&(l=qG.forName(o.get(bs.CHARACTER_SET).toString())),o.has(bs.ERROR_CORRECTION)&&(g=qn.parseInt(o.get(bs.ERROR_CORRECTION).toString())),o.has(bs.AZTEC_LAYERS)&&(_=qn.parseInt(o.get(bs.AZTEC_LAYERS).toString()))),n.encodeLayers(e,t,r,i,l,g,_)},n.encodeLayers=function(e,t,r,i,o,l,g){if(t!==en.AZTEC)throw new Gt("Can only encode AZTEC, but got "+t);var _=P8.encode(ti.getBytes(e,o),l,g);return n.renderResult(_,r,i)},n.renderResult=function(e,t,r){var i=e.getMatrix();if(null==i)throw new F0;for(var o=i.getWidth(),l=i.getHeight(),g=Math.max(t,o),_=Math.max(r,l),C=Math.min(g/o,_/l),D=(g-o*C)/2,O=(_-l*C)/2,M=new _l(g,_),B=0,G=O;B<l;B++,G+=C)for(var $=0,ie=D;$<o;$++,ie+=C)i.get($,B)&&M.setRegion(ie,G,C,C);return M}}();var yW=J(205);class wW{constructor(e,t){this.count=e,this.source=t}call(e,t){return t.subscribe(new EW(e,this.count,this.source))}}class EW extends Ii.L{constructor(e,t,r){super(e),this.count=t,this.source=r}error(e){if(!this.isStopped){const{source:t,count:r}=this;if(0===r)return super.error(e);r>-1&&(this.count=r-1),t.subscribe(this._unsubscribeAndRecycle())}}}let eL=(()=>{class n{constructor(t){this.http=t}searchByISBN(t){return this.http.get("https://www.googleapis.com/books/v1/volumes?q=isbn:"+t+"&maxResults=1").pipe(function(n=-1){return e=>e.lift(new wW(n,e))}(1),tl(this.handleError))}handleError(t){let r="";return r=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,window.alert(r),(0,yW._)(r)}}return n.\u0275fac=function(t){return new(t||n)(A.LFG(Nd))},n.\u0275prov=A.Yz7({token:n,factory:n.\u0275fac}),n})();var U0=J(4762),M8=J(5429);const CW=["preview"];class AW extends M8.BrowserMultiFormatReader{getScannerControls(){if(!this.scannerControls)throw new Error("No scanning is running at the time.");return this.scannerControls}scanFromDeviceObservable(e,t){var r;return(0,U0.mG)(this,void 0,void 0,function*(){const i=new Zs({});let o;try{o=yield this.decodeFromVideoDevice(e,t,(l,g)=>{if(!g)return void i.next({result:l});const _=g.name;_===it.name||_===Cs.name||_===yt.name||g.message.includes("No MultiFormat Readers were able to detect the code.")?i.next({error:g}):(i.error(g),this.scannerControls.stop(),this.scannerControls=void 0)}),this.scannerControls=Object.assign(Object.assign({},o),{stop(){o.stop(),i.complete()}})}catch(l){i.error(l),null===(r=this.scannerControls)||void 0===r||r.stop(),this.scannerControls=void 0}return i.asObservable()})}}let IW=(()=>{class n{constructor(){this.timeBetweenScans=500,this.delayBetweenScanSuccess=500,this.previewFitMode="cover",this._ready=!1,this.autostarted=new A.vpe,this.autostarting=new A.vpe,this.torchCompatible=new A.vpe(!1),this.scanSuccess=new A.vpe,this.scanFailure=new A.vpe,this.scanError=new A.vpe,this.scanComplete=new A.vpe,this.camerasFound=new A.vpe,this.camerasNotFound=new A.vpe,this.permissionResponse=new A.vpe(!0),this.hasDevices=new A.vpe,this.deviceChange=new A.vpe,this._enabled=!0,this._hints=new Map,this.autofocusEnabled=!0,this.autostart=!0,this.formats=[en.QR_CODE],this.hasNavigator="undefined"!=typeof navigator,this.isMediaDevicesSupported=this.hasNavigator&&!!navigator.mediaDevices}get codeReader(){return this._codeReader}set device(t){this._ready?this.isAutostarting?console.warn("Avoid setting a device during auto-start."):this.isCurrentDevice(t)?console.warn("Setting the same device is not allowed."):this.hasPermission?this.setDevice(t):console.warn("Permissions not set yet, waiting for them to be set to apply device change."):this._devicePreStart=t}get device(){return this._device}get formats(){return this.hints.get(Wr.POSSIBLE_FORMATS)}set formats(t){if("string"==typeof t)throw new Error("Invalid formats, make sure the [formats] input is a binding.");const r=t.map(o=>this.getBarcodeFormatOrFail(o)),i=this.hints;i.set(Wr.POSSIBLE_FORMATS,r),this.hints=i}get hints(){return this._hints}set hints(t){var r;this._hints=t,null===(r=this.codeReader)||void 0===r||r.setHints(this._hints)}set videoConstraints(t){var r;const i=null===(r=this.codeReader)||void 0===r?void 0:r.getScannerControls();!i||null==i||i.streamVideoConstraintsApply(t)}set isAutostarting(t){this._isAutostarting=t,this.autostarting.next(t)}get isAutostarting(){return this._isAutostarting}set torch(t){try{this.getCodeReader().getScannerControls().switchTorch(t)}catch(r){}}set enable(t){this._enabled=Boolean(t),this._enabled?this.device?this.scanFromDevice(this.device.deviceId):this.init():this.reset()}get enabled(){return this._enabled}get tryHarder(){return this.hints.get(Wr.TRY_HARDER)}set tryHarder(t){const r=this.hints;t?r.set(Wr.TRY_HARDER,!0):r.delete(Wr.TRY_HARDER),this.hints=r}askForPermission(){return(0,U0.mG)(this,void 0,void 0,function*(){if(!this.hasNavigator)return console.error("@zxing/ngx-scanner","Can't ask permission, navigator is not present."),this.setPermission(null),this.hasPermission;if(!this.isMediaDevicesSupported)return console.error("@zxing/ngx-scanner","Can't get user media, this is not supported."),this.setPermission(null),this.hasPermission;let t,r;try{t=yield this.getAnyVideoDevice(),r=!!t}catch(i){return this.handlePermissionException(i)}finally{this.terminateStream(t)}return this.setPermission(r),r})}getAnyVideoDevice(){return navigator.mediaDevices.getUserMedia({video:!0})}terminateStream(t){t&&t.getTracks().forEach(r=>r.stop()),t=void 0}init(){return(0,U0.mG)(this,void 0,void 0,function*(){if(!this.autostart)return console.warn("Feature 'autostart' disabled. Permissions and devices recovery has to be run manually."),this.initAutostartOff(),void(this._ready=!0);yield this.initAutostartOn(),this._ready=!0})}initAutostartOff(){this.isAutostarting=!1,this.updateVideoInputDevices(),this._device&&this._devicePreStart&&this.setDevice(this._devicePreStart)}initAutostartOn(){return(0,U0.mG)(this,void 0,void 0,function*(){let t;this.isAutostarting=!0;try{t=yield this.askForPermission()}catch(r){return void console.error("Exception occurred while asking for permission:",r)}if(t){const r=yield this.updateVideoInputDevices();yield this.autostartScanner([...r])}this.isAutostarting=!1,this.autostarted.next()})}isCurrentDevice(t){var r;return(null==t?void 0:t.deviceId)===(null===(r=this._device)||void 0===r?void 0:r.deviceId)}ngOnDestroy(){this.reset()}ngOnInit(){this.init()}scanStop(){var t,r;this._scanSubscription&&(null===(t=this.codeReader)||void 0===t||t.getScannerControls().stop(),null===(r=this._scanSubscription)||void 0===r||r.unsubscribe(),this._scanSubscription=void 0),this.torchCompatible.next(!1)}scanStart(){if(this._scanSubscription)throw new Error("There is already a scan proccess running.");if(!this._device)throw new Error("No device defined, cannot start scan, please define a device.");this.scanFromDevice(this._device.deviceId)}restart(){this._codeReader=void 0;const t=this._reset();!t||(this.device=t)}updateVideoInputDevices(){return(0,U0.mG)(this,void 0,void 0,function*(){const t=(yield M8.BrowserCodeReader.listVideoInputDevices())||[],r=t&&t.length>0;return this.hasDevices.next(r),this.camerasFound.next([...t]),r||this.camerasNotFound.next(),t})}autostartScanner(t){return(0,U0.mG)(this,void 0,void 0,function*(){const i=t.find(({label:o})=>/back|tr\xe1s|rear|traseira|environment|ambiente/gi.test(o))||t.pop();if(!i)throw new Error("Impossible to autostart, no input devices available.");yield this.setDevice(i),this.deviceChange.next(i)})}dispatchScanSuccess(t){this.scanSuccess.next(t.getText())}dispatchScanFailure(t){this.scanFailure.next(t)}dispatchScanError(t){this.scanError.observers.some(r=>Boolean(r))||(console.error(`zxing scanner component: ${t.name}`,t),console.warn("Use the `(scanError)` property to handle errors like this!")),this.scanError.next(t)}dispatchScanComplete(t){this.scanComplete.next(t)}handlePermissionException(t){let r;switch(console.error("@zxing/ngx-scanner","Error when asking for permission.",t),t.name){case"NotSupportedError":console.warn("@zxing/ngx-scanner",t.message),r=null,this.hasDevices.next(null);break;case"NotAllowedError":console.warn("@zxing/ngx-scanner",t.message),r=!1,this.hasDevices.next(!0);break;case"NotFoundError":console.warn("@zxing/ngx-scanner",t.message),r=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;case"NotReadableError":console.warn("@zxing/ngx-scanner","Couldn't read the device(s)'s stream, it's probably in use by another app."),r=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;default:console.warn("@zxing/ngx-scanner","I was not able to define if I have permissions for camera or not.",t),r=null}return this.setPermission(r),this.permissionResponse.error(t),r}getBarcodeFormatOrFail(t){return"string"==typeof t?en[t.trim().toUpperCase()]:t}getCodeReader(){return this._codeReader||(this._codeReader=new AW(this.hints,{delayBetweenScanAttempts:this.timeBetweenScans,delayBetweenScanSuccess:this.delayBetweenScanSuccess})),this._codeReader}scanFromDevice(t){return(0,U0.mG)(this,void 0,void 0,function*(){const r=this.previewElemRef.nativeElement,i=this.getCodeReader(),o=yield i.scanFromDeviceObservable(t,r);if(!o)throw new Error("Undefined decoding stream, aborting.");if(this._scanSubscription=o.subscribe(O=>this._onDecodeResult(O.result,O.error),O=>this._onDecodeError(O),()=>{}),this._scanSubscription.closed)return;const D=void 0!==i.getScannerControls().switchTorch;this.torchCompatible.next(D)})}_onDecodeError(t){this.dispatchScanError(t)}_onDecodeResult(t,r){t?this.dispatchScanSuccess(t):this.dispatchScanFailure(r),this.dispatchScanComplete(t)}_reset(){if(!this._codeReader)return;const t=this._device;return this.device=void 0,this._codeReader=void 0,t}reset(){this._reset(),this.deviceChange.emit(null)}setDevice(t){return(0,U0.mG)(this,void 0,void 0,function*(){this.scanStop(),this._device=t||void 0,this._device||M8.BrowserCodeReader.cleanVideoSource(this.previewElemRef.nativeElement),this._enabled&&t&&(yield this.scanFromDevice(t.deviceId))})}setPermission(t){this.hasPermission=t,this.permissionResponse.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=A.Xpm({type:n,selectors:[["zxing-scanner"]],viewQuery:function(t,r){if(1&t&&A.Gf(CW,7),2&t){let i;A.iGM(i=A.CRH())&&(r.previewElemRef=i.first)}},inputs:{timeBetweenScans:"timeBetweenScans",delayBetweenScanSuccess:"delayBetweenScanSuccess",previewFitMode:"previewFitMode",autofocusEnabled:"autofocusEnabled",autostart:"autostart",formats:"formats",device:"device",videoConstraints:"videoConstraints",torch:"torch",enable:"enable",tryHarder:"tryHarder"},outputs:{autostarted:"autostarted",autostarting:"autostarting",torchCompatible:"torchCompatible",scanSuccess:"scanSuccess",scanFailure:"scanFailure",scanError:"scanError",scanComplete:"scanComplete",camerasFound:"camerasFound",camerasNotFound:"camerasNotFound",permissionResponse:"permissionResponse",hasDevices:"hasDevices",deviceChange:"deviceChange"},decls:6,vars:2,consts:[["preview",""]],template:function(t,r){1&t&&(A.TgZ(0,"video",null,0),A.TgZ(2,"p"),A._uU(3," Your browser does not support this feature, please try to upgrade it. "),A.qZA(),A.TgZ(4,"p"),A._uU(5," Seu navegador n\xe3o suporta este recurso, por favor tente atualiz\xe1-lo. "),A.qZA(),A.qZA()),2&t&&A.Udp("object-fit",r.previewFitMode)},styles:["[_nghost-%COMP%]{display:block}video[_ngcontent-%COMP%]{width:100%;height:auto;-o-object-fit:contain;object-fit:contain}"],changeDetection:0}),n})(),bW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=A.oAB({type:n}),n.\u0275inj=A.cJS({imports:[[Yu,tI]]}),n})();const SW=[{path:"auth/signup",component:iB},{path:"auth/signin",component:oB},{path:"books",canActivate:[R1],component:aB},{path:"books/new",canActivate:[R1],component:(()=>{class n{constructor(t,r,i,o){this.formBuilder=t,this.booksService=r,this.router=i,this.googleBookApiService=o,this.isbnPattern=/[0-9]{13}/,this.scanResult="",this.formatsEnabled=[en.EAN_13],this.timeBetweenScans=2e3,this.videoConstraints={width:{min:1920,ideal:1920},height:{min:1080,ideal:1080},aspectRatio:{ideal:1.7777777778}}}onCodeResult(t){this.scanResult=t,this.bookForm.get("isbn").setValue(t)}ngOnInit(){this.initForm()}initForm(){this.bookForm=this.formBuilder.group({title:["",wc.required],subtitle:"",author:["",wc.required],isbn:["",wc.pattern(this.isbnPattern)],synopsis:""}),this.bookForm.get("isbn").valueChanges.subscribe(t=>{String(t).match(this.isbnPattern)&&this.autofillBookForm(t)})}onSaveBook(){const t=this.bookForm.get("title").value,i=(this.bookForm.get("subtitle"),this.bookForm.get("author").value),o=this.bookForm.get("synopsis").value,l=new hk(t,i,this.booksService.books.entries.length);l.synopsis=o,this.booksService.createNewBook(l),this.router.navigate(["/books"])}autofillBookForm(t){this.googleBookApiService.searchByISBN(t).subscribe(r=>{var i;this.bookForm.get("author").setValue(r.items[0].volumeInfo.authors),this.bookForm.get("title").setValue(r.items[0].volumeInfo.title);let o=r.items[0].volumeInfo.description;o&&(null===(i=this.bookForm.get("synopsis"))||void 0===i||i.setValue(o))})}}return n.\u0275fac=function(t){return new(t||n)(A.Y36(Ka),A.Y36(a_),A.Y36(Ki),A.Y36(eL))},n.\u0275cmp=A.Xpm({type:n,selectors:[["app-book-form"]],decls:28,vars:6,consts:[[1,"row"],[1,"col-sm-8","col-sm-offset-2"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","title"],["type","text","id","title","formControlName","title",1,"form-control"],["for","author"],["type","text","id","author","formControlName","author",1,"form-control"],["for","synopsis"],["id","synopsis","formControlName","synopsis",1,"form-control"],["type","text","id","isbn","formControlName","isbn",1,"form-control",3,"value"],[3,"formats","delayBetweenScanSuccess","videoConstraints","scanSuccess"],["type","submit",1,"btn","btn-success",3,"disabled"]],template:function(t,r){1&t&&(A.TgZ(0,"div",0),A.TgZ(1,"div",1),A.TgZ(2,"h2"),A._uU(3,"Enregistrer un nouveau livre"),A.qZA(),A.TgZ(4,"form",2),A.NdJ("ngSubmit",function(){return r.onSaveBook()}),A.TgZ(5,"div",3),A.TgZ(6,"label",4),A._uU(7,"Titre"),A.qZA(),A._UZ(8,"input",5),A.qZA(),A.TgZ(9,"div",3),A.TgZ(10,"label",6),A._uU(11,"Auteur"),A.qZA(),A._UZ(12,"input",7),A.qZA(),A.TgZ(13,"div",3),A.TgZ(14,"label",8),A._uU(15,"Synopsis"),A.qZA(),A.TgZ(16,"textarea",9),A._uU(17,"          "),A.qZA(),A.qZA(),A.TgZ(18,"div",3),A.TgZ(19,"label",8),A._uU(20,"ISBN (a rentrer manuellement ou \xe0 scanner ci-dessous)"),A.qZA(),A._UZ(21,"input",10),A.qZA(),A.TgZ(22,"div",3),A.TgZ(23,"label",8),A._uU(24,"Scanner de code barre/ISBN"),A.qZA(),A.TgZ(25,"zxing-scanner",11),A.NdJ("scanSuccess",function(o){return r.onCodeResult(o)}),A.qZA(),A.qZA(),A.TgZ(26,"button",12),A._uU(27,"Enregistrer "),A.qZA(),A.qZA(),A.qZA(),A.qZA()),2&t&&(A.xp6(4),A.Q6J("formGroup",r.bookForm),A.xp6(17),A.s9C("value",r.scanResult),A.xp6(4),A.Q6J("formats",r.formatsEnabled)("delayBetweenScanSuccess",r.timeBetweenScans)("videoConstraints",r.videoConstraints),A.xp6(1),A.Q6J("disabled",r.bookForm.invalid))},directives:[bp,Ng,eh,$d,Rg,th,IW],styles:["[_nghost-%COMP%]   zxing-scanner[_ngcontent-%COMP%]  video{max-height:50vh;object-fit:contain}[_nghost-%COMP%]   zxing-scanner[_ngcontent-%COMP%] {border-style:solid;border-color:#5d78ff}"]}),n})()},{path:"books/view/:id",canActivate:[R1],component:uB},{path:"",redirectTo:"books",pathMatch:"full"},{path:"**",redirectTo:"books"}];let TW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=A.oAB({type:n}),n.\u0275inj=A.cJS({imports:[[Xm.forRoot(SW)],Xm]}),n})(),DW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=A.oAB({type:n,bootstrap:[mA]}),n.\u0275inj=A.cJS({providers:[Ud,a_,R1,eL],imports:[[If,tI,Cc,ja,jr.hO.initializeApp(fk_firebaseConfig),ug,rB,TW,bW]]}),n})();(0,A.G48)(),Va().bootstrapModule(DW).catch(n=>console.error(n))},4762:(Dt,tt,J)=>{"use strict";function Ue(de,Le){var Me={};for(var Oe in de)Object.prototype.hasOwnProperty.call(de,Oe)&&Le.indexOf(Oe)<0&&(Me[Oe]=de[Oe]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var dt=0;for(Oe=Object.getOwnPropertySymbols(de);dt<Oe.length;dt++)Le.indexOf(Oe[dt])<0&&Object.prototype.propertyIsEnumerable.call(de,Oe[dt])&&(Me[Oe[dt]]=de[Oe[dt]])}return Me}function xe(de,Le,Me,Oe){return new(Me||(Me=Promise))(function(je,Nt){function Pt(sn){try{kt(Oe.next(sn))}catch(Re){Nt(Re)}}function tn(sn){try{kt(Oe.throw(sn))}catch(Re){Nt(Re)}}function kt(sn){sn.done?je(sn.value):function(je){return je instanceof Me?je:new Me(function(Nt){Nt(je)})}(sn.value).then(Pt,tn)}kt((Oe=Oe.apply(de,Le||[])).next())})}function me(de,Le){var Oe,dt,je,Nt,Me={label:0,sent:function(){if(1&je[0])throw je[1];return je[1]},trys:[],ops:[]};return Nt={next:Pt(0),throw:Pt(1),return:Pt(2)},"function"==typeof Symbol&&(Nt[Symbol.iterator]=function(){return this}),Nt;function Pt(kt){return function(sn){return function(kt){if(Oe)throw new TypeError("Generator is already executing.");for(;Me;)try{if(Oe=1,dt&&(je=2&kt[0]?dt.return:kt[0]?dt.throw||((je=dt.return)&&je.call(dt),0):dt.next)&&!(je=je.call(dt,kt[1])).done)return je;switch(dt=0,je&&(kt=[2&kt[0],je.value]),kt[0]){case 0:case 1:je=kt;break;case 4:return Me.label++,{value:kt[1],done:!1};case 5:Me.label++,dt=kt[1],kt=[0];continue;case 7:kt=Me.ops.pop(),Me.trys.pop();continue;default:if(!(je=(je=Me.trys).length>0&&je[je.length-1])&&(6===kt[0]||2===kt[0])){Me=0;continue}if(3===kt[0]&&(!je||kt[1]>je[0]&&kt[1]<je[3])){Me.label=kt[1];break}if(6===kt[0]&&Me.label<je[1]){Me.label=je[1],je=kt;break}if(je&&Me.label<je[2]){Me.label=je[2],Me.ops.push(kt);break}je[2]&&Me.ops.pop(),Me.trys.pop();continue}kt=Le.call(de,Me)}catch(sn){kt=[6,sn],dt=0}finally{Oe=je=0}if(5&kt[0])throw kt[1];return{value:kt[0]?kt[1]:void 0,done:!0}}([kt,sn])}}}function re(de){var Le="function"==typeof Symbol&&Symbol.iterator,Me=Le&&de[Le],Oe=0;if(Me)return Me.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&Oe>=de.length&&(de=void 0),{value:de&&de[Oe++],done:!de}}};throw new TypeError(Le?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ee(de,Le){var Me="function"==typeof Symbol&&de[Symbol.iterator];if(!Me)return de;var dt,Nt,Oe=Me.call(de),je=[];try{for(;(void 0===Le||Le-- >0)&&!(dt=Oe.next()).done;)je.push(dt.value)}catch(Pt){Nt={error:Pt}}finally{try{dt&&!dt.done&&(Me=Oe.return)&&Me.call(Oe)}finally{if(Nt)throw Nt.error}}return je}function Pe(de,Le,Me){if(Me||2===arguments.length)for(var je,Oe=0,dt=Le.length;Oe<dt;Oe++)(je||!(Oe in Le))&&(je||(je=Array.prototype.slice.call(Le,0,Oe)),je[Oe]=Le[Oe]);return de.concat(je||Array.prototype.slice.call(Le))}J.d(tt,{_T:()=>Ue,mG:()=>xe,Jh:()=>me,XA:()=>re,CR:()=>Ee,ev:()=>Pe})},8239:(Dt,tt,J)=>{"use strict";function A(te,Ue,Te,pe,$e,xe,me){try{var q=te[xe](me),se=q.value}catch(re){return void Te(re)}q.done?Ue(se):Promise.resolve(se).then(pe,$e)}function Ie(te){return function(){var Ue=this,Te=arguments;return new Promise(function(pe,$e){var xe=te.apply(Ue,Te);function me(se){A(xe,pe,$e,me,q,"next",se)}function q(se){A(xe,pe,$e,me,q,"throw",se)}me(void 0)})}}J.d(tt,{Z:()=>Ie})}},Dt=>{Dt(Dt.s=8253)}]);